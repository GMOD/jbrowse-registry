//>>built
(function(h,j){var g,i=function(){},f=function(a){for(var b in a)return 0;return 1},e={}.toString,d=function(a){return"[object Function]"==e.call(a)},c=function(a){return"[object String]"==e.call(a)},b=function(a){return"[object Array]"==e.call(a)},a=function(a,b){if(a)for(var c=0;c<a.length;)b(a[c++])},k=function(a,b){for(var c in b)a[c]=b[c];return a},n=function(a,b){return k(Error(a),{src:"dojoLoader",info:b})},q=1,o=function(){return"_"+q++},l=function(a,b,c){return W(a,b,c,0,l)},m=this,r=m.document,
p=r&&r.createElement("DiV"),u=l.has=function(a){return d(s[a])?s[a]=s[a](m,r,p):s[a]},s=u.cache=j.hasCache;u.add=function(a,b,c,d){(void 0===s[a]||d)&&(s[a]=b);return c&&u(a)};for(var t in h.has)u.add(t,h.has[t],0,1);l.async=1;var v=new Function("return eval(arguments[0]);");l.eval=function(a,b){return v(a+"\r\n//# sourceURL="+b)};var w={},x=l.signal=function(c,d){var e=w[c];a(e&&e.slice(0),function(a){a.apply(null,b(d)?d:[d])})},E=l.on=function(a,b){var c=w[a]||(w[a]=[]);c.push(b);return{remove:function(){for(var a=
0;a<c.length;a++)if(c[a]===b){c.splice(a,1);break}}}},A=[],y={},D=[],F={},L=l.map={},I=[],B={},z="",C={},H={};t={};var M=function(a){var b,c,d,e;for(b in H)c=H[b],(d=b.match(/^url\:(.+)/))?C["url:"+wa(d[1],a)]=c:"*now"==b?e=c:"*noref"!=b&&(d=ea(b,a,!0),C[d.mid]=C["url:"+d.url]=c);e&&e(Z(a));H={}},K=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},P=function(a,b){b.splice(0,b.length);for(var c in a)b.push([c,a[c],RegExp("^"+K(c)+"(/|$)"),c.length]);b.sort(function(a,
b){return b[3]-a[3]});return b},U=function(a){var b=a.name;b||(b=a,a={name:b});a=k({main:"main"},a);a.location=a.location?a.location:b;if(a.packageMap)L[b]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);F[b]=a},J=[],G=function(b,d,e){for(var f in b){if("waitSeconds"==f)l.waitms=1E3*(b[f]||0);"cacheBust"==f&&(z=b[f]?c(b[f])?b[f]:(new Date).getTime()+"":"");if("baseUrl"==f||"combo"==f)l[f]=b[f];b[f]!==s&&(l.rawConfig[f]=b[f],"has"!=f&&u.add("config-"+f,b[f],0,d))}if(!l.baseUrl)l.baseUrl=
"./";/\/$/.test(l.baseUrl)||(l.baseUrl+="/");for(f in b.has)u.add(f,b.has[f],0,d);a(b.packages,U);for(var n in b.packagePaths)a(b.packagePaths[n],function(a){var b=n+"/"+a;c(a)&&(a={name:a});a.location=b;U(a)});P(k(L,b.map),I);a(I,function(a){a[1]=P(a[1],[]);if("*"==a[0])I.star=a});P(k(y,b.paths),D);a(b.aliases,function(a){c(a[0])&&(a[0]=RegExp("^"+K(a[0])+"$"));A.push(a)});if(d)J.push({config:b.config});else for(f in b.config)d=$(f,e),d.config=k(d.config||{},b.config[f]);if(b.cache)M(),H=b.cache,
b.cache["*noref"]&&M();x("config",[b,l.rawConfig])};u("dojo-cdn");var V=r.getElementsByTagName("script");g=0;for(var O,N,Q,S;g<V.length;)if(O=V[g++],(Q=O.getAttribute("src"))&&(S=Q.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))){N=S[3]||"";j.baseUrl=j.baseUrl||N;(Q=O.getAttribute("data-dojo-config")||O.getAttribute("djConfig"))&&(t=l.eval("({ "+Q+" })","data-dojo-config"));break}l.rawConfig={};G(j,1);if(u("dojo-cdn"))(F.dojo.location=N)&&(N+="/"),F.dijit.location=N+"../dijit/",F.dojox.location=N+"../dojox/";
G(h,1);G(t,1);var Y=function(b){la(function(){a(b.deps,xa)})},W=function(a,d,e,f,p){var m;if(c(a)){if((m=$(a,f,!0))&&m.executed)return m.result;throw n("undefinedModule",a);}b(a)||(G(a,0,f),a=d,d=e);if(b(a))if(a.length){for(var e="require*"+o(),q,g=[],v=0;v<a.length;)q=a[v++],g.push($(q,f));m=k(fa("",e,0,""),{injected:2,deps:g,def:d||i,require:f?f.require:l,gc:1});B[m.mid]=m;Y(m);var r=ca&&0!="sync";la(function(){ma(m,r)});m.executed||T.push(m);ga()}else d&&d();return p},Z=function(a){if(!a)return l;
var b=a.require;if(!b)b=function(c,d,e){return W(c,d,e,a,b)},a.require=k(b,l),b.module=a,b.toUrl=function(b){return wa(b,a)},b.toAbsMid=function(b){return na(b,a)};return b},T=[],X=[],R={},da=function(a){a.injected=1;R[a.mid]=1;a.url&&(R[a.url]=a.pack||1);ya()},aa=function(a){a.injected=2;delete R[a.mid];a.url&&delete R[a.url];f(R)&&ha()},ia=l.idle=function(){return!X.length&&f(R)&&!T.length&&!ca},oa=function(a,b){if(b)for(var c=0;c<b.length;c++)if(b[c][2].test(a))return b[c];return 0},za=function(a){for(var b=
[],c,d,a=a.replace(/\\/g,"/").split("/");a.length;)c=a.shift(),".."==c&&b.length&&".."!=d?(b.pop(),d=b[b.length-1]):"."!=c&&b.push(d=c);return b.join("/")},fa=function(a,b,c,d){return{pid:a,mid:b,pack:c,url:d,executed:0,def:0}},Aa=function(b,c,e,f,k,p,l,m){var q,i,o,g;g=/^\./.test(b);if(/(^\/)|(\:)|(\.js$)/.test(b)||g&&!c)return fa(0,b,0,b);b=za(g?c.mid+"/../"+b:b);if(/^\./.test(b))throw n("irrationalPath",b);c&&(o=oa(c.mid,p));(o=(o=o||p.star)&&oa(b,o[1]))&&(b=o[1]+b.substring(o[3]));c=(S=b.match(/^([^\/]+)(\/(.+))?$/))?
S[1]:"";(q=e[c])?b=c+"/"+(i=S[3]||q.main):c="";var v=0;a(A,function(a){var c=b.match(a[0]);c&&0<c.length&&(v=d(a[1])?b.replace(a[0],a[1]):a[1])});if(v)return Aa(v,0,e,f,k,p,l,m);if(e=f[b])return m?fa(e.pid,e.mid,e.pack,e.url):f[b];f=(o=oa(b,l))?o[1]+b.substring(o[3]):c?q.location+"/"+i:u("config-tlmSiblingOfDojo")?"../"+b:b;/(^\/)|(\:)/.test(f)||(f=k+f);return fa(c,b,q,za(f+".js"))},ea=function(a,b,c){return Aa(a,b,F,B,l.baseUrl,c?[]:I,c?[]:D)},Ba=function(a,b,c){return a.normalize?a.normalize(b,
function(a){return na(a,c)}):na(b,c)},Ca=0,$=function(a,b,c){var d,e;(d=a.match(/^(.+?)\!(.*)$/))?(e=$(d[1],b,c),5===e.executed&&!e.load&&pa(e),e.load?(d=Ba(e,d[2],b),a=e.mid+"!"+(e.dynamic?++Ca+"!":"")+d):(d=d[2],a=e.mid+"!"+ ++Ca+"!waitingForPlugin"),a={plugin:e,mid:a,req:Z(b),prid:d}):a=ea(a,b);return B[a.mid]||!c&&(B[a.mid]=a)},na=l.toAbsMid=function(a,b){return ea(a,b).mid},wa=l.toUrl=function(a,b){var c=ea(a+"/x",b),d=c.url;return Da(0===c.pid?a:d.substring(0,d.length-5))},Ea={injected:2,executed:5,
def:3,result:3};N=function(a){return B[a]=k({mid:a},Ea)};var Ha=N("require"),Ia=N("exports"),Ja=N("module"),ja={},qa=0,pa=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Ka=function(b){var c={};a(b.loadQ,function(a){var d=Ba(b,a.prid,a.req.module),e=b.dynamic?a.mid.replace(/waitingForPlugin$/,d):b.mid+"!"+d,d=k(k({},a),{mid:e,prid:d,injected:0});B[e]||Fa(B[e]=d);c[a.mid]=B[e];aa(a);delete B[a.mid]});b.loadQ=0;var d=function(a){for(var b=a.deps||[],d=
0;d<b.length;d++)(a=c[b[d].mid])&&(b[d]=a)},e;for(e in B)d(B[e]);a(T,d)},ra=function(a){l.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=qa++;a.loadQ&&(pa(a),Ka(a));for(g=0;g<T.length;)T[g]===a?T.splice(g,1):g++;/^require\*/.test(a.mid)&&delete B[a.mid]},La=[],ma=function(a,b){if(4===a.executed)return l.trace("loader-circular-dependency",[La.concat(a.mid).join("->")]),!a.def||b?ja:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return ja;var c=a.mid,e=a.deps||[],f,k=[],p=0;for(a.executed=
4;p<e.length;){f=e[p++];f=f===Ha?Z(a):f===Ia?a.cjs.exports:f===Ja?a.cjs:ma(f,b);if(f===ja)return a.executed=0,l.trace("loader-exec-module",["abort",c]),ja;k.push(f)}l.trace("loader-run-factory",[a.mid]);var c=a.def,m;if(u("config-dojo-loader-catches"))try{m=d(c)?c.apply(null,k):c}catch(q){x("error",a.result=n("factoryThrew",[a,q]))}else m=d(c)?c.apply(null,k):c;a.result=void 0===m&&a.cjs?a.cjs.exports:m;ra(a)}return a.result},ca=0,la=function(a){try{ca++,a()}finally{ca--}ia()&&x("idle",[])},ga=function(){ca||
la(function(){for(var a,b,c=0;c<T.length;)a=qa,b=T[c],ma(b),a!=qa?c=0:c++})};void 0===u("dojo-loader-eval-hint-url")&&u.add("dojo-loader-eval-hint-url",1);var Da=function(a){a+="";return a+(z?(/\?/.test(a)?"&":"?")+z:"")},Fa=function(a){var b=a.plugin;5===b.executed&&!b.load&&pa(b);var c=function(b){a.result=b;aa(a);ra(a);ga()};b.load?b.load(a.prid,a.req,c):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],T.unshift(b),xa(b))},ba=0,sa=0,ta=0,Ma=function(a,b){u("config-stripStrict")&&(a=a.replace(/"use strict"/g,
""));ta=1;if(u("config-dojo-loader-catches"))try{a===ba?ba.call(null):l.eval(a,u("dojo-loader-eval-hint-url")?b.url:b.mid)}catch(c){x("error",n("evalModuleThrew",b))}else a===ba?ba.call(null):l.eval(a,u("dojo-loader-eval-hint-url")?b.url:b.mid);ta=0},xa=function(a){var b=a.mid,c=a.url;if(!a.executed&&!a.injected&&!(R[b]||a.url&&(a.pack&&R[a.url]===a.pack||1==R[a.url])))if(da(a),a.plugin)Fa(a);else{var d=function(){Na(a);2!==a.injected&&(aa(a),k(a,Ea),l.trace("loader-define-nonmodule",[a.url]));ga()};
(ba=C[b]||C["url:"+a.url])?(l.trace("loader-inject",["cache",a.mid,c]),Ma(ba,a),d()):(l.trace("loader-inject",["script",a.mid,c]),sa=a,l.injectUrl(Da(c),d,a),sa=0)}},ua=function(a,b,c){l.trace("loader-define-module",[a.mid,b]);if(2===a.injected)return x("error",n("multipleDefine",a)),a;k(a,{deps:b,def:c,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var e=0;e<b.length;e++)b[e]=$(b[e],a);aa(a);if(!d(c)&&!b.length)a.result=
c,ra(a);return a},Na=function(b,c){for(var d=[],e,f;X.length;)f=X.shift(),c&&(f[0]=c.shift()),e=f[0]&&$(f[0])||b,d.push([e,f[1],f[2]]);M(b);a(d,function(a){Y(ua.apply(null,a))})},ka=0,ha=i,ya=i;ha=function(){ka&&clearTimeout(ka);ka=0};ya=function(){ha();l.waitms&&(ka=window.setTimeout(function(){ha();x("error",n("timeout",R))},l.waitms))};u.add("ie-event-behavior",!!r.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var va=function(a,b,c,d){if(u("ie-event-behavior"))return a.attachEvent(c,
d),function(){a.detachEvent(c,d)};a.addEventListener(b,d,!1);return function(){a.removeEventListener(b,d,!1)}},Oa=va(window,"load","onload",function(){l.pageLoaded=1;"complete"!=r.readyState&&(r.readyState="complete");Oa()}),Ga=r.getElementsByTagName("script")[0],Pa=Ga.parentNode;l.injectUrl=function(a,b,c){var c=c.node=r.createElement("script"),d=va(c,"load","onreadystatechange",function(a){var a=a||window.event,c=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(c.readyState))d(),
e(),b&&b()}),e=va(c,"error","onerror",function(b){d();e();x("error",n("scriptError",[a,b]))});c.type="text/javascript";c.charset="utf-8";c.src=a;Pa.insertBefore(c,Ga);return c};l.log=i;l.trace=i;N=function(a,b,e){var f=arguments.length,k=["require","exports","module"],p=[0,a,b];1==f?p=[0,d(a)?k:[],a]:2==f&&c(a)?p=[a,d(b)?k:[],b]:3==f&&(p=[a,b,e]);l.trace("loader-define",p.slice(0,2));if((f=p[0]&&$(p[0]))&&!R[f.mid])Y(ua(f,p[1],p[2]));else if(!u("ie-event-behavior")||ta)X.push(p);else{f=f||sa;if(!f)for(a in R)if((k=
B[a])&&k.node&&"interactive"===k.node.readyState){f=k;break}f?(M(f),Y(ua(f,p[1],p[2]))):x("error",n("ieDefineFailed",p[0]));ga()}};N.amd={vendor:"dojotoolkit.org"};k(k(l,j.loaderPatch),h.loaderPatch);E("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(c){}});k(l,{uid:o,cache:C,packs:F});if(!m.define)m.define=N,m.require=l,a(J,function(a){G(a)}),E=t.deps||h.deps||j.deps,t=t.callback||h.callback||j.callback,l.boot=E||t?[E||[],t]:0})(this.dojoConfig||this.djConfig||
this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../../../src/dbind",name:"dbind"},{location:"../../../src/dgrid",main:"OnDemandGrid",name:"dgrid"},{location:".",name:"dojo"},{location:"../../../src/dijit",name:"dijit"},{location:"../../../src/dojox",name:"dojox"},{location:"../../../src/json-schema",main:"lib/validate.js",name:"json-schema"},{location:"../../../src/jszlib",name:"jszlib"},
{location:"../../../src/lazyload",main:"lazyload",name:"lazyload"},{location:"../../../src/xstyle",main:"css",name:"xstyle"},{location:"../../../src/put-selector",main:"put",name:"put-selector"},{location:"../../../src/jDataView",main:"jdataview",name:"jDataView"},{location:"../../../src/FileSaver",name:"FileSaver"},{location:"../../../src/JBrowse",name:"JBrowse"}]});
require({cache:{"JBrowse/main":function(){require("JBrowse/Browser,JBrowse/ConfigAdaptor/JB_json_v1,JBrowse/View/TrackList/Hierarchical,JBrowse/Store/Sequence/StaticChunked,JBrowse/Store/SeqFeature/NCList,JBrowse/Store/TiledImage/Fixed,JBrowse/Store/Names/Hash,JBrowse/Store/Names/REST,JBrowse/View/Track/Sequence,JBrowse/View/Track/HTMLFeatures,JBrowse/View/Track/FixedImage/Wiggle,JBrowse/View/Track/Wiggle,JBrowse/View/Track/Wiggle/XYPlot,JBrowse/View/Track/Wiggle/Density,JBrowse/View/Track/Alignments,JBrowse/View/Track/Alignments2,JBrowse/View/Track/FeatureCoverage,JBrowse/View/Track/SNPCoverage,JBrowse/Store/TrackMetaData,xstyle/load-css,dojox/gfx/svg".split(","))},"JBrowse/Browser":function(){var h=
h||[];define("dojo/_base/declare,dojo/_base/lang,dojo/on,dojo/html,dojo/query,dojo/dom-construct,dojo/keys,dojo/Deferred,dojo/DeferredList,dojo/topic,dojo/aspect,dojo/request,JBrowse/has,dojo/_base/array,dijit/layout/ContentPane,dijit/layout/BorderContainer,dijit/Dialog,dijit/form/ComboBox,dijit/form/Button,dijit/form/Select,dijit/form/ToggleButton,dijit/form/DropDownButton,dijit/DropDownMenu,dijit/CheckedMenuItem,dijit/MenuItem,dijit/MenuSeparator,dojox/form/TriStateCheckBox,JBrowse/Util,JBrowse/Store/LazyTrie,JBrowse/Store/Names/LazyTrieDojoData,dojo/store/DataStore,JBrowse/FeatureFiltererMixin,JBrowse/GenomeView,JBrowse/TouchScreenSupport,JBrowse/ConfigManager,JBrowse/View/InfoDialog,JBrowse/View/FileDialog,JBrowse/View/FastaFileDialog,JBrowse/Store/SeqFeature/IndexedFasta,JBrowse/Store/SeqFeature/UnindexedFasta,JBrowse/Model/Location,JBrowse/View/LocationChoiceDialog,JBrowse/View/Dialog/SetHighlight,JBrowse/View/Dialog/Preferences,JBrowse/View/Dialog/OpenDirectory,JBrowse/View/Dialog/SetTrackHeight,JBrowse/View/Dialog/QuickHelp,JBrowse/View/StandaloneDatasetList,dijit/focus,lazyload,dojo/domReady!".split(","),
function(j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r,p,u,s,t,v,w,x,E,A,y,D,F,L,I,B,z,C,H,M,K,P,U,J,G,V,O,N,Q,S,Y,W,Z,T,X){var R=F.dojof;return j(z,{constructor:function(a){this.globalKeyboardShortcuts={};this.config=a||{};if(!this.config.unitTestMode){this.startTime=new Date;var b=this;dojo.addOnLoad(function(){b.loadConfig().then(function(){b.container=dojo.byId(b.config.containerID);b.container.onselectstart=function(){return!1};b.config.initialHighlight&&"/"!=b.config.initialHighlight&&b.setHighlight(new V(b.config.initialHighlight));
b.loadNames();b.initPlugins().then(function(){b.loadUserCSS().then(function(){b.initTrackMetadata();b.loadRefSeqs().then(function(){var a=b._initialLocation(),c=F.parseLocString(a);if(c&&c.ref&&b.allRefs[c.ref])b.refSeq=b.allRefs[c.ref];b.initView().then(function(){H.loadTouch();a&&b.navigateTo(a);var c=[];b.config.alwaysOnTracks&&(c=c.concat(b.config.alwaysOnTracks.split(",")));b.config.forceTracks?c=c.concat(b.config.forceTracks.split(",")):b.cookie("tracks")?c=c.concat(b.cookie("tracks").split(",")):
b.config.defaultTracks&&(c=c.concat(b.config.defaultTracks.split(",")));0==c.length&&c.push("DNA");c=F.uniq(c);b.showTracks(c);b.passMilestone("completely initialized",{success:!0})});b.reportUsageStats()})})})})})}},_initialLocation:function(){var a=dojo.fromJson(this.cookie("location"))||{};return this.config.location?this.config.location:a[this.refSeq.name]?a[this.refSeq.name].l||a[this.refSeq.name]:this.config.defaultLocation?this.config.defaultLocation:F.assembleLocString({ref:this.refSeq.name,
start:0.4*(this.refSeq.start+this.refSeq.end),end:0.6*(this.refSeq.start+this.refSeq.end)})},version:function(){return"1.12.1"}.call(),getPlugin:function(a,b){this.afterMilestone("initPlugins",dojo.hitch(this,function(){b(this.plugins[a])}))},_corePlugins:function(){return[]},initPlugins:function(){return this._milestoneFunction("initPlugins",function(c){this.plugins={};var d=this.config.plugins||this.config.Plugins||{};!g.isArray(d)&&!d.name&&(d=function(){var a=[],b;for(b in d){if(!("name"in
d[b]))d[b].name=b;a.push(d[b])}return a}.call(this));g.isArray(d)||(d=[d]);d.unshift.apply(d,this._corePlugins());if(d=l.map(d,function(a){return"object"==typeof a?a:{name:a}})){l.forEach(d,function(a){if(!("location"in a))a.location="plugins/"+a.name;var b=this.resolveUrl(a.location);if(!("js"in a))a.js=a.location+"/js";if("/"!=a.js.charAt(0)&&!/^https?:/i.test(a.js))a.js="../"+a.js;if(!("css"in a))a.css=b+"/css"},this);var e=l.map(d,function(){return new b});(new a(e)).then(function(){c.resolve({success:!0})});
require({packages:l.map(d,function(a){return{name:a.name,location:a.js}},this)},l.map(d,function(a){return a.name}),dojo.hitch(this,function(){l.forEach(arguments,function(a,b){var c=d[b],f=e[b];if("string"==typeof a)console.error("could not load plugin "+c.name+": "+a);else{var k=dojo.mixin(dojo.clone(d[b]),{config:this.config[c.name]||{}});k.browser=this;var k=dojo.mixin(k,{browser:this}),n=this._loadCSS({url:c.css+"/main.css"});n.then(function(){f.resolve({success:!0})});k.cssLoaded=n;this.plugins[c.name]=
new a(k)}},this)}))}else c.resolve({success:!0})})},resolveUrl:function(a){var b=this.config.browserRoot||"";b&&"/"!=b.charAt(b.length-1)&&(b+="/");return F.resolveUrl(b,a)},welcomeScreen:function(a,b){var c=this;require(["dojo/text!JBrowse/View/Resource/Welcome.html"],function(d){a.innerHTML=d;dojo.create("div",{style:{overflow:"hidden"}},c.container);dojo.byId("welcome").innerHTML="Your JBrowse is "+(F.isElectron()?"running in Desktop mode":"on the web")+". To get started with <i>JBrowse-"+c.version+
"</i>, select a sequence file";i(dojo.byId("newOpen"),"click",dojo.hitch(c,"openFastaElectron"));i(dojo.byId("newOpenDirectory"),"click",function(){(new S({browser:c,setCallback:dojo.hitch(c,"openDirectoryElectron")})).show()});try{c.loadSessions()}catch(e){}b&&(d=dojo.byId("fatal_error_list"),dojo.create("div",{className:"error",innerHTML:b},d));q("sample_data/json/volvox/successfully_run").then(function(){try{document.getElementById("volvox_data_placeholder").innerHTML='The example dataset is also available. View <a href="?data=sample_data/json/volvox">Volvox test data here</a>.'}catch(a){}})})},
fatalError:function(a){function b(a){a&&(console.error(a.stack||""+a),a+="",/\.$/.exec(a)||(a+="."));return a}if(this.renderedFatalErrors){var c=dojo.byId("fatal_error_list")||document.body;dojo.create("div",{className:"error",innerHTML:b(a)+""},c)}else if(/^Could not load reference sequence/.test(a)&&this.config.datasets&&!this.config.datasets._DEFAULT_EXAMPLES)(new Z({datasets:this.config.datasets})).placeAt(this.container);else{var d=this.container||document.body;dojo.addClass(document.body,this.config.theme||
"tundra");F.isElectron()?this.welcomeScreen(d,b(a)):require(["dojo/text!JBrowse/View/Resource/Welcome_old.html"],function(c){d.innerHTML=c;a&&(c=dojo.byId("fatal_error_list"),dojo.create("div",{className:"error",innerHTML:b(a)+""},c));q("sample_data/json/volvox/successfully_run").then(function(){try{dojo.byId("volvox_data_placeholder").innerHTML='However, it appears you have successfully run <code>./setup.sh</code>, so you can see the <a href="?data=sample_data/json/volvox">Volvox test data here</a>.'}catch(a){}})});
this.renderedFatalErrors=!0}},loadSessions:function(){var a=electronRequire("fs"),b=electronRequire("remote").require("app").getPath("userData")+"/sessions.json",c=JSON.parse(a.readFileSync(b,"utf8")),d=dojo.create("table",{style:{overflow:"hidden",width:"90%"}},dojo.byId("previousSessions")),e=this;if(!c.length){var f=dojo.create("tr",{},d);dojo.create("div",{innerHTML:"<ul><li>No sessions yet!</li></ul>"},f)}l.forEach(c,function(f){var k=dojo.create("tr",{},d),n=window.location.href.split("?")[0]+
"?data="+F.replacePath(f.session);dojo.create("td",{"class":"dijitIconDelete",onclick:function(){if(confirm("This will simply delete your session from the list, it won't remove any data files. Are you sure you want to continue?")){dojo.empty(d);var k=c.indexOf(f);-1!=k&&c.splice(k,1);a.writeFileSync(b,JSON.stringify(c,null,2),"utf8");e.loadSessions()}}},k);dojo.create("td",{innerHTML:'<a href="'+n+'">'+f.session+"</a>"},k)})},loadRefSeqs:function(){var a=this;return this._milestoneFunction("loadRefSeqs",
function(b){if("string"==typeof this.config.refSeqs)this.config.refSeqs={url:this.config.refSeqs};this.config.refSeqs.url&&this.config.refSeqs.url.match(/.fai$/)?(new J({browser:this,faiUrlTemplate:this.config.refSeqs.url})).getRefSeqs(function(c){a.addRefseqs(c);b.resolve({success:!0})}):"data"in this.config.refSeqs?(this.addRefseqs(this.config.refSeqs.data),b.resolve({success:!0})):q(this.config.refSeqs.url,{handleAs:"text"}).then(function(c){a.addRefseqs(dojo.fromJson(c));b.resolve({success:!0})},
function(a){b.reject("Could not load reference sequence definitions. "+a)})})},loadUserCSS:function(){return this._milestoneFunction("loadUserCSS",function(b){if(this.config.css&&!g.isArray(this.config.css))this.config.css=[this.config.css];var c=this.config.css||[];if(c.length){var d=this,c=l.map(c,function(a){return d._loadCSS(a)});(new a(c)).then(function(){b.resolve({success:!0})})}else b.resolve({success:!0})})},_loadCSS:function(a){var c=new b;"string"==typeof a&&(-1<a.indexOf("{")?(dojo.create("style",
{"data-from":"JBrowse Config",type:"text/css",innerHTML:a},document.head),c.resolve(!0)):a={url:a});"object"==typeof a&&X.css(a.url,function(){c.resolve(!0)});return c},loadNames:function(){return this._milestoneFunction("loadNames",function(a){var b=dojo.mixin(dojo.clone(this.config.names||{}),this.config.autocomplete||{});if(!b.url)b.url=this.config.nameUrl||"data/names/";if(b.baseUrl)b.url=F.resolveUrl(b.baseUrl,b.url);var c;if(c=b.type){var d=this;-1==c.indexOf("/")&&(c="JBrowse/Store/Names/"+
c);require([c],function(c){d.nameStore=new c(dojo.mixin({browser:d},b));a.resolve({success:!0})})}else this.nameStore=new B({store:new I({browser:this,namesTrie:new L(b.url,"lazy-{Chunk}.json"),stopPrefixes:b.stopPrefixes,resultLimit:b.resultLimit||15,tooManyMatchesMessage:b.tooManyMatchesMessage})}),a.resolve({success:!0})})},compareReferenceNames:function(a,b){return this.regularizeReferenceName(a).localeCompare(this.regularizeReferenceName(b))},regularizeLocation:function(a){var b=this.findReferenceSequence(a.ref||
a.objectName);if(b)a.ref=b.name;return a},regularizeReferenceName:function(a){return this.config.exactReferenceSequenceNames?a:a=a.toLowerCase().replace(/^chro?m?(osome)?/,"chr").replace(/^co?n?ti?g/,"ctg").replace(/^scaff?o?l?d?/,"scaffold").replace(/^([a-z]*)0+/,"$1").replace(/^(\d+)$/,"chr$1")},initView:function(){var a=this;return this._milestoneFunction("initView",function(b){function c(){(new W(g.mixin(a.config.quickHelp||{},{browser:a}))).show()}function d(){var b=a.makeCurrentViewURL();a.config.updateBrowserURL&&
window.history&&window.history.replaceState&&window.history.replaceState({},"",b);document.title=a.browserMeta().title+" "+a.view.visibleRegionLocString()}dojo.addClass(this.container,"jbrowse");dojo.addClass(document.body,this.config.theme||"tundra");var e=dojo.create("div",{style:{overflow:"hidden"}},this.container),f=this.browserMeta(),k=new K({title:"About "+f.title,content:f.description,className:"about-dialog"}),f=dojo.create("div",{className:this.config.show_nav?"menuBar":"topLink"});a.menuBar=
f;this.config.show_menu&&(this.config.show_nav?e:this.container).appendChild(f);var n=dojo.create("div",{className:"overview",id:"overview"},e);this.overviewDiv=n;if(!this.config.show_overview)n.style.cssText="display: none";F.isElectron()&&!this.config.hideGenomeOptions?(this.addGlobalMenuItem(this.config.classicMenu?"file":"dataset",new A({id:"menubar_dataset_file",label:"Open sequence file",iconClass:"dijitIconFolderOpen",onClick:dojo.hitch(this,"openFastaElectron")})),this.addGlobalMenuItem(this.config.classicMenu?
"file":"dataset",new A({id:"menubar_dataset_directory",label:"Open data directory",iconClass:"dijitIconFolderOpen",onClick:function(){(new S({browser:a,setCallback:dojo.hitch(a,"openDirectoryElectron")})).show()}})),this.addGlobalMenuItem(this.config.classicMenu?"file":"dataset",new A({id:"menubar_dataset_conf",label:"Open plugin",iconClass:"dijitIconConfigure",onClick:function(){(new Q({browser:a,setCallback:dojo.hitch(a,"openConfig")})).show()}})),this.addGlobalMenuItem(this.config.classicMenu?
"file":"dataset",new A({id:"menubar_dataset_save",label:"Save session",iconClass:"dijitIconSave",onClick:dojo.hitch(this,"saveData")}))):this.config.hideGenomeOptions||this.addGlobalMenuItem(this.config.classicMenu?"file":"dataset",new A({id:"menubar_dataset_open",label:"Open sequence file",iconClass:"dijitIconFolderOpen",onClick:dojo.hitch(this,"openFasta")}));if(this.config.show_nav)this.navbox=this.createNavBox(e),this.config.classicMenu?(this.config.datasets&&!this.config.dataset_id&&console.warn("In JBrowse configuration, datasets specified, but dataset_id not set.  Dataset selector will not be shown."),
this.config.datasets&&this.config.dataset_id?this.renderDatasetSelect(f):(this.poweredByLink=dojo.create("a",{className:"powered_by",innerHTML:this.browserMeta().title,title:"powered by JBrowse"},f),a.poweredBy_clickHandle=dojo.connect(this.poweredByLink,"onclick",dojo.hitch(k,"show")))):this.renderDatasetSelect(f),this.addGlobalMenuItem("file",new A({id:"menubar_fileopen",label:"Open track file or URL",iconClass:"dijitIconFolderOpen",onClick:dojo.hitch(this,"openFileDialog")})),this.addGlobalMenuItem("file",
new y),this.fileDialog=new P({browser:this}),this.addGlobalMenuItem("file",new A({id:"menubar_combotrack",label:"Add combination track",iconClass:"dijitIconSample",onClick:dojo.hitch(this,"createCombinationTrack")})),this.renderGlobalMenu("file",{text:this.config.classicMenu?"File":"Track"},f),this.addGlobalMenuItem("view",new A({id:"menubar_sethighlight",label:"Set highlight",iconClass:"dijitIconFilter",onClick:function(){(new N({browser:a,setCallback:dojo.hitch(a,"setHighlightAndRedraw")})).show()}})),
this._highlightClearButton=new A({id:"menubar_clearhighlight",label:"Clear highlight",iconClass:"dijitIconFilter",onClick:dojo.hitch(this,function(){var a=this.getHighlight();a&&(this.clearHighlight(),this.view.redrawRegion(a))})}),this._updateHighlightClearButton(),this.subscribe("/jbrowse/v1/n/globalHighlightChanged",dojo.hitch(this,"_updateHighlightClearButton")),this.addGlobalMenuItem("view",this._highlightClearButton),this.addGlobalMenuItem("view",new A({label:"Resize quant. tracks",id:"menubar_settrackheight",
title:"Set all visible quantitative tracks to a new height",iconClass:"jbrowseIconVerticalResize",onClick:function(){(new Y({setCallback:function(b){var c=a.view.visibleTracks();l.forEach(c,function(a){if(/\b(XYPlot|Density)/.test(a.config.type))a.trackHeightChanged=!0,a.updateUserStyles({height:b})})}})).show()}})),this.renderGlobalMenu("view",{text:"View"},f),this.renderGlobalMenu("options",{text:"Options",title:"configure JBrowse"},f);this.config.show_nav&&(this.addGlobalMenuItem("help",new A({id:"menubar_about",
label:"About",onClick:dojo.hitch(k,"show")})),this.setGlobalKeyboardShortcut("?",c),this.addGlobalMenuItem("help",new A({id:"menubar_generalhelp",label:"General",iconClass:"jbrowseIconHelp",onClick:c})),this.renderGlobalMenu("help",{},f));this.config.show_nav&&this.config.show_tracklist&&this.config.show_overview?(k=this.makeShareLink())&&f.appendChild(k):f.appendChild(this.makeFullViewLink());this.viewElem=document.createElement("div");this.viewElem.className="dragWindow";this.container.appendChild(this.viewElem);
this.containerWidget=new r({liveSplitters:!1,design:"sidebar",gutters:!1},this.container);new m({region:"top"},e);this.view=this.viewElem.view=new C({browser:this,elem:this.viewElem,config:this.config.view,stripeWidth:250,refSeq:this.refSeq,zoomLevel:0.005});dojo.connect(this.view,"onFineMove",this,"onFineMove");dojo.connect(this.view,"onCoarseMove",this,"onCoarseMove");this.browserWidget=new m({region:"center"},this.viewElem);dojo.connect(this.browserWidget,"resize",this,"onResize");dojo.connect(this.browserWidget,
"resize",this.view,"onResize");dojo.connect(this,"onCoarseMove",d);this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",d);this.subscribe("/jbrowse/v1/n/globalHighlightChanged",d);this.afterMilestone("loadRefSeqs",dojo.hitch(this,function(){this.afterMilestone("initTrackMetadata",dojo.hitch(this,function(){this.createTrackList().then(dojo.hitch(this,function(){this.containerWidget.startup();this.onResize();i(document.body,"keypress",dojo.hitch(this,"globalKeyHandler"));this._initEventRouting();b.resolve({success:!0})}))}))}))})},
createCombinationTrack:function(){if(void 0===this._combinationTrackCount)this._combinationTrackCount=0;var a=new b,c={browser:this,refSeq:this.refSeq,type:"JBrowse/Store/SeqFeature/Combination"},d=this.addStoreConfig(void 0,c);c.name=d;this.getStore(d,function(){a.resolve(!0)});var e=this;a.promise.then(function(){var a={type:"JBrowse/View/Track/Combination",label:"combination_track"+e._combinationTrackCount++,key:"Combination Track "+e._combinationTrackCount,metadata:{Description:"Drag-and-drop interface that creates a track out of combinations of other tracks."},
store:d};e.publish("/jbrowse/v1/v/tracks/new",[a]);e.publish("/jbrowse/v1/v/tracks/show",[a])})},renderDatasetSelect:function(a){if(this.config.classicMenu){var b=this.config.datasets||{},c=[],d;for(d in b)/^_/.test(d)||c.push(dojo.mixin({id:d},b[d]));(new t({name:"dataset",className:"dataset_select",value:this.config.dataset_id,options:l.map(c,function(a){return{label:a.name,value:a.id}}),onChange:dojo.hitch(this,function(a){if(a=(this.config.datasets||{})[a])window.location=a.url;return!1})})).placeAt(a)}else{if(this.config.datasets&&
this.config.dataset_id)for(d in this.addGlobalMenuItem("dataset",new y),this.config.datasets)/^_/.test(d)||(b=this.config.datasets[d],this.addGlobalMenuItem("dataset",new A({id:"menubar_dataset_bookmark_"+d,label:d==this.config.dataset_id?"<b>"+b.name+"</b>":b.name,iconClass:"dijitIconBookmark",onClick:dojo.hitch(b,function(){window.location=this.url})})));this.renderGlobalMenu("dataset",{text:"Genome"},a)}},saveSessionDir:function(a){var b=electronRequire("remote"),c=electronRequire("fs"),b=b.require("app").getPath("userData")+
"/sessions.json",d=[];try{d=JSON.parse(c.readFileSync(b,"utf8"))}catch(e){}var f=F.replacePath(a);l.every(d,function(a){return a.session!=f})&&d.push({session:f});c.writeFileSync(b,JSON.stringify(d,null,2),"utf8")},openDirectoryElectron:function(a){this.saveSessionDir(a);window.location="?data="+F.replacePath(a)},openConfig:function(a){if(confirm("If you have opened any new tracks, please save them before continuing. Are you sure you want to continue?")){electronRequire("remote");var b=electronRequire("fs"),
c=this.config.dataRoot,d=JSON.parse(b.readFileSync(c+"/trackList.json","utf8"));d.plugins=d.plugins||{};l.forEach(a,function(a){var b=a.match(/\/(\w+)$/)[1];d.plugins[b]={location:a}});b.writeFileSync(c+"/trackList.json",JSON.stringify(d,null,2));window.location.reload()}},saveData:function(){if(confirm("This will overwrite tracks and config data in your data directory. Are you sure you want to continue?")){electronRequire("remote");var a=electronRequire("fs"),b=this.config.dataRoot,c={tracks:l.map(this.view.tracks,
function(a){var b=dojo.clone(a.config);this.getStore(b.store,dojo.hitch(this,function(a){b.storeClass=a.config.type;b.urlTemplate||(dojo.mixin(b,a.saveStore()),b.histograms&&b.histograms.store&&this.getStore(b.histograms.store,function(a){dojo.mixin(b.histograms,a.saveStore())}));delete b.store}));return b},this),refSeqs:this.config.refSeqs,refSeqOrder:this.config.refSeqOrder};try{a.writeFileSync(F.unReplacePath(b)+"/trackList.json",JSON.stringify(c,null,2))}catch(d){alert("Unable to save track data")}}},
openFastaElectron:function(){this.fastaFileDialog=this.fastaFileDialog||new U({browser:this});var a=electronRequire("remote"),b=electronRequire("fs");electronRequire("path");var c=a.require("app");this.fastaFileDialog.show({openCallback:dojo.hitch(this,function(a){var d=a.trackConfs||[];if(d.length)if(d[0].store.fasta){var e=F.replacePath(d[0].store.fasta.url),f=F.replacePath(d[0].store.fai.url),f={tracks:[{label:d[0].label,key:d[0].key,type:"SequenceTrack",category:"Reference sequence",storeClass:"JBrowse/Store/SeqFeature/IndexedFasta",
useAsRefSeqStore:!0,chunkSize:2E4,urlTemplate:e,faiUrlTemplate:f}],refSeqs:f,refSeqOrder:a.refSeqOrder},k=c.getPath("userData")+"/"+d[0].label;try{b.existsSync(k)||b.mkdirSync(k),b.writeFileSync(k+"/trackList.json",JSON.stringify(f,null,2)),b.closeSync(b.openSync(k+"/tracks.conf","w")),this.saveSessionDir(k),window.location=window.location.href.split("?")[0]+"?data="+F.replacePath(k)}catch(n){alert(n)}}else{e=F.replacePath(d[0].store.blob.url);try{if(1E8<b.statSync(e).size&&!confirm("Warning: you are opening a non-indexed fasta larger than 100MB. It is recommended to load a fasta (.fa) and the fasta index (.fai) to provide speedier loading. Do you wish to continue anyways?"))return}catch(p){}var l=
this;(new G({browser:this,urlTemplate:e})).getRefSeqs(function(f){f={tracks:[{label:d[0].label,key:d[0].key,type:"SequenceTrack",category:"Reference sequence",useAsRefSeqStore:!0,storeClass:"JBrowse/Store/SeqFeature/UnindexedFasta",chunkSize:2E4,urlTemplate:e}],refSeqs:{data:f},refSeqOrder:a.refSeqOrder};try{var k=c.getPath("userData")+"/"+d[0].label;b.existsSync(k)||b.mkdirSync(k);b.writeFileSync(k+"/trackList.json",JSON.stringify(f,null,2));b.closeSync(b.openSync(k+"/tracks.conf","w"));l.saveSessionDir(k);
window.location=window.location.href.split("?")[0]+"?data="+F.replacePath(k)}catch(n){alert(n)}},function(){})}})})},openFasta:function(){var a=this;this.fastaFileDialog=this.fastaFileDialog||new U({browser:this});var b=function(b){a.teardown();b()};this.fastaFileDialog.show({openCallback:dojo.hitch(this,function(c){function d(e,f){b(function(){var b=new a.constructor({refSeqs:{data:e},refSeqOrder:c.refSeqOrder});setTimeout(function(){l.forEach(f,function(a){var b=a.store;if(b&&"object"==typeof b)delete a.store,
b.name="refseqs",b=this.addStoreConfig(b.name,b),a.store=b},b);b.publish("/jbrowse/v1/v/tracks/new",f)},1E3)})}var e=c.trackConfs||[];e.length&&(e[0].store.blob?(!(1E8<e[0].store.blob.size)||confirm("Warning: you are opening a non-indexed fasta larger than 100MB. It is recommended to load a fasta (.fa) and the fasta index (.fai) to provide speedier loading. Do you wish to continue anyways?"))&&(new G({browser:this,fasta:e[0].store.blob})).getRefSeqs(function(a){d(a,e)},function(a){alert("Error getting refSeq: "+
a)}):(new J({browser:this,fai:e[0].store.fai,fasta:e[0].store.fasta})).getRefSeqs(function(a){d(a,e)},function(a){alert("Error getting refSeq: "+a)}))})})},browserMeta:function(){var a=this.config.aboutThisBrowser||{};a.title=a.title||"JBrowse";var b=this.version&&this.version.match(/^\d/)?this.version:"(development version)";a.description=a.description?a.description+('<div class="powered_by">Powered by <a target="_blank" href="http://jbrowse.org">JBrowse '+b+"</a>.</div>"):'<div class="default_about">  <img class="logo" src="'+
this.resolveUrl("img/JBrowseLogo_small.png")+'">  <h1>JBrowse '+b+'</h1>  <div class="tagline">A next-generation genome browser<br> built with JavaScript and HTML5.</div>  <a class="mainsite" target="_blank" href="http://jbrowse.org">JBrowse website</a>  <div class="gmod">JBrowse is a <a target="_blank" href="http://gmod.org">GMOD</a> project.</div>  <div class="copyright">&copy; 2013 The Evolutionary Software Foundation</div></div>';return a},registerTrackType:function(a){var b=this.getTrackTypes(),
c=a.type,d=a.defaultForStoreTypes||[];b.knownTrackTypes.push(c);if(a.label)b.trackTypeLabels[c]=a.label;var e={};b.knownTrackTypes=l.filter(b.knownTrackTypes,function(a){var b=e[a];e[a]=!0;return!b});l.forEach(d,function(a){b.trackTypeDefaults[a]=c});this._knownTrackTypes=b},getTrackTypes:function(){if(!this._knownTrackTypes)this._knownTrackTypes={trackTypeDefaults:{"JBrowse/Store/SeqFeature/BAM":"JBrowse/View/Track/Alignments2","JBrowse/Store/SeqFeature/NCList":"JBrowse/View/Track/CanvasFeatures",
"JBrowse/Store/SeqFeature/BigWig":"JBrowse/View/Track/Wiggle/XYPlot","JBrowse/Store/SeqFeature/VCFTabix":"JBrowse/View/Track/CanvasVariants","JBrowse/Store/SeqFeature/GFF3":"JBrowse/View/Track/CanvasFeatures","JBrowse/Store/SeqFeature/GTF":"JBrowse/View/Track/CanvasFeatures","JBrowse/Store/SeqFeature/StaticChunked":"JBrowse/View/Track/Sequence","JBrowse/Store/SeqFeature/UnindexedFasta":"JBrowse/View/Track/Sequence","JBrowse/Store/SeqFeature/IndexedFasta":"JBrowse/View/Track/Sequence"},knownTrackTypes:"JBrowse/View/Track/Alignments,JBrowse/View/Track/Alignments2,JBrowse/View/Track/FeatureCoverage,JBrowse/View/Track/SNPCoverage,JBrowse/View/Track/HTMLFeatures,JBrowse/View/Track/CanvasFeatures,JBrowse/View/Track/HTMLVariants,JBrowse/View/Track/CanvasVariants,JBrowse/View/Track/Wiggle/XYPlot,JBrowse/View/Track/Wiggle/Density,JBrowse/View/Track/Sequence".split(","),
trackTypeLabels:{}};return this._knownTrackTypes},openFileDialog:function(){this.fileDialog.show({openCallback:dojo.hitch(this,function(a){var b=a.trackConfs||[];b.length&&(l.forEach(b,function(a){var b=a.store;if(b&&"object"==typeof b)delete a.store,b=this.addStoreConfig(b.name,b),a.store=b;if((b=a.histograms&&a.histograms.store)&&"object"==typeof b)delete a.histograms.store,b=this.addStoreConfig(b.name,b),a.histograms.store=b},this),this.publish("/jbrowse/v1/v/tracks/new",b),"openImmediately"==
a.trackDisposition&&this.publish("/jbrowse/v1/v/tracks/show",b))})})},addTracks:function(a){this._addTrackConfigs(a)},replaceTracks:function(a){this._replaceTrackConfigs(a)},deleteTracks:function(a){this._deleteTrackConfigs(a)},renderGlobalMenu:function(a,b,c){this.afterMilestone("initView",function(){var d=this.makeGlobalMenu(a);d&&(b=dojo.mixin({className:a,innerHTML:'<span class="icon"></span> '+(b.text||F.ucFirst(a)),dropDown:d,id:"dropdownbutton_"+a},b||{}),d=new w(b),dojo.addClass(d.domNode,
"menu"),c.appendChild(d.domNode))},this)},makeGlobalMenu:function(a){var b=(this._globalMenuItems||{})[a]||[];if(!b.length)return null;var c=new x({id:"dropdownmenu_"+a,leftClickToOpen:!0});dojo.forEach(b,function(a){c.addChild(a)});dojo.addClass(c.domNode,"globalMenu");dojo.addClass(c.domNode,a);c.startup();return c},addGlobalMenuItem:function(a,b){if(!this._globalMenuItems)this._globalMenuItems={};this._globalMenuItems[a]||(this._globalMenuItems[a]=[]);this._globalMenuItems[a].push(b)},_initEventRouting:function(){var a=
this;a.subscribe("/jbrowse/v1/v/store/new",function(b){l.forEach(b,function(b){var b=g.mixin({},b),c=b.name;delete b.name;a.addStoreConfig(c,b)})});a.subscribe("/jbrowse/v1/v/tracks/hide",function(b){a.publish("/jbrowse/v1/c/tracks/hide",b)});a.subscribe("/jbrowse/v1/v/tracks/show",function(b){a.addRecentlyUsedTracks(dojo.map(b,function(a){return a.label}));a.publish("/jbrowse/v1/c/tracks/show",b)});a.subscribe("/jbrowse/v1/v/tracks/new",function(b){a.addTracks(b);a.publish("/jbrowse/v1/c/tracks/new",
b);a.publish("/jbrowse/v1/n/tracks/new",b)});a.subscribe("/jbrowse/v1/v/tracks/replace",function(b){a.replaceTracks(b);a.publish("/jbrowse/v1/c/tracks/replace",b);a.publish("/jbrowse/v1/n/tracks/replace",b)});a.subscribe("/jbrowse/v1/v/tracks/delete",function(b){a.deleteTracks(b);a.publish("/jbrowse/v1/c/tracks/delete",b);a.publish("/jbrowse/v1/n/tracks/delete",b)});a.subscribe("/jbrowse/v1/v/tracks/pin",function(b){a.publish("/jbrowse/v1/c/tracks/pin",b);a.publish("/jbrowse/v1/n/tracks/pin",b)});
a.subscribe("/jbrowse/v1/v/tracks/unpin",function(b){a.publish("/jbrowse/v1/c/tracks/unpin",b);a.publish("/jbrowse/v1/n/tracks/unpin",b)})},reportUsageStats:function(){if(!this.config.suppressUsageStatistics){var a=this._calculateClientStats();this._reportGoogleUsageStats(a);this._reportCustomUsageStats(a)}},_reportGoogleUsageStats:function(a){h.push.apply(h,[["_setAccount","UA-7115575-2"],["_setDomainName","none"],["_setAllowLinker",!0],["_setCustomVar",1,"tracks-count",a["tracks-count"],3],["_setCustomVar",
2,"refSeqs-count",a["refSeqs-count"],3],["_setCustomVar",3,"refSeqs-avgLen",a["refSeqs-avgLen"],3],["_setCustomVar",4,"jbrowse-version",a.ver,3],["_setCustomVar",5,"loadTime",a.loadTime,3],["_trackPageview"]]);a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)},_reportCustomUsageStats:function(a){var b=
"https";if("undefined"!=typeof this.config.clientReport&&"undefined"!=typeof this.config.clientReport.protocol)b=this.config.clientReport.protocol;a=b+"://jbrowse.org/analytics/clientReport?"+dojo.objectToQuery(a);dojo.create("img",{style:{display:"none"},src:a},document.body)},getStore:function(a,b){if(!b)throw"invalid arguments";var c=this._storeCache||{};this._storeCache=c;if(c=c[a])c.refCount++,b(c.store);else{var d=this.config.stores[a];d?(c=d.type)?require([c],dojo.hitch(this,function(c){var e=
{};dojo.mixin(e,d);dojo.mixin(e,{config:d,browser:this,refSeq:this.refSeq});c=new c(e);this._storeCache[a]={refCount:1,store:c};b(c);b=void 0})):(console.warn("store "+a+" has no type defined"),b(null)):(console.warn("store '"+a+"' not found"),b(null))}},uniqCounter:0,addStoreConfig:function(a,b){a=a||"addStore"+this.uniqCounter++;if(!this.config.stores)this.config.stores={};if(!this._storeCache)this._storeCache={};if(this.config.stores[a]||this._storeCache[a])throw"store "+a+" already exists!";this.config.stores[a]=
b;return a},clearStores:function(){this._storeCache={}},releaseStore:function(a){var b=this._storeCache[a];b&&!--b.refCount&&delete this._storeCache[a]},_calculateClientStats:function(){var a=screen||window.screen,b=new Date,c={ver:this.version||"dev","refSeqs-count":this.refSeqOrder.length,"refSeqs-avgLen":!this.refSeqOrder.length?null:R.reduce(dojo.map(this.refSeqOrder,function(a){a=this.allRefs[a];return!a?0:a.end-a.start},this),"+"),"tracks-count":this.config.tracks.length,plugins:R.keys(this.plugins).sort().join(","),
"scn-h":a?a.height:null,"scn-w":a?a.width:null,"win-h":document.body.offsetHeight,"win-w":document.body.offsetWidth,"el-h":this.container.offsetHeight,"el-w":this.container.offsetWidth,t:b.getTime()/1E3,electron:F.isElectron(),tzoffset:b.getTimezoneOffset(),loadTime:(b.getTime()-this.startTime)/1E3};dojo.forEach(this.config.tracks,function(a){a="track-types-"+a.type||"null";c[a]=(c[a]||0)+1});return c},publish:function(){return k.publish.apply(k,arguments)},subscribe:function(){this._uniqueSubscriptionId=
this._uniqueSubscriptionId||0;this._subscription=this._subscription||{};var a=++this._uniqueSubscriptionId,b=k.subscribe.apply(k,arguments),c=this;this._subscription[a]=b;return function(a){return{remove:function(){delete c._subscription[a];b.remove()}}}(a)},onResize:function(){if(this.navbox)this.view.locationTrapHeight=dojo.marginBox(this.navbox).h},getRecentlyUsedTracks:function(){return dojo.fromJson(this.cookie("recentTracks")||"[]")},addRecentlyUsedTracks:function(a){a=F.uniq(dojo.map(a,function(a){return{label:a,
time:Math.round(new Date/1E3)}},this).concat(dojo.fromJson(this.cookie("recentTracks"))||[]),function(a){return a.label}).slice(0,this.config.maxRecentTracks||10);this.cookie("recentTracks",a,{expires:365});return a},_milestoneFunction:function(a,b){var c=Array.prototype.slice.call(arguments,2),d=this._getDeferred(a);c.unshift(d);try{b.apply(this,c)}catch(e){console.error(e,e.stack),d.reject(e)}return d},_getDeferred:function(a){if(!this._deferred)this._deferred={};var c;if(!(c=this._deferred[a])){c=
this._deferred;var d=new b;d.then(null,g.hitch(this,"fatalError"));c=c[a]=d}return c},afterMilestone:function(a,b,c){return this._getDeferred(a).then(function(){try{b.call(c||this)}catch(a){console.error(""+a,a.stack,a)}})},passMilestone:function(a,b){return this._getDeferred(a).resolve(b)},reachedMilestone:function(a){return this._getDeferred(a).isResolved()},loadConfig:function(){return this._milestoneFunction("loadConfig",function(a){(new M({bootConfig:this.config,defaults:this._configDefaults(),
browser:this})).getFinalConfig().then(dojo.hitch(this,function(b){this.config=b;if(this.config.documentDomain)document.domain=this.config.documentDomain;var c=b.tracks||[];delete b.tracks;this._addTrackConfigs(c);dojo.forEach(["show_tracklist","show_nav","show_overview","show_menu","show_tracklabels"],function(a){this.config[a]=this._coerceBoolean(this.config[a])},this);if(!this.config.tracks)this.config.tracks=[];a.resolve({success:!0})}),a.reject)})},_addTrackConfigs:function(a){if(!this.config.tracks)this.config.tracks=
[];if(!this.trackConfigsByName)this.trackConfigsByName={};l.forEach(a,function(a){this.trackConfigsByName[a.label]=a;this.config.tracks.push(a)},this);return a},_replaceTrackConfigs:function(a){if(!this.trackConfigsByName)this.trackConfigsByName={};l.forEach(a,function(a){this.trackConfigsByName[a.label]||console.warn("track with label "+a.label+" does not exist yet.  creating a new one.");this.trackConfigsByName[a.label]=dojo.mixin(this.trackConfigsByName[a.label]||{},a)},this)},_deleteTrackConfigs:function(a){this.config.tracks=
l.filter(this.config.tracks||[],function(b){return!l.some(a,function(a){return a.label==b.label})});l.forEach(a,function(a){this.trackConfigsByName[a.label]?delete this.trackConfigsByName[a.label]:console.warn("track "+a.label+" does not exist, cannot delete")},this)},_configDefaults:function(){return{tracks:[],containerID:"GenomeBrowser",dataRoot:"data",show_tracklist:!0,show_nav:!0,show_menu:!0,show_overview:!0,refSeqs:"{dataRoot}/seq/refSeqs.json",include:["jbrowse.conf","jbrowse_conf.json"],nameUrl:"{dataRoot}/names/root.json",
datasets:{_DEFAULT_EXAMPLES:!0,volvox:{url:"?data=sample_data/json/volvox",name:"Volvox Example"},modencode:{url:"?data=sample_data/json/modencode",name:"MODEncode Example"},yeast:{url:"?data=sample_data/json/yeast",name:"Yeast Example"}},highlightSearchedRegions:!1,highResolutionMode:"disabled"}},_coerceBoolean:function(a){return"string"==typeof a?(a=a.toLowerCase(),"true"==a?!0:"false"==a?!1:parseInt(a)):"boolean"==typeof a?a:"number"==typeof a?!!a:!0},addRefseqs:function(a){this.allRefs=this.allRefs||
{};dojo.forEach(a,function(a){this.allRefs[a.name]=a},this);this.refSeqOrder=function(){var b;this.config.refSeqOrder?(b=a.slice(0),b.sort("length"==this.config.refSeqOrder||"length ascending"==this.config.refSeqOrder?function(a,b){return a.length-b.length}:"length descending"==this.config.refSeqOrder?function(a,b){return b.length-a.length}:"name descending"==this.config.refSeqOrder?function(a,b){return b.name.localeCompare(a.name)}:function(a,b){return a.name.localeCompare(b.name)})):b=a;return l.map(b,
function(a){return a.name})}.call(this);var b=this.cookie("refseq");this.refSeq=this.refSeq||this.allRefs[b]||this.allRefs[this.refSeqOrder[0]]},getRefSeq:function(a){return"string"!=typeof a?this.refSeq||void 0:this.allRefs[a]},onFineMove:function(a,b){if(this.locationTrap){var c=this.view.ref.end-this.view.ref.start,d=Math.round((a-this.view.ref.start)/c*this.view.overviewBox.w+this.view.overviewBox.l),c=Math.round((b-this.view.ref.start)/c*this.view.overviewBox.w+this.view.overviewBox.l);dojo.style(this.locationTrap,
{width:c-d+"px",borderBottomWidth:this.view.locationTrapHeight+"px",borderLeftWidth:d+"px",borderRightWidth:this.view.overviewBox.w-c+"px"})}},initTrackMetadata:function(){return this._milestoneFunction("initTrackMetadata",function(a){var b=dojo.map((this.config.trackMetadata||{}).sources||[],function(a){var b=a.url||"trackMeta.csv",c=a.type||(/\.csv$/i.test(b)?"csv":/\.js(on)?$/i.test(b)?"json":"csv"),a=a["class"]||{csv:"dojox/data/CsvStore",json:"dojox/data/JsonRestStore"}[c];return!a?(console.error("No store class found for type '"+
c+"', cannot load track metadata from URL "+b),null):{class_:a,url:b}});require(Array.prototype.concat.apply(["JBrowse/Store/TrackMetaData"],dojo.map(b,function(a){return a.class_})),dojo.hitch(this,function(c){for(var d=[],e=1;e<arguments.length;e++)d.push(new arguments[e]({url:b[e-1].url}));this.trackMetaDataStore=new c(dojo.mixin(dojo.clone(this.config.trackMetadata||{}),{trackConfigs:this.config.tracks,browser:this,metadataStores:d}));a.resolve({success:!0})}))})},createTrackList:function(){return this._milestoneFunction("createTrack",
function(a){var b=!this.config.show_tracklist?"Null":(this.config.trackSelector||{}).type?this.config.trackSelector.type:"Hierarchical";/\//.test(b)||(b="JBrowse/View/TrackList/"+b);require([b],dojo.hitch(this,function(b){this.trackListView=new b(dojo.mixin(dojo.clone(this.config.trackSelector)||{},{trackConfigs:this.config.tracks,browser:this,trackMetaData:this.trackMetaDataStore}));this.setGlobalKeyboardShortcut("t",this.trackListView,"toggle");this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",
dojo.hitch(this,function(){this.cookie("tracks",this.view.visibleTrackNames().join(","),{expires:60})}));a.resolve({success:!0})}))})},onVisibleTracksChanged:function(){},showRegion:function(a){var b=Math.round(0.2*(a.end-a.start));this.navigateToLocation({ref:a.ref,start:a.start-b,end:a.end+b});a.tracks&&this.showTracks(l.map(a.tracks,function(a){return a&&(a.label||a.name)||a}))},navigateTo:function(a){var b=this;this.afterMilestone("initView",function(){b.searchNames(a).then(function(c){!c&&b.callLocation(a)&&
(new K({title:"Not found",content:'Not found: <span class="locString">'+a+"</span>",className:"notfound-dialog"})).show()},b.callLocation(a))})},callLocation:function(a){var b="string"==typeof a?F.parseLocString(a):a;if(b&&"start"in b&&"end"in b)return this.navigateToLocation(b),!1;if("string"!=typeof a)a=a.ref;if(a=this.findReferenceSequence(a))return this.navigateToLocation({ref:a.name}),!1},findReferenceSequence:function(a){for(var b in this.allRefs)if(!this.compareReferenceNames(b,a))return this.allRefs[b];
return null},navigateToLocation:function(a){this.afterMilestone("initView",dojo.hitch(this,function(){var b=a.ref?this.findReferenceSequence(a.ref.name||a.ref):this.refSeq;if(b){a.ref=b.name;if("ref"in a&&!("start"in a&&"end"in a)){var c;try{c=F.parseLocString(dojo.fromJson(this.cookie("location"))[a.ref].l),c.ref=a.ref}catch(d){}c?a=c:(c=b.end-b.start,a.start=b.start+0.1*c,a.end=b.start+0.9*c)}a.start=Math.max(0,a.start||0);a.end=Math.max(a.start,Math.min(b.end,a.end||b.end));a.ref==this.refSeq.name?
(this.view.setLocation(this.refSeq,a.start,a.end),this._updateLocationCookies(a)):(b=this.view.visibleTrackNames(),this.refSeq=this.allRefs[a.ref],this.clearStores(),this.view.setLocation(this.refSeq,a.start,a.end),this._updateLocationCookies(a),this.showTracks(b))}}))},searchNames:function(a){var b=this;return this.nameStore.query({name:a}).then(function(c){if(!c.length)return!1;for(var d,e=0;e<c.length;e++)c[e].name==a&&(d=c[e]);if(!d)for(e=0;e<c.length;e++)c[e].name.toLowerCase()==a.toLowerCase()&&
(d=c[e]);d||(d=c[0]);d.location?b.showRegionAfterSearch(d.location):d.multipleLocations&&(new O({browser:b,locationChoices:d.multipleLocations,title:"Choose "+d.name+" location",prompt:'"'+d.name+'" is found in multiple locations.  Please choose a location to view.'})).show();return!0},function(a){console.error(a);(new K({title:"Error",content:"Error reading from name store."})).show();return!1})},showTracks:function(a){this.afterMilestone("initView",dojo.hitch(this,function(){"string"==typeof a&&
(a=a.split(","));a&&(this.publish("/jbrowse/v1/c/tracks/show",dojo.filter(dojo.map(a,function(a){return this.trackConfigsByName[a]},this),function(a){return a})),this.publish("/jbrowse/v1/n/tracks/visibleChanged"))}))},setGlobalKeyboardShortcut:function(a){this.globalKeyboardShortcuts[a]&&console.warn("WARNING: JBrowse global keyboard shortcut '"+a+"' redefined");var b=dojo.hitch.apply(dojo,Array.prototype.slice.call(arguments,1));this.globalKeyboardShortcuts[a]=b},globalKeyHandler:function(a){if(!T.curNode){var b=
this.globalKeyboardShortcuts[a.keyChar||String.fromCharCode(a.charCode||a.keyCode)];b&&(b.call(this),a.stopPropagation())}},makeShareLink:function(){if("share_link"in this.config&&!this.config.share_link||F.isElectron())return null;var a=this,b="#",c=new s({className:"share",innerHTML:'<span class="icon"></span> Share',title:"share this view",onClick:function(){f.value=b;k.href=b;n.show();var a=dojo.position(c.domNode);dojo.style(n.domNode,{top:a.y+a.h+"px",right:0,left:""});f.focus();f.select();
e.style.display="block";return!1}}),d=dojo.create("div",{innerHTML:"Paste this link in <b>email</b> or <b>IM</b>"}),e=dojo.create("div",{className:"copyReminder",innerHTML:"Press CTRL-C to copy"}),f=dojo.create("input",{type:"text",value:b,size:50,readonly:"readonly",onclick:function(){this.select();e.style.display="block"},onblur:function(){e.style.display="none"}}),k=dojo.create("a",{innerHTML:"Preview",target:"_blank",href:b,style:{display:"block","float":"right"}},d),n=new p({className:"sharePane",
title:"Share this view",draggable:!1,content:[d,f,e],autofocus:!1}),d=function(){b=a.makeCurrentViewURL()};dojo.connect(this,"onCoarseMove",d);this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",d);this.subscribe("/jbrowse/v1/n/globalHighlightChanged",d);return c.domNode},makeCurrentViewURL:function(a){var b=typeof this.config.shareURL;return"function"==b?this.config.shareURL.call(this,this):"string"==b?this.config.shareURL:"".concat(window.location.protocol,"//",window.location.host,window.location.pathname,
"?",dojo.objectToQuery(dojo.mixin(dojo.mixin({},this.config.queryParams||{}),dojo.mixin({loc:this.view.visibleRegionLocString(),tracks:this.view.visibleTrackNames().join(","),highlight:(this.getHighlight()||"").toString()},a||{}))))},makeFullViewLink:function(){var a=this,b=dojo.create("a",{className:"topLink",href:window.location.href,target:"_blank",title:"View in full-screen browser",innerHTML:"Full-screen view"}),c=this.config.makeFullViewURL||this.makeCurrentViewURL,d=function(){b.href=c.call(a,
a)};dojo.connect(this,"onCoarseMove",d);this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",d);this.subscribe("/jbrowse/v1/n/globalHighlightChanged",d);return b},onCoarseMove:function(a,b){var c={start:a,end:b,ref:this.refSeq.name},d="";this.locationBox&&(d=this.locationBox.get("value"),d.length&&(d=' "'+d+'"'),this.locationBox.set("value",F.assembleLocStringWithLength(c),!1),this.locationBox.set("placeholder","search features, IDs"),this.goButton.set("disabled",!0));var e=dojo.byId("location-info");
if(e){var k=F.assembleLocStringWithLength(c);f.set(e,k+d);this.locationBox.set("value","",!1)}this._updateRefSeqSelectBox();this.reachedMilestone("completely initialized")&&this._updateLocationCookies(c);this.publish("/jbrowse/v1/n/navigate",c)},_updateRefSeqSelectBox:function(){this.refSeqSelectBox&&(l.some(this.refSeqSelectBox.getOptions(),function(a){return a.value==this.refSeq.name},this)||this.refSeqSelectBox.set("options",this.refSeqSelectBox.getOptions().concat({label:this.refSeq.name,value:this.refSeq.name})),
this.refSeqSelectBox.set("value",this.refSeq.name,!1))},_updateLocationCookies:function(a){var a="string"==typeof a?a:F.assembleLocString(a),b=dojo.fromJson(this.cookie("location"))||{_version:1};b._version||(b=this._migrateLocMap(b));b[this.refSeq.name]={l:a,t:Math.round((new Date).getTime()/1E3)-1340211510};b=this._limitLocMap(b,this.config.maxSavedLocations||10);this.cookie("location",dojo.toJson(b),{expires:60});this.cookie("refseq",this.refSeq.name)},_migrateLocMap:function(a){var b={_version:1},
c;for(c in a)b[c]={l:a[c],t:0};return b},_limitLocMap:function(a,b){var c=R.keys(a);if(c.length<=b)return a;a=dojo.clone(a);c=c.sort(function(b,c){return a[c].t-a[b].t}).slice(b-1);dojo.forEach(c,function(b){delete a[b]});return a},cookie:function(a,b){var a=this.config.containerID+"-"+a,c=a+"-"+(this.config.dataset_id||"");"object"==typeof b&&(b=dojo.toJson(b));var d=this.config.cookieSizeLimit||1200;if(null!=b&&b.length>d)return console.warn("not setting cookie '"+c+"', value too big ("+b.length+
" > "+d+")"),localStorage.getItem(c);if(null!=b)try{return localStorage.setItem(c,b)}catch(e){}return localStorage.getItem(c)||dojo.cookie(a)},createNavBox:function(a){var b=this,a=dojo.create("div",{id:"navbox",style:{"text-align":"left"}},a),e=dojo.create("div",{className:"locationTrapContainer"},a);this.locationTrap=dojo.create("div",{className:"locationTrap"},e);e=String.fromCharCode(160);e=e+e+e+e;a.appendChild(document.createTextNode(e));var f=document.createElement("img");f.src=this.resolveUrl("img/Empty.png");
f.id="moveLeft";f.className="icon nav";a.appendChild(f);dojo.connect(f,"click",this,function(a){dojo.stopEvent(a);this.view.slide(0.9)});f=document.createElement("img");f.src=this.resolveUrl("img/Empty.png");f.id="moveRight";f.className="icon nav";a.appendChild(f);dojo.connect(f,"click",this,function(a){dojo.stopEvent(a);this.view.slide(-0.9)});a.appendChild(document.createTextNode(e));f=document.createElement("img");f.src=this.resolveUrl("img/Empty.png");f.id="bigZoomOut";f.className="icon nav";
a.appendChild(f);dojo.connect(f,"click",this,function(a){dojo.stopEvent(a);this.view.zoomOut(void 0,void 0,2)});f=document.createElement("img");f.src=this.resolveUrl("img/Empty.png");f.id="zoomOut";f.className="icon nav";a.appendChild(f);dojo.connect(f,"click",this,function(a){dojo.stopEvent(a);this.view.zoomOut()});f=document.createElement("img");f.src=this.resolveUrl("img/Empty.png");f.id="zoomIn";f.className="icon nav";a.appendChild(f);dojo.connect(f,"click",this,function(a){dojo.stopEvent(a);
this.view.zoomIn()});f=document.createElement("img");f.src=this.resolveUrl("img/Empty.png");f.id="bigZoomIn";f.className="icon nav";a.appendChild(f);dojo.connect(f,"click",this,function(a){dojo.stopEvent(a);this.view.zoomIn(void 0,void 0,2)});a.appendChild(document.createTextNode(e));f="";e="40ex";"separate"===this.config.locationBox&&(f="separate-location-box",e="25ex");var f=dojo.create("span",{id:"search-box","class":f},a),k=dojo.create("span",{id:"search-refseq"},f);this.locationBox=new u({id:"location",
name:"location",style:{width:e},maxLength:400,searchAttr:"name",title:"Enter a chromosomal position, symbol or ID to search"},dojo.create("input",{},f));this.afterMilestone("loadNames",dojo.hitch(this,function(){this.nameStore&&this.locationBox.set("store",this.nameStore)}));this.locationBox.focusNode.spellcheck=!1;dojo.query("div.dijitArrowButton",this.locationBox.domNode).orphan();dojo.connect(this.locationBox.focusNode,"keydown",this,function(a){a.keyCode==c.ESCAPE?this.locationBox.set("value",
""):a.keyCode==c.ENTER?(this.locationBox.closeDropDown(!1),this.navigateTo(this.locationBox.get("value")),this.goButton.set("disabled",!0),dojo.stopEvent(a)):this.goButton.set("disabled",!1)});dojo.connect(a,"onselectstart",function(a){a.stopPropagation();return!0});(function(){var a=eval(this.locationBox.dropDownClass).prototype,b=a._createOption;a._createOption=function(a){var c=b.apply(this,arguments);a.hitLimit&&dojo.addClass(c,"moreMatches");return c};var c=a.onClick;a.onClick=function(a){return dojo.hasClass(a,
"moreMatches")?null:c.apply(this,arguments)}}).call(this);this.goButton=new s({label:"Go",onClick:dojo.hitch(this,function(a){this.navigateTo(this.locationBox.get("value"));this.goButton.set("disabled",!0);dojo.stopEvent(a)}),id:"search-go-btn"},dojo.create("button",{},f));this.highlightButtonPreviousState=!1;if("separate"===this.config.locationBox)this.locationInfoBox=d.place("<div id='location-info'>location</div>",a);this.highlightButton=new D({title:"Highlight a Region",id:"highlight-btn",states:[!1,
!0,"mixed"],onChange:function(){if(!0==this.get("checked"))b.view._rubberStop(),b.view.behaviorManager.swapBehaviors("normalMouse","highlightingMouse");else if(!1==this.get("checked")){var a=b.getHighlight();a&&(b.clearHighlight(),b.view.redrawRegion(a))}else!0!=b.highlightButtonPreviousState?b.highlightButton.set("checked",!1):b.highlightButtonPreviousState=!1,b.view._rubberStop(),b.view.behaviorManager.swapBehaviors("highlightingMouse","normalMouse")}},dojo.create("button",{id:"highlight-btn"},
a));this.subscribe("/jbrowse/v1/n/globalHighlightChanged",function(){b.highlightButton.set("checked",!1)});this.afterMilestone("loadRefSeqs",dojo.hitch(this,function(){if(this.refSeqOrder&&this.refSeqOrder.length){for(var a=this.config.refSeqSelectorMaxSize||30,b=Math.min(a,this.refSeqOrder.length),c=[],d=0;d<b;d++)c.push({label:this.refSeqOrder[d],value:this.refSeqOrder[d]});var e="(first "+b+" ref seqs)";this.refSeqOrder.length>a&&c.push({label:e,value:e,disabled:!0});this.refSeqSelectBox=(new t({name:"refseq",
value:this.refSeq?this.refSeq.name:null,options:c,onChange:dojo.hitch(this,function(a){a==e?this.refSeqSelectBox.set("value",this.refSeq.name):a!=this.refSeq.name&&this.navigateToLocation({ref:a})})})).placeAt(k)}this.locationBox.domNode.style.width=(this.config.locationBoxLength||function(){if(!this.refSeqOrder.length)return 20;var a=1E3>this.refSeqOrder.length&&function(){var a;l.forEach(this.refSeqOrder,function(b){b=this.allRefs[b];if(!b.length)b.length=b.end-b.start+1;if(!a||a.length<b.length)a=
b},this);return a}.call(this)||this.refSeqOrder.length&&this.allRefs[this.refSeqOrder[this.refSeqOrder.length-1]]||20;return F.assembleLocStringWithLength({ref:a.name,start:a.end-1,end:a.end,length:a.length}).length}.call(this)||20)+"ex"}));return a},getHighlight:function(){return this._highlight||null},setHighlight:function(a){if(a&&a instanceof V)this._highlight=a;else if(a)this._highlight=new V(a);this.publish("/jbrowse/v1/n/globalHighlightChanged",[this._highlight]);return this.getHighlight()},
_updateHighlightClearButton:function(){var a=!!this._highlight;this._highlightClearButton&&this._highlightClearButton.set("disabled",!a);if(this.highlightButton)this.highlightButton.set("checked",a?"mixed":!1),this.highlightButtonPreviousState=a},clearHighlight:function(){this._highlight&&(delete this._highlight,this.publish("/jbrowse/v1/n/globalHighlightChanged",[]))},setHighlightAndRedraw:function(a){var a=this.regularizeLocation(a),b=this.getHighlight();b&&this.view.hideRegion(b);this.view.hideRegion(a);
this.setHighlight(a);this.view.showVisibleBlocks(!1)},showRegionAfterSearch:function(a){a=this.regularizeLocation(a);if(this.config.highlightSearchedRegions){var b=this.getHighlight();b&&this.view.hideRegion(b);this.view.hideRegion(a);this.setHighlight(a)}this.showRegion(a)},showRegionWithHighlight:function(){return this.showRegionAfterSearch.apply(this,arguments)},teardown:function(){for(var a in this._subscription)this._subscription[a].remove();for(this.containerWidget&&this.containerWidget.destroyRecursive(!0);this.container&&
this.container.firstChild;)this.container.removeChild(this.container.firstChild)}})})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(h,j,g){function i(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function f(a,b,c){var d,e,f,k,n,p,l,m=this._inherited=this._inherited||{};"string"==typeof a&&(d=a,a=b,b=c);c=0;k=a.callee;(d=d||k.nom)||i("can't deduce a name to call inherited()",this.declaredClass);n=this.constructor._meta;f=n.bases;l=m.p;if(d!=x){if(m.c!==k&&(l=0,
p=f[0],n=p._meta,n.hidden[d]!==k)){(e=n.chains)&&"string"==typeof e[d]&&i("calling chained method with inherited: "+d,this.declaredClass);do if(n=p._meta,e=p.prototype,n&&(e[d]===k&&e.hasOwnProperty(d)||n.hidden[d]===k))break;while(p=f[++l]);l=p?l:-1}if(p=f[++l])if(e=p.prototype,p._meta&&e.hasOwnProperty(d))c=e[d];else{k=s[d];do if(e=p.prototype,(c=e[d])&&(p._meta?e.hasOwnProperty(d):c!==k))break;while(p=f[++l])}c=p&&c||s[d]}else{if(m.c!==k&&(l=0,(n=f[0]._meta)&&n.ctor!==k)){e=n.chains;for((!e||"manual"!==
e.constructor)&&i("calling chained constructor with inherited",this.declaredClass);(p=f[++l])&&!((n=p._meta)&&n.ctor===k););l=p?l:-1}for(;(p=f[++l])&&!(c=(n=p._meta)?n.ctor:p););c=p&&c}m.c=c;m.p=l;if(c)return!0===b?c:c.apply(this,b||a)}function e(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function d(a,b,c){var d=this.getInherited(a,b);if(d)return d.apply(this,c||b||a)}function c(a){for(var b=this.constructor._meta.bases,c=0,d=b.length;c<d;++c)if(b[c]===a)return!0;
return this instanceof a}function b(a,b){for(var c in b)c!=x&&b.hasOwnProperty(c)&&(a[c]=b[c]);if(j("bug-for-in-skips-shadowed"))for(var d=g._extraNames,e=d.length;e;)c=d[--e],c!=x&&b.hasOwnProperty(c)&&(a[c]=b[c])}function a(a){p.safeMixin(this.prototype,a);return this}function k(a){return p([this].concat(a))}function n(a,b){return function(){var y;var c=arguments,d=c,e=c[0],f,k;k=a.length;var n;if(!(this instanceof c.callee))return r(c);if(b&&(e&&e.preamble||this.preamble)){n=Array(a.length);n[0]=
c;for(f=0;;){if(e=c[0])(e=e.preamble)&&(c=e.apply(this,c)||c);e=a[f].prototype;(e=e.hasOwnProperty("preamble")&&e.preamble)&&(c=e.apply(this,c)||c);if(++f==k)break;n[f]=c}}for(f=k-1;0<=f;--f)e=a[f],(y=(k=e._meta)?k.ctor:e,e=y)&&e.apply(this,n?n[f]:c);(e=this.postscript)&&e.apply(this,d)}}function q(a,b){return function(){var c=arguments,d=c,e=c[0];if(!(this instanceof c.callee))return r(c);if(b){if(e)(e=e.preamble)&&(d=e.apply(this,d)||d);(e=this.preamble)&&e.apply(this,d)}a&&a.apply(this,c);(e=this.postscript)&&
e.apply(this,c)}}function o(a){return function(){var y;var b=arguments,c=0,d,e;if(!(this instanceof b.callee))return r(b);for(;d=a[c];++c)if(y=(e=d._meta)?e.ctor:d,d=y){d.apply(this,b);break}(d=this.postscript)&&d.apply(this,b)}}function l(a,b,c){return function(){var d,e,f=0,k=1;c&&(f=b.length-1,k=-1);for(;d=b[f];f+=k)e=d._meta,(d=(e?e.hidden:d.prototype)[a])&&d.apply(this,arguments)}}function m(a){v.prototype=a.prototype;a=new v;v.prototype=null;return a}function r(a){var b=a.callee,c=m(b);b.apply(c,
a);return c}function p(d,v,r){"string"!=typeof d&&(r=v,v=d,d="");var r=r||{},j,h,I,B,z,C,H,M=1,K=v;if("[object Array]"==t.call(v)){M=d;I=[];B=[{cls:0,refs:[]}];C={};for(var P=1,U=v.length,J=0,G,V,O,N;J<U;++J){(G=v[J])?"[object Function]"!=t.call(G)&&i("mixin #"+J+" is not a callable constructor.",M):i("mixin #"+J+" is unknown. Did you use dojo.require to pull it in?",M);V=G._meta?G._meta.bases:[G];O=0;for(G=V.length-1;0<=G;--G){N=V[G].prototype;if(!N.hasOwnProperty("declaredClass"))N.declaredClass=
"uniqName_"+w++;N=N.declaredClass;C.hasOwnProperty(N)||(C[N]={count:0,refs:[],cls:V[G]},++P);N=C[N];O&&O!==N&&(N.refs.push(O),++O.count);O=N}++O.count;B[0].refs.push(O)}for(;B.length;){O=B.pop();I.push(O.cls);for(--P;h=O.refs,1==h.length;){O=h[0];if(!O||--O.count){O=0;break}I.push(O.cls);--P}if(O)for(J=0,U=h.length;J<U;++J)O=h[J],--O.count||B.push(O)}P&&i("can't build consistent linearization",M);G=v[0];I[0]=G?G._meta&&G===I[I.length-G._meta.bases.length]?G._meta.bases.length:1:0;C=I;I=C[0];M=C.length-
I;v=C[M]}else C=[0],v?"[object Function]"==t.call(v)?(I=v._meta,C=C.concat(I?I.bases:v)):i("base class is not a callable constructor.",d):null!==v&&i("unknown base class. Did you use dojo.require to pull it in?",d);if(v)for(h=M-1;;--h){j=m(v);if(!h)break;I=C[h];(I._meta?b:u)(j,I.prototype);B=new Function;B.superclass=v;B.prototype=j;v=j.constructor=B}else j={};p.safeMixin(j,r);I=r.constructor;if(I!==s.constructor)I.nom=x,j.constructor=I;for(h=M-1;h;--h)(I=C[h]._meta)&&I.chains&&(H=u(H||{},I.chains));
j["-chains-"]&&(H=u(H||{},j["-chains-"]));I=!H||!H.hasOwnProperty(x);C[0]=B=H&&"manual"===H.constructor?o(C):1==C.length?q(r.constructor,I):n(C,I);B._meta={bases:C,hidden:r,chains:H,parents:K,ctor:r.constructor};B.superclass=v&&v.prototype;B.extend=a;B.createSubclass=k;B.prototype=j;j.constructor=B;j.getInherited=e;j.isInstanceOf=c;j.inherited=E;j.__inherited=f;if(d)j.declaredClass=d,g.setObject(d,B);if(H)for(z in H)if(j[z]&&"string"==typeof H[z]&&z!=x)I=j[z]=l(z,C,"after"===H[z]),I.nom=z;return B}
var u=g.mixin,s=Object.prototype,t=s.toString,v=new Function,w=0,x="constructor",E=h.config.isDebug?d:f;h.safeMixin=p.safeMixin=function(a,b){var c,d;for(c in b)if(d=b[c],(d!==s[c]||!(c in s))&&c!=x){if("[object Function]"==t.call(d))d.nom=c;a[c]=d}if(j("bug-for-in-skips-shadowed"))for(var e=g._extraNames,f=e.length;f;)if(c=e[--f],d=b[c],(d!==s[c]||!(c in s))&&c!=x){if("[object Function]"==t.call(d))d.nom=c;a[c]=d}return a};return h.declare=p})},"dojo/_base/kernel":function(){define(["../has","./config",
"require","module"],function(h,j,g,i){var f,e;f=function(){return this}();var d={},c={},b={config:j,global:f,dijit:d,dojox:c},d={dojo:["dojo",b],dijit:["dijit",d],dojox:["dojox",c]},i=g.map&&g.map[i.id.match(/[^\/]+/)[0]];for(e in i)d[e]?d[e][0]=i[e]:d[e]=[i[e],{}];for(e in d)i=d[e],i[1]._scopeName=i[0],j.noGlobals||(f[i[0]]=i[1]);b.scopeMap=d;b.baseUrl=b.config.baseUrl=g.baseUrl;b.isAsync=g.async;b.locale=j.locale;f="$Rev: 7199349 $".match(/[0-9a-f]{7,}/);b.version={major:1,minor:8,patch:10,flag:"",
revision:f?f[0]:NaN,toString:function(){var a=b.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(b);b.exit=function(){};"undefined"!=typeof console||(console={});var i="assert,count,debug,dir,dirxml,error,group,groupEnd,info,profile,profileEnd,time,timeEnd,trace,warn,log".split(","),a;for(f=0;a=i[f++];)console[a]||function(){var b=a+"";console[b]="log"in console?
function(){var a=Array.prototype.slice.call(arguments);a.unshift(b+":");console.log(a.join(" "))}:function(){};console[b]._fake=!0}();h.add("dojo-debug-messages",!!j.isDebug);b.deprecated=b.experimental=function(){};if(h("dojo-debug-messages"))b.deprecated=function(a,b,c){a="DEPRECATED: "+a;b&&(a+=" "+b);c&&(a+=" -- will be removed in version: "+c);console.warn(a)},b.experimental=function(a,b){var c="EXPERIMENTAL: "+a+" -- APIs subject to change without notice.";b&&(c+=" "+b);console.warn(c)};if(j.modulePaths){b.deprecated("dojo.modulePaths",
"use paths configuration");h={};for(e in j.modulePaths)h[e.replace(/\./g,"/")]=j.modulePaths[e];g({paths:h})}b.moduleUrl=function(a,c){b.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var d=null;a&&(d=g.toUrl(a.replace(/\./g,"/")+(c?"/"+c:"")+"/*.*").replace(/\/\*\.\*/,"")+(c?"":"/"));return d};b._hasResource={};return b})},"dojo/has":function(){define(["require","module"],function(h){var j=h.has||function(){};j.add("dom-addeventlistener",!!document.addEventListener);j.add("touch","ontouchstart"in
document||0<window.navigator.msMaxTouchPoints);j.add("device-width",screen.availWidth||innerWidth);h=document.createElement("form");j.add("dom-attributes-explicit",0==h.attributes.length);j.add("dom-attributes-specified-flag",0<h.attributes.length&&40>h.attributes.length);j.clearElement=function(g){g.innerHTML="";return g};j.normalize=function(g,i){var f=g.match(/[\?:]|[^:\?]*/g),e=0,d=function(c){var b=f[e++];if(":"==b)return 0;if("?"==f[e++]){if(!c&&j(b))return d();d(!0);return d(c)}return b||0};
return(g=d())&&i(g)};j.load=function(g,i,f){g?i([g],f):f()};return j})},"dojo/_base/config":function(){define(["../has","require"],function(h,j){var g={},i=j.rawConfig,f;for(f in i)g[f]=i[f];return g})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(h,j){j.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var g=j("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):
[],i=g.length,f=function(a,b,c){var d,e=0,f=h.global;if(!c)if(a.length){d=a[e++];try{c=h.scopeMap[d]&&h.scopeMap[d][1]}catch(m){}c=c||(d in f?f[d]:b?f[d]={}:void 0)}else return f;for(;c&&(d=a[e++]);)c=d in c?c[d]:b?c[d]={}:void 0;return c},e=Object.prototype.toString,d=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},c=/\{([^\}]+)\}/g,b={_extraNames:g,_mixin:function(a,b,c){var d,e,f,m={};for(d in b)if(e=b[d],!(d in a)||a[d]!==e&&(!(d in m)||m[d]!==e))a[d]=c?c(e):e;if(j("bug-for-in-skips-shadowed")&&
b)for(f=0;f<i;++f)if(d=g[f],e=b[d],!(d in a)||a[d]!==e&&(!(d in m)||m[d]!==e))a[d]=c?c(e):e;return a},mixin:function(a,c){a||(a={});for(var d=1,e=arguments.length;d<e;d++)b._mixin(a,arguments[d]);return a},setObject:function(a,b,c){var d=a.split("."),a=d.pop();return(c=f(d,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return f(a.split("."),b,c)},exists:function(a,c){return void 0!==b.getObject(a,!1,c)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&
(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===e.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||b.isArray(a)||b.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!b.isString(a)&&!b.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(b.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!b.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,c){for(var d=1,e=arguments.length;d<
e;d++)b._mixin(a.prototype,arguments[d]);return a},_hitchArgs:function(a,c){var d=b._toArray(arguments,2),e=b.isString(c);return function(){var f=b._toArray(arguments),l=e?(a||h.global)[c]:c;return l&&l.apply(a||this,d.concat(f))}},hitch:function(a,c){if(2<arguments.length)return b._hitchArgs.apply(h,arguments);c||(c=a,a=null);if(b.isString(c)){a=a||h.global;if(!a[c])throw['lang.hitch: scope["',c,'"] is null (scope="',a,'")'].join("");return function(){return a[c].apply(a,arguments||[])}}return!a?
c:function(){return c.apply(a,arguments||[])}},delegate:function(){function a(){}return function(c,d){a.prototype=c;var e=new a;a.prototype=null;d&&b._mixin(e,d);return e}}(),_toArray:j("ie")?function(){function a(a,b,c){c=c||[];for(b=b||0;b<a.length;b++)c.push(a[b]);return c}return function(b){return(b.item?a:d).apply(this,arguments)}}():d,partial:function(a){return b.hitch.apply(h,[null].concat(b._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||b.isFunction(a))return a;if(a.nodeType&&
"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var c,d,e;if(b.isArray(a)){c=[];for(d=0,e=a.length;d<e;++d)d in a&&c.push(b.clone(a[d]))}else c=a.constructor?new a.constructor:{};return b._mixin(c,a,b.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,d,e){return a.replace(e||c,b.isFunction(d)?d:function(a,c){return b.getObject(c,
!1,d)})}};b.mixin(h,b);return b})},"dojo/sniff":function(){define(["./has"],function(h){var j=navigator,g=j.userAgent,j=j.appVersion,i=parseFloat(j);h.add("air",0<=g.indexOf("AdobeAIR"));h.add("khtml",0<=j.indexOf("Konqueror")?i:void 0);h.add("webkit",parseFloat(g.split("WebKit/")[1])||void 0);h.add("chrome",parseFloat(g.split("Chrome/")[1])||void 0);h.add("safari",0<=j.indexOf("Safari")&&!h("chrome")?parseFloat(j.split("Version/")[1]):void 0);h.add("mac",0<=j.indexOf("Macintosh"));h.add("quirks",
"BackCompat"==document.compatMode);h.add("ios",/iPhone|iPod|iPad/.test(g));h.add("android",parseFloat(g.split("Android ")[1])||void 0);h.add("trident",parseFloat(j.split("Trident/")[1])||void 0);if(!h("webkit")){0<=g.indexOf("Opera")&&h.add("opera",9.8<=i?parseFloat(g.split("Version/")[1])||i:i);0<=g.indexOf("Gecko")&&!h("khtml")&&!h("webkit")&&!h("trident")&&h.add("mozilla",i);h("mozilla")&&h.add("ff",parseFloat(g.split("Firefox/")[1]||g.split("Minefield/")[1])||void 0);if(document.all&&!h("opera"))g=
parseFloat(j.split("MSIE ")[1])||void 0,(j=document.documentMode)&&5!=j&&Math.floor(g)!=j&&(g=j),h.add("ie",g);h.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return h})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(h,j,g){function i(a,d,e,f,k){if(f=d.match(/(.*):(.*)/))return d=f[2],f=f[1],c.selector(f,d).call(k,a,e);g("touch")&&(b.test(d)&&(e=w(e)),!g("event-orientationchange")&&"orientationchange"==d&&(d="resize",a=window,e=w(e)));
o&&(e=o(e));if(a.addEventListener){var l=d in n,m=l?n[d]:d;a.addEventListener(m,e,l);return{remove:function(){a.removeEventListener(m,e,l)}}}if(p&&a.attachEvent)return p(a,"on"+d,e);throw Error("Target must be an event emitter");}function f(){this.cancelable=!1}function e(){this.bubbles=!1}var d=window.ScriptEngineMajorVersion;g.add("jscript",d&&d()+ScriptEngineMinorVersion()/10);g.add("event-orientationchange",g("touch")&&!g("android"));g.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&
!!window.Event.prototype.stopImmediatePropagation);g.add("event-focusin",function(a,b,c){return"onfocusin"in c});g("touch")&&g.add("touch-can-modify-event-delegate",function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");try{var b=new a;b.target=null;return null===b.target}catch(c){return!1}});var c=function(a,b,d,e){return"function"==typeof a.on&&"function"!=typeof b&&!a.nodeType?a.on(b,d):c.parse(a,b,d,i,e,this)};c.pausable=function(a,b,d,e){var f,a=c(a,b,function(){if(!f)return d.apply(this,
arguments)},e);a.pause=function(){f=!0};a.resume=function(){f=!1};return a};c.once=function(a,b,d){var e=c(a,b,function(){e.remove();return d.apply(this,arguments)});return e};c.parse=function(a,b,c,d,e,f){if(b.call)return b.call(f,a,c);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),k=[],n=0,p;p=b[n++];)k.push(d(a,p,c,e,f));k.remove=function(){for(var a=0;a<k.length;a++)k[a].remove()};return k}return d(a,b,c,e,f)};var b=/^touch/;c.selector=function(a,b,d){return function(e,f){function k(b){for(n=
n&&n.matches?n:j.query;!n.matches(b,a,e);)if(b==e||!1===d||!(b=b.parentNode)||1!=b.nodeType)return;return b}var n="function"==typeof a?{matches:a}:this,p=b.bubble;return p?c(e,p(k),f):c(e,b,function(a){var b=k(a.target);if(b)return f.call(b,a)})}};var a=[].slice,k=c.emit=function(b,c,d){var k=a.call(arguments,2),n="on"+c;if("parentNode"in b){var p=k[0]={},l;for(l in d)p[l]=d[l];p.preventDefault=f;p.stopPropagation=e;p.target=b;p.type=c;d=p}do b[n]&&b[n].apply(b,k);while(d&&d.bubbles&&(b=b.parentNode));
return d&&d.cancelable&&d},n=g("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!g("event-stopimmediatepropagation"))var q=function(){this.modified=this.immediatelyStopped=!0},o=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=q,a.apply(this,arguments)}};if(g("dom-addeventlistener"))c.emit=function(a,b,d){if(a.dispatchEvent&&document.createEvent){var e=(a.ownerDocument||document).createEvent("HTMLEvents");e.initEvent(b,!!d.bubbles,!!d.cancelable);for(var f in d)f in
e||(e[f]=d[f]);return a.dispatchEvent(e)&&e}return k.apply(c,arguments)};else{c._fixEvent=function(a,b){if(!a)a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event;if(!a)return a;l&&a.type==l.type&&(a=l);if(!a.target){a.target=a.srcElement;a.currentTarget=b||a.srcElement;if("mouseover"==a.type)a.relatedTarget=a.fromElement;if("mouseout"==a.type)a.relatedTarget=a.toElement;if(!a.stopPropagation)a.stopPropagation=u,a.preventDefault=s;switch(a.type){case "keypress":var c="charCode"in a?
a.charCode:a.keyCode;10==c?(c=0,a.keyCode=13):13==c||27==c?c=0:3==c&&(c=99);a.charCode=c;c=a;c.keyChar=c.charCode?String.fromCharCode(c.charCode):"";c.charOrCode=c.keyChar||c.keyCode}}return a};var l,m=function(a){this.handle=a};m.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var r=function(a){return function(b){var b=c._fixEvent(b,this),d=a.call(this,b);b.modified&&(l||setTimeout(function(){l=null}),l=b);return d}},p=function(a,b,c){c=r(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:
a.parentWindow||a.window||window)!=top||5.8>g("jscript"))&&!g("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var d=a[b];if(!d||!d.listeners){var e=d,d=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");d.listeners=[];a[b]=d;d.global=this;e&&d.listeners.push(_dojoIEListeners_.push(e)-1)}d.listeners.push(a=d.global._dojoIEListeners_.push(c)-
1);return new m(a)}return h.after(a,b,c,!0)},u=function(){this.cancelBubble=!0},s=c._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1}}if(g("touch"))var t=function(){},v=window.orientation,w=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(e){}if(b.type){if(g("touch-can-modify-event-delegate"))t.prototype=b,c=new t;else{var c={},f;for(f in b)c[f]=b[f]}c.preventDefault=
function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()}}else c=b,c.type=d;b.corrected=c;if("resize"==d){if(v==window.orientation)return null;v=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var d=c.changedTouches[0],k;for(k in d)delete c[k],c[k]=d[k]}return a.call(this,c)}};return c})},"dojo/html":function(){define("./_base/kernel,./_base/lang,./_base/array,./_base/declare,./dom,./dom-construct,./parser".split(","),
function(h,j,g,i,f,e,d){var c={};j.setObject("dojo.html",c);var b=0;c._secureForInnerHtml=function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};c._emptyNode=e.empty;c._setNodeContent=function(a,b){e.empty(a);if(b)if("string"==typeof b&&(b=e.toDom(b,a.ownerDocument)),!b.nodeType&&j.isArrayLike(b))for(var c=b.length,d=0;d<b.length;d=c==b.length?d+1:0)e.place(b[d],a,"last");else e.place(b,a,"last");return a};c._ContentSetter=i("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:h._scopeName,startup:!0,constructor:function(a,c){j.mixin(this,a||{});c=this.node=f.byId(this.node||c);if(!this.id)this.id=["Setter",c?c.id||c.tagName:"",b++].join("_")},set:function(a,b){if(void 0!==a)this.content=a;b&&this._mixin(b);this.onBegin();this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");
try{a=c._setNodeContent(a,this.content)}catch(b){var d=this.onContentError(b);try{a.innerHTML=d}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(g.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);e.empty(this.node)},
onBegin:function(){var a=this.content;if(j.isString(a)&&(this.cleanContent&&(a=c._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+
a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var b={};g.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var c=this;this.parseDeferred=d.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return c.parseResults=a},function(a){c._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id)}},
_onError:function(a,b,d){a=this["on"+a+"Error"].call(this,b);d?console.error(d,b):a&&c._setNodeContent(this.node,a,!0)}});c.set=function(a,b,d){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");return d?(new c._ContentSetter(j.mixin(d,{content:b,node:a}))).set():c._setNodeContent(a,b,!0)};return c})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(h,j,g){function i(a){return d[a]=new Function("item","index","array",a)}function f(a){var b=
!a;return function(c,e,f){var l=0,m=c&&c.length||0,g;m&&"string"==typeof c&&(c=c.split(""));"string"==typeof e&&(e=d[e]||i(e));if(f)for(;l<m;++l){if(g=!e.call(f,c[l],l,c),a^g)return!g}else for(;l<m;++l)if(g=!e(c[l],l,c),a^g)return!g;return b}}function e(a){var d=1,e=0,f=0;a||(d=e=f=-1);return function(i,l,m,g){if(g&&0<d)return b.lastIndexOf(i,l,m);var g=i&&i.length||0,p=a?g+f:e;m===c?m=a?e:g+f:0>m?(m=g+m,0>m&&(m=e)):m=m>=g?g+f:m;for(g&&"string"==typeof i&&(i=i.split(""));m!=p;m+=d)if(i[m]==l)return m;
return-1}}var d={},c,b={every:f(!1),some:f(!0),indexOf:e(!0),lastIndexOf:e(!1),forEach:function(a,b,c){var e=0,f=a&&a.length||0;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=d[b]||i(b));if(c)for(;e<f;++e)b.call(c,a[e],e,a);else for(;e<f;++e)b(a[e],e,a)},map:function(a,b,c,e){var f=0,l=a&&a.length||0,e=new (e||Array)(l);l&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=d[b]||i(b));if(c)for(;f<l;++f)e[f]=b.call(c,a[f],f,a);else for(;f<l;++f)e[f]=b(a[f],f,a);return e},filter:function(a,
b,c){var e=0,f=a&&a.length||0,l=[],m;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=d[b]||i(b));if(c)for(;e<f;++e)m=a[e],b.call(c,m,e,a)&&l.push(m);else for(;e<f;++e)m=a[e],b(m,e,a)&&l.push(m);return l},clearCache:function(){d={}}};g.mixin(h,b);return b})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(h,j){if(7>=h("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}var i={};i.byId=h("ie")?function(e,d){if("string"!=typeof e)return e;var c=d||
j.doc,b=e&&c.getElementById(e);if(b&&(b.attributes.id.value==e||b.id==e))return b;c=c.all[e];if(!c||c.nodeName)c=[c];for(var a=0;b=c[a++];)if(b.attributes&&b.attributes.id&&b.attributes.id.value==e||b.id==e)return b}:function(e,d){return("string"==typeof e?(d||j.doc).getElementById(e):e)||null};i.isDescendant=function(e,d){try{e=i.byId(e);for(d=i.byId(d);e;){if(e==d)return!0;e=e.parentNode}}catch(c){}return!1};h.add("css-user-select",function(e,d,c){if(!c)return!1;var e=c.style,d=["Khtml","O","Moz",
"Webkit"],c=d.length,b="userSelect";do if("undefined"!==typeof e[b])return b;while(c--&&(b=d[c]+"UserSelect"));return!1});var f=h("css-user-select");i.setSelectable=f?function(e,d){i.byId(e).style[f]=d?"":"none"}:function(e,d){var e=i.byId(e),c=e.getElementsByTagName("*"),b=c.length;if(d)for(e.removeAttribute("unselectable");b--;)c[b].removeAttribute("unselectable");else for(e.setAttribute("unselectable","on");b--;)c[b].setAttribute("unselectable","on")};return i})},"dojo/_base/window":function(){define(["./kernel",
"./lang","../sniff"],function(h,j,g){var i={global:h.global,doc:h.global.document||null,body:function(f){f=f||h.doc;return f.body||f.getElementsByTagName("body")[0]},setContext:function(f,e){h.global=i.global=f;h.doc=i.doc=e},withGlobal:function(f,e,d,c){var b=h.global;try{return h.global=i.global=f,i.withDoc.call(null,f.document,e,d,c)}finally{h.global=i.global=b}},withDoc:function(f,e,d,c){var b=i.doc,a=g("quirks"),k=g("ie"),n,q,o;try{h.doc=i.doc=f;h.isQuirks=g.add("quirks","BackCompat"==h.doc.compatMode,
!0,!0);if(g("ie")&&(o=f.parentWindow)&&o.navigator)n=parseFloat(o.navigator.appVersion.split("MSIE ")[1])||void 0,(q=f.documentMode)&&5!=q&&Math.floor(n)!=q&&(n=q),h.isIE=g.add("ie",n,!0,!0);d&&"string"==typeof e&&(e=d[e]);return e.apply(d,c||[])}finally{h.doc=i.doc=b,h.isQuirks=g.add("quirks",a,!0,!0),h.isIE=g.add("ie",k,!0,!0)}}};j.mixin(h,i);return i})},"dojo/dom-construct":function(){define("exports,./_base/kernel,./sniff,./_base/window,./dom,./dom-attr,./on".split(","),function(h,j,g,i,f,e){function d(a,
b){var c=b.parentNode;c&&c.insertBefore(a,b)}function c(a){if(a.canHaveChildren)try{a.innerHTML="";return}catch(c){}for(var d;d=a.lastChild;)b(d,a)}function b(a,b){a.firstChild&&c(a);b&&(g("ie")&&b.canHaveChildren&&"removeNode"in a?a.removeNode(!1):b.removeChild(a))}var a={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},
k=/<\s*([\w\:]+)/,n={},q=0,o="__"+j._scopeName+"ToDomId",l;for(l in a)if(a.hasOwnProperty(l))j=a[l],j.pre="option"==l?'<select multiple="multiple">':"<"+j.join("><")+">",j.post="</"+j.reverse().join("></")+">";h.toDom=function(b,c){var c=c||i.doc,d=c[o];d||(c[o]=d=++q+"",n[d]=c.createElement("div"));var b=b+"",e=b.match(k),f=e?e[1].toLowerCase():"",d=n[d];if(e&&a[f]){e=a[f];d.innerHTML=e.pre+b+e.post;for(e=e.length;e;--e)d=d.firstChild}else d.innerHTML=b;if(1==d.childNodes.length)return d.removeChild(d.firstChild);
for(f=c.createDocumentFragment();e=d.firstChild;)f.appendChild(e);return f};h.place=function(a,b,c){b=f.byId(b);"string"==typeof a&&(a=/^\s*</.test(a)?h.toDom(a,b.ownerDocument):f.byId(a));if("number"==typeof c){var e=b.childNodes;!e.length||e.length<=c?b.appendChild(a):d(a,e[0>c?0:c])}else switch(c){case "before":d(a,b);break;case "after":c=a;(e=b.parentNode)&&(e.lastChild==b?e.appendChild(c):e.insertBefore(c,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":h.empty(b);
b.appendChild(a);break;case "first":if(b.firstChild){d(a,b.firstChild);break}default:b.appendChild(a)}return a};h.create=function(a,b,c,d){var k=i.doc;if(c)c=f.byId(c),k=c.ownerDocument;"string"==typeof a&&(a=k.createElement(a));b&&e.set(a,b);c&&h.place(a,c,d);return a};h.empty=function(a){c(f.byId(a))};h.destroy=function(a){(a=f.byId(a))&&b(a,a.parentNode)}})},"dojo/dom-attr":function(){define("exports,./sniff,./_base/lang,./dom,./dom-style,./dom-prop".split(","),function(h,j,g,i,f,e){function d(a,
b){var c=a.getAttributeNode&&a.getAttributeNode(b);return!!c&&c.specified}var c={innerHTML:1,className:1,htmlFor:j("ie"),value:1},b={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};h.has=function(a,f){var n=f.toLowerCase();return c[e.names[n]||f]||d(i.byId(a),b[n]||f)};h.get=function(a,f){var a=i.byId(a),n=f.toLowerCase(),q=e.names[n]||f,o=a[q];if(c[q]&&"undefined"!=typeof o||"href"!=q&&("boolean"==typeof o||g.isFunction(o)))return o;n=b[n]||f;return d(a,n)?a.getAttribute(n):
null};h.set=function(a,d,n){a=i.byId(a);if(2==arguments.length){for(var q in d)h.set(a,q,d[q]);return a}q=d.toLowerCase();var o=e.names[q]||d,l=c[o];if("style"==o&&"string"!=typeof n)return f.set(a,n),a;if(l||"boolean"==typeof n||g.isFunction(n))return e.set(a,d,n);a.setAttribute(b[q]||d,n);return a};h.remove=function(a,c){i.byId(a).removeAttribute(b[c.toLowerCase()]||c)};h.getNodeProp=function(a,c){var a=i.byId(a),f=c.toLowerCase(),g=e.names[f]||c;if(g in a&&"href"!=g)return a[g];f=b[f]||c;return d(a,
f)?a.getAttribute(f):null}})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(h,j){function g(b,c,d){c=c.toLowerCase();if(h("ie")||h("trident")){if("auto"==d){if("height"==c)return b.offsetHeight;if("width"==c)return b.offsetWidth}if("fontweight"==c)switch(d){case 700:return"bold";default:return"normal"}}c in a||(a[c]=k.test(c));return a[c]?e(b,d):d}var i,f={};i=h("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);if(!b&&a.style)a.style.display=
"",b=c.getComputedStyle(a,null)}return b||{}}:h("ie")&&(9>h("ie")||h("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};f.getComputedStyle=i;var e;e=h("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,e=c.left,f=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(k){b=0}c.left=
e;d.left=f;return b}:function(a,b){return parseFloat(b)||0};f.toPixelValue=e;var d=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},c=9>h("ie")||10>h("ie")&&h("quirks")?function(a){try{return d(a).Opacity/100}catch(b){return 1}}:function(a){return i(a).opacity},b=9>h("ie")||10>h("ie")&&h("quirks")?function(a,c){var e=100*c,f=1==c;a.style.zoom=f?"":1;if(d(a))d(a,1).Opacity=e;else{if(f)return c;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+
e+")"}d(a,1).Enabled=!f;if("tr"==a.tagName.toLowerCase())for(e=a.firstChild;e;e=e.nextSibling)"td"==e.tagName.toLowerCase()&&b(e,c);return c}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},k=/margin|padding|width|height|max|min|offset/,n={cssFloat:1,styleFloat:1,"float":1};f.get=function(a,b){var d=j.byId(a),e=arguments.length;if(2==e&&"opacity"==b)return c(d);var b=n[b]?"cssFloat"in d.style?"cssFloat":"styleFloat":b,k=f.getComputedStyle(d);return 1==e?k:g(d,b,k[b]||d.style[b])};f.set=
function(a,c,d){var e=j.byId(a),k=arguments.length,p="opacity"==c,c=n[c]?"cssFloat"in e.style?"cssFloat":"styleFloat":c;if(3==k)return p?b(e,d):e.style[c]=d;for(var i in c)f.set(a,i,c[i]);return f.getComputedStyle(e)};return f})},"dojo/dom-prop":function(){define("exports,./_base/kernel,./sniff,./_base/lang,./dom,./dom-style,./dom-construct,./_base/connect".split(","),function(h,j,g,i,f,e,d,c){var b={},a=0,k=j._scopeName+"attrid";h.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",
colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};h.get=function(a,b){var a=f.byId(a),c=b.toLowerCase();return a[h.names[c]||b]};h.set=function(n,q,o){n=f.byId(n);if(2==arguments.length&&"string"!=typeof q){for(var l in q)h.set(n,l,q[l]);return n}l=q.toLowerCase();l=h.names[l]||q;if("style"==l&&"string"!=typeof o)return e.set(n,o),n;if("innerHTML"==l)return g("ie")&&n.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(d.empty(n),
n.appendChild(d.toDom(o,n.ownerDocument))):n[l]=o,n;if(i.isFunction(o)){var m=n[k];m||(m=a++,n[k]=m);b[m]||(b[m]={});var r=b[m][l];if(r)c.disconnect(r);else try{delete n[l]}catch(p){}o?b[m][l]=c.connect(n,l,o):n[l]=null;return n}n[l]=o;return n}})},"dojo/_base/connect":function(){define("./kernel,../on,../topic,../aspect,./event,../mouse,./sniff,./lang,../keys".split(","),function(h,j,g,i,f,e,d,c){function b(a,b,d,f,k){f=c.hitch(d,f);if(!a||!a.addEventListener&&!a.attachEvent)return i.after(a||h.global,
b,f,!0);"string"==typeof b&&"on"==b.substring(0,2)&&(b=b.substring(2));if(!a)a=h.global;if(!k)switch(b){case "keypress":b=o;break;case "mouseenter":b=e.enter;break;case "mouseleave":b=e.leave}return j(a,b,f,k)}function a(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}d.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==
a.charCode&&!d("opera")});var k={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},n=d("mac")?"metaKey":"ctrlKey",q=function(b,d){var e=c.mixin({},b,d);a(e);e.preventDefault=function(){b.preventDefault()};e.stopPropagation=function(){b.stopPropagation()};return e},o;o=d("events-keypress-typed")?function(a,b){var c=j(a,"keydown",function(a){var c=a.keyCode,e=13!=c&&32!=c&&(27!=c||!d("ie"))&&(48>c||90<c)&&(96>c||111<c)&&(186>c||192<c)&&(219>c||222<c)&&
229!=c;if(e||a.ctrlKey){e=e?0:c;if(a.ctrlKey){if(3==c||13==c)return b.call(a.currentTarget,a);e=95<e&&106>e?e-48:!a.shiftKey&&65<=e&&90>=e?e+32:k[e]||e}c=q(a,{type:"keypress",faux:!0,charCode:e});b.call(a.currentTarget,c);if(d("ie"))try{a.keyCode=c.keyCode}catch(f){}}}),e=j(a,"keypress",function(a){var c=a.charCode,a=q(a,{charCode:32<=c?c:0,faux:!0});return b.call(this,a)});return{remove:function(){c.remove();e.remove()}}}:d("opera")?function(a,b){return j(a,"keypress",function(a){var c=a.which;3==
c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&65<=c&&90>=c&&(c+=32);return b.call(this,q(a,{charCode:c}))})}:function(b,c){return j(b,"keypress",function(b){a(b);return c.call(this,b)})};var l={_keypress:o,connect:function(a,c,d,e,f){var k=arguments,n=[],l=0;n.push("string"==typeof k[0]?null:k[l++],k[l++]);var i=k[l+1];n.push("string"==typeof i||"function"==typeof i?k[l++]:null,k[l++]);for(i=k.length;l<i;l++)n.push(k[l]);return b.apply(this,n)},disconnect:function(a){a&&a.remove()},subscribe:function(a,
b,d){return g.subscribe(a,c.hitch(b,d))},publish:function(a,b){return g.publish.apply(g,[a].concat(b))},connectPublisher:function(a,b,c){var d=function(){l.publish(a,arguments)};return c?l.connect(b,c,d):l.connect(b,d)},isCopyKey:function(a){return a[n]}};l.unsubscribe=l.disconnect;c.mixin(h,l);return l})},"dojo/topic":function(){define(["./Evented"],function(h){var j=new h;return{publish:function(g,i){return j.emit.apply(j,arguments)},subscribe:function(g,i){return j.on.apply(j,arguments)}}})},"dojo/Evented":function(){define("dojo/Evented",
["./aspect","./on"],function(h,j){function g(){}var i=h.after;g.prototype={on:function(f,e){return j.parse(this,f,e,function(d,c){return i(d,"on"+c,e,!0)})},emit:function(f,e){var d=[this];d.push.apply(d,arguments);return j.emit.apply(j,d)}};return g})},"dojo/aspect":function(){define("dojo/aspect",[],function(){function h(c,b,a,d){var e=c[b],f="around"==b,g;if(f){var l=a(function(){return e.advice(this,arguments)});g={remove:function(){l&&(l=c=a=null)},advice:function(a,b){return l?l.apply(a,b):
e.advice(a,b)}}}else g={remove:function(){if(g.advice){var d=g.previous,e=g.next;if(!e&&!d)delete c[b];else if(d?d.next=e:c[b]=e,e)e.previous=d;c=a=g.advice=null}},id:i++,advice:a,receiveArguments:d};if(e&&!f)if("after"==b){for(;e.next&&(e=e.next););e.next=g;g.previous=e}else{if("before"==b)c[b]=g,g.next=e,e.previous=g}else c[b]=g;return g}function j(c){return function(b,a,d,e){var f=b[a],o;if(!f||f.target!=b){b[a]=o=function(){for(var a=i,b=arguments,c=o.before;c;)b=c.advice.apply(this,b)||b,c=c.next;
if(o.around)var d=o.around.advice(this,b);for(c=o.after;c&&c.id<a;){if(c.receiveArguments)var e=c.advice.apply(this,b),d=e===g?d:e;else d=c.advice.call(this,d,b);c=c.next}return d};if(f)o.around={advice:function(a,b){return f.apply(a,b)}};o.target=b}b=h(o||f,c,d,e);d=null;return b}}var g,i=0,f=j("after"),e=j("before"),d=j("around");return{before:e,around:d,after:f}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(h,j,g,i){if(j._fixEvent){var f=j._fixEvent;
j._fixEvent=function(d,c){(d=f(d,c))&&i.normalizeEvent(d);return d}}var e={fix:function(d,c){return j._fixEvent?j._fixEvent(d,c):d},stop:function(d){g("dom-addeventlistener")||d&&d.preventDefault?(d.preventDefault(),d.stopPropagation()):(d=d||window.event,d.cancelBubble=!0,j._preventDefault.call(d))}};h.fixEvent=e.fix;h.stopEvent=e.stop;return e})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(h,j,g,i){function f(a,b,c,d,e,f){f=f||"px";a=a.style;
if(!isNaN(b))a.left=b+f;if(!isNaN(c))a.top=c+f;if(0<=d)a.width=d+f;if(0<=e)a.height=e+f}function e(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function d(a){return"border-box"==c.boxModel||"table"==a.tagName.toLowerCase()||e(a)}var c={boxModel:"content-box"};if(h("ie"))c.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";c.getPadExtents=function(a,b){var a=g.byId(a),c=b||i.getComputedStyle(a),
d=i.toPixelValue,e=d(a,c.paddingLeft),f=d(a,c.paddingTop),m=d(a,c.paddingRight),c=d(a,c.paddingBottom);return{l:e,t:f,r:m,b:c,w:e+m,h:f+c}};c.getBorderExtents=function(a,b){var a=g.byId(a),c=i.toPixelValue,d=b||i.getComputedStyle(a),e="none"!=d.borderLeftStyle?c(a,d.borderLeftWidth):0,f="none"!=d.borderTopStyle?c(a,d.borderTopWidth):0,m="none"!=d.borderRightStyle?c(a,d.borderRightWidth):0,c="none"!=d.borderBottomStyle?c(a,d.borderBottomWidth):0;return{l:e,t:f,r:m,b:c,w:e+m,h:f+c}};c.getPadBorderExtents=
function(a,b){var a=g.byId(a),d=b||i.getComputedStyle(a),e=c.getPadExtents(a,d),d=c.getBorderExtents(a,d);return{l:e.l+d.l,t:e.t+d.t,r:e.r+d.r,b:e.b+d.b,w:e.w+d.w,h:e.h+d.h}};c.getMarginExtents=function(a,b){var a=g.byId(a),c=b||i.getComputedStyle(a),d=i.toPixelValue,e=d(a,c.marginLeft),f=d(a,c.marginTop),m=d(a,c.marginRight),c=d(a,c.marginBottom);return{l:e,t:f,r:m,b:c,w:e+m,h:f+c}};c.getMarginBox=function(a,b){var a=g.byId(a),d=b||i.getComputedStyle(a),e=c.getMarginExtents(a,d),f=a.offsetLeft-e.l,
l=a.offsetTop-e.t,m=a.parentNode,r=i.toPixelValue;if(h("mozilla")){var p=parseFloat(d.left),d=parseFloat(d.top);!isNaN(p)&&!isNaN(d)?(f=p,l=d):m&&m.style&&(m=i.getComputedStyle(m),"visible"!=m.overflow&&(f+="none"!=m.borderLeftStyle?r(a,m.borderLeftWidth):0,l+="none"!=m.borderTopStyle?r(a,m.borderTopWidth):0))}else if((h("opera")||8==h("ie")&&!h("quirks"))&&m)m=i.getComputedStyle(m),f-="none"!=m.borderLeftStyle?r(a,m.borderLeftWidth):0,l-="none"!=m.borderTopStyle?r(a,m.borderTopWidth):0;return{l:f,
t:l,w:a.offsetWidth+e.w,h:a.offsetHeight+e.h}};c.getContentBox=function(a,b){var a=g.byId(a),d=b||i.getComputedStyle(a),e=a.clientWidth,f=c.getPadExtents(a,d),l=c.getBorderExtents(a,d);e?(d=a.clientHeight,l.w=l.h=0):(e=a.offsetWidth,d=a.offsetHeight);h("opera")&&(f.l+=l.l,f.t+=l.t);return{l:f.l,t:f.t,w:e-f.w-l.w,h:d-f.h-l.h}};c.setContentSize=function(a,b,e){var a=g.byId(a),i=b.w,b=b.h;d(a)&&(e=c.getPadBorderExtents(a,e),0<=i&&(i+=e.w),0<=b&&(b+=e.h));f(a,NaN,NaN,i,b)};var b={l:0,t:0,w:0,h:0};c.setMarginBox=
function(a,k,n){var a=g.byId(a),q=n||i.getComputedStyle(a),n=k.w,o=k.h,l=d(a)?b:c.getPadBorderExtents(a,q),q=c.getMarginExtents(a,q);if(h("webkit")&&e(a)){var m=a.style;if(0<=n&&!m.width)m.width="4px";if(0<=o&&!m.height)m.height="4px"}0<=n&&(n=Math.max(n-l.w-q.w,0));0<=o&&(o=Math.max(o-l.h-q.h,0));f(a,k.l,k.t,n,o)};c.isBodyLtr=function(a){a=a||j.doc;return"ltr"==(j.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};c.docScroll=function(a){var a=a||j.doc,b=j.doc.parentWindow||j.doc.defaultView;
return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=h("quirks")?j.body(a):a.documentElement)&&{x:c.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};if(h("ie"))c.getIeDocumentElementOffset=function(a){a=a||j.doc;a=a.documentElement;if(8>h("ie")){var b=a.getBoundingClientRect(),c=b.left,b=b.top;7>h("ie")&&(c+=a.clientLeft,b+=a.clientTop);return{x:0>c?0:c,y:0>b?0:b}}return{x:0,y:0}};c.fixIeBiDiScrollLeft=function(a,b){var b=b||j.doc,d=h("ie");if(d&&!c.isBodyLtr(b)){var e=h("quirks"),
f=e?j.body(b):b.documentElement,l=j.global;6==d&&!e&&l.frameElement&&f.scrollHeight>f.clientHeight&&(a+=f.clientLeft);return 8>d||e?a+f.clientWidth-f.scrollWidth:-a}return a};c.position=function(a,b){var a=g.byId(a),d=j.body(a.ownerDocument),e=a.getBoundingClientRect(),e={x:e.left,y:e.top,w:e.right-e.left,h:e.bottom-e.top};if(9>h("ie")){var f=c.getIeDocumentElementOffset(a.ownerDocument);e.x-=f.x+(h("quirks")?d.clientLeft+d.offsetLeft:0);e.y-=f.y+(h("quirks")?d.clientTop+d.offsetTop:0)}b&&(d=c.docScroll(a.ownerDocument),
e.x+=d.x,e.y+=d.y);return e};c.getMarginSize=function(a,b){var a=g.byId(a),d=c.getMarginExtents(a,b||i.getComputedStyle(a)),e=a.getBoundingClientRect();return{w:e.right-e.left+d.w,h:e.bottom-e.top+d.h}};c.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=a.offsetY;if(!h("dom-addeventlistener")){var b=a.target,b=b&&b.ownerDocument||document,d=h("quirks")?b.body:b.documentElement,e=c.getIeDocumentElementOffset(b);a.pageX=a.clientX+c.fixIeBiDiScrollLeft(d.scrollLeft||0,b)-e.x;
a.pageY=a.clientY+(d.scrollTop||0)-e.y}};return c})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(h,j,g,i,f){function e(d,c){var b=function(a,b){return j(a,d,function(d){if(c)return c(d,b);if(!i.isDescendant(d.relatedTarget,a))return b.call(this,d)})};b.bubble=function(a){return e(d,function(b,c){var d=a(b.target),e=b.relatedTarget;if(d&&d!=(e&&1==e.nodeType&&a(e)))return c.call(d,b)})};return b}g.add("dom-quirks",f.doc&&"BackCompat"==f.doc.compatMode);
g.add("events-mouseenter",f.doc&&"onmouseenter"in f.doc.createElement("div"));g.add("events-mousewheel",f.doc&&"onmousewheel"in f.doc);f=g("dom-quirks")&&g("ie")||!g("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(d,c){return d.button&c},isLeft:function(d){return d.button&1},isMiddle:function(d){return d.button&4},isRight:function(d){return d.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(d,c){return d.button==c},isLeft:function(d){return 0==d.button},isMiddle:function(d){return 1==
d.button},isRight:function(d){return 2==d.button}};h.mouseButtons=f;h=g("events-mousewheel")?"mousewheel":function(d,c){return j(d,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;c.call(this,b)})};return{_eventHandler:e,enter:e("mouseover"),leave:e("mouseout"),wheel:h,isLeft:f.isLeft,isMiddle:f.isMiddle,isRight:f.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(h,j,g){h._name="browser";j.mixin(h,{isBrowser:!0,isFF:g("ff"),isIE:g("ie"),isKhtml:g("khtml"),
isWebKit:g("webkit"),isMozilla:g("mozilla"),isMoz:g("mozilla"),isOpera:g("opera"),isSafari:g("safari"),isChrome:g("chrome"),isMac:g("mac"),isIos:g("ios"),isAndroid:g("android"),isWii:g("wii"),isQuirks:g("quirks"),isAir:g("air")});h.locale=h.locale||(g("ie")?navigator.userLanguage:navigator.language).toLowerCase();return g})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(h,j){return h.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:j("webkit")?91:224,PAUSE:19,
CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,
F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:j("mac")&&!j("air")?j("safari")?91:224:17}})},"dojo/parser":function(){define("require,./_base/kernel,./_base/lang,./_base/array,./_base/config,./_base/html,./_base/window,./_base/url,./_base/json,./aspect,./date/stamp,./Deferred,./has,./query,./on,./ready".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m){function r(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<
u){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=u}return b}function p(a){var b=a.join();if(!s[b]){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];c[c.length]=s[f]=s[f]||g.getObject(f)||~f.indexOf("/")&&h(f)}a=c.shift();s[b]=c.length?a.createSubclass?a.createSubclass(c):a.extend.apply(a,c):a}return s[b]}var u=0;a.after(g,"extend",function(){u++},!0);var s={},t={_clearCache:function(){u++;s={}},_functionFromScript:function(a,b){var c="",d="",e=a.getAttribute(b+
"args")||a.getAttribute("args"),f=a.getAttribute("with"),e=(e||"").split(/\s*,\s*/);f&&f.length&&i.forEach(f.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(e,c+a.innerHTML+d)},instantiate:function(a,b,c){var b=b||{},c=c||{},d=(c.scope||j._scopeName)+"Type",e="data-"+(c.scope||j._scopeName)+"-",f=e+"type",k=e+"mixins",p=[];i.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(f)||a.getAttribute(d);if(c){var e=a.getAttribute(k),c=e?[c].concat(e.split(/\s*,\s*/)):[c];
p.push({node:a,types:c})}});return this._instantiate(p,b,c)},_instantiate:function(a,b,c){a=i.map(a,function(a){var d=a.ctor||p(a.types);if(!d)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(d,a.node,b,c,a.scripts,a.inherited)},this);!b._started&&!c.noStart&&i.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a},construct:function(d,e,f,p,n,m){var v;var t=d&&d.prototype,p=p||{},u={};p.defaults&&g.mixin(u,p.defaults);
m&&g.mixin(u,m);var h;q("dom-attributes-explicit")?h=e.attributes:q("dom-attributes-specified-flag")?h=i.filter(e.attributes,function(a){return a.specified}):(m=(/^input$|^img$/i.test(e.nodeName)?e:e.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),h=i.map(m.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==e.nodeName&&"value"==a||"enctype"==b?e.getAttribute(b):e.getAttributeNode(b).value}}));var s=
p.scope||j._scopeName,m="data-"+s+"-",B={};"dojo"!==s&&(B[m+"props"]="data-dojo-props",B[m+"type"]="data-dojo-type",B[m+"mixins"]="data-dojo-mixins",B[s+"type"]="dojoType",B[m+"id"]="data-dojo-id");for(var s=0,z,C=[],H,M;z=h[s++];){var K=z.name,P=K.toLowerCase();z=z.value;switch(B[P]||P){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":M=z;break;case "data-dojo-id":case "jsid":H=z;break;case "data-dojo-attach-point":case "dojoattachpoint":u.dojoAttachPoint=
z;break;case "data-dojo-attach-event":case "dojoattachevent":u.dojoAttachEvent=z;break;case "class":u["class"]=e.className;break;case "style":u.style=e.style&&e.style.cssText;break;default:if(K in t||(K=r(d)[P]||K),K in t)switch(typeof t[K]){case "string":u[K]=z;break;case "number":u[K]=z.length?Number(z):NaN;break;case "boolean":u[K]="false"!=z.toLowerCase();break;case "function":u[K]=""===z||-1!=z.search(/[^\w\.]+/i)?new Function(z):g.getObject(z,!1)||new Function(z);C.push(K);break;default:P=t[K],
u[K]=P&&"length"in P?z?z.split(/\s*,\s*/):[]:P instanceof Date?""==z?new Date(""):"now"==z?new Date:k.fromISOString(z):P instanceof c?j.baseUrl+z:b.fromJson(z)}else u[K]=z}}for(s=0;s<C.length;s++)h=C[s].toLowerCase(),e.removeAttribute(h),e[h]=null;if(M)try{M=b.fromJson.call(p.propsThis,"{"+M+"}"),g.mixin(u,M)}catch(U){throw Error(U.toString()+" in data-dojo-props='"+M+"'");}g.mixin(u,f);n||(n=d&&(d._noScript||t._noScript)?[]:o("> script[type^='dojo/']",e));f=[];p=[];M=[];C=[];if(n)for(s=0;s<n.length;s++){var J=
n[s];e.removeChild(J);h=J.getAttribute(m+"event")||J.getAttribute("event");B=J.getAttribute(m+"prop");K=J.getAttribute(m+"method");P=J.getAttribute(m+"advice");z=J.getAttribute("type");J=this._functionFromScript(J,m);h?"dojo/connect"==z?f.push({method:h,func:J}):"dojo/on"==z?C.push({event:h,func:J}):u[h]=J:"dojo/aspect"==z?f.push({method:K,advice:P,func:J}):"dojo/watch"==z?M.push({prop:B,func:J}):p.push(J)}v=(n=d.markupFactory||t.markupFactory)?n(u,e,d):new d(u,e),d=v;H&&g.setObject(H,d);for(s=0;s<
f.length;s++)a[f[s].advice||"after"](d,f[s].method,g.hitch(d,f[s].func),!0);for(s=0;s<p.length;s++)p[s].call(d);for(s=0;s<M.length;s++)d.watch(M[s].prop,M[s].func);for(s=0;s<C.length;s++)l(d,C[s].event,C[s].func);return d},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,textDir:b.getAttribute(m)||d.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var d=[],e=[],f=
{},k=(b.scope||j._scopeName)+"Type",l="data-"+(b.scope||j._scopeName)+"-",g=l+"type",m=l+"textdir",l=l+"mixins",o=a.firstChild,r=b.inherited;if(!r){var t=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&t(a.parentNode,b)},r={dir:t(a,"dir"),lang:t(a,"lang"),textDir:t(a,m)},u;for(u in r)r[u]||delete r[u]}for(var r={inherited:r},s,K;;)if(o)if(1!=o.nodeType)o=o.nextSibling;else if(s&&"script"==o.nodeName.toLowerCase())(P=o.getAttribute("type"))&&/^dojo\/\w/i.test(P)&&s.push(o),o=
o.nextSibling;else if(K)o=o.nextSibling;else{var P=o.getAttribute(g)||o.getAttribute(k);u=o.firstChild;if(!P&&(!u||3==u.nodeType&&!u.nextSibling))o=o.nextSibling;else{K=null;if(P){var U=o.getAttribute(l);s=U?[P].concat(U.split(/\s*,\s*/)):[P];try{K=p(s)}catch(J){}K||i.forEach(s,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,e[e.length]=a)});U=K&&!K.prototype._noScript?[]:null;r={types:s,ctor:K,parent:r,node:o,scripts:U};r.inherited=c(r);d.push(r)}else r={node:o,scripts:s,parent:r};o=u;s=U;K=K&&K.prototype.stopParser&&
!b.template}}else{if(!r||!r.node)break;o=r.node.nextSibling;K=!1;r=r.parent;s=r.scripts}var G=new n;e.length?(q("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+e.join(", ")),h(e,function(){G.resolve(i.filter(d,function(a){if(!a.ctor)try{a.ctor=p(a.types)}catch(c){}for(var d=a.parent;d&&!d.types;)d=d.parent;var e=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(e&&e.stopParser&&!b.template);a.instantiate=!d||d.instantiate&&d.instantiateChildren;return a.instantiate}))})):
G.resolve(d);return G.promise},_require:function(a){var a=b.fromJson("{"+a.innerHTML+"}"),c=[],d=[],e=new n,f;for(f in a)c.push(f),d.push(a[f]);h(d,function(){for(var a=0;a<c.length;a++)g.setObject(c[a],arguments[a]);e.resolve(arguments)});return e.promise},_scanAmd:function(a){var b=new n,c=b.promise;b.resolve(!0);var d=this;o("script[type='dojo/require']",a).forEach(function(a){c=c.then(function(){return d._require(a)});a.parentNode.removeChild(a)});return c},parse:function(a,b){var c;!b&&a&&a.rootNode?
(b=a,c=b.rootNode):a&&g.isObject(a)&&!("nodeType"in a)?b=a:c=a;c=c?e.byId(c):d.body();var b=b||{},f=b.template?{template:!0}:{},k=[],p=this,n=this._scanAmd(c,b).then(function(){return p.scan(c,b)}).then(function(a){return k=k.concat(p._instantiate(a,f,b))}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});g.mixin(k,n);return k}};j.parser=t;f.parseOnLoad&&m(100,t,"parse");return t})},"dojo/_base/html":function(){define("./kernel,../dom,../dom-style,../dom-attr,../dom-prop,../dom-class,../dom-construct,../dom-geometry".split(","),
function(h,j,g,i,f,e,d,c){h.byId=j.byId;h.isDescendant=j.isDescendant;h.setSelectable=j.setSelectable;h.getAttr=i.get;h.setAttr=i.set;h.hasAttr=i.has;h.removeAttr=i.remove;h.getNodeProp=i.getNodeProp;h.attr=function(b,a,c){return 2==arguments.length?i["string"==typeof a?"get":"set"](b,a):i.set(b,a,c)};h.hasClass=e.contains;h.addClass=e.add;h.removeClass=e.remove;h.toggleClass=e.toggle;h.replaceClass=e.replace;h._toDom=h.toDom=d.toDom;h.place=d.place;h.create=d.create;h.empty=function(b){d.empty(b)};
h._destroyElement=h.destroy=function(b){d.destroy(b)};h._getPadExtents=h.getPadExtents=c.getPadExtents;h._getBorderExtents=h.getBorderExtents=c.getBorderExtents;h._getPadBorderExtents=h.getPadBorderExtents=c.getPadBorderExtents;h._getMarginExtents=h.getMarginExtents=c.getMarginExtents;h._getMarginSize=h.getMarginSize=c.getMarginSize;h._getMarginBox=h.getMarginBox=c.getMarginBox;h.setMarginBox=c.setMarginBox;h._getContentBox=h.getContentBox=c.getContentBox;h.setContentSize=c.setContentSize;h._isBodyLtr=
h.isBodyLtr=c.isBodyLtr;h._docScroll=h.docScroll=c.docScroll;h._getIeDocumentElementOffset=h.getIeDocumentElementOffset=c.getIeDocumentElementOffset;h._fixIeBiDiScrollLeft=h.fixIeBiDiScrollLeft=c.fixIeBiDiScrollLeft;h.position=c.position;h.marginBox=function(b,a){return a?c.setMarginBox(b,a):c.getMarginBox(b)};h.contentBox=function(b,a){return a?c.setContentSize(b,a):c.getContentBox(b)};h.coords=function(b,a){h.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");var b=j.byId(b),
d=g.getComputedStyle(b),d=c.getMarginBox(b,d),e=c.position(b,a);d.x=e.x;d.y=e.y;return d};h.getProp=f.get;h.setProp=f.set;h.prop=function(b,a,c){return 2==arguments.length?f["string"==typeof a?"get":"set"](b,a):f.set(b,a,c)};h.getStyle=g.get;h.setStyle=g.set;h.getComputedStyle=g.getComputedStyle;h.__toPixelValue=h.toPixelValue=g.toPixelValue;h.style=function(b,a,c){switch(arguments.length){case 1:return g.get(b);case 2:return g["string"==typeof a?"get":"set"](b,a)}return g.set(b,a,c)};return h})},
"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(h,j,g){function i(b){if("string"==typeof b||b instanceof String){if(b&&!e.test(b))return d[0]=b,d;b=b.split(e);b.length&&!b[0]&&b.shift();b.length&&!b[b.length-1]&&b.pop();return b}return!b?[]:j.filter(b,function(a){return a})}var f,e=/\s+/,d=[""],c={};return f={contains:function(b,a){return 0<=(" "+g.byId(b).className+" ").indexOf(" "+a+" ")},add:function(b,a){var b=g.byId(b),a=i(a),c=b.className,d,c=c?" "+c+" ":
" ";d=c.length;for(var e=0,f=a.length,l;e<f;++e)(l=a[e])&&0>c.indexOf(" "+l+" ")&&(c+=l+" ");d<c.length&&(b.className=c.substr(1,c.length-2))},remove:function(b,a){var b=g.byId(b),c;if(void 0!==a){a=i(a);c=" "+b.className+" ";for(var d=0,e=a.length;d<e;++d)c=c.replace(" "+a[d]+" "," ");c=h.trim(c)}else c="";b.className!=c&&(b.className=c)},replace:function(b,a,d){b=g.byId(b);c.className=b.className;f.remove(c,d);f.add(c,a);b.className!==c.className&&(b.className=c.className)},toggle:function(b,a,
c){b=g.byId(b);if(void 0===c)for(var a=i(a),d=0,e=a.length,o;d<e;++d)o=a[d],f[f.contains(b,o)?"remove":"add"](b,o);else f[c?"add":"remove"](b,a);return c}}})},"dojo/_base/url":function(){define(["./kernel"],function(h){var j=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,g=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,i=function(){for(var f=arguments,e=[f[0]],d=1;d<f.length;d++)if(f[d]){var c=new i(f[d]+""),e=new i(e[0]+"");if(""==c.path&&!c.scheme&&!c.authority&&
!c.query){if(null!=c.fragment)e.fragment=c.fragment;c=e}else if(!c.scheme&&(c.scheme=e.scheme,!c.authority&&(c.authority=e.authority,"/"!=c.path.charAt(0)))){for(var e=(e.path.substring(0,e.path.lastIndexOf("/")+1)+c.path).split("/"),b=0;b<e.length;b++)"."==e[b]?b==e.length-1?e[b]="":(e.splice(b,1),b--):0<b&&!(1==b&&""==e[0])&&".."==e[b]&&".."!=e[b-1]&&(b==e.length-1?(e.splice(b,1),e[b-1]=""):(e.splice(b-1,2),b-=2));c.path=e.join("/")}e=[];c.scheme&&e.push(c.scheme,":");c.authority&&e.push("//",c.authority);
e.push(c.path);c.query&&e.push("?",c.query);c.fragment&&e.push("#",c.fragment)}this.uri=e.join("");f=this.uri.match(j);this.scheme=f[2]||(f[1]?"":null);this.authority=f[4]||(f[3]?"":null);this.path=f[5];this.query=f[7]||(f[6]?"":null);this.fragment=f[9]||(f[8]?"":null);if(null!=this.authority)f=this.authority.match(g),this.user=f[3]||null,this.password=f[4]||null,this.host=f[6]||f[7],this.port=f[9]||null};i.prototype.toString=function(){return this.uri};return h._Url=i})},"dojo/_base/json":function(){define(["./kernel",
"../json"],function(h,j){h.fromJson=function(g){return eval("("+g+")")};h._escapeString=j.stringify;h.toJsonIndentStr="\t";h.toJson=function(g,i){return j.stringify(g,function(f,e){if(e){var d=e.__json__||e.json;if("function"==typeof d)return d.call(e)}return e},i&&h.toJsonIndentStr)};return h})},"dojo/json":function(){define(["./has"],function(h){var j="undefined"!=typeof JSON;h.add("json-parse",j);h.add("json-stringify",j&&'{"a":1}'==JSON.stringify({a:0},function(g,f){return f||1}));if(h("json-stringify"))return JSON;
var g=function(g){return('"'+g.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:h("json-parse")?JSON.parse:function(g,f){if(f&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(g))throw new SyntaxError("Invalid characters in JSON");return eval("("+g+")")},stringify:function(i,f,e){function d(b,a,k){f&&(b=f(k,b));var n;n=typeof b;if("number"==
n)return isFinite(b)?b+"":"null";if("boolean"==n)return b+"";if(null===b)return"null";if("string"==typeof b)return g(b);if("function"==n||"undefined"==n)return c;if("function"==typeof b.toJSON)return d(b.toJSON(k),a,k);if(b instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,c,d){a=b["getUTC"+c]()+(d?1:0);return 10>a?"0"+a:a});if(b.valueOf()!==b)return d(b.valueOf(),a,k);var i=e?a+e:"",o=e?" ":"",l=e?"\n":"";if(b instanceof Array){for(var o=
b.length,m=[],k=0;k<o;k++)n=d(b[k],i,k),"string"!=typeof n&&(n="null"),m.push(l+i+n);return"["+m.join(",")+l+a+"]"}m=[];for(k in b){var r;if(b.hasOwnProperty(k)){if("number"==typeof k)r='"'+k+'"';else if("string"==typeof k)r=g(k);else continue;n=d(b[k],i,k);"string"==typeof n&&m.push(l+i+r+":"+o+n)}}return"{"+m.join(",")+l+a+"}"}var c;"string"==typeof f&&(e=f,f=null);return d(i,"","")}}})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(h,j){var g={};h.setObject("dojo.date.stamp",
g);g.fromISOString=function(i,f){if(!g._isoRegExp)g._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;var e=g._isoRegExp.exec(i),d=null;if(e){e.shift();e[1]&&e[1]--;e[6]&&(e[6]*=1E3);f&&(f=new Date(f),j.forEach(j.map("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds".split(","),function(a){return f["get"+a]()}),function(a,b){e[b]=e[b]||a}));d=new Date(e[0]||1970,e[1]||0,e[2]||1,e[3]||0,e[4]||0,e[5]||0,e[6]||0);100>e[0]&&
d.setFullYear(e[0]||1970);var c=0,b=e[7]&&e[7].charAt(0);"Z"!=b&&(c=60*(e[8]||0)+(Number(e[9])||0),"-"!=b&&(c*=-1));b&&(c-=d.getTimezoneOffset());c&&d.setTime(d.getTime()+6E4*c)}return d};g.toISOString=function(g,f){var e=function(a){return 10>a?"0"+a:a},f=f||{},d=[],c=f.zulu?"getUTC":"get",b="";"time"!=f.selector&&(b=g[c+"FullYear"](),b=["0000".substr((b+"").length)+b,e(g[c+"Month"]()+1),e(g[c+"Date"]())].join("-"));d.push(b);if("date"!=f.selector){b=[e(g[c+"Hours"]()),e(g[c+"Minutes"]()),e(g[c+
"Seconds"]())].join(":");c=g[c+"Milliseconds"]();f.milliseconds&&(b+="."+(100>c?"0":"")+e(c));if(f.zulu)b+="Z";else if("time"!=f.selector)var c=g.getTimezoneOffset(),a=Math.abs(c),b=b+((0<c?"-":"+")+e(Math.floor(a/60))+":"+e(a%60));d.push(b)}return d.join("T")};return g})},"dojo/Deferred":function(){define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(h,j,g,i,f){var e=Object.freeze||function(){},d=function(a,b,d,e,f){2===b&&
k.instrumentRejected&&0===a.length&&k.instrumentRejected(d,!1,e,f);for(f=0;f<a.length;f++)c(a[f],b,d,e)},c=function(c,d,e,f){var g=c[d],i=c.deferred;if(g)try{var p=g(e);if(0===d)"undefined"!==typeof p&&a(i,d,p);else{if(p&&"function"===typeof p.then){c.cancel=p.cancel;p.then(b(i,1),b(i,2),b(i,0));return}a(i,1,p)}}catch(u){a(i,2,u)}else a(i,d,e);2===d&&k.instrumentRejected&&k.instrumentRejected(e,!!g,f,i.promise)},b=function(b,c){return function(d){a(b,c,d)}},a=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);
break;case 1:a.resolve(c);break;case 2:a.reject(c)}},k=function(a){var b=this.promise=new i,f=this,l,m,r,p=!1,u=[];Error.captureStackTrace&&(Error.captureStackTrace(f,k),Error.captureStackTrace(b,k));this.isResolved=b.isResolved=function(){return 1===l};this.isRejected=b.isRejected=function(){return 2===l};this.isFulfilled=b.isFulfilled=function(){return!!l};this.isCanceled=b.isCanceled=function(){return p};this.progress=function(a,c){if(l){if(!0===c)throw Error("This deferred has already been fulfilled.");
return b}d(u,0,a,null,f);return b};this.resolve=function(a,c){if(l){if(!0===c)throw Error("This deferred has already been fulfilled.");return b}d(u,l=1,m=a,null,f);u=null;return b};var h=this.reject=function(a,c){if(l){if(!0===c)throw Error("This deferred has already been fulfilled.");return b}Error.captureStackTrace&&Error.captureStackTrace(r={},h);d(u,l=2,m=a,r,f);u=null;return b};this.then=b.then=function(a,d,e){var f=[e,a,d];f.cancel=b.cancel;f.deferred=new k(function(a){return f.cancel&&f.cancel(a)});
l&&!u?c(f,l,m,r):u.push(f);return f.deferred.promise};this.cancel=b.cancel=function(b,c){if(l){if(!0===c)throw Error("This deferred has already been fulfilled.");}else{if(a)var d=a(b),b="undefined"===typeof d?b:d;p=!0;if(l){if(2===l&&m===b)return b}else return"undefined"===typeof b&&(b=new g),h(b),b}};e(b)};k.prototype.toString=function(){return"[object Deferred]"};f&&f(k);return k})},"dojo/errors/CancelError":function(){define(["./create"],function(h){return h("CancelError",null,null,{dojoType:"cancel"})})},
"dojo/errors/create":function(){define(["../_base/lang"],function(h){return function(j,g,i,f){var i=i||Error,e=function(d){if(i===Error){Error.captureStackTrace&&Error.captureStackTrace(this,e);var c=Error.call(this,d),b;for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b]);this.message=d;this.stack=c.stack}else i.apply(this,arguments);g&&g.apply(this,arguments)};e.prototype=h.delegate(i.prototype,f);e.prototype.name=j;return e.prototype.constructor=e}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(h){function j(){throw new TypeError("abstract");}return h.extend(function(){},{then:function(){j()},cancel:function(){j()},isResolved:function(){j()},isRejected:function(){j()},isFulfilled:function(){j()},isCanceled:function(){j()},always:function(g){return this.then(g,g)},otherwise:function(g){return this.then(null,g)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer",
"../has","../_base/lang","../_base/array"],function(h,j,g,i){function f(a,b,c){var d="";a&&a.stack&&(d+=a.stack);b&&b.stack&&(d+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(d+="\n    ----------------------------------------\n"+c.stack);console.error(a,d)}function e(a,b,c,d){b||f(a,c,d)}function d(d,e,f,l){i.some(b,function(a){if(a.error===d){if(e)a.handled=!0;return!0}})||b.push({error:d,rejection:f,handled:e,
deferred:l,timestamp:(new Date).getTime()});a||(a=setTimeout(c,k))}function c(){var d=(new Date).getTime(),e=d-k;b=i.filter(b,function(a){return a.timestamp<e?(a.handled||f(a.error,a.rejection,a.deferred),!1):!0});a=b.length?setTimeout(c,b[0].timestamp+k-d):!1}j.add("config-useDeferredInstrumentation","report-unhandled-rejections");var b=[],a=!1,k=1E3;return function(a){var b=j("config-useDeferredInstrumentation");if(b){h.on("resolved",g.hitch(console,"log","resolved"));h.on("rejected",g.hitch(console,
"log","rejected"));h.on("progress",g.hitch(console,"log","progress"));var c=[];"string"===typeof b&&(c=b.split(","),b=c.shift());if("report-rejections"===b)a.instrumentRejected=e;else if("report-unhandled-rejections"===b||!0===b||1===b)a.instrumentRejected=d,k=parseInt(c[0],10)||k;else throw Error("Unsupported instrumentation usage <"+b+">");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(h,j,g){function i(d){setTimeout(function(){e.apply(f,d)},0)}
var f=new g,e=f.emit;f.emit=null;j.prototype.trace=function(){var d=h._toArray(arguments);this.then(function(c){i(["resolved",c].concat(d))},function(c){i(["rejected",c].concat(d))},function(c){i(["progress",c].concat(d))});return this};j.prototype.traceRejected=function(){var d=h._toArray(arguments);this.otherwise(function(c){i(["rejected",c].concat(d))});return this};return f})},"dojo/query":function(){define("./_base/kernel,./has,./dom,./on,./_base/array,./_base/lang,./selector/_loader,./selector/_loader!default".split(","),
function(h,j,g,i,f,e,d,c){function b(a,b){var c=function(c,d){if("string"==typeof d&&(d=g.byId(d),!d))return new b([]);var e="string"==typeof c?a(c,d):c?c.orphan?c:[c]:[];return e.orphan?e:new b(e)};c.matches=a.match||function(a,b,d){return 0<c.filter([a],b,d).length};c.filter=a.filter||function(a,b,d){return c(b,d).filter(function(b){return-1<f.indexOf(a,b)})};if("function"!=typeof a)var d=a.search,a=function(a,b){return d(b||document,a)};return c}j.add("array-extensible",function(){return 1==e.delegate([],
{length:1}).length&&!j("bug-for-in-skips-shadowed")});var a=Array.prototype,k=a.slice,n=a.concat,q=f.forEach,o=function(a,b,c){b=[0].concat(k.call(b,0));c=c||h.global;return function(d){b[0]=d;return a.apply(c,b)}},l=function(a){var b=this instanceof m&&j("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var d=b?this:[],f=d.length=c.length,k=0;k<f;k++)d[k]=c[k];if(b)return d;c=d}e._mixin(c,r);c._NodeListCtor=function(a){return m(a)};return c},
m=l,r=m.prototype=j("array-extensible")?[]:{};m._wrap=r._wrap=function(a,b,c){a=new (c||this._NodeListCtor||m)(a);return b?a._stash(b):a};m._adaptAsMap=function(a,b){return function(){return this.map(o(a,arguments,b))}};m._adaptAsForEach=function(a,b){return function(){this.forEach(o(a,arguments,b));return this}};m._adaptAsFilter=function(a,b){return function(){return this.filter(o(a,arguments,b))}};m._adaptWithCondition=function(a,b,c){return function(){var d=arguments,e=o(a,d,c);if(b.call(c||h.global,
d))return this.map(e);this.forEach(e);return this}};q(["slice","splice"],function(b){var c=a[b];r[b]=function(){return this._wrap(c.apply(this,arguments),"slice"==b?this:null)}});q(["indexOf","lastIndexOf","every","some"],function(a){var b=f[a];r[a]=function(){return b.apply(h,[this].concat(k.call(arguments,0)))}});e.extend(l,{constructor:m,_NodeListCtor:m,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return i(c,
a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=k.call(this,0),c=f.map(arguments,function(a){return k.call(a,0)});return this._wrap(n.apply(b,c),this)},map:function(a,b){return this._wrap(f.map(this,a,b),this)},forEach:function(a,b){q(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=p._filterResult(this,b[0]);if(1==b.length)return c._stash(this);
d=1}return this._wrap(f.filter(c,b[d],b[d+1]),this)},instantiate:function(a,b){var c=e.isFunction(a)?a:e.getObject(a),b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);q(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var p=b(c,l);h.query=b(c,function(a){return l(a)});p.load=function(a,c,e){d.load(a,c,function(a){e(b(a,l))})};h._filterQueryResult=p._filterResult=function(a,b,c){return new l(p.filter(a,
b,c))};h.NodeList=p.NodeList=l;return p})},"dojo/selector/_loader":function(){define(["../has","require"],function(h,j){var g=document.createElement("div");h.add("dom-qsa2.1",!!g.querySelectorAll);h.add("dom-qsa3",function(){try{return g.innerHTML="<p class='TEST'></p>",1==g.querySelectorAll(".TEST:empty").length}catch(f){}});var i;return{load:function(f,e,d){var c=j,f="default"==f?h("config-selectorEngine")||"css3":f,f="css2"==f||"lite"==f?"./lite":"css2.1"==f?h("dom-qsa2.1")?"./lite":"./acme":"css3"==
f?h("dom-qsa3")?"./lite":"./acme":"acme"==f?"./acme":(c=e)&&f;if("?"==f.charAt(f.length-1))var f=f.substring(0,f.length-1),b=!0;if(b&&(h("dom-compliant-qsa")||i))return d(i);c([f],function(a){"./lite"!=f&&(i=a);d(a)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(h,j,g,i,f){var e=i.trim,d=g.forEach,c="BackCompat"==f.doc.compatMode,b=!1,a=function(){return!0},k=function(a){for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":
a+" ",c=function(b,c){return e(a.slice(b,c))},d=[],f=-1,k=-1,p=-1,n=-1,l=-1,g=-1,i=-1,m,v="",o="",r,q=0,w=a.length,t=null,h=null,j=function(){if(0<=g)t.id=c(g,q).replace(/\\/g,""),g=-1;if(0<=i){var a=i==q?null:c(i,q);t[0>">~+".indexOf(a)?"tag":"oper"]=a;i=-1}0<=l&&(t.classes.push(c(l+1,q).replace(/\\/g,"")),l=-1)};v=o,o=a.charAt(q),q<w;q++)if("\\"!=v)if(t||(r=q,t={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return b?this.otag:this.tag}},i=q),m)o==m&&(m=null);
else if("'"==o||'"'==o)m=o;else if(0<=f)if("]"==o){h.attr?h.matchFor=c(p||f+1,q):h.attr=c(f+1,q);if((f=h.matchFor)&&('"'==f.charAt(0)||"'"==f.charAt(0)))h.matchFor=f.slice(1,-1);if(h.matchFor)h.matchFor=h.matchFor.replace(/\\/g,"");t.attrs.push(h);h=null;f=p=-1}else{if("="==o)p=0<="|~^$*".indexOf(v)?v:"",h.type=p+o,h.attr=c(f+1,q-p.length),p=q+1}else if(0<=k){if(")"==o){if(0<=n)h.value=c(k+1,q);n=k=-1}}else if("#"==o)j(),g=q+1;else if("."==o)j(),l=q;else if(":"==o)j(),n=q;else if("["==o)j(),f=q,h=
{};else if("("==o)0<=n&&(h={name:c(n+1,q),value:null},t.pseudos.push(h)),k=q;else if(" "==o&&v!=o){j();0<=n&&t.pseudos.push({name:c(n+1,q)});t.loops=t.pseudos.length||t.attrs.length||t.classes.length;t.oquery=t.query=c(r,q);t.otag=t.tag=t.oper?null:t.tag||"*";if(t.tag)t.tag=t.tag.toUpperCase();if(d.length&&d[d.length-1].oper)t.infixOper=d.pop(),t.query=t.infixOper.query+" "+t.query;d.push(t);t=null}return d},n=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,
arguments)}},q=function(a,b){var c=b||[];a&&c.push(a);return c},o=function(a){return 1==a.nodeType},l=function(a,c){return!a?"":"class"==c?a.className||"":"for"==c?a.htmlFor||"":"style"==c?a.style.cssText||"":(b?a.getAttribute(c):a.getAttribute(c,2))||""},m={"*=":function(a,b){return function(c){return 0<=l(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==l(c,a).indexOf(b)}},"$=":function(a,b){return function(c){var c=" "+l(c,a),d=c.lastIndexOf(b);return-1<d&&d==c.length-b.length}},
"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+l(b,a)+" ").indexOf(c)}},"|=":function(a,b){var c=b+"-";return function(d){d=l(d,a);return d==b||0==d.indexOf(c)}},"=":function(a,b){return function(c){return l(c,a)==b}}},r="undefined"==typeof f.doc.firstChild.nextElementSibling,p=!r?"nextElementSibling":"nextSibling",u=!r?"previousElementSibling":"previousSibling",s=r?o:a,t=function(a){for(;a=a[u];)if(s(a))return!1;return!0},v=function(a){for(;a=a[p];)if(s(a))return!1;return!0},
w=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,d=b.children||b.childNodes,e=a._i||a.getAttribute("_i")||-1,f=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!d)return-1;d=d.length;if(f==d&&0<=e&&0<=f)return e;j("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",d):b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[p])if(s(b))j("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(e=c);return e},x=function(a){return!(w(a)%2)},E=function(a){return w(a)%
2},A={checked:function(){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(){return function(a){return a.disabled}},enabled:function(){return function(a){return!a.disabled}},"first-child":function(){return t},"last-child":function(){return v},"only-child":function(){return function(a){return t(a)&&v(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,
b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=k(b)[0],d={el:1};if("*"!=c.tag)d.tag=1;if(!c.classes.length)d.classes=1;var e=D(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return E;if("even"==b)return x;if(-1!=b.indexOf("n")){var d=b.split("n",2),e=d[0]?"-"==d[0]?-1:c(d[0]):1,f=d[1]?c(d[1]):0,k=0,p=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(k=f-f%e),f%=e):0>e&&(e*=-1,0<f&&
(p=f,f%=e));if(0<e)return function(a){a=w(a);return a>=k&&(0>p||a<=p)&&a%e==f};b=f}var n=c(b);return function(a){return w(a)==n}}},y=9>j("ie")||9==j("ie")&&j("quirks")?function(a){var c=a.toLowerCase();"class"==c&&(a="className");return function(d){return b?d.getAttribute(a):d[a]||d[c]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},D=function(c,e){if(!c)return a;var e=e||{},f=null;"el"in e||(f=n(f,o));"tag"in e||"*"!=c.tag&&(f=n(f,function(a){return a&&(b?a.tagName:
a.tagName.toUpperCase())==c.getTag()}));"classes"in e||d(c.classes,function(a,b){var c=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");f=n(f,function(a){return c.test(a.className)});f.count=b});"pseudos"in e||d(c.pseudos,function(a){var b=a.name;A[b]&&(f=n(f,A[b](b,a.value)))});"attrs"in e||d(c.attrs,function(a){var b,c=a.attr;a.type&&m[a.type]?b=m[a.type](c,a.matchFor):c.length&&(b=y(c));b&&(f=n(f,b))});"id"in e||c.id&&(f=n(f,function(a){return!!a&&a.id==c.id}));f||"default"in e||(f=a);return f},F=function(a){return function(b,
c,d){for(;b=b[p];)if(!r||o(b)){(!d||S(b,d))&&a(b)&&c.push(b);break}return c}},L=function(a){return function(b,c,d){for(b=b[p];b;){if(s(b)){if(d&&!S(b,d))break;a(b)&&c.push(b)}b=b[p]}return c}},I=function(b){b=b||a;return function(a,c,d){for(var e=0,f=a.children||a.childNodes;a=f[e++];)s(a)&&(!d||S(a,d))&&b(a,e)&&c.push(a);return c}},B={},z=function(b){var d=B[b.query];if(d)return d;var e=b.infixOper,e=e?e.oper:"",k=D(b,{el:1}),p="*"==b.tag,n=f.doc.getElementsByClassName;if(e){n={el:1};if(p)n.tag=
1;k=D(b,n);"+"==e?d=F(k):"~"==e?d=L(k):">"==e&&(d=I(k))}else if(b.id)k=!b.loops&&p?a:D(b,{el:1,id:1}),d=function(a,c){var d=h.byId(b.id,a.ownerDocument||a);if(d&&k(d)){if(9==a.nodeType)return q(d,c);for(var e=d.parentNode;e&&!(e==a);)e=e.parentNode;if(e)return q(d,c)}};else if(n&&/\{\s*\[native code\]\s*\}/.test(""+n)&&b.classes.length&&!c)var k=D(b,{el:1,classes:1,id:1}),l=b.classes.join(" "),d=function(a,b,c){for(var b=q(0,b),d,e=0,f=a.getElementsByClassName(l);d=f[e++];)k(d,a)&&S(d,c)&&b.push(d);
return b};else!p&&!b.loops?d=function(a,c,d){for(var c=q(0,c),e=0,f=b.getTag(),f=f?a.getElementsByTagName(f):[];a=f[e++];)S(a,d)&&c.push(a);return c}:(k=D(b,{el:1,tag:1,id:1}),d=function(a,c,d){for(var c=q(0,c),e,f=0,p=(e=b.getTag())?a.getElementsByTagName(e):[];e=p[f++];)k(e,a)&&S(e,d)&&c.push(e);return c});return B[b.query]=d},C={},H={},M=function(a){var b=k(e(a));if(1==b.length){var c=z(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){for(var a=q(a),c,d,e=b.length,
f,k,p=0;p<e;p++){k=[];c=b[p];d=a.length-1;if(0<d)f={},k.nozip=!0;d=z(c);for(var n=0;c=a[n];n++)d(c,k,f);if(!k.length)break;a=k}return k}},K=j("ie")?"commentStrip":"nozip",P=!!f.doc.querySelectorAll,U=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,J=function(a,b,c,d){return c?(b?b+" ":"")+c+(d?" "+d:""):a},G=/([^[]*)([^\]]*])?/g,V=function(a,b,c){return b.replace(U,J)+(c||"")},O=function(a,b){a=a.replace(G,V);if(P){var d=H[a];if(d&&!b)return d}if(d=C[a])return d;var d=a.charAt(0),e=-1==a.indexOf(" ");0<=
a.indexOf("#")&&e&&(b=!0);if(P&&!b&&-1==">~+".indexOf(d)&&(!j("ie")||-1==a.indexOf(":"))&&!(c&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return H[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(f);c[K]=!0;return c}catch(d){return O(a,!0)(b)}}}var k=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return C[a]=2>k.length?M(a):function(a){for(var b=0,c=[],
d;d=k[b++];)c=c.concat(M(d)(a));return c}},N=0,Q=j("ie")?function(a){return b?a.getAttribute("_uid")||a.setAttribute("_uid",++N)||N:a.uniqueID}:function(a){return a._uid||(a._uid=++N)},S=function(a,b){if(!b)return 1;var c=Q(a);return!b[c]?b[c]=1:0},Y=function(a){if(a&&a.nozip)return a;var c=[];if(!a||!a.length)return c;a[0]&&c.push(a[0]);if(2>a.length)return c;N++;var d,e;if(j("ie")&&b){var f=N+"";a[0].setAttribute("_zipIdx",f);for(d=1;e=a[d];d++)a[d].getAttribute("_zipIdx")!=f&&c.push(e),e.setAttribute("_zipIdx",
f)}else if(j("ie")&&a.commentStrip)try{for(d=1;e=a[d];d++)o(e)&&c.push(e)}catch(k){}else{a[0]&&(a[0]._zipIdx=N);for(d=1;e=a[d];d++)a[d]._zipIdx!=N&&c.push(e),e._zipIdx=N}return c},W=function(a,c){c=c||f.doc;b="div"===(c.ownerDocument||c).createElement("div").tagName;var d=O(a)(c);return d&&d.nozip?d:Y(d)};W.filter=function(a,b,c){for(var d=[],e=k(b),e=1==e.length&&!/[^\w#\.]/.test(b)?D(e[0]):function(a){return-1!=g.indexOf(W(b,h.byId(c)),a)},f=0,p;p=a[f];f++)e(p)&&d.push(p);return d};return W})},
"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(h,j,g,i,f){var e=0,d=[],c=0,j=function(){e=1;h._postLoad=h.config.afterOnLoad=!0;b()},b=function(){if(!c){for(c=1;e&&(!i||0==i._Q.length)&&g.idle()&&d.length;){var a=d.shift();try{a()}catch(b){}}c=0}};g.on("idle",b);if(i)i._onQEmpty=b;var a=h.ready=h.addOnLoad=function(a,c,e){var k=f._toArray(arguments);"number"!=typeof a?(e=c,c=a,a=1E3):k.shift();e=e?f.hitch.apply(h,k):function(){c()};e.priority=
a;for(k=0;k<d.length&&a>=d[k].priority;k++);d.splice(k,0,e);b()},k=h.config.addOnLoad;if(k)a[f.isArray(k)?"apply":"call"](h,k);i?i(j):j();return a})},"dojo/domReady":function(){define(["./has"],function(h){function j(a){b.push(a);c&&g()}function g(){if(!a){for(a=!0;b.length;)try{b.shift()(f)}catch(c){}a=!1;j._onQEmpty()}}var i=function(){return this}(),f=document,e={loaded:1,complete:1},d="string"!=typeof f.readyState,c=!!e[f.readyState],b=[],a;j.load=function(a,b,c){j(c)};j._Q=b;j._onQEmpty=function(){};
if(d)f.readyState="loading";if(!c){var k=[],n=function(a){a=a||i.event;if(!(c||"readystatechange"==a.type&&!e[f.readyState])){if(d)f.readyState="complete";c=1;g()}},q=function(a,c){a.addEventListener(c,n,!1);b.push(function(){a.removeEventListener(c,n,!1)})};if(!h("dom-addeventlistener")){var q=function(a,c){c="on"+c;a.attachEvent(c,n);b.push(function(){a.detachEvent(c,n)})},o=f.createElement("div");try{o.doScroll&&null===i.frameElement&&k.push(function(){try{return o.doScroll("left"),1}catch(a){}})}catch(l){}}q(f,
"DOMContentLoaded");q(i,"load");"onreadystatechange"in f?q(f,"readystatechange"):d||k.push(function(){return e[f.readyState]});if(k.length){var m=function(){if(!c){for(var a=k.length;a--;)if(k[a]()){n("poller");return}setTimeout(m,30)}};m()}}return j})},"dojo/DeferredList":function(){define("dojo/DeferredList",["./_base/kernel","./_base/Deferred","./_base/array"],function(h,j,g){h.DeferredList=function(i,f,e,d){var c=[];j.call(this);var b=this;0===i.length&&!f&&this.resolve([0,[]]);var a=0;g.forEach(i,
function(k,n){function g(d,e){c[n]=[d,e];a++;a===i.length&&b.resolve(c)}k.then(function(a){f?b.resolve([n,a]):g(!0,a)},function(a){e?b.reject(a):g(!1,a);if(d)return null;throw a;})})};h.DeferredList.prototype=new j;h.DeferredList.prototype.gatherResults=function(i){i=new h.DeferredList(i,!1,!0,!1);i.addCallback(function(f){var e=[];g.forEach(f,function(d){e.push(d[1])});return e});return i};return h.DeferredList})},"dojo/_base/Deferred":function(){define("./kernel,../Deferred,../promise/Promise,../errors/CancelError,../has,./lang,../when".split(","),
function(h,j,g,i,f,e,d){var c=function(){},b=Object.freeze||function(){},a=h.Deferred=function(d){function n(a){if(l)throw Error("This deferred has already been resolved");o=a;l=!0;q()}function q(){for(var a;!a&&p;){var b=p;p=p.next;if(a=b.progress==c)l=!1;var d=m?b.error:b.resolved;f("config-useDeferredInstrumentation")&&m&&j.instrumentRejected&&j.instrumentRejected(o,!!d);if(d)try{var k=d(o);k&&"function"===typeof k.then?k.then(e.hitch(b.deferred,"resolve"),e.hitch(b.deferred,"reject"),e.hitch(b.deferred,
"progress")):(d=a&&void 0===k,a&&!d&&(m=k instanceof Error),b.deferred[d&&m?"reject":"resolve"](d?o:k))}catch(n){b.deferred.reject(n)}else m?b.deferred.reject(o):b.deferred.resolve(o)}}var o,l,m,r,p,h=this.promise=new g;this.resolve=this.callback=function(a){this.fired=0;this.results=[a,null];n(a)};this.reject=this.errback=function(a){m=!0;this.fired=1;f("config-useDeferredInstrumentation")&&j.instrumentRejected&&j.instrumentRejected(a,!!p);n(a);this.results=[null,a]};this.progress=function(a){for(var b=
p;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,c);return this};h.then=this.then=function(b,d,e){var f=e==c?this:new a(h.cancel),b={resolved:b,error:d,progress:e,deferred:f};p?r=r.next=b:p=r=b;l&&q();return f.promise};var s=this;h.cancel=this.cancel=function(){if(!l){var a=d&&d(s);if(!l)a instanceof Error||(a=new i(a)),a.log=!1,s.reject(a)}};b(h)};e.extend(a,{addCallback:function(a){return this.addCallbacks(e.hitch.apply(h,arguments))},addErrback:function(a){return this.addCallbacks(null,
e.hitch.apply(h,arguments))},addBoth:function(a){var b=e.hitch.apply(h,arguments);return this.addCallbacks(b,b)},fired:-1});a.when=h.when=d;return a})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(h,j){return function(g,i,f,e){var d=g&&"function"===typeof g.then,c=d&&g instanceof j;if(d){if(!c)d=new h(g.cancel),g.then(d.resolve,d.reject,d.progress),g=d.promise}else return 1<arguments.length?i?i(g):g:(new h).resolve(g);return i||f||e?g.then(i,f,e):g}})},"dojo/request":function(){define(["./request/default!"],
function(h){return h})},"dojo/request/default":function(){define(["exports","require","../has"],function(h,j,g){var i=g("config-requestProvider");i||(i="./xhr");h.getPlatformDefaultId=function(){return"./xhr"};h.load=function(f,e,d){j(["platform"==f?"./xhr":i],function(c){d(c)})}})},"JBrowse/has":function(){define(["dojo/has","dojo/sniff"],function(h){h.add("typed-arrays",function(){try{return!!new Uint8Array(1)}catch(h){}return!1});h.add("canvas",function(){try{return!!document.createElement("canvas").getContext("2d")}catch(h){}return!1});
h.add("inaccurate-html-layout",function(){return h("safari")||9>h("ie")},!0);h.add("save-generated-files",function(){var j=!1;try{j=Blob&&!(10>h("ie"))&&!h("safari")}catch(g){}return j},!0);h.add("inaccurate-html-width",function(){return h("safari")||h("chrome")},!0);return h})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel,dojo/_base/lang,../_Widget,../_Container,./_ContentPaneResizeMixin,dojo/string,dojo/html,dojo/i18n!../nls/loading,dojo/_base/array,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/_base/xhr,dojo/i18n,dojo/when".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r){return a("dijit.layout.ContentPane",[g,i,f],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:h._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},
onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){for(var b=n.byId(b),c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=j.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=m.getLocalization("dijit","loading",this.lang);this.loadingMessage=e.substitute(this.loadingMessage,a);this.errorMessage=e.substitute(this.errorMessage,
a)},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode;this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&b.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&j.isFunction(a.startup))a.startup(),a._started=!0},this)},_startChildren:function(){b.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&j.isFunction(a.startup))a.startup(),a._started=
!0});this._contentSetter&&b.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&j.isFunction(a.startup))a.startup(),a._started=!0},this)},setHref:function(a){h.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new k(j.hitch(this,"cancel"));this.onLoadDeferred.then(j.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&
this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){h.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=new k(j.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(j.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},
cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new k(j.hitch(this,"cancel"));this.onLoadDeferred.then(j.hitch(this,
"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};j.isObject(this.ioArgs)&&j.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||l.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();
delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var c=this._contentSetter;b.forEach(this.getChildren(),
function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});c&&(b.forEach(c.parseResults,function(b){if(!b._destroyed)b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0}),delete c.parseResults);a||o.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;if(!(c&&c instanceof d._ContentSetter))c=this._contentSetter=new d._ContentSetter({node:this.containerNode,
_onError:j.hitch(this,this._onError),onContentError:j.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})});var e=j.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),e=c.set(j.isObject(a)&&a.domNode?
a.domNode:a,e),f=this;return r(e&&e.then?e:c.parseDeferred,function(){delete f._contentSetterParams;b||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(a))})},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},
"dijit/_Widget":function(){define("dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/ready,./registry,./_WidgetBase,./_OnDijitClickMixin,./_FocusMixin,dojo/uacss,./hccss".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q){function o(){}function l(a){return function(b,c,e,f){return b&&"string"==typeof c&&b[c]==o?b.on(c.substring(2).toLowerCase(),d.hitch(e,f)):a.apply(g,arguments)}}h.around(g,"connect",l);e.connect&&h.around(e,
"connect",l);h=i("dijit._Widget",[k,n,q],{onClick:o,onDblClick:o,onKeyDown:o,onKeyPress:o,onKeyUp:o,onMouseDown:o,onMouseMove:o,onMouseOut:o,onMouseOver:o,onMouseLeave:o,onMouseEnter:o,onMouseUp:o,constructor:function(a){this._toConnect={};for(var b in a)this[b]===o&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===
o?g.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){e.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){if(j.isDebug){var c=arguments.callee._ach||(arguments.callee._ach={}),d=(arguments.callee.caller||"unknown caller").toString();c[d]||(e.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+
d,"","2.0"),c[d]=!0)}return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){e.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?c("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});f("dijit-legacy-requires")&&b(0,function(){require(["dijit/_base"])});return h})},
"dijit/registry":function(){define(["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(h,j,g,i,f){var e={},d={},c={length:0,add:function(b){if(d[b.id])throw Error("Tried to register widget with id=="+b.id+" but that id is already registered");d[b.id]=b;this.length++},remove:function(b){d[b]&&(delete d[b],this.length--)},byId:function(b){return"string"==typeof b?d[b]:b},byNode:function(b){return d[b.getAttribute("widgetId")]},toArray:function(){var b=[],a;for(a in d)b.push(d[a]);
return b},getUniqueId:function(b){var a;do a=b+"_"+(b in e?++e[b]:e[b]=0);while(d[a]);return"dijit"==f._scopeName?a:f._scopeName+"_"+a},findWidgets:function(b,a){function c(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var f=b.getAttribute("widgetId");f?(f=d[f])&&e.push(f):b!==a&&c(b)}}var e=[];c(b);return e},_destroyAll:function(){f._curFocus=null;f._prevFocus=null;f._activeStack=[];h.forEach(c.findWidgets(i.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&
b.destroy())})},getEnclosingWidget:function(b){for(;b;){var a=1==b.nodeType&&b.getAttribute("widgetId");if(a)return d[a];b=b.parentNode}return null},_hash:d};return f.registry=c})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(h,j,g){var i=window,f={addOnWindowUnload:function(e,d){if(!h.windowUnloaded)g(i,"unload",h.windowUnloaded=function(){});g(i,"unload",j.hitch(e,d))},addOnUnload:function(e,d){g(i,"beforeunload",j.hitch(e,d))}};h.addOnWindowUnload=f.addOnWindowUnload;
h.addOnUnload=f.addOnUnload;return f})},"dijit/main":function(){define(["dojo/_base/kernel"],function(h){return h.dijit})},"dijit/_WidgetBase":function(){define("require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),function(h,j,g,
i,f,e,d,c,b,a,k,n,q,o,l,m,r,p,u,s,t,v){function w(a){return function(b){c[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}q.add("dijit-legacy-requires",!o.isAsync);q("dijit-legacy-requires")&&r(0,function(){h(["dijit/_base/manager"])});var x={};return e("dijit._WidgetBase",[p,t],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:w("lang"),dir:"",_setDirAttr:w("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,
containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:i.blankGif||h.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=d.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,l.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=v.getUniqueId(this.declaredClass.replace(/\./g,
"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:s.doc);this.ownerDocumentBody=s.body(this.ownerDocument);v.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var e=this.srcNodeRef;e&&e.parentNode&&this.domNode!==e&&(e.parentNode.replaceChild(this.domNode,e),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=
this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],c;for(c in this.attributeMap)b.push(c);var a=a.prototype,d;for(d in a)d in this.attributeMap||"_set"+d.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(d)}var e={},f;for(f in this.params||{})e[f]=this[f];j.forEach(b,function(a){a in e||this[a]&&this.set(a,this[a])},this);for(f in e)this.set(f,e[f])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=
this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(j.map(a,function(a){return a+"Rtl"})));b.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,j.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&l.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},
destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();j.forEach(this._connects,l.hitch(this,"disconnect"));j.forEach(this._supportingWidgets,b);this.domNode&&j.forEach(v.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);v.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?c.remove(this.domNode,
"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){j.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;l.isObject(a)?n.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,d,e){e=3<=arguments.length?e:this.attributeMap[a];
j.forEach(l.isArray(e)?e:[e],function(e){var f=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":l.isFunction(d)&&(d=l.hitch(this,d));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.tagName?c.set(f,e,d):f.set(e,d);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(d));break;case "innerHTML":f.innerHTML=d;break;case "class":b.replace(f,d,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?
this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(l.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!l.isFunction(this.focusNode)?"focusNode":"domNode",f=this[d].tagName,k;if(!(k=x[f])){k=this[d];var n={},p;for(p in k)n[p.toLowerCase()]=!0;k=x[f]=n}p=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:c.l in k&&"function"!=typeof b||
/^aria-|^data-|^role$/.test(a)?d:null;null!=p&&this._attrToDom(a,b,p);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(b===c||b!==b&&c!==c))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+
a,{detail:{prevValue:c,newValue:b}})},emit:function(a,b,c){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail={};b.detail.widget=this;var d,e=this["on"+a];e&&(d=e.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&m.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,b){var c=this._onMap(a);return c?g.after(this,c,b,!0):this.own(m(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap=
{},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?v.findWidgets(this.containerNode):[]},getParent:function(){return v.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(f.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(u.subscribe(a,
l.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=n.get(this.domNode,"display")},placeAt:function(b,c){var e=!b.tagName&&v.byId(b);e&&e.addChild&&(!c||"number"===typeof c)?e.addChild(this,c):(e=e?e.containerNode&&!/after|before|replace/.test(c||"")?e.containerNode:e.domNode:d.byId(b,this.ownerDocument),a.place(this.domNode,e,c),!this._started&&(this.getParent()||
{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var c=setTimeout(l.hitch(this,function(){c&&(c=null,this._destroyed||l.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}})})},"dojo/Stateful":function(){define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","./when"],function(h,j,g,i){return h("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(f){var e=
this._attrPairNames;return e[f]?e[f]:e[f]={s:"_"+f+"Setter",g:"_"+f+"Getter"}},postscript:function(f){f&&this.set(f)},_get:function(f,e){return"function"===typeof this[e.g]?this[e.g]():this[f]},get:function(f){return this._get(f,this._getAttrNames(f))},set:function(f,e){if("object"===typeof f){for(var d in f)f.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,f[d]);return this}d=this._getAttrNames(f);var c=this._get(f,d);d=this[d.s];var b;"function"===typeof d?b=d.apply(this,Array.prototype.slice.call(arguments,
1)):this[f]=e;if(this._watchCallbacks){var a=this;i(b,function(){a._watchCallbacks(f,c,e)})}return this},_changeAttrValue:function(f,e){var d=this.get(f);this[f]=e;this._watchCallbacks&&this._watchCallbacks(f,d,e);return this},watch:function(f,e){var d=this._watchCallbacks;if(!d)var c=this,d=this._watchCallbacks=function(a,b,e,f){var l=function(d){if(d)for(var d=d.slice(),f=0,p=d.length;f<p;f++)d[f].call(c,a,b,e)};l(d["_"+a]);f||l(d["*"])};!e&&"function"===typeof f?(e=f,f="*"):f="_"+f;var b=d[f];
"object"!==typeof b&&(b=d[f]=[]);b.push(e);var a={};a.unwatch=a.remove=function(){var a=g.indexOf(b,e);-1<a&&b.splice(a,1)};return a}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(h,j,g){return g("dijit.Destroyable",null,{destroy:function(){this._destroyed=!0},own:function(){h.forEach(arguments,function(g){var f="destroyRecursive"in g?"destroyRecursive":"destroy"in g?"destroy":"remove",e=j.before(this,"destroy",function(c){g[f](c)}),d=
j.after(g,f,function(){e.remove();d.remove()},!0)},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window,./a11yclick".split(","),function(h,j,g,i,f,e,d,c){h=i("dijit._OnDijitClickMixin",null,{connect:function(b,a,d){return this.inherited(arguments,[b,"ondijitclick"==a?c:a,d])}});h.a11yclick=c;return h})},"dijit/a11yclick":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window".split(","),
function(h,j,g,i,f,e,d){function c(a){return(a.keyCode===g.ENTER||a.keyCode===g.SPACE)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey}var b=null;f("dom-addeventlistener")?d.doc.addEventListener("keydown",function(a){b=a.target},!0):function(){var a=function(a){b=a.srcElement};d.doc.attachEvent("onkeydown",a);e.addOnWindowUnload(function(){d.doc.detachEvent("onkeydown",a)})}();return function(a,d){if(/input|button/i.test(a.nodeName))return h(a,"click",d);var e=[h(a,"keydown",function(a){if(c(a))b=
a.target,a.preventDefault()}),h(a,"keyup",function(a){c(a)&&a.target==b&&(b=null,h.emit(a.target,"click",{cancelable:!0,bubbles:!0}))}),h(a,"click",function(a){d.call(this,a)})];if(f("touch")){var g;e.push(h(a,"touchend",function(a){var b=a.target;g=setTimeout(function(){g=null;h.emit(b,"click",{cancelable:!0,bubbles:!0})},600)}),h(a,"click",function(){g&&clearTimeout(g)}))}return{remove:function(){j.forEach(e,function(a){a.remove()});g&&(clearTimeout(g),g=null)}}}})},"dijit/_FocusMixin":function(){define(["./focus",
"./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(h,j,g,i){i.extend(j,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return g("dijit._FocusMixin",null,{_focusManager:h})})},"dijit/focus":function(){define("dojo/aspect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/Evented,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/Stateful,dojo/_base/unload,dojo/_base/window,dojo/window,./a11y,./registry,./main".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r){var p,u=new (j([k,e],{curNode:null,activeStack:[],constructor:function(){var a=d.hitch(this,function(a){g.isDescendant(this.curNode,a)&&this.set("curNode",null);g.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});h.before(f,"empty",a);h.before(f,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var d=this,e=a.document&&a.document.body;if(e){var f=c(e,"mousedown",function(a){d._justMouseDowned=
!0;setTimeout(function(){d._justMouseDowned=!1},13);if(!a||!(a.target&&null==a.target.parentNode))d._onTouchNode(b||a.target,"mouse")}),k=c(e,"focusin",function(a){p=(new Date).getTime();if(a.target.tagName){var c=a.target.tagName.toLowerCase();"#document"==c||"body"==c||(l.isFocusable(a.target)?d._onFocusNode(b||a.target):d._onTouchNode(b||a.target))}}),n=c(e,"focusout",function(a){(new Date).getTime()<p+100||d._onBlurNode(b||a.target)});return{remove:function(){f.remove();k.remove();n.remove();
e=f=k=n=null}}}},_onBlurNode:function(){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(d.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0);if(!this._justMouseDowned)this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(d.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)},_onTouchNode:function(a,b){this._clearActiveWidgetsTimer&&
(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var c=[];try{for(;a;){var d=i.get(a,"dijitPopupParent");if(d)a=m.byId(d).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===q.body())break;a=o.get(a.ownerDocument).frameElement}else{var e=a.getAttribute&&a.getAttribute("widgetId"),f=e&&m.byId(e);f&&!("mouse"==b&&f.get("disabled"))&&c.unshift(e);a=a.parentNode}}}catch(k){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(this._clearFocusTimer&&
(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack;this.set("activeStack",a);for(var d=0;d<Math.min(c.length,a.length)&&!(c[d]!=a[d]);d++);for(var e,f=c.length-1;f>=d;f--)if(e=m.byId(c[f]))e._hasBeenBlurred=!0,e.set("focused",!1),e._focusManager==this&&e._onBlur(b),this.emit("widget-blur",e,b);for(f=d;f<a.length;f++)if(e=m.byId(a[f]))e.set("focused",
!0),e._focusManager==this&&e._onFocus(b),this.emit("widget-focus",e,b)},focus:function(a){if(a)try{a.focus()}catch(b){}}}));b(function(){var b=u.registerWin(o.get(q.doc));a("ie")&&n.addOnWindowUnload(function(){b&&(b.remove(),b=null)})});r.focus=function(a){u.focus(a)};for(var s in u)/^_/.test(s)||(r.focus[s]="function"==typeof u[s]?d.hitch(u,s):u[s]);u.watch(function(a,b,c){r.focus[a]=c});return u})},"dojo/window":function(){define("./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style,./dom-construct".split(","),
function(h,j,g,i,f,e,d){j.add("rtl-adjust-position-for-verticalScrollBar",function(b,a){var c=g.body(a),e=d.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},c,"last"),i=d.create("div",{style:{overflow:"hidden",direction:"ltr"}},e,"last"),o=0!=f.position(i).x;e.removeChild(i);c.removeChild(e);return o});j.add("position-fixed-support",function(b,a){var c=g.body(a),e=d.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},c,"last"),i=d.create("span",{style:{position:"fixed",left:"0",top:"0"}},e,"last"),o=f.position(i).x!=f.position(e).x;e.removeChild(i);c.removeChild(e);return o});var c={getBox:function(b){var b=b||g.doc,a="BackCompat"==b.compatMode?g.body(b):b.documentElement,d=f.docScroll(b);if(j("touch"))var e=c.get(b),b=e.innerWidth||a.clientWidth,a=e.innerHeight||a.clientHeight;else b=a.clientWidth,a=a.clientHeight;return{l:d.x,t:d.y,w:b,h:a}},get:function(b){if(j("ie")&&
c!==document.parentWindow){b.parentWindow.execScript("document._parentWindow = window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b.parentWindow||b.defaultView},scrollIntoView:function(b,a){try{var b=i.byId(b),c=b.ownerDocument||g.doc,d=g.body(c),q=c.documentElement||d.parentNode,o=j("ie"),l=j("webkit");if(!(b==d||b==q))if(!j("mozilla")&&!o&&!l&&!j("opera")&&!j("trident")&&"scrollIntoView"in b)b.scrollIntoView(!1);else{var m="BackCompat"==c.compatMode,r=Math.min(d.clientWidth||
q.clientWidth,q.clientWidth||d.clientWidth),p=Math.min(d.clientHeight||q.clientHeight,q.clientHeight||d.clientHeight),c=l||m?d:q,h=a||f.position(b),s=b.parentNode,l=function(a){return 6>=o||7==o&&m?!1:j("position-fixed-support")&&"fixed"==e.get(a,"position").toLowerCase()},t=this,v=function(a,b,c){"BODY"==a.tagName||"HTML"==a.tagName?t.get(a.ownerDocument).scrollBy(b,c):(b&&(a.scrollLeft+=b),c&&(a.scrollTop+=c))};if(!l(b))for(;s;){s==d&&(s=c);var w=f.position(s),x=l(s),E="rtl"==e.getComputedStyle(s).direction.toLowerCase();
if(s==c){w.w=r;w.h=p;if(c==q&&(o||j("trident"))&&E)w.x+=c.offsetWidth-w.w;if(0>w.x||!o||9<=o||j("trident"))w.x=0;if(0>w.y||!o||9<=o||j("trident"))w.y=0}else{var A=f.getPadBorderExtents(s);w.w-=A.w;w.h-=A.h;w.x+=A.l;w.y+=A.t;var y=s.clientWidth,D=w.w-y;if(0<y&&0<D)E&&j("rtl-adjust-position-for-verticalScrollBar")&&(w.x+=D),w.w=y;y=s.clientHeight;D=w.h-y;if(0<y&&0<D)w.h=y}if(x){if(0>w.y)w.h+=w.y,w.y=0;if(0>w.x)w.w+=w.x,w.x=0;if(w.y+w.h>p)w.h=p-w.y;if(w.x+w.w>r)w.w=r-w.x}var F=h.x-w.x,L=h.y-w.y,I=F+
h.w-w.w,B=L+h.h-w.h,z,C;if(0<I*F&&(s.scrollLeft||s==c||s.scrollWidth>s.offsetHeight)){z=Math[0>F?"max":"min"](F,I);if(E&&(8==o&&!m||9<=o||j("trident")))z=-z;C=s.scrollLeft;v(s,z,0);z=s.scrollLeft-C;h.x-=z}if(0<B*L&&(s.scrollTop||s==c||s.scrollHeight>s.offsetHeight))z=Math.ceil(Math[0>L?"max":"min"](L,B)),C=s.scrollTop,v(s,0,z),z=s.scrollTop-C,h.y-=z;s=s!=c&&!x&&s.parentNode}}}catch(H){console.error("scrollIntoView: "+H),b.scrollIntoView(!1)}}};h.setObject("dojo.window",c);return c})},"dijit/a11y":function(){define("dojo/_base/array,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/_base/lang,dojo/sniff,./main".split(","),
function(h,j,g,i,f,e,d){var c={_isElementShown:function(b){var a=i.get(b);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=g.get(b,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return g.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var a;try{var c=b.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;a=c.body}catch(d){try{a=b.contentWindow.document.body}catch(e){return!1}}return a&&
("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==b.contentEditable}},effectiveTabIndex:function(b){return g.get(b,"disabled")?void 0:g.has(b,"tabIndex")?+g.get(b,"tabIndex"):c.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=c.effectiveTabIndex(b)},isFocusable:function(b){return-1<=c.effectiveTabIndex(b)},_getTabNavigable:function(b){function a(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}var d,f,i,o,l,m,r={},p=c._isElementShown,h=c.effectiveTabIndex,j=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(!(1!=b.nodeType||9>=e("ie")&&"HTML"!==b.scopeName||!p(b))){var c=h(b);if(0<=c){if(0==c)d||(d=b),f=b;else if(0<c){if(!i||c<o)o=c,i=b;if(!l||c>=m)m=c,l=b}c=a(b);g.get(b,"checked")&&c&&(r[c]=b)}"SELECT"!=b.nodeName.toUpperCase()&&j(b)}};p(b)&&j(b);return{first:r[a(d)]||d,last:r[a(f)]||f,lowest:r[a(i)]||i,highest:r[a(l)]||l}},getFirstInTabbingOrder:function(b,
a){var d=c._getTabNavigable(j.byId(b,a));return d.lowest?d.lowest:d.first},getLastInTabbingOrder:function(b,a){var d=c._getTabNavigable(j.byId(b,a));return d.last?d.last:d.highest}};f.mixin(d,c);return c})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(h,j,g,i,f){var e=f.doc.documentElement,f=i("ie"),d=i("opera"),c=Math.floor,b=i("ff"),a=h.boxModel.replace(/-/,""),d={dj_quirks:i("quirks"),dj_opera:d,dj_khtml:i("khtml"),dj_webkit:i("webkit"),
dj_safari:i("safari"),dj_chrome:i("chrome"),dj_gecko:i("mozilla")};if(f)d.dj_ie=!0,d["dj_ie"+c(f)]=!0,d.dj_iequirks=i("quirks");b&&(d["dj_ff"+c(b)]=!0);d["dj_"+a]=!0;var k="",n;for(n in d)d[n]&&(k+=n+" ");e.className=j.trim(e.className+" "+k);g(90,function(){if(!h.isBodyLtr()){var a="dj_rtl dijitRtl "+k.replace(/ /g,"-rtl ");e.className=j.trim(e.className+" "+a+"dj_rtl dijitRtl "+k.replace(/ /g,"-rtl "))}});return i})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],
function(h,j,g,i){g(90,function(){j("highcontrast")&&h.add(i.body(),"dijit_a11y")});return j})},"dojo/hccss":function(){define("require,./_base/config,./dom-class,./dom-style,./has,./ready,./_base/window".split(","),function(h,j,g,i,f,e,d){f.add("highcontrast",function(){var c=d.doc.createElement("div");c.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(j.blankGif||h.toUrl("./resources/blank.gif"))+");";d.body().appendChild(c);
var b=i.getComputedStyle(c),a=b.backgroundImage,b=b.borderTopColor==b.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a);8>=f("ie")?c.outerHTML="":d.body().removeChild(c);return b});e(90,function(){f("highcontrast")&&g.add(d.body(),"dj_a11y")});return f})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(h,j,g){return j("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=
this.domNode},addChild:function(i,f){var e=this.containerNode;if(f&&"number"==typeof f){var d=this.getChildren();if(d&&d.length>=f)e=d[f-1].domNode,f="after"}g.place(i.domNode,e,f);this._started&&!i._started&&i.startup()},removeChild:function(g){"number"==typeof g&&(g=this.getChildren()[g]);if(g)(g=g.domNode)&&g.parentNode&&g.parentNode.removeChild(g)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(g,f){var e=this.getChildren(),d=h.indexOf(this.getChildren(),
g);return e[d+f]},getIndexOfChild:function(g){return h.indexOf(this.getChildren(),g)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/query,dojo/sniff,../registry,../Viewport,./utils".split(","),function(h,j,g,i,f,e,d,c,b,a,k){return j("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=
b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(a.on("resize",e.hitch(this,"resize")))}},_checkIfSingleChild:function(){var a=[],c=!1;d("> *",this.containerNode).some(function(d){var e=b.byNode(d);e&&e.resize?a.push(e):d.offsetHeight&&(c=!0)});this._singleChild=1==a.length&&!c?a[0]:null;g.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(a,b){this._resizeCalled=
!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();a&&i.setMarginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){var d=b||{};e.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=e.mixin(i.getMarginBox(c),d);this._contentBox=k.marginBox2contentBox(c,d)}else this._contentBox=i.getContentBox(c);
this._layoutChildren()},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||i.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else h.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;
return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!g.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/Viewport":function(){define("dojo/Evented,dojo/on,dojo/ready,dojo/sniff,dojo/_base/window,dojo/window".split(","),function(h,j,g,i,f,e){var d=new h,c;g(200,function(){var b=e.getBox();d._rlh=j(f.global,"resize",function(){var a=e.getBox();
b.h==a.h&&b.w==a.w||(b=a,d.emit("resize"))});if(8==i("ie")){var a=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=a)a=screen.deviceXDPI,d.emit("resize")},500)}i("ios")&&(j(document,"focusin",function(a){c=a.target}),j(document,"focusout",function(){c=null}))});d.getEffectiveBox=function(b){var b=e.getBox(b),a=c&&c.tagName&&c.tagName.toLowerCase();if(i("ios")&&c&&!c.readOnly&&("textarea"==a||"input"==a&&/^(color|email|number|password|search|tel|text|url)$/.test(c.type)))b.h*=0==orientation||
180==orientation?0.66:0.4,a=c.getBoundingClientRect(),b.h=Math.max(b.h,a.top+a.height);return b};return d})},"dijit/layout/utils":function(){define("dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,../main".split(","),function(h,j,g,i,f,e){function d(c,b){var a=c.resize?c.resize(b):g.setMarginBox(c.domNode,b);a?f.mixin(c,a):(f.mixin(c,g.getMarginBox(c.domNode)),f.mixin(c,b))}e=f.getObject("layout",!0,e);e.marginBox2contentBox=function(c,b){var a=i.getComputedStyle(c),
d=g.getMarginExtents(c,a),e=g.getPadBorderExtents(c,a);return{l:i.toPixelValue(c,a.paddingLeft),t:i.toPixelValue(c,a.paddingTop),w:b.w-(d.w+e.w),h:b.h-(d.h+e.h)}};e.layoutChildren=function(c,b,a,e,n){b=f.mixin({},b);j.add(c,"dijitLayoutContainer");a=h.filter(a,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(h.filter(a,function(a){return"center"==a.region||"client"==a.layoutAlign}));h.forEach(a,function(a){var c=a.domNode,f=a.region||a.layoutAlign;if(!f)throw Error("No region setting for "+
a.id);var g=c.style;g.left=b.l+"px";g.top=b.t+"px";g.position="absolute";j.add(c,"dijitAlign"+(f.substring(0,1).toUpperCase()+f.substring(1)));c={};e&&e==a.id&&(c["top"==a.region||"bottom"==a.region?"h":"w"]=n);"top"==f||"bottom"==f?(c.w=b.w,d(a,c),b.h-=a.h,"top"==f?b.t+=a.h:g.top=b.t+b.h+"px"):"left"==f||"right"==f?(c.h=b.h,d(a,c),b.w-=a.w,"left"==f?b.l+=a.w:g.left=b.l+b.w+"px"):("client"==f||"center"==f)&&d(a,b)})};return{marginBox2contentBox:e.marginBox2contentBox,layoutChildren:e.layoutChildren}})},
"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(h,j){var g={};j.setObject("dojo.string",g);g.rep=function(g,f){if(0>=f||!g)return"";for(var e=[];;){f&1&&e.push(g);if(!(f>>=1))break;g+=g}return e.join("")};g.pad=function(i,f,e,d){e||(e="0");i=""+i;f=g.rep(e,Math.ceil((f-i.length)/e.length));return d?i+f:f+i};g.substitute=function(g,f,e,d){d=d||h.global;e=e?j.hitch(d,e):function(c){return c};return g.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(c,b,a){c=j.getObject(b,
!1,f);a&&(c=j.getObject(a,!1,d).call(d,c,b));return e(c,b).toString()})};g.trim=String.prototype.trim?j.trim:function(g){for(var g=g.replace(/^\s+/,""),f=g.length-1;0<=f;f--)if(/\S/.test(g.charAt(f))){g=g.substring(0,f+1);break}return g};return g})},"dojo/i18n":function(){define("./_base/kernel,require,./has,./_base/array,./_base/config,./_base/lang,./_base/xhr,./json,module".split(","),function(h,j,g,i,f,e,d,c,b){g.add("dojo-preload-i18n-Api",1);var d=h.i18n={},a=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,
k=function(a,b,c,d){for(var e=[c+d],b=b.split("-"),f="",k=0;k<b.length;k++)f+=(f?"-":"")+b[k],(!a||a[f])&&e.push(c+f+"/"+d);return e},n={},q=function(a,b,c){c=c?c.toLowerCase():h.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b};h.getL10nName=function(a,c,d){return b.id+"!"+q(a,c,d)};var o=function(a,b,c,d,f,p){a([b],function(l){var g=e.clone(l.root||l.ROOT),i=k(!l._v1x&&l,f,c,d);a(i,function(){for(var a=1;a<i.length;a++)g=e.mixin(e.clone(g),
arguments[a]);n[b+"/"+f]=g;p()})})},l=function(a){var b=f.extraLocale||[],b=e.isArray(b)?b:[b];b.push(a);return b},m=function(b,d,f){if(g("dojo-preload-i18n-Api")){var k=b.split("*"),p="preload"==k[1];p&&(n[b]||(n[b]=1,t(k[2],c.parse(k[3]),1,d)),f(1));if(!(k=p))u&&s.push([b,d,f]),k=u;if(k)return}var b=a.exec(b),m=b[1]+"/",r=b[5]||b[4],w=m+r,k=(b=b[5]&&b[4])||h.locale,q=w+"/"+k,b=b?[k]:l(k),j=b.length,x=function(){--j||f(e.delegate(n[q]))};i.forEach(b,function(a){var b=w+"/"+a;g("dojo-preload-i18n-Api")&&
v(b);n[b]?x():o(d,w,m,r,a,x)})};if(g("dojo-unit-tests"))var r=d.unitTests=[];g("dojo-preload-i18n-Api");var p=d.normalizeLocale=function(a){a=a?a.toLowerCase():h.locale;return"root"==a?"ROOT":a},u=0,s=[],t=d._preloadLocalizations=function(a,b,c,d){function f(a,b){d([a],b)}function k(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}function l(){for(--u;!u&&s.length;)m.apply(null,s.shift())}function g(c){c=p(c);k(c,function(p){if(0<=i.indexOf(b,p)){var g=a.replace(/\./g,
"/")+"_"+p;u++;f(g,function(a){for(var b in a){var f=a[b],g=b.match(/(.+)\/([^\/]+)$/),i;if(g){i=g[2];g=g[1]+"/";f._localized=f._localized||{};var m;if("ROOT"===p){var v=m=f._localized;delete f._localized;v.root=f;n[j.toAbsMid(b)]=v}else m=f._localized,n[j.toAbsMid(g+i+"/"+p)]=f;p!==c&&function(a,b,f,p){var g=[],i=[];k(c,function(c){p[c]&&(g.push(j.toAbsMid(a+c+"/"+b)),i.push(j.toAbsMid(a+b+"/"+c)))});g.length?(u++,d(g,function(){for(var d=0;d<g.length;d++)f=e.mixin(e.clone(f),arguments[d]),n[i[d]]=
f;n[j.toAbsMid(a+b+"/"+c)]=e.clone(f);l()})):n[j.toAbsMid(a+b+"/"+c)]=f}(g,i,f,m)}}l()});return!0}return!1})}d=d||j;g();i.forEach(h.config.extraLocale,g)},v=function(){},w={},x=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
v=function(a){for(var b,c=a.split("/"),d=h.global[c[0]],e=1;d&&e<c.length-1;d=d[c[e++]]);d&&((b=d[c[e]])||(b=d[c[e].replace(/-/g,"_")]),b&&(n[a]=b));return b};d.getLocalization=function(a,b,c){var d,a=q(a,b,c);m(a,j,function(a){d=a});return d};g("dojo-unit-tests")&&r.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=x("{prop:1}",v,"nonsense",w);a.is({prop:1},b);a.is(void 0,b[1]);b=x("({prop:1})",v,"nonsense",w);a.is({prop:1},b);a.is(void 0,b[1]);b=x("{'prop-x':1}",v,"nonsense",w);
a.is({"prop-x":1},b);a.is(void 0,b[1]);b=x("({'prop-x':1})",v,"nonsense",w);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=x("define({'prop-x':1})",v,"nonsense",w);a.is(w,b);a.is({"prop-x":1},w.result);b=x("define('some/module', {'prop-x':1})",v,"nonsense",w);a.is(w,b);a.is({"prop-x":1},w.result);b=x("this is total nonsense and should throw an error",v,"nonsense",w);a.is(b instanceof Error,!0)})});return e.mixin(d,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:m,cache:n})})},"dojo/_base/xhr":function(){define("./kernel,./sniff,require,../io-query,../dom,../dom-form,./Deferred,./config,./json,./lang,./array,../on,../aspect,../request/watch,../request/xhr,../request/util".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m){h._xhrObj=l._create;var r=h.config;h.objectToQuery=i.objectToQuery;h.queryToObject=i.queryToObject;h.fieldToObject=e.fieldToObject;h.formToObject=e.toObject;h.formToQuery=e.toQuery;h.formToJson=e.toJson;h._blockAsync=!1;var p=h._contentHandlers=h.contentHandlers={text:function(a){return a.responseText},json:function(a){return b.fromJson(a.responseText||null)},"json-comment-filtered":function(a){c.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");
var a=a.responseText,d=a.indexOf("/*"),e=a.lastIndexOf("*/");if(-1==d||-1==e)throw Error("JSON was not comment filtered");return b.fromJson(a.substring(d+2,e))},javascript:function(a){return h.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&j("dom-qsa2.1")&&!b.querySelectorAll&&j("dom-parser")&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(j("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),
c(2)];k.some(c,function(c){try{var d=new ActiveXObject(c);d.async=!1;d.loadXML(a.responseText);b=d}catch(e){return!1}return!0})}return b},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?p["json-comment-filtered"](a):p.json(a)}};h._ioSetArgs=function(b,c,k,p){var g={args:b,url:b.url},l=null;if(b.form){var l=f.byId(b.form),n=l.getAttributeNode("action");g.url=g.url||(n?n.value:null);l=e.toObject(l)}n=[{}];l&&n.push(l);b.content&&n.push(b.content);b.preventCache&&
n.push({"dojo.preventCache":(new Date).valueOf()});g.query=i.objectToQuery(a.mixin.apply(null,n));g.handleAs=b.handleAs||"text";var m=new d(function(a){a.canceled=!0;c&&c(a);var b=a.ioArgs.error;if(!b)b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b;return b});m.addCallback(k);var v=b.load;v&&a.isFunction(v)&&m.addCallback(function(a){return v.call(b,a,g)});var o=b.error;o&&a.isFunction(o)&&m.addErrback(function(a){return o.call(b,a,g)});var q=b.handle;q&&a.isFunction(q)&&m.addBoth(function(a){return q.call(b,
a,g)});m.addErrback(function(a){return p(a,m)});r.ioPublish&&h.publish&&!1!==g.args.ioPublish&&(m.addCallbacks(function(a){h.publish("/dojo/io/load",[m,a]);return a},function(a){h.publish("/dojo/io/error",[m,a]);return a}),m.addBoth(function(a){h.publish("/dojo/io/done",[m,a]);return a}));m.ioArgs=g;return m};var u=function(a){a=p[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},s=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},t=function(a){0>=v&&(v=0,r.ioPublish&&h.publish&&
(!a||a&&!1!==a.ioArgs.args.ioPublish)&&h.publish("/dojo/io/stop"))},v=0;q.after(o,"_onAction",function(){v-=1});q.after(o,"_onInFlight",t);h._ioCancelAll=o.cancelAll;h._ioNotifyStart=function(a){r.ioPublish&&h.publish&&!1!==a.ioArgs.args.ioPublish&&(v||h.publish("/dojo/io/start"),v+=1,h.publish("/dojo/io/send",[a]))};h._ioWatch=function(b,c,d,e){b.ioArgs.options=b.ioArgs.args;a.mixin(b,{response:b.ioArgs,isValid:function(){return c(b)},isReady:function(){return d(b)},handleResponse:function(){return e(b)}});
o(b);t(b)};h._ioAddQueryToUrl=function(a){if(a.query.length)a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null};h.xhr=function(a,b,c){var d,e=h._ioSetArgs(b,function(){d&&d.cancel()},u,s),f=e.ioArgs;"postData"in b?f.query=b.postData:"putData"in b?f.query=b.putData:"rawBody"in b?f.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&h._ioAddQueryToUrl(f);var k={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:f};if("undefined"!==
typeof b.headers)k.headers=b.headers;if("undefined"!==typeof b.contentType){if(!k.headers)k.headers={};k.headers["Content-Type"]=b.contentType}if("undefined"!==typeof f.query)k.data=f.query;if("undefined"!==typeof b.sync)k.sync=b.sync;h._ioNotifyStart(e);try{d=l(f.url,k,!0)}catch(p){return e.cancel(),e}e.ioArgs.xhr=d.response.xhr;d.then(function(){e.resolve(e)}).otherwise(function(a){f.error=a;if(a.response)a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr;e.reject(a)});
return e};h.xhrGet=function(a){return h.xhr("GET",a)};h.rawXhrPost=h.xhrPost=function(a){return h.xhr("POST",a,!0)};h.rawXhrPut=h.xhrPut=function(a){return h.xhr("PUT",a,!0)};h.xhrDelete=function(a){return h.xhr("DELETE",a)};h._isDocumentOk=function(a){return m.checkStatus(a.status)};h._getText=function(a){var b;h.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};a.mixin(h.xhr,{_xhrObj:h._xhrObj,fieldToObject:e.fieldToObject,formToObject:e.toObject,objectToQuery:i.objectToQuery,formToQuery:e.toQuery,
formToJson:e.toJson,queryToObject:i.queryToObject,contentHandlers:p,_ioSetArgs:h._ioSetArgs,_ioCancelAll:h._ioCancelAll,_ioNotifyStart:h._ioNotifyStart,_ioWatch:h._ioWatch,_ioAddQueryToUrl:h._ioAddQueryToUrl,_isDocumentOk:h._isDocumentOk,_getText:h._getText,get:h.xhrGet,post:h.xhrPost,put:h.xhrPut,del:h.xhrDelete});return h.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(h){var j={};return{objectToQuery:function(g){var i=encodeURIComponent,f=[],e;for(e in g){var d=g[e];if(d!=j[e]){var c=
i(e)+"=";if(h.isArray(d))for(var b=0,a=d.length;b<a;++b)f.push(c+i(d[b]));else f.push(c+i(d))}}return f.join("&")},queryToObject:function(g){for(var i=decodeURIComponent,g=g.split("&"),f={},e,d,c=0,b=g.length;c<b;++c)if(d=g[c],d.length){var a=d.indexOf("=");0>a?(e=i(d),d=""):(e=i(d.slice(0,a)),d=i(d.slice(a+1)));"string"==typeof f[e]&&(f[e]=[f[e]]);h.isArray(f[e])?f[e].push(d):f[e]=d}return f}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(h,j,g,i){var f=
{fieldToObject:function(e){var d=null;if(e=j.byId(e)){var c=e.name,b=(e.type||"").toLowerCase();if(c&&b&&!e.disabled)if("radio"==b||"checkbox"==b){if(e.checked)d=e.value}else if(e.multiple){d=[];for(e=[e.firstChild];e.length;)for(c=e.pop();c;c=c.nextSibling)if(1==c.nodeType&&"option"==c.tagName.toLowerCase())c.selected&&d.push(c.value);else{c.nextSibling&&e.push(c.nextSibling);c.firstChild&&e.push(c.firstChild);break}}else d=e.value}return d},toObject:function(e){for(var d={},e=j.byId(e).elements,
c=0,b=e.length;c<b;++c){var a=e[c],k=a.name,g=(a.type||"").toLowerCase();if(k&&g&&0>"file|submit|image|reset|button".indexOf(g)&&!a.disabled){var i=d,o=k,a=f.fieldToObject(a);if(null!==a){var l=i[o];"string"==typeof l?i[o]=[l,a]:h.isArray(l)?l.push(a):i[o]=a}if("image"==g)d[k+".x"]=d[k+".y"]=d[k].x=d[k].y=0}}return d},toQuery:function(e){return g.objectToQuery(f.toObject(e))},toJson:function(e,d){return i.stringify(f.toObject(e),null,d?4:0)}};return f})},"dojo/request/watch":function(){define("./util,../errors/RequestTimeoutError,../errors/CancelError,../_base/array,../_base/window,../has!host-browser?dom-addeventlistener?:../on:".split(","),
function(h,j,g,i,f,e){function d(){for(var d=+new Date,e=0,f;e<a.length&&(f=a[e]);e++){var g=f.response,l=g.options;if(f.isCanceled&&f.isCanceled()||f.isValid&&!f.isValid(g))a.splice(e--,1),c._onAction&&c._onAction();else if(f.isReady&&f.isReady(g))a.splice(e--,1),f.handleResponse(g),c._onAction&&c._onAction();else if(f.startTime&&f.startTime+(l.timeout||0)<d)a.splice(e--,1),f.cancel(new j("Timeout exceeded",g)),c._onAction&&c._onAction()}c._onInFlight&&c._onInFlight(f);a.length||(clearInterval(b),
b=null)}function c(c){if(c.response.options.timeout)c.startTime=+new Date;c.isFulfilled()||(a.push(c),b||(b=setInterval(d,50)),c.response.options.sync&&d())}var b=null,a=[];c.cancelAll=function(){try{i.forEach(a,function(a){try{a.cancel(new g("All requests canceled."))}catch(b){}})}catch(b){}};f&&e&&f.doc.attachEvent&&e(f.global,"unload",function(){c.cancelAll()});return c})},"dojo/request/util":function(){define("exports,../errors/RequestError,../errors/CancelError,../Deferred,../io-query,../_base/array,../_base/lang,../promise/Promise".split(","),
function(h,j,g,i,f,e,d,c){function b(a){return k(a)}function a(a){return a.data||a.text}h.deepCopy=function(a,b){for(var c in b){var d=a[c],e=b[c];d!==e&&(d&&"object"===typeof d&&e&&"object"===typeof e?h.deepCopy(d,e):a[c]=e)}return a};h.deepCreate=function(a,b){var b=b||{},c=d.delegate(a),e,f;for(e in a)(f=a[e])&&"object"===typeof f&&(c[e]=h.deepCreate(f,b[e]));return h.deepCopy(c,b)};var k=Object.freeze||function(a){return a};h.deferred=function(e,f,o,l,m,r){var p=new i(function(a){f&&f(p,e);return!a||
!(a instanceof j)&&!(a instanceof g)?new g("Request canceled",e):a});p.response=e;p.isValid=o;p.isReady=l;p.handleResponse=m;o=p.then(b).otherwise(function(a){a.response=e;throw a;});h.notify&&o.then(d.hitch(h.notify,"emit","load"),d.hitch(h.notify,"emit","error"));var l=o.then(a),m=new c,u;for(u in l)l.hasOwnProperty(u)&&(m[u]=l[u]);m.response=o;k(m);r&&p.then(function(a){r.call(p,a)},function(a){r.call(p,e,a)});p.promise=m;p.then=m.then;return p};h.addCommonMethods=function(a,b){e.forEach(b||["GET",
"POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(c,e){e=d.delegate(e||{});e.method=b;return a(c,e)}})};h.parseArgs=function(a,b,c){var d=b.data,e=b.query;if(d&&!c&&"object"===typeof d)b.data=f.objectToQuery(d);e?("object"===typeof e&&(e=f.objectToQuery(e)),b.preventCache&&(e+=(e?"&":"")+"request.preventCache="+ +new Date)):b.preventCache&&(e="request.preventCache="+ +new Date);a&&e&&(a+=(~a.indexOf("?")?"&":"?")+e);return{url:a,options:b,getHeader:function(){return null}}};
h.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(h){return h("RequestError",function(h,g){this.response=g})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(h,j){return h("RequestTimeoutError",null,j,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(h,j,g,i,f){function e(a,
b){var c=a.xhr;a.status=a.xhr.status;a.text=c.responseText;if("xml"===a.options.handleAs)a.data=c.responseXML;if(!b)try{g(a)}catch(d){b=d}b?this.reject(b):i.checkStatus(c.status)?this.resolve(a):(b=new h("Unable to load "+a.url+" status: "+c.status,a),this.reject(b))}function d(a){return this.xhr.getResponseHeader(a)}function c(g,p,l){var m=i.parseArgs(g,i.deepCreate(o,p),f("native-formdata")&&p&&p.data&&p.data instanceof FormData),g=m.url,p=m.options,t,v=i.deferred(m,n,b,a,e,function(){t&&t()}),
w=m.xhr=c._create();if(!w)return v.cancel(new h("XHR was not created")),l?v:v.promise;m.getHeader=d;k&&(t=k(w,v,m));var x=p.data,E=!p.sync,A=p.method;try{w.open(A,g,E,p.user||q,p.password||q);if(p.withCredentials)w.withCredentials=p.withCredentials;var y=p.headers,g="application/x-www-form-urlencoded";if(y)for(var D in y)"content-type"===D.toLowerCase()?g=y[D]:y[D]&&w.setRequestHeader(D,y[D]);g&&!1!==g&&w.setRequestHeader("Content-Type",g);(!y||!("X-Requested-With"in y))&&w.setRequestHeader("X-Requested-With",
"XMLHttpRequest");i.notify&&i.notify.emit("send",m,v.promise.cancel);w.send(x)}catch(F){v.reject(F)}j(v);w=null;return l?v:v.promise}f.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});f.add("dojo-force-activex-xhr",function(){return f("activex")&&!document.addEventListener&&"file:"===window.location.protocol});f.add("native-xhr2",function(){if(f("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==
typeof a.upload)}});f.add("native-formdata",function(){return"function"===typeof FormData});var b,a,k,n;f("native-xhr2")?(b=function(){return!this.isFulfilled()},n=function(a,b){b.xhr.abort()},k=function(a,b,c){function d(){b.handleResponse(c)}function e(a){a=new h("Unable to load "+c.url+" status: "+a.target.status,c);b.handleResponse(c,a)}function f(a){if(a.lengthComputable)c.loaded=a.loaded,c.total=a.total,b.progress(c)}a.addEventListener("load",d,!1);a.addEventListener("error",e,!1);a.addEventListener("progress",
f,!1);return function(){a.removeEventListener("load",d,!1);a.removeEventListener("error",e,!1);a.removeEventListener("progress",f,!1);a=null}}):(b=function(a){return a.xhr.readyState},a=function(a){return 4===a.xhr.readyState},n=function(a,b){var c=b.xhr,d=typeof c.abort;("function"===d||"object"===d||"unknown"===d)&&c.abort()});var q,o={data:null,query:null,sync:!1,method:"GET"};c._create=function(){throw Error("XMLHTTP not available");};if(f("native-xhr")&&!f("dojo-force-activex-xhr"))c._create=
function(){return new XMLHttpRequest};else if(f("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),c._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(l){try{new ActiveXObject("Microsoft.XMLHTTP"),c._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(m){}}i.addCommonMethods(c);return c})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(h,j,g,i){function f(b){var a=c[b.options.handleAs];
b.data=a?a(b):b.data||b.text;return b}i.add("activex","undefined"!==typeof ActiveXObject);i.add("dom-parser",function(b){return"DOMParser"in b});var e;if(i("activex")){var d=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];e=function(b){var a=b.data;a&&i("dom-qsa2.1")&&!a.querySelectorAll&&i("dom-parser")&&(a=(new DOMParser).parseFromString(b.text,"application/xml"));if(!a||!a.documentElement){var c=b.text;g.some(d,function(b){try{var d=new ActiveXObject(b);
d.async=!1;d.loadXML(c);a=d}catch(e){return!1}return!0})}return a}}var c={javascript:function(b){return j.eval(b.text||"")},json:function(b){return h.parse(b.text||null)},xml:e};f.register=function(b,a){c[b]=a};return f})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array,dojo/cookie,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,dojo/touch,../_WidgetBase,../_Widget,../_TemplatedMixin,./_LayoutWidget,./utils".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r){var p=g("dijit.layout._Splitter",[o,l],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeypress:_onKeyPress,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?
1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);i.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=j(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",b=e.getMarginBox(this.child.domNode)[a],c=h.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=e.getMarginBox(c.domNode)[a];
return Math.min(this.child.maxSize,b+a)},_startDrag:function(b){if(!this.cover)this.cover=f.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after");i.add(this.cover,"dijitSplitterCoverActive");this.fake&&f.destroy(this.fake);if(!(this._resize=this.live))(this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),i.add(this.domNode,"dijitSplitterShadow"),f.place(this.fake,this.domNode,"after");i.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");
this.fake&&i.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var d=this._factor,p=this.horizontal,g=p?"pageY":"pageX",l=b[g],m=this.domNode.style,o=e.getMarginBox(this.child.domNode)[p?"h":"w"],h=this._computeMaxSize(),r=this.child.minSize||20,p=this.region,j="top"==p||"bottom"==p?"top":"left",q=parseInt(m[j],10),u=this._resize,B=a.hitch(this.container,"_layoutChildren",this.child.id),p=this.ownerDocument;this._handlers=this._handlers.concat([k(p,n.move,this._drag=
function(a,b){var c=a[g]-l,e=d*c+o,f=Math.max(Math.min(e,h),r);(u||b)&&B(f);m[j]=c+q+d*(f-e)+"px"}),k(p,"dragstart",c.stop),k(this.ownerDocumentBody,"selectstart",c.stop),k(p,n.release,a.hitch(this,"_stopDrag"))]);c.stop(b)},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;i.toggle(this.domNode,"dijitSplitterHover",a);i.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&i.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&
f.destroy(this.fake),i.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&j(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyPress:function(a){this._resize=!0;var d=this.horizontal,f=1;switch(a.charOrCode){case d?
b.UP_ARROW:b.LEFT_ARROW:f*=-1;case d?b.DOWN_ARROW:b.RIGHT_ARROW:break;default:return}d=e.getMarginSize(this.child.domNode)[d?"h":"w"]+this._factor*f;this.container._layoutChildren(this.child.id,Math.max(Math.min(d,this._computeMaxSize()),this.child.minSize));c.stop(a)},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),u=g("dijit.layout._Gutter",[o,l],{templateString:'<div class="dijitGutter" role="presentation"></div>',
postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);i.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}),g=g("dijit.layout.BorderContainer",m,{design:"headline",gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:p,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},startup:function(){this._started||(h.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){var c=b.region;if(c){this.inherited(arguments);i.add(b.domNode,this.baseClass+"Pane");var d=this.isLeftToRight();"leading"==c&&(c=d?"left":"right");"trailing"==c&&(c=d?"right":"left");if("center"!=c&&(b.splitter||this.gutters)&&!b._splitterWidget)d=b.splitter?this._splitterClass:u,a.isString(d)&&(d=a.getObject(d)),d=new d({id:b.id+"_splitter",container:this,child:b,region:c,live:this.liveSplitters}),d.isSplitter=!0,b._splitterWidget=
d,f.place(d.domNode,b.domNode,"after"),d.startup();b.region=c}},layout:function(){this._layoutChildren()},addChild:function(a,b){this.inherited(arguments);this._started&&this.layout()},removeChild:function(a){var b=a.region,c=a._splitterWidget;c&&(c.destroy(),delete a._splitterWidget);this.inherited(arguments);this._started&&this._layoutChildren();i.remove(a.domNode,this.baseClass+"Pane");d.set(a.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});d.set(a.domNode,"top"==
b||"bottom"==b?"width":"height","auto")},getChildren:function(){return h.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return h.filter(this.getChildren(),function(b){return b.region==a})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var c=this.domNode;this.cs=d.getComputedStyle(c);this.pe=e.getPadExtents(c,this.cs);this.pe.r=d.toPixelValue(c,this.cs.paddingRight);this.pe.b=d.toPixelValue(c,this.cs.paddingBottom);d.set(c,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=h.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);c.sort(function(a,b){for(var c=a.weight,d=b.weight,e=0;e<c.length;e++)if(c[e]!=d[e])return c[e]-d[e];return 0});var d=[];h.forEach(c,function(a){a=a.pane;d.push(a);a._splitterWidget&&d.push(a._splitterWidget)});r.layoutChildren(this.domNode,{l:this.pe.l,
t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},d,a,b)}},destroyRecursive:function(){h.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});g.ChildWidgetProperties={region:"",layoutPriority:0,splitter:!1,minSize:0,maxSize:Infinity};a.extend(q,g.ChildWidgetProperties);g._Splitter=p;g._Gutter=u;return g})},"dojo/cookie":function(){define("dojo/cookie",["./_base/kernel","./regexp"],function(h,j){h.cookie=
function(g,i,f){var e=document.cookie,d;if(1==arguments.length)d=(d=e.match(RegExp("(?:^|; )"+j.escapeString(g)+"=([^;]*)")))?decodeURIComponent(d[1]):void 0;else{f=f||{};e=f.expires;if("number"==typeof e){var c=new Date;c.setTime(c.getTime()+864E5*e);e=f.expires=c}if(e&&e.toUTCString)f.expires=e.toUTCString();var i=encodeURIComponent(i),e=g+"="+i,b;for(b in f)e+="; "+b,c=f[b],!0!==c&&(e+="="+c);document.cookie=e}return d};h.cookie.isSupported=function(){if(!("cookieEnabled"in navigator))this("__djCookieTest__",
"CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1});return navigator.cookieEnabled};return h.cookie})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(h,j){var g={};j.setObject("dojo.regexp",g);g.escapeString=function(g,f){return g.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return f&&-1!=f.indexOf(e)?e:"\\"+e})};g.buildGroupRE=function(i,f,e){if(!(i instanceof Array))return f(i);
for(var d=[],c=0;c<i.length;c++)d.push(f(i[c]));return g.group(d.join("|"),e)};g.group=function(g,f){return"("+(f?"?:":"")+g+")"};return g})},"dojo/touch":function(){define("./_base/kernel,./aspect,./dom,./on,./has,./mouse,./domReady,./_base/window".split(","),function(h,j,g,i,f,e,d,c){function b(b,c){return a?function(a,d){var e=i(a,c,d),f=i(a,b,function(a){(!n||(new Date).getTime()>n+1E3)&&d.call(this,a)});return{remove:function(){e.remove();f.remove()}}}:function(a,c){return i(a,b,c)}}var a=f("touch"),
k=!1;f("ios")&&(j=navigator.userAgent.match(/OS ([\d_]+)/)?RegExp.$1:"1",k=5>parseFloat(j.replace(/_/,".").replace(/_/g,"")));var n,q,o;a&&(d(function(){o=c.body();c.doc.addEventListener("touchstart",function(a){n=(new Date).getTime();var b=o;o=a.target;i.emit(b,"dojotouchout",{target:b,relatedTarget:o,bubbles:!0});i.emit(o,"dojotouchover",{target:o,relatedTarget:b,bubbles:!0})},!0);i(c.doc,"touchmove",function(a){n=(new Date).getTime();if((a=c.doc.elementFromPoint(a.pageX-(k?0:c.global.pageXOffset),
a.pageY-(k?0:c.global.pageYOffset)))&&o!==a)i.emit(o,"dojotouchout",{target:o,relatedTarget:a,bubbles:!0}),i.emit(a,"dojotouchover",{target:a,relatedTarget:o,bubbles:!0}),o=a})}),q=function(a,b){return i(c.doc,"touchmove",function(d){if(a===c.doc||g.isDescendant(o,a))d.target=o,b.call(this,d)})});e={press:b("mousedown","touchstart"),move:b("mousemove",q),release:b("mouseup","touchend"),cancel:b(e.leave,"touchcancel"),over:b("mouseover","dojotouchover"),out:b("mouseout","dojotouchout"),enter:e._eventHandler(b("mouseover",
"dojotouchover")),leave:e._eventHandler(b("mouseout","dojotouchout"))};return h.touch=e})},"dijit/_TemplatedMixin":function(){define("dojo/_base/lang,dojo/touch,./_WidgetBase,dojo/string,dojo/cache,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/sniff,dojo/_base/unload".split(","),function(h,j,g,i,f,e,d,c,b,a){var k=d("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=[];this._attachEvents=
[]},_stringRepl:function(a){var b=this.declaredClass,c=this;return i.substitute(a,this,function(a,d){"!"==d.charAt(0)&&(a=h.getObject(d.substr(1),!1,c));if("undefined"==typeof a)throw Error(b+" template:"+d);return null==a?"":"!"==d.charAt(0)?a:a.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this.templateString)this.templateString=f(this.templatePath,{sanitize:!0});var a=k.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(h.isString(a)){if(b=
c.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b;this.inherited(arguments);this._attachTemplateNodes(b,function(a,b){return a.getAttribute(b)});this._beforeFillContent();this._fillContent(this.srcNodeRef)},_beforeFillContent:function(){},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},_attachTemplateNodes:function(a,b){for(var c=h.isArray(a)?a:a.all||
a.getElementsByTagName("*"),d=h.isArray(a)?0:-1;0>d||c[d];d++){var e=-1==d?a:c[d];if(!this.widgetsInTemplate||!b(e,"dojoType")&&!b(e,"data-dojo-type")){var f=b(e,"dojoAttachPoint")||b(e,"data-dojo-attach-point");if(f)for(var k=f.split(/\s*,\s*/);f=k.shift();)h.isArray(this[f])?this[f].push(e):this[f]=e,this._attachPoints.push(f);if(f=b(e,"dojoAttachEvent")||b(e,"data-dojo-attach-event"))for(var k=f.split(/\s*,\s*/),g=h.trim;f=k.shift();)if(f){var i=null;-1!=f.indexOf(":")?(i=f.split(":"),f=g(i[0]),
i=g(i[1])):f=g(f);i||(i=f);this._attachEvents.push(this.connect(e,j[f]||f,i))}}}},destroyRendering:function(){e.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];e.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});k._templateCache={};k.getCachedTemplate=function(a,b,d){var e=k._templateCache,f=a,g=e[f];if(g){try{if(!g.ownerDocument||g.ownerDocument==(d||document))return g}catch(p){}c.destroy(g)}a=i.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return e[f]=
a;b=c.toDom(a,d);if(1!=b.nodeType)throw Error("Invalid template: "+a);return e[f]=b};b("ie")&&a.addOnWindowUnload(function(){var a=k._templateCache,b;for(b in a){var d=a[b];"object"==typeof d&&c.destroy(d);delete a[b]}});h.extend(g,{dojoAttachEvent:"",dojoAttachPoint:""});return k})},"dojo/cache":function(){define("dojo/cache",["./_base/kernel","./text"],function(h){return h.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./_base/xhr"],function(h,j,g,i){var f;f=function(a,
b,c){i("GET",{url:a,sync:!!b,load:c,headers:h.config.textPluginHeaders||{}})};var e={},d=function(a){if(a){var a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},c={},b={};h.cache=function(a,b,c){var g;"string"==typeof a?/\//.test(a)?(g=a,c=b):g=j.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")):(g=a+"",c=b);a=void 0!=c&&"string"!=typeof c?c.value:c;c=c&&c.sanitize;if("string"==typeof a)return e[g]=a,
c?d(a):a;if(null===a)return delete e[g],null;g in e||f(g,!0,function(a){e[g]=a});return c?d(e[g]):e[g]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),d=c[0];return(/^\./.test(d)?b(d):d)+(c[1]?"!"+c[1]:"")},load:function(a,k,g){var a=a.split("!"),i=1<a.length,o=a[0],l=k.toUrl(a[0]),a="url:"+l,m=c,h=function(a){g(i?d(a):a)};o in e?m=e[o]:a in k.cache?m=k.cache[a]:l in e&&(m=e[l]);if(m===c)if(b[l])b[l].push(h);else{var p=b[l]=[h];f(l,!k.async,function(a){e[o]=e[l]=a;for(var c=0;c<p.length;)p[c++](a);
delete b[l]})}else h(m)}}})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang,../_Widget,../_Container,../_Contained,../Viewport,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style".split(","),function(h,j,g,i,f,e,d,c,b){return e("dijit.layout._LayoutWidget",[j,g,i],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);d.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);
var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(f.on("resize",h.hitch(this,"resize")))}},resize:function(a,d){var e=this.domNode;a&&c.setMarginBox(e,a);var f=d||{};h.mixin(f,a||{});if(!("h"in f)||!("w"in f))f=h.mixin(c.getMarginBox(e),f);var g=b.getComputedStyle(e),l=c.getMarginExtents(e,g),i=c.getBorderExtents(e,g),f=this._borderBox={w:f.w-(l.w+i.w),h:f.h-(l.h+i.h)},l=c.getPadExtents(e,g);this._contentBox={l:b.toPixelValue(e,g.paddingLeft),t:b.toPixelValue(e,
g.paddingTop),w:f.w-l.w,h:f.h-l.h};this.layout()},layout:function(){},_setupChild:function(a){d.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){d.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(h,
j){return h("dijit._Contained",null,{_getSibling:function(g){var i=this.domNode;do i=i[g+"Sibling"];while(i&&1!=i.nodeType);return i&&j.byNode(i)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var g=this.getParent();return!g||!g.getIndexOfChild?-1:g.getIndexOfChild(this)}})})},"dijit/Dialog":function(){define("require,dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/_base/fx,dojo/i18n,dojo/keys,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/window,dojo/dnd/Moveable,dojo/dnd/TimedMoveable,./focus,./_base/manager,./_Widget,./_TemplatedMixin,./_CssStateMixin,./form/_FormMixin,./_DialogMixin,./DialogUnderlay,./layout/ContentPane,dojo/text!./templates/Dialog.html,./main,dojo/i18n!./nls/common".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r,p,u,s,t,v,w,x,E,A,y,D,F,L,I){var v=i("dijit._DialogBase",[x,A,y,E],{templateString:L,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],open:!1,duration:v.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},"aria-describedby":"",maxRatio:0.9,
postMixInProperties:function(){var a=n.getLocalization("dijit","common");o.mixin(this,a);this.inherited(arguments)},postCreate:function(){b.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();this.autofocus&&z.isTop(this)&&(this._getFocusItems(this.domNode),t.focus(this._firstFocusItem));
this.inherited(arguments)},_endDrag:function(){var a=c.position(this.domNode),b=p.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==r("ie")?s:u)(a,{handle:this.titleBar}),this.connect(this._moveable,"onMoveStop","_endDrag")):d.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":j.map(this["class"].split(/\s/),
function(a){return a+"_underlay"}).join(" "),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild();if(this._singleChild){if("undefined"!=typeof this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle}else b.set(this.containerNode,{width:"auto",height:"auto"});var a=c.position(this.domNode),d=p.getBox(this.ownerDocument);d.w*=this.maxRatio;d.h*=this.maxRatio;if(a.w>=d.w||a.h>=d.h){var e=c.position(this.containerNode),
f=Math.min(a.w,d.w)-(a.w-e.w),a=Math.min(a.h,d.h)-(a.h-e.h);if(this._singleChild&&this._singleChild.resize){if("undefined"==typeof this._singleChildOriginalStyle)this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:f,h:a})}else b.set(this.containerNode,{width:f+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!d.contains(this.ownerDocumentBody,
"dojoMove")){var a=this.domNode,e=p.getBox(this.ownerDocument),f=this._relativePosition,k=f?null:c.position(a);b.set(a,{left:Math.floor(e.l+(f?f.x:(e.w-k.w)/2))+"px",top:Math.floor(e.t+(f?f.y:(e.h-k.h)/2))+"px"})}},_onKey:function(b){if(b.charOrCode){var c=b.target;b.charOrCode===q.TAB&&this._getFocusItems(this.domNode);var e=this._firstFocusItem==this._lastFocusItem;if(c==this._firstFocusItem&&b.shiftKey&&b.charOrCode===q.TAB)e||t.focus(this._lastFocusItem),a.stop(b);else if(c==this._lastFocusItem&&
b.charOrCode===q.TAB&&!b.shiftKey)e||t.focus(this._firstFocusItem),a.stop(b);else{for(;c;){if(c==this.domNode||d.contains(c,"dijitPopup"))if(b.charOrCode==q.ESCAPE)this.onCancel();else return;c=c.parentNode}if(b.charOrCode!==q.TAB)a.stop(b);else if(!r("opera"))try{this._firstFocusItem.focus()}catch(f){}}}},show:function(){if(!this.open){this._started||this.startup();if(!this._alreadyInitialized)this._setup(),this._alreadyInitialized=!0;this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),z.hide(this));
var a=p.get(this.ownerDocument);this._modalconnects.push(l(a,"scroll",o.hitch(this,"resize")));this._modalconnects.push(l(this.domNode,g._keypress,o.hitch(this,"_onKey")));b.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this._size();this._position();var c;this._fadeInDeferred=new f(o.hitch(this,function(){c.stop();delete this._fadeInDeferred}));c=k.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:o.hitch(this,function(){z.show(this,this.underlayAttrs)}),
onEnd:o.hitch(this,function(){this.autofocus&&z.isTop(this)&&(this._getFocusItems(this.domNode),t.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return this._fadeInDeferred}},hide:function(){if(this._alreadyInitialized&&this.open){this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new f(o.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(o.hitch(this,"onHide"));a=k.fadeOut({node:this.domNode,
duration:this.duration,onEnd:o.hitch(this,function(){this.domNode.style.display="none";z.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();if(this._scrollConnected)this._scrollConnected=!1;for(var b;b=this._modalconnects.pop();)b.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return this._fadeOutDeferred}},resize:function(){"none"!=this.domNode.style.display&&(D._singleton&&D._singleton.layout(),r("touch")||this._position(),this._size())},
destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();z.hide(this);this.inherited(arguments)}}),B=i("dijit.Dialog",[F,v],{});B._DialogBase=v;var z=B._DialogLevelManager={_beginZIndex:950,show:function(a,c){C[C.length-1].focus=t.curNode;var d=D._singleton;!d||d._destroyed?d=I._underlay=D._singleton=new D(c):d.set(a.underlayAttrs);var e=C[C.length-
1].dialog?C[C.length-1].zIndex+2:B._DialogLevelManager._beginZIndex;1==C.length&&d.show();b.set(D._singleton.domNode,"zIndex",e-1);b.set(a.domNode,"zIndex",e);C.push({dialog:a,underlayAttrs:c,zIndex:e})},hide:function(a){if(C[C.length-1].dialog==a){C.pop();var c=C[C.length-1];D._singleton._destroyed||(1==C.length?D._singleton.hide():(b.set(D._singleton.domNode,"zIndex",c.zIndex-1),D._singleton.set(c.underlayAttrs)));if(a.refocus){a=c.focus;if(c.dialog&&(!a||!e.isDescendant(a,c.dialog.domNode)))c.dialog._getFocusItems(c.dialog.domNode),
a=c.dialog._firstFocusItem;if(a)try{a.focus()}catch(d){}}}else c=j.indexOf(j.map(C,function(a){return a.dialog}),a),-1!=c&&C.splice(c,1)},isTop:function(a){return C[C.length-1].dialog==a}},C=B._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];r("dijit-legacy-requires")&&m(0,function(){h(["dijit/TooltipDialog"])});return B})},"dojo/_base/fx":function(){define("./kernel,./config,./lang,../Evented,./Color,./connect,./sniff,../dom,../dom-style".split(","),function(h,j,g,i,f,e,d,c,b){var a=g.mixin,
k={},n=k._Line=function(a,b){this.start=a;this.end=b};n.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var q=k.Animation=function(b){a(this,b);if(g.isArray(this.curve))this.curve=new n(this.curve[0],this.curve[1])};q.prototype=new i;g.extend(q,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(j.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,
c)}catch(d){console.error("exception in animation handler for:",a),console.error(d)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||this.delay,d=g.hitch(this,"_play",b);if(0<c)return this._delayTimer=setTimeout(d,c),this;d();return this},_play:function(){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();
this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;var a=this.curve.getValue(this._getStep());if(!this._percent){if(!this._startRepeatCount)this._startRepeatCount=this.repeat;this._fire("onBegin",[a])}this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,
b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();if(a)this._percent=1;this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/
this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);if(1>this._percent)this._startTimer();else{this._active=!1;if(0<this.repeat)this.repeat--,this.play(null,!0);else if(-1==this.repeat)this.play(null,!0);else if(this._startRepeatCount)this.repeat=this._startRepeatCount,this._startRepeatCount=0;this._percent=0;this._fire("onEnd",[this.node]);!this.repeat&&this._stopTimer()}}return this},_clearTimer:function(){clearTimeout(this._delayTimer);
delete this._delayTimer}});var o=0,l=null,m={run:function(){}};g.extend(q,{_startTimer:function(){if(!this._timer)this._timer=e.connect(m,"run",this,"_cycle"),o++;l||(l=setInterval(g.hitch(m,"run"),this.rate))},_stopTimer:function(){if(this._timer)e.disconnect(this._timer),this._timer=null,o--;0>=o&&(clearInterval(l),l=null,o=0)}});var r=d("ie")?function(a){var c=a.style;if(!c.width.length&&"auto"==b.get(a,"width"))c.width="auto"}:function(){};k._fade=function(d){d.node=c.byId(d.node);var f=a({properties:{}},
d),d=f.properties.opacity={};d.start=!("start"in f)?function(){return+b.get(f.node,"opacity")||0}:f.start;d.end=f.end;d=k.animateProperty(f);e.connect(d,"beforeBegin",g.partial(r,f.node));return d};k.fadeIn=function(b){return k._fade(a({end:1},b))};k.fadeOut=function(b){return k._fade(a({end:0},b))};k._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var p=function(a){this._properties=a;for(var b in a){var c=a[b];if(c.start instanceof f)c.tempColor=new f}};p.prototype.getValue=function(a){var b=
{},c;for(c in this._properties){var d=this._properties[c],e=d.start;e instanceof f?b[c]=f.blendColors(e,d.end,a,d.tempColor).toCss():g.isArray(e)||(b[c]=(d.end-e)*a+e+("opacity"!=c?d.units||"px":0))}return b};k.animateProperty=function(d){var k=d.node=c.byId(d.node);if(!d.easing)d.easing=h._defaultEasing;d=new q(d);e.connect(d,"beforeBegin",d,function(){var c={},d;for(d in this.properties){if("width"==d||"height"==d)this.node.display="block";var e=this.properties[d];g.isFunction(e)&&(e=e(k));e=c[d]=
a({},g.isObject(e)?e:{end:e});if(g.isFunction(e.start))e.start=e.start(k);if(g.isFunction(e.end))e.end=e.end(k);var l=0<=d.toLowerCase().indexOf("color"),i=function(a,c){var d={height:a.offsetHeight,width:a.offsetWidth}[c];if(void 0!==d)return d;d=b.get(a,c);return"opacity"==c?+d:l?d:parseFloat(d)};if("end"in e){if(!("start"in e))e.start=i(k,d)}else e.end=i(k,d);l?(e.start=new f(e.start),e.end=new f(e.end)):e.start="opacity"==d?+e.start:parseFloat(e.start)}this.curve=new p(c)});e.connect(d,"onAnimate",
g.hitch(b,"set",d.node));return d};k.anim=function(a,b,c,d,e,f){return k.animateProperty({node:a,duration:c||q.prototype.duration,properties:b,easing:d,onEnd:e}).play(f||0)};a(h,k);h._Animation=q;return k})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(h,j,g,i){var f=h.Color=function(e){e&&this.setColor(e)};f.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,
255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:i.transparentColor||[0,0,0,0]};j.extend(f,{r:255,g:255,b:255,a:1,_set:function(e,d,c,b){this.r=e;this.g=d;this.b=c;this.a=b},setColor:function(e){j.isString(e)?f.fromString(e,this):j.isArray(e)?f.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof f||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,
this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+g.map(["r","g","b"],function(e){e=this[e].toString(16);return 2>e.length?"0"+e:e},this).join("")},toCss:function(e){var d=this.r+", "+this.g+", "+this.b;return(e?"rgba("+d+", "+this.a:"rgb("+d)+")"},toString:function(){return this.toCss(!0)}});f.blendColors=h.blendColors=function(e,d,c,b){var a=b||new f;g.forEach(["r","g","b","a"],function(b){a[b]=e[b]+(d[b]-e[b])*c;"a"!=b&&(a[b]=Math.round(a[b]))});
return a.sanitize()};f.fromRgb=h.colorFromRgb=function(e,d){var c=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return c&&f.fromArray(c[1].split(/\s*,\s*/),d)};f.fromHex=h.colorFromHex=function(e,d){var c=d||new f,b=4==e.length?4:8,a=(1<<b)-1,e=Number("0x"+e.substr(1));if(isNaN(e))return null;g.forEach(["b","g","r"],function(d){var f=e&a;e>>=b;c[d]=4==b?17*f:f});c.a=1;return c};f.fromArray=h.colorFromArray=function(e,d){var c=d||new f;c._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]));
if(isNaN(c.a))c.a=1;return c.sanitize()};f.fromString=h.colorFromString=function(e,d){var c=f.named[e];return c&&f.fromArray(c,d)||f.fromRgb(e,d)||f.fromHex(e,d)};return f})},"dojo/dnd/Moveable":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../dom,../dom-class,../Evented,../on,../topic,../touch,./common,./Mover,../_base/window".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q){return j("dojo.dnd.Moveable",[d],{handle:"",delay:0,skip:!1,constructor:function(b,d){this.node=
f.byId(b);d||(d={});this.handle=d.handle?f.byId(d.handle):null;if(!this.handle)this.handle=this.node;this.delay=0<d.delay?d.delay:0;this.skip=d.skip;this.mover=d.mover?d.mover:n;this.events=[c(this.handle,a.press,i.hitch(this,"onMouseDown")),c(this.handle,"dragstart",i.hitch(this,"onSelectStart")),c(this.handle,"selectstart",i.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){h.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=
null},onMouseDown:function(b){if(!this.skip||!k.isFormElement(b)){if(this.delay)this.events.push(c(this.handle,a.move,i.hitch(this,"onMouseMove")),c(this.handle,a.release,i.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);g.stop(b)}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);g.stop(a)},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();
g.stop(a)},onSelectStart:function(a){(!this.skip||!k.isFormElement(a))&&g.stop(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){b.publish("/dnd/move/start",a);e.add(q.body(),"dojoMove");e.add(this.node,"dojoMoveItem")},onMoveStop:function(a){b.publish("/dnd/move/stop",a);e.remove(q.body(),"dojoMove");e.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,
b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(h,j,g,i){var f=g.getObject("dojo.dnd",!0);f.getCopyKeyState=h.isCopyKey;f._uniqueId=0;f.getUniqueId=function(){var e;do e=j._scopeName+"Unique"+ ++f._uniqueId;while(i.byId(e));return e};f._empty={};f.isFormElement=function(e){e=e.target;if(3==e.nodeType)e=e.parentNode;return 0<=" button textarea input select option ".indexOf(" "+e.tagName.toLowerCase()+
" ")};return f})},"dojo/dnd/Mover":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../sniff,../_base/window,../dom,../dom-geometry,../dom-style,../Evented,../on,../touch,./common,./autoscroll".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o){return j("dojo.dnd.Mover",[a],{constructor:function(a,b,c){this.node=d.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=c;a=a.ownerDocument;this.events=[k(a,n.move,i.hitch(this,"onFirstMove")),
k(a,n.move,i.hitch(this,"onMouseMove")),k(a,n.release,i.hitch(this,"onMouseUp")),k(a,"dragstart",g.stop),k(a.body,"selectstart",g.stop)];o.autoScrollStart(a);if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){o.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);g.stop(a)},onMouseUp:function(a){(f("webkit")&&f("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();g.stop(a)},onFirstMove:function(a){var d=this.node.style,
f,k=this.host;switch(d.position){case "relative":case "absolute":f=Math.round(parseFloat(d.left))||0;d=Math.round(parseFloat(d.top))||0;break;default:d.position="absolute";d=c.getMarginBox(this.node);f=e.doc.body;var g=b.getComputedStyle(f),i=c.getMarginBox(f,g),g=c.getContentBox(f,g);f=d.l-(g.l-i.l);d=d.t-(g.t-i.t)}this.marginBox.l=f-this.marginBox.l;this.marginBox.t=d-this.marginBox.t;if(k&&k.onFirstMove)k.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){h.forEach(this.events,
function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang,../sniff,../_base/window,../dom-geometry,../dom-style,../window".split(","),function(h,j,g,i,f,e){var d={};h.setObject("dojo.dnd.autoscroll",d);d.getViewport=e.getBox;d.V_TRIGGER_AUTOSCROLL=32;d.H_TRIGGER_AUTOSCROLL=32;d.V_AUTOSCROLL_VALUE=16;d.H_AUTOSCROLL_VALUE=16;var c,b=g.doc,a=Infinity,k=Infinity;d.autoScrollStart=function(d){b=
d;c=e.getBox(b);d=g.body(b).parentNode;a=Math.max(d.scrollHeight-c.h,0);k=Math.max(d.scrollWidth-c.w,0)};d.autoScroll=function(f){var i=c||e.getBox(b),o=g.body(b).parentNode,l=0,m=0;f.clientX<d.H_TRIGGER_AUTOSCROLL?l=-d.H_AUTOSCROLL_VALUE:f.clientX>i.w-d.H_TRIGGER_AUTOSCROLL&&(l=Math.min(d.H_AUTOSCROLL_VALUE,k-o.scrollLeft));f.clientY<d.V_TRIGGER_AUTOSCROLL?m=-d.V_AUTOSCROLL_VALUE:f.clientY>i.h-d.V_TRIGGER_AUTOSCROLL&&(m=Math.min(d.V_AUTOSCROLL_VALUE,a-o.scrollTop));window.scrollBy(l,m)};d._validNodes=
{div:1,p:1,td:1};d._validOverflow={auto:1,scroll:1};d.autoScrollNodes=function(a){for(var b,c,e,k,h,p,u=0,s=0,t=a.target;t;){if(1==t.nodeType&&t.tagName.toLowerCase()in d._validNodes){e=f.getComputedStyle(t);k=e.overflow.toLowerCase()in d._validOverflow;h=e.overflowX.toLowerCase()in d._validOverflow;p=e.overflowY.toLowerCase()in d._validOverflow;if(k||h||p)b=i.getContentBox(t,e),c=i.position(t,!0);if(k||h){e=Math.min(d.H_TRIGGER_AUTOSCROLL,b.w/2);h=a.pageX-c.x;if(j("webkit")||j("opera"))h+=g.body().scrollLeft;
u=0;0<h&&h<b.w&&(h<e?u=-e:h>b.w-e&&(u=e),t.scrollLeft+=u)}if(k||p){k=Math.min(d.V_TRIGGER_AUTOSCROLL,b.h/2);p=a.pageY-c.y;if(j("webkit")||j("opera"))p+=g.body().scrollTop;s=0;0<p&&p<b.h&&(p<k?s=-k:p>b.h-k&&(s=k),t.scrollTop+=s)}if(u||s)return}try{t=t.parentNode}catch(v){t=null}}d.autoScroll(a)};return d})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(h,j){var g=j.prototype.onMove;return h("dojo.dnd.TimedMoveable",j,{timeout:40,constructor:function(g,f){f||
(f={});if(f.timeout&&"number"==typeof f.timeout&&0<=f.timeout)this.timeout=f.timeout},onMoveStop:function(i){i._timer&&(clearTimeout(i._timer),g.call(this,i,i._leftTop));j.prototype.onMoveStop.apply(this,arguments)},onMove:function(i,f){i._leftTop=f;if(!i._timer){var e=this;i._timer=setTimeout(function(){i._timer=null;g.call(e,i,i._leftTop)},this.timeout)}}})})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(h,j,
g,i,f){var e={};h.forEach("byId,getUniqueId,findWidgets,_destroyAll,byNode,getEnclosingWidget".split(","),function(d){e[d]=i[d]});g.mixin(e,{defaultDuration:j.defaultDuration||200});g.mixin(f,e);return f})},"dijit/_CssStateMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/has,dojo/_base/lang,dojo/on,dojo/ready,dojo/_base/window,./registry".split(","),function(h,j,g,i,f,e,d,c,b,a){j=j("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);
h.forEach("disabled,readOnly,checked,selected,focused,state,hovering,active,_opened".split(","),function(a){this.watch(a,e.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes)this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",!1);
this._set("active",!1);break;case "mousedown":case "touchstart":this._set("active",!0);break;case "mouseup":case "touchend":this._set("active",!1)}},_setStateClass:function(){function a(c){b=b.concat(h.map(b,function(a){return a+c}),"dijit"+c)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?
a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,d={};h.forEach(c.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&h.forEach(this._stateClasses,function(a){delete d[a]});h.forEach(b,function(a){d[a]=!0});var e=[],f;for(f in d)e.push(f);c.className=e.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,b,c){function d(c){i.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":i.toggle(a,
b+"Hover",!0);break;case "mouseout":i.toggle(a,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":d(!0);break;case "mouseup":case "touchend":d(!1);break;case "focus":case "focusin":i.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":i.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});c(function(){function c(b){if(!g.isDescendant(b.relatedTarget,b.target))for(var d=b.target;d&&d!=b.relatedTarget;d=d.parentNode)if(d._cssState){var e=a.getEnclosingWidget(d);
e&&(d==e.domNode?e._cssMouseEvent(b):e._subnodeCssMouseEvent(d,d._cssState,b))}}function e(a){a.target=a.srcElement;c(a)}var i=b.body(),o=(f("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);h.forEach(o,function(a){i.addEventListener?i.addEventListener(a,c,!0):i.attachEvent("on"+a,e)});d(i,"focusin, focusout",function(b){var c=b.target;c._cssState&&!c.getAttribute("widgetId")&&a.getEnclosingWidget(c)._subnodeCssMouseEvent(c,c._cssState,b)})});return j})},
"dijit/form/_FormMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/window".split(","),function(h,j,g,i,f,e){return j("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(d){var c=[];h.forEach(d||this.getChildren(),function(b){"value"in b?c.push(b):c=c.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return c},reset:function(){h.forEach(this._getDescendantFormWidgets(),function(d){d.reset&&d.reset()})},validate:function(){var d=
!1;return h.every(h.map(this._getDescendantFormWidgets(),function(c){c._hasBeenBlurred=!0;var b=c.disabled||!c.validate||c.validate();!b&&!d&&(e.scrollIntoView(c.containerNode||c.domNode),c.focus(),d=!0);return b}),function(c){return c})},setValues:function(d){g.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",d)},_setValueAttr:function(d){var c={};h.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(c[a.name]||
(c[a.name]=[])).push(a)});for(var b in c)if(c.hasOwnProperty(b)){var a=c[b],e=i.getObject(b,!1,d);void 0!==e&&(i.isArray(e)||(e=[e]),"boolean"==typeof a[0].checked?h.forEach(a,function(a){a.set("value",-1!=h.indexOf(e,a.value))}):a[0].multiple?a[0].set("value",e):h.forEach(a,function(a,b){a.set("value",e[b])}))}},getValues:function(){g.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var d={};h.forEach(this._getDescendantFormWidgets(),
function(c){var b=c.name;if(b&&!c.disabled){var a=c.get("value");"boolean"==typeof c.checked?/Radio/.test(c.declaredClass)?!1!==a?i.setObject(b,a,d):(a=i.getObject(b,!1,d),void 0===a&&i.setObject(b,null,d)):(c=i.getObject(b,!1,d),c||(c=[],i.setObject(b,c,d)),!1!==a&&c.push(a)):(c=i.getObject(b,!1,d),"undefined"!=typeof c?i.isArray(c)?c.push(a):i.setObject(b,[c,a],d):i.setObject(b,a,d))}});return d},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var d=
h.map(this._descendants,function(c){return c.get("state")||""});return 0<=h.indexOf(d,"Error")?"Error":0<=h.indexOf(d,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(d){this._descendants=this._getDescendantFormWidgets();h.forEach(this._descendants,function(c){c._started||c.startup()});d||this._onChildChange()},_onChildChange:function(d){(!d||"state"==d||"disabled"==d)&&this._set("state",this._getState());if(!d||"value"==d||"disabled"==d||"checked"==d)this._onChangeDelayTimer&&
this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var d=this;this.own(f(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(c){c.target!=d.domNode&&d._onChildChange(c.type.replace("attrmodified-",
""))}));this.watch("state",function(c,b,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(h,j){return h("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var g=j._getTabNavigable(this.containerNode);this._firstFocusItem=g.lowest||g.first||this.closeButtonNode||
this.domNode;this._lastFocusItem=g.last||g.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare,dojo/dom-attr,dojo/window,./_Widget,./_TemplatedMixin,./BackgroundIframe".split(","),function(h,j,g,i,f,e){return h("dijit.DialogUnderlay",[i,f],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_setDialogIdAttr:function(d){j.set(this.node,"id",d+"_underlay");
this._set("dialogId",d)},_setClassAttr:function(d){this.node.className="dijitDialogUnderlay "+d;this._set("class",d)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode)},layout:function(){var d=this.node.style,c=this.domNode.style;c.display="none";var b=g.getBox(this.ownerDocument);c.top=b.t+"px";c.left=b.l+"px";d.width=b.w+"px";d.height=b.h+"px";c.display="block"},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new e(this.domNode)},hide:function(){this.bgIframe.destroy();
delete this.bgIframe;this.domNode.style.display="none"}})})},"dijit/BackgroundIframe":function(){define("require,./main,dojo/_base/config,dojo/dom-construct,dojo/dom-style,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window".split(","),function(h,j,g,i,f,e,d,c,b){c.add("bgIframe",c("ie")||c("mozilla"));var a=new function(){var a=[];this.pop=function(){var d;a.length?(d=a.pop(),d.style.display=""):(9>c("ie")?(d="<iframe src='"+(g.dojoBlankHtmlUrl||h.toUrl("dojo/resources/blank.html")||'javascript:""')+
"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",d=b.doc.createElement(d)):(d=i.create("iframe"),d.src='javascript:""',d.className="dijitBackgroundIframe",d.setAttribute("role","presentation"),f.set(d,"opacity",0.1)),d.tabIndex=-1);return d};this.push=function(b){b.style.display="none";a.push(b)}};j.BackgroundIframe=function(b){if(!b.id)throw Error("no id");if(c("bgIframe")){var g=this.iframe=a.pop();b.appendChild(g);7>c("ie")||c("quirks")?
(this.resize(b),this._conn=d(b,"resize",e.hitch(this,function(){this.resize(b)}))):f.set(g,{width:"100%",height:"100%"})}};e.extend(j.BackgroundIframe,{resize:function(a){this.iframe&&f.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn)this._conn.remove(),this._conn=null;this.iframe&&(a.push(this.iframe),delete this.iframe)}});return j.BackgroundIframe})},"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n\t\t\t\trole="heading" level="1"></span>\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabindex="0">\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n',
"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(h,j,g){return h("dijit.form.ComboBox",[j,g],{})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare,dojo/_base/kernel,dojo/i18n,./TextBox,../Tooltip,dojo/text!./templates/ValidationTextBox.html,dojo/i18n!./nls/validate".split(","),function(h,j,g,i,f,e){var d;return d=h("dijit.form.ValidationTextBox",i,{templateString:e,required:!1,promptMessage:"",invalidMessage:"$_unset_$",
missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(c,b){b!=d.prototype[c]&&(j.deprecated("ValidationTextBox id="+this.id+", set('"+c+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(c){this._deprecateRegExp("regExpGen",c);this.regExpGen=this._getPatternAttr},_setRegExpAttr:function(c){this._deprecateRegExp("regExp",c)},_setValueAttr:function(){this.inherited(arguments);
this._refreshState()},validator:function(c,b){return RegExp("^(?:"+this._getPatternAttr(b)+")"+(this.required?"":"?")+"$").test(c)&&(!this.required||!this._isEmpty(c))&&(this._isEmpty(c)||void 0!==this.parse(c,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(c){return(this.trim?/^\s*$/:/^$/).test(c)},getErrorMessage:function(){var c="$_unset_$"==this.invalidMessage?
this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?c:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?b:c},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(c){var b="",a=this.disabled||this.isValid(c);if(a)this._maskValidSubsetError=!0;var d=this._isEmpty(this.textbox.value),e=!a&&c&&this._isValidSubset();
this._set("state",a?"":((!this._hasBeenBlurred||c)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&c)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid",a?"false":"true");"Error"==this.state?(this._maskValidSubsetError=c&&e,b=this.getErrorMessage(c)):"Incomplete"==this.state?(b=this.getPromptMessage(c),this._maskValidSubsetError=!this._hasBeenBlurred||c):d&&(b=this.getPromptMessage(c));this.set("message",b);return a},displayMessage:function(c){c&&this.focused?f.show(c,
this.domNode,this.tooltipPosition,!this.isLeftToRight()):f.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(){this.constraints={};this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(c){if(!c.locale&&this.lang)c.locale=this.lang;this._set("constraints",c);this._refreshState()},_setPatternAttr:function(c){this._set("pattern",c);
this._refreshState()},_getPatternAttr:function(c){var b=this.pattern;"function"==(typeof b).toLowerCase()&&(b=this.pattern(c||this.constraints));if(b!=this._lastRegExp){var a="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":a+=b;break;case ")":a+="|$)";break;default:a+="(?:"+b+"|$)"}});try{"".search(a)}catch(d){a=this.pattern,console.warn("RegExp error in "+
this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+a+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=g.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(c){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(c){this._set("required",c);this.focusNode.setAttribute("aria-required",c);this._refreshState()},_setMessageAttr:function(c){this._set("message",c);this.displayMessage(c)},
reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/dom-style,dojo/_base/kernel,dojo/_base/lang,dojo/sniff,./_FormValueWidget,./_TextBoxMixin,dojo/text!./templates/TextBox.html,../main".split(","),function(h,j,g,i,f,e,d,c,b,a){h=h("dijit.form.TextBox",[d,c],{templateString:b,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',
_buttonInputDisabled:e("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>e("ie")&&this.defer(function(){try{var a=g.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;
if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);if(!this._phspan)this._attachPoints.push("_phspan"),this._phspan=j.create("span",{onmousedown:function(a){a.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);
this._updatePlaceHolder()},_updatePlaceHolder:function(){if(this._phspan)this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none"},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){i.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){i.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.",
"","2.0");this.set("displayedValue",a)},_onBlur:function(a){if(!this.disabled&&(this.inherited(arguments),this._updatePlaceHolder(),e("mozilla")&&this.selectOnClick))this.textbox.selectionStart=this.textbox.selectionEnd=void 0},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});if(9>e("ie"))h.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},a._setSelectionRange=
c._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())};return h})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(h,j,g,i){return h("dijit.form._FormValueWidget",[g,i],{_layoutHackIE7:function(){if(7==j("ie"))for(var f=this.domNode,e=f.parentNode,d=f.firstChild||f,c=d.style.filter,
b=this;e&&0==e.clientHeight;)(function(){var a=b.connect(e,"onscroll",function(){b.disconnect(a);d.style.filter=(new Date).getMilliseconds();b.defer(function(){d.style.filter=c})})})(),e=e.parentNode}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/ready,../_Widget,../_CssStateMixin,../_TemplatedMixin,./_FormWidgetMixin".split(","),function(h,j,g,i,f,e,d,c){j("dijit-legacy-requires")&&i(0,function(){require(["dijit/form/_FormValueWidget"])});return h("dijit.form._FormWidget",
[f,d,e,c],{setDisabled:function(b){g.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){g.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){g.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=
this.name?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/sniff,dojo/window,../a11y".split(","),function(h,j,g,i,f,e,d,c,b){return j("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,
scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);g.set(this.focusNode,"disabled",a);this.valueNode&&g.set(this.valueNode,"disabled",a);this.focusNode.setAttribute("aria-disabled",a?"true":"false");a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",h.forEach(f.isArray(a)?a:[a],function(a){a=this[a];d("webkit")||b.hasDefaultTabStop(a)?a.setAttribute("tabIndex",
"-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.connect(this.focusNode,"onfocus",function(){this.disconnect(d);this.disconnect(b)}),d=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(d);this.disconnect(b);this.focused&&this.focus()});this.scrollOnFocus&&this.defer(function(){c.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&
this.focusNode&&"none"!=i.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||
0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)if(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));
this.inherited(arguments)}})})},"dijit/form/_FormValueMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(h,j,g,i,f){return h("dijit.form._FormValueMixin",f,{readOnly:!1,_setReadOnlyAttr:function(e){j.set(this.focusNode,"readOnly",e);this._set("readOnly",e)},postCreate:function(){this.inherited(arguments);i("ie")&&this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);if(void 0===this._resetValue)this._lastValueReported=
this._resetValue=this.value},_setValueAttr:function(e,d){this._handleOnChange(e,d)},_handleOnChange:function(e,d){this._set("value",e);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)},_onKeyDown:function(e){if(e.keyCode==g.ESCAPE&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(9>i("ie")||i("ie")&&i("quirks"))){e.preventDefault();var d=e.srcElement,c=d.ownerDocument.createEventObject();
c.keyCode=g.ESCAPE;c.shiftKey=e.shiftKey;d.fireEvent("onkeypress",c)}}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,../main".split(","),function(h,j,g,i,f,e,d,c){var b=j("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,
b,c){var d;void 0!==a&&(d=this.filter(a),"string"!=typeof c&&(c=null!==d&&("number"!=typeof d||!isNaN(d))?this.filter(this.format(d,this.constraints)):""));if(null!=c&&("number"!=typeof c||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,c);this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==
a?a="":"string"!=typeof a&&(a=""+a);this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,a)},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(a){"auto"==this.textDir&&this.applyTextDir(this.focusNode,this.focusNode.value);this._processInput(a);this.intermediateChanges&&
this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(d(this.textbox,"keydown, keypress, paste, cut, input, compositionend",e.hitch(this,function(a){var b;if("keydown"==a.type){b=a.keyCode;switch(b){case f.SHIFT:case f.ALT:case f.CTRL:case f.META:case f.CAPS_LOCK:case f.NUM_LOCK:case f.SCROLL_LOCK:return}if(!a.ctrlKey&&
!a.metaKey&&!a.altKey){switch(b){case f.NUMPAD_0:case f.NUMPAD_1:case f.NUMPAD_2:case f.NUMPAD_3:case f.NUMPAD_4:case f.NUMPAD_5:case f.NUMPAD_6:case f.NUMPAD_7:case f.NUMPAD_8:case f.NUMPAD_9:case f.NUMPAD_MULTIPLY:case f.NUMPAD_PLUS:case f.NUMPAD_ENTER:case f.NUMPAD_MINUS:case f.NUMPAD_PERIOD:case f.NUMPAD_DIVIDE:return}if(65<=b&&90>=b||48<=b&&57>=b||b==f.SPACE)return;b=!1;for(var c in f)if(f[c]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||
(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==f.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}if("input"==a.type){if(this.__skipInputEvent){this.__skipInputEvent=!1;return}}else this.__skipInputEvent=!0;var d={faux:!0},g;for(g in a)"layerX"!=g&&"layerY"!=g&&(c=a[g],"function"!=typeof c&&"undefined"!=typeof c&&
(d[g]=c));e.mixin(d,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){d._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});!1===this.onInput(d)&&(d.preventDefault(),d.stopPropagation());d._wasConsumed||this.defer(function(){this._onInput(d)})})))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=e.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&
(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){if(!this.disabled&&!this.readOnly){if(this.selectOnClick&&"mouse"==a)this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);
this._selectOnClickHandle=null;this._isTextSelected()||b.selectInputText(this.textbox)}),this.defer(function(){if(this._selectOnClickHandle)this.disconnect(this._selectOnClickHandle),this._selectOnClickHandle=null},500);this.inherited(arguments);this._refreshState()}},reset:function(){this.textbox.value="";this.inherited(arguments)},_setTextDirAttr:function(a){if(!this._created||this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.focusNode.value)}});b._setSelectionRange=c._setSelectionRange=
function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};b.selectInputText=c.selectInputText=function(a,c,d){a=g.byId(a);isNaN(c)&&(c=0);isNaN(d)&&(d=a.value?a.value.length:0);try{a.focus(),b._setSelectionRange(a,c,d)}catch(e){}};return b})},"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"dijit/Tooltip":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/fx,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/on,dojo/sniff,./_base/manager,./place,./_Widget,./_TemplatedMixin,./BackgroundIframe,dojo/text!./templates/Tooltip.html,./main".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r,p){var u=j("dijit._MasterTooltip",[o,l],{duration:n.defaultDuration,templateString:r,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.bgIframe=new m(this.domNode);this.fadeIn=g.fadeIn({node:this.domNode,duration:this.duration,onEnd:c.hitch(this,"_onShow")});this.fadeOut=g.fadeOut({node:this.domNode,duration:this.duration,onEnd:c.hitch(this,"_onHide")})},show:function(a,b,e,f,k){if(!this.aroundNode||!(this.aroundNode===b&&this.containerNode.innerHTML==a))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;k&&this.set("textDir",k);this.containerNode.align=f?"right":"left";var g=q.around(this.domNode,
b,e&&e.length?e:s.defaultPosition,!f,c.hitch(this,"orient")),p=g.aroundNodePos;"M"==g.corner.charAt(0)&&"M"==g.aroundCorner.charAt(0)?(this.connectorNode.style.top=p.y+(p.h-this.connectorNode.offsetHeight>>1)-g.y+"px",this.connectorNode.style.left=""):"M"==g.corner.charAt(1)&&"M"==g.aroundCorner.charAt(1)?this.connectorNode.style.left=p.x+(p.w-this.connectorNode.offsetWidth>>1)-g.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");d.set(this.domNode,"opacity",0);this.fadeIn.play();
this.isShowingNow=!0;this.aroundNode=b}},orient:function(a,b,c,d,f){this.connectorNode.style.top="";var g=d.h,d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+
"-"+c];this.domNode.style.width="auto";var p=e.position(this.domNode);if(k("ie")||k("trident"))p.w+=2;var i=Math.min(Math.max(d,1),p.w);e.setMarginBox(this.domNode,{w:i});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=e.position(a),b=this.connectorNode.offsetHeight,a.h>g?(this.connectorNode.style.top=g-(f.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(f.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom=
"");return Math.max(0,p.w-d)},_onShow:function(){if(k("ie"))this.domNode.style.filter=""},hide:function(a){if(this._onDeck&&this._onDeck[1]==a)this._onDeck=null;else if(this.aroundNode===a)this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play()},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck)this.show.apply(this,this._onDeck),this._onDeck=null},_setAutoTextDir:function(a){this.applyTextDir(a,k("ie")?a.outerText:a.textContent);
h.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});p.showTooltip=function(a,b,c,d,e){c&&(c=h.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));if(!s._masterTT)p._masterTT=s._masterTT=new u;return s._masterTT.show(a,b,c,d,e)};p.hideTooltip=function(a){return s._masterTT&&s._masterTT.hide(a)};var s=j("dijit.Tooltip",
o,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(d){h.forEach(this._connections||[],function(a){h.forEach(a,function(a){a.remove()})},this);this._connectIds=h.filter(c.isArrayLike(d)?d:d?[d]:[],function(a){return i.byId(a,this.ownerDocument)},this);this._connections=h.map(this._connectIds,function(d){var d=i.byId(d,this.ownerDocument),e=this.selector,f=e?function(b){return a.selector(e,b)}:function(a){return a},k=this;return[a(d,f(b.enter),function(){k._onHover(this)}),
a(d,f("focusin"),function(){k._onHover(this)}),a(d,f(b.leave),c.hitch(k,"_onUnHover")),a(d,f("focusout"),c.hitch(k,"_onUnHover"))]},this);this._set("connectId",d)},addTarget:function(a){a=a.id||a;-1==h.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=h.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);f.add(this.domNode,"dijitTooltipData")},
startup:function(){this.inherited(arguments);var a=this.connectId;h.forEach(c.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(){return this.label||this.domNode.innerHTML},_onHover:function(a){if(!this._showTimer)this._showTimer=this.defer(function(){this.open(a)},this.showDelay)},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);this.close()},open:function(a){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);var b=this.getContent(a);
if(b)s.show(b,a,this.position,!this.isLeftToRight(),this.textDir),this._connectNode=a,this.onShow(a,this.position)},close:function(){this._connectNode&&(s.hide(this._connectNode),delete this._connectNode,this.onHide());this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close();h.forEach(this._connections||[],function(a){h.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});s._MasterTooltip=u;s.show=
p.showTooltip;s.hide=p.hideTooltip;s.defaultPosition=["after-centered","before-centered"];return s})},"dijit/place":function(){define("dojo/_base/array,dojo/dom-geometry,dojo/dom-style,dojo/_base/kernel,dojo/_base/window,./Viewport,./main".split(","),function(h,j,g,i,f,e,d){function c(b,a,c,d){var g=e.getEffectiveBox(b.ownerDocument);(!b.parentNode||"body"!=(""+b.parentNode.tagName).toLowerCase())&&f.body(b.ownerDocument).appendChild(b);var i=null;h.some(a,function(a){var e=a.corner,f=a.pos,p=0,h=
{w:{L:g.l+g.w-f.x,R:f.x-g.l,M:g.w}[e.charAt(1)],h:{T:g.t+g.h-f.y,B:f.y-g.t,M:g.h}[e.charAt(0)]},s=b.style;s.left=s.right="auto";c&&(p=c(b,a.aroundCorner,e,h,d),p="undefined"==typeof p?0:p);var t=b.style,v=t.display,w=t.visibility;if("none"==t.display)t.visibility="hidden",t.display="";s=j.position(b);t.display=v;t.visibility=w;v={L:f.x,R:f.x-s.w,M:Math.max(g.l,Math.min(g.l+g.w,f.x+(s.w>>1))-s.w)}[e.charAt(1)];w={T:f.y,B:f.y-s.h,M:Math.max(g.t,Math.min(g.t+g.h,f.y+(s.h>>1))-s.h)}[e.charAt(0)];f=Math.max(g.l,
v);t=Math.max(g.t,w);v=Math.min(g.l+g.w,v+s.w);w=Math.min(g.t+g.h,w+s.h);v-=f;w-=t;p+=s.w-v+(s.h-w);if(null==i||p<i.overflow)i={corner:e,aroundCorner:a.aroundCorner,x:f,y:t,w:v,h:w,overflow:p,spaceAvailable:h};return!p});i.overflow&&c&&c(b,i.aroundCorner,i.corner,i.spaceAvailable,d);a=b.style;a.top=i.y+"px";a.left=i.x+"px";a.right="auto";return i}return d.place={at:function(b,a,d,e){d=h.map(d,function(b){var c={corner:b,pos:{x:a.x,y:a.y}};e&&(c.pos.x+="L"==b.charAt(1)?e.x:-e.x,c.pos.y+="T"==b.charAt(0)?
e.y:-e.y);return c});return c(b,d)},around:function(b,a,d,e,f){function o(a,b){E.push({aroundCorner:a,corner:b,pos:{x:{L:t,R:t+w,M:t+(w>>1)}[a.charAt(1)],y:{T:v,B:v+x,M:v+(x>>1)}[a.charAt(0)]}})}var l="string"==typeof a||"offsetWidth"in a||"ownerSVGElement"in a?j.position(a,!0):a;if(a.parentNode)for(var m="absolute"==g.getComputedStyle(a).position,a=a.parentNode;a&&1==a.nodeType&&"BODY"!=a.nodeName;){var r=j.position(a,!0),p=g.getComputedStyle(a);/relative|absolute/.test(p.position)&&(m=!1);if(!m&&
/hidden|auto|scroll/.test(p.overflow)){var u=Math.min(l.y+l.h,r.y+r.h),s=Math.min(l.x+l.w,r.x+r.w);l.x=Math.max(l.x,r.x);l.y=Math.max(l.y,r.y);l.h=u-l.y;l.w=s-l.x}"absolute"==p.position&&(m=!0);a=a.parentNode}var t=l.x,v=l.y,w="w"in l?l.w:l.w=l.width,x="h"in l?l.h:(i.deprecated("place.around: dijit/place.__Rectangle: { x:"+t+", y:"+v+", height:"+l.height+", width:"+w+" } has been deprecated.  Please use { x:"+t+", y:"+v+", h:"+l.height+", w:"+w+" }","","2.0"),l.h=l.height),E=[];h.forEach(d,function(a){var b=
e;switch(a){case "above-centered":o("TM","BM");break;case "below-centered":o("BM","TM");break;case "after-centered":b=!b;case "before-centered":o(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":o(b?"TL":"TR",b?"TR":"TL");o(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":o(b?"BL":"BR",b?"TL":"TR");o(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":o(b?"TL":"TR",b?"BL":"BR");o(b?"TR":"TL",b?"BR":"BL");break;default:o(a.aroundCorner,a.corner)}});b=c(b,
E,f,{w:w,h:x});b.aroundNodePos=l;return b}}})},"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n></div>\n',"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/kernel,dojo/_base/lang,dojo/store/util/QueryResults,./_AutoCompleterMixin,./_ComboBoxMenu,../_HasDropDown,dojo/text!./templates/DropDownBox.html".split(","),function(h,j,g,i,f,e,d,c,b){return h("dijit.form.ComboBoxMixin",[c,e],{dropDownClass:d,hasDownArrow:!0,templateString:b,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",
a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(a){a.get||i.mixin(a,{_oldAPI:!0,get:function(a){var b=new j;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new j(function(){d.abort&&d.abort()});c.total=new j;var d=this.fetch(i.mixin({query:a,onBegin:function(a){c.total.resolve(a)},onComplete:function(a){c.resolve(a)},
onError:function(a){c.reject(a)}},b));return f(c)}});this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;a&&this._setStoreAttr(a);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var b=this.declaredClass;i.mixin(this.store,{getValue:function(a,c){g.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[c]},getLabel:function(a){g.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly",
"","2.0");return a.name},fetch:function(a){g.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],i.hitch(this,function(b){(new b({objectStore:this})).fetch(a)}))}})}}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(h,j,g){var i=function(f){function e(c){f[c]=function(){var b=arguments,a=g.when(f,function(a){Array.prototype.unshift.call(b,a);return i(h[c].apply(h,
b))});if("forEach"!==c||d)return a}}if(!f)return f;var d=!!f.then;d&&(f=j.delegate(f));e("forEach");e("filter");e("map");if(null==f.total)f.total=g.when(f,function(c){return c.length});return f};j.setObject("dojo.store.util.QueryResults",i);return i})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/regexp,dojo/sniff,dojo/string,./DataList,../registry,./_TextBoxMixin,./_SearchMixin".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o){return j("dijit.form._AutoCompleterMixin",o,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var c=0;if("number"==typeof a.selectionStart)c=a.selectionStart;else if(b("ie")){var d=a.ownerDocument.selection.createRange().duplicate(),a=a.createTextRange();d.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",d),c=(""+a.text).replace(/\r/g,"").length}catch(e){}}return c},
_setCaretPos:function(a,b){b=parseInt(b);q.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(32<=a.charCode)){var b=a.charCode||a.keyCode;if(!(b==f.ALT||b==f.CTRL||b==f.META||b==f.SHIFT)){var c=this.dropDown,d=null;this._abortQuery();this.inherited(arguments);if(!a.altKey&&!a.ctrlKey&&!a.metaKey)switch(this._opened&&(d=c.getHighlightedOption()),b){case f.PAGE_DOWN:case f.DOWN_ARROW:case f.PAGE_UP:case f.UP_ARROW:this._opened&&
this._announceOption(d);i.stop(a);break;case f.ENTER:if(d){if(d==c.nextButton){this._nextSearch(1);i.stop(a);break}else if(d==c.previousButton){this._nextSearch(-1);i.stop(a);break}i.stop(a)}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case f.TAB:b=this.get("displayedValue");if(c&&(b==c._messages.previousMessage||b==c._messages.nextMessage))break;d&&this._selectOption(d);case f.ESCAPE:if(this._opened)this._lastQuery=null,this.closeDropDown()}}}},_autoCompleteText:function(a){var b=
this.focusNode;q.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";if(0==a[c](0).indexOf(this.focusNode.value[c](0))){if(c=this.autoComplete?this._getCaretPos(b):b.value.length,c+1>b.value.length)b.value=a,q.selectInputText(b,c)}else b.value=a,q.selectInputText(b)},_openResultList:function(a,b,c){var d=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();!a.length&&0==c.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=e.hitch(this,function(b){a.nextPage(-1!==
b);this.focus()}),this.dropDown.createOptions(a,c,e.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),d&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(b[this.searchAttr].toString())&&this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);
this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,!0):"undefined"==typeof this.item?
(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState());this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var d="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",d,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=
a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(c,this.searchAttr):c[this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",g.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);
this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (e.isString(this.dropDownClass)?e.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:e.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},
_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&(this.store=new k({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=d('label[for="'+this.id+'"]');if(a.length){if(!a[0].id)a[0].id=this.id+"_label";this.domNode.setAttribute("aria-labelledby",a[0].id)}this.inherited(arguments);
this.connect(this,"onSearch","_openResultList")},_getMenuLabelFromItem:function(a){var a=this.labelFunc(a,this.store),b=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,b){var d=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),e=this.queryExpr.indexOf("${0}"),b=c.escapeString(b);return this._escapeHtml(a.replace(RegExp((0==e?"^":"")+"("+b+")"+(e==
this.queryExpr.length-4?"$":""),d),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(a){return a=(""+a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,c,
d){this._set("item",d||null);null==a&&(a="");this.inherited(arguments)},_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",a)}})})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(h){var j={};h.setObject("dojo.data.util.filter",j);j.patternToRegExp=function(g,i){for(var f="^",e=null,d=0;d<g.length;d++)switch(e=g.charAt(d),e){case "\\":f+=e;d++;f+=g.charAt(d);break;case "*":f+=".*";break;case "?":f+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":f+=
"\\";default:f+=e}f+="$";return i?RegExp(f,"mi"):RegExp(f,"m")};return j})},"dijit/form/DataList":function(){define("dojo/_base/declare,dojo/dom,dojo/_base/lang,dojo/query,dojo/store/Memory,../registry".split(","),function(h,j,g,i,f,e){function d(c){return{id:c.value,value:c.value,name:g.trim(c.innerText||c.textContent||"")}}return h("dijit.form.DataList",f,{constructor:function(c,b){this.domNode=j.byId(b);g.mixin(this,c);this.id&&e.add(this);this.domNode.style.display="none";this.inherited(arguments,
[{data:i("option",this.domNode).map(d)}])},destroy:function(){e.remove(this.id)},fetchSelectedItem:function(){var c=i("> option[selected]",this.domNode)[0]||i("> option",this.domNode)[0];return c&&d(c)}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(h,j,g){return h("dojo.store.Memory",null,{constructor:function(g){for(var f in g)this[f]=g[f];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:g,get:function(g){return this.data[this.index[g]]},
getIdentity:function(g){return g[this.idProperty]},put:function(g,f){var e=this.data,d=this.index,c=this.idProperty,c=g[c]=f&&"id"in f?f.id:c in g?g[c]:Math.random();if(c in d){if(f&&!1===f.overwrite)throw Error("Object already exists");e[d[c]]=g}else d[c]=e.push(g)-1;return c},add:function(g,f){(f=f||{}).overwrite=!1;return this.put(g,f)},remove:function(g){var f=this.index,e=this.data;if(g in f)return e.splice(f[g],1),this.setData(e),!0},query:function(g,f){return j(this.queryEngine(g,f)(this.data))},
setData:function(g){var a;g.items?(this.idProperty=g.identifier||this.idProperty,a=this.data=g.items,g=a):this.data=g;this.index={};for(var f=0,e=g.length;f<e;f++)this.index[g[f][this.idProperty]]=f}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(h){return function(j,g){function i(e){var e=h.filter(e,j),d=g&&g.sort;d&&e.sort("function"==typeof d?d:function(b,a){for(var c,e=0;c=d[e];e++){var f=b[c.attribute],g=a[c.attribute],f=null!=f?f.valueOf():f,g=null!=
g?g.valueOf():g;if(f!=g)return!!c.descending==(null==f||f>g)?-1:1}return 0});if(g&&(g.start||g.count)){var c=e.length,e=e.slice(g.start||0,(g.start||0)+(g.count||Infinity));e.total=c}return e}switch(typeof j){default:throw Error("Can not query with a "+typeof j);case "object":case "undefined":var f=j,j=function(e){for(var d in f){var c=f[d];if(c&&c.test){if(!c.test(e[d],e))return!1}else if(c!=e[d])return!1}return!0};break;case "string":if(!this[j])throw Error("No filter function "+j+" was found in store");
j=this[j];case "function":}i.matches=j;return i}})},"dijit/form/_SearchMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/sniff,dojo/string,dojo/when,../registry".split(","),function(h,j,g,i,f,e,d,c,b,a){return j("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(a){this._set("list",a)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_abortQuery:function(){if(this.searchTimer)this.searchTimer=
this.searchTimer.remove();if(this._queryDeferHandle)this._queryDeferHandle=this._queryDeferHandle.remove();if(this._fetchHandle){if(this._fetchHandle.abort)this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1;if(this._fetchHandle.cancel)this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1;this._fetchHandle=null}},_processInput:function(a){if(!this.disabled&&!this.readOnly){var b=a.charOrCode;if(!("type"in a&&"key"==a.type.substring(0,3)&&(a.altKey||(a.ctrlKey||
a.metaKey)&&"x"!=b&&"v"!=b||b==i.SHIFT))){this._prev_key_backspace=a=!1;switch(b){case i.DELETE:case i.BACKSPACE:a=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:a="string"==typeof b||229==b}if(a)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(a){this._abortQuery();var d=this,e=f.clone(this.query),g={start:0,count:this.pageSize,
queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},i=c.substitute(this.queryExpr,[a.replace(/([\\\*\?])/g,"\\$1")]),m,j=function(){var a=d._fetchHandle=d.store.query(e,g);!d.disabled&&!(d.readOnly||m!==d._lastQuery)&&b(a,function(c){d._fetchHandle=null;!d.disabled&&!d.readOnly&&m===d._lastQuery&&b(a.total,function(a){c.total=a;var b=d.pageSize;if(isNaN(b)||b>c.total)b=c.total;c.nextPage=function(a){g.direction=a=!1!==a;g.count=b;if(a){if(g.start+=c.length,g.start>=c.total)g.count=0}else if(g.start-=
b,0>g.start)g.count=Math.max(b+g.start,0),g.start=0;0>=g.count?(c.length=0,d.onSearch(c,e,g)):j()};d.onSearch(c,e,g)})},function(a){d._fetchHandle=null;d._cancelingQuery||console.error(d.declaredClass+" "+a.toString())})};f.mixin(g,this.fetchProperties);this.store._oldAPI?m=i:(m=h.patternToRegExp(i,this.ignoreCase),m.toString=function(){return i});this._lastQuery=e[this.searchAttr]=m;this._queryDeferHandle=this.defer(j,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},
postMixInProperties:function(){if(!this.store){var b=this.list;if(b)this.store=a.byId(b)}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare,dojo/dom-class,dojo/dom-style,dojo/keys,../_WidgetBase,../_TemplatedMixin,./_ComboBoxMenuMixin,./_ListMouseMixin".split(","),function(h,j,g,i,f,e,d,c){return h("dijit.form._ComboBoxMenu",[f,e,c,d],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(j.add(this.previousButton,"dijitMenuItemRtl"),j.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var b=this.ownerDocument.createElement("div");b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");b.setAttribute("role","option");return b},onHover:function(b){j.add(b,"dijitMenuItemHover")},onUnhover:function(b){j.remove(b,
"dijitMenuItemHover")},onSelect:function(b){j.add(b,"dijitMenuItemSelected")},onDeselect:function(b){j.remove(b,"dijitMenuItemSelected")},_page:function(b){var a=0,c=this.domNode.scrollTop,d=g.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();a<d;){var e=this.getHighlightedOption();if(b){if(!e.previousSibling||"none"==e.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!e.nextSibling||"none"==e.nextSibling.style.display)break;this.selectNextNode()}e=
this.domNode.scrollTop;a+=(e-c)*(b?-1:1);c=e}},handleKey:function(b){switch(b.keyCode){case i.DOWN_ARROW:return this.selectNextNode(),!1;case i.PAGE_DOWN:return this._page(!1),!1;case i.UP_ARROW:return this.selectPreviousNode(),!1;case i.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(h,j,g,i){return j("dijit.form._ComboBoxMenuMixin",
null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(f){this.value=f;this.onChange(f)},onClick:function(f){if(f==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(f==this.nextButton)this._setSelectedAttr(null),
this.onPage(1);else this.onChange(f)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(f,e){var d=this._createMenuItem(),c=e(f);c.html?d.innerHTML=c.label:d.appendChild(d.ownerDocument.createTextNode(c.label));if(""==d.innerHTML)d.innerHTML="&#160;";this.applyTextDir(d,d.innerText||d.textContent||"");return d},createOptions:function(f,e,d){this.items=f;this.previousButton.style.display=0==e.start?"none":"";g.set(this.previousButton,"id",
this.id+"_prev");h.forEach(f,function(b,a){var c=this._createOption(b,d);c.setAttribute("item",a);g.set(c,"id",this.id+a);this.nextButton.parentNode.insertBefore(c,this.nextButton)},this);var c=!1;f.total&&!f.total.then&&-1!=f.total?e.start+e.count<f.total?c=!0:e.start+e.count>f.total&&e.count==f.length&&(c=!0):e.count==f.length&&(c=!0);this.nextButton.style.display=c?"":"none";g.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var f=this.containerNode;2<f.childNodes.length;)f.removeChild(f.childNodes[f.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare",
"dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(h,j,g,i,f){return h("dijit.form._ListMouseMixin",f,{postCreate:function(){this.inherited(arguments);this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover","_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(e,d){this._setSelectedAttr(d,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=
null;this.onClick(d)})},_onMouseDown:function(e,d){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;this._isDragging=!0;this._setSelectedAttr(d,!1)},_onMouseUp:function(e,d){this._isDragging=!1;var c=this.selected,b=this._hoveredNode;c&&d==c?this.defer(function(){this._onClick(e,c)}):b&&this.defer(function(){this._onClick(e,b)})},_onMouseOut:function(){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;if(this._isDragging)this._cancelDrag=(new Date).getTime()+
1E3},_onMouseOver:function(e,d){if(this._cancelDrag){if((new Date).getTime()>this._cancelDrag)this._isDragging=!1;this._cancelDrag=null}this._hoveredNode=d;this.onHover(d);this._isDragging&&this._setSelectedAttr(d,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(h,j,g){return h("dijit.form._ListBase",null,{selected:null,_listConnect:function(g,f){var e=this;return e.own(j(e.containerNode,j.selector(function(d,c,b){return d.parentNode==b},g),
function(d){e[f](d,this)}))},selectFirstNode:function(){for(var g=this.containerNode.firstChild;g&&"none"==g.style.display;)g=g.nextSibling;this._setSelectedAttr(g,!0)},selectLastNode:function(){for(var g=this.containerNode.lastChild;g&&"none"==g.style.display;)g=g.previousSibling;this._setSelectedAttr(g,!0)},selectNextNode:function(){var g=this.selected;if(g){for(g=g.nextSibling;g&&"none"==g.style.display;)g=g.nextSibling;g?this._setSelectedAttr(g,!0):this.selectFirstNode()}else this.selectFirstNode()},
selectPreviousNode:function(){var g=this.selected;if(g){for(g=g.previousSibling;g&&"none"==g.style.display;)g=g.previousSibling;g?this._setSelectedAttr(g,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(i,f){if(this.selected!=i){var e=this.selected;if(e)this.onDeselect(e),this.selected=null;if(i)this.selected=i,f&&g.scrollIntoView(i),this.onSelect(i)}else if(i)this.onSelect(i)}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/keys,dojo/_base/lang,dojo/on,./registry,./focus,./popup,./_FocusMixin,./Viewport".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r){return h("dijit._HasDropDown",m,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){if(!this.disabled&&!this.readOnly)"MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp"),this.toggleDropDown()},
_onDropDownMouseUp:function(a){a&&this._docHandler&&this.disconnect(this._docHandler);var c=this.dropDown,f=!1;if(a&&this._opened){var g=d.position(this._buttonNode,!0);if(!(a.pageX>=g.x&&a.pageX<=g.x+g.w)||!(a.pageY>=g.y&&a.pageY<=g.y+g.h)){for(g=a.target;g&&!f;)e.contains(g,"dijitPopup")?f=!0:g=g.parentNode;if(f){g=a.target;if(c.onItemClick){for(var k;g&&!(k=q.byNode(g));)g=g.parentNode;if(k&&k.onClick&&k.getParent)k.getParent().onItemClick(k,a)}return}}}if(this._opened){if(c.focus&&(!1!==c.autoFocus||
"mouseup"==a.type&&!this.hovering))this._focusDropDownTimer=this.defer(function(){c.focus();delete this._focusDropDownTimer})}else this.focus&&this.defer("focus");if(b("touch"))this._justGotMouseUp=!0,this.defer(function(){this._justGotMouseUp=!1})},_onDropDownClick:function(a){b("touch")&&!this._justGotMouseUp&&(this._onDropDownMouseDown(a),this._onDropDownMouseUp(a));this._stopClickEvents&&g.stop(a)},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||
this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";e.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(n(this._buttonNode,"mousedown",k.hitch(this,
"_onDropDownMouseDown")),n(this._buttonNode,"click",k.hitch(this,"_onDropDownClick")),n(a,"keydown",k.hitch(this,"_onKey")),n(a,"keyup",k.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(b){if(!this.disabled&&!this.readOnly){var c=this.dropDown,d=b.target;if(c&&this._opened&&c.handleKey&&!1===c.handleKey(b))g.stop(b);else if(c&&this._opened&&b.keyCode==a.ESCAPE)this.closeDropDown(),
g.stop(b);else if(!this._opened&&(b.keyCode==a.DOWN_ARROW||(b.keyCode==a.ENTER||b.keyCode==a.SPACE)&&("input"!==(d.tagName||"").toLowerCase()||d.type&&"text"!==d.type.toLowerCase())))this._toggleOnKeyUp=!0,g.stop(b)}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(k.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(o.curNode&&this.dropDown&&i.isDescendant(o.curNode,this.dropDown.domNode));this.inherited(arguments)},
isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new j,b=k.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown():this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,b=a.domNode,g=this._aroundNode||this.domNode,i=this;if(!this._preparedNode){this._preparedNode=!0;if(b.style.width)this._explicitDDWidth=
!0;if(b.style.height)this._explicitDDHeight=!0}if(this.maxHeight||this.forceWidth||this.autoWidth){var n={display:"",visibility:"hidden"};if(!this._explicitDDWidth)n.width="";if(!this._explicitDDHeight)n.height="";c.set(b,n);n=this.maxHeight;if(-1==n)var n=r.getEffectiveBox(this.ownerDocument),m=d.position(g,!1),n=Math.floor(Math.max(m.y,n.h-(m.y+m.h)));l.moveOffScreen(a);a.startup&&!a._started&&a.startup();var m=d.getMarginSize(b),h=n&&m.h>n;c.set(b,{overflow:h?"auto":"visible"});h?(m.h=n,"w"in m&&
(m.w+=16)):delete m.h;this.forceWidth?m.w=g.offsetWidth:this.autoWidth?m.w=Math.max(m.w,g.offsetWidth):delete m.w;k.isFunction(a.resize)?a.resize(m):d.setMarginBox(b,m)}g=l.open({parent:this,popup:a,around:g,orient:this.dropDownPosition,onExecute:function(){i.closeDropDown(!0)},onCancel:function(){i.closeDropDown(!0)},onClose:function(){f.set(i._popupStateNode,"popupActive",!1);e.remove(i._popupStateNode,"dijitHasDropDownOpen");i._set("_opened",!1)}});f.set(this._popupStateNode,"popupActive","true");
e.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"!==b.getAttribute("role")&&!b.getAttribute("aria-labelledby")&&b.setAttribute("aria-labelledby",this.id);return g},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);if(this._opened)this._popupStateNode.setAttribute("aria-expanded","false"),
a&&this.focus(),l.close(this.dropDown),this._opened=!1}})})},"dijit/popup":function(){define("dojo/_base/array,dojo/aspect,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/has,dojo/keys,dojo/_base/lang,dojo/on,./place,./BackgroundIframe,./main".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r){function p(){this._popupWrapper&&(d.destroy(this._popupWrapper),delete this._popupWrapper)}i=i(null,{_stack:[],_beginZIndex:1E3,
_idGen:1,_createWrapper:function(a){var b=a._popupWrapper,c=a.domNode;if(!b)b=d.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=b,j.after(a,"destroy",p,!0);return b},moveOffScreen:function(a){a=this._createWrapper(a);b.set(a,{visibility:"hidden",top:"-9999px",display:""})},hide:function(a){a=this._createWrapper(a);
b.set(a,"display","none")},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){for(var d=this._stack,p=b.popup,i=b.orient||["below","below-alt","above","above-alt"],h=b.parent?b.parent.isLeftToRight():c.isBodyLtr(p.ownerDocument),j=b.around,r=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;d.length&&(!b.parent||!f.isDescendant(b.parent.domNode,d[d.length-1].widget.domNode));)this.close(d[d.length-1].widget);
var A=this._createWrapper(p);e.set(A,{id:r,style:{zIndex:this._beginZIndex+d.length},"class":"dijitPopup "+(p.baseClass||p["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});if(k("bgIframe")&&!p.bgIframe)p.bgIframe=new m(A);i=j?l.around(A,j,i,h,p.orient?q.hitch(p,"orient"):null):l.at(A,b,"R"==i?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding);A.style.display="";A.style.visibility="visible";p.domNode.style.visibility="visible";h=[];h.push(o(A,g._keypress,q.hitch(this,
function(c){if(c.charOrCode==n.ESCAPE&&b.onCancel)a.stop(c),b.onCancel();else if(c.charOrCode===n.TAB&&(a.stop(c),(c=this.getTopPopup())&&c.onCancel))c.onCancel()})));p.onCancel&&b.onCancel&&h.push(p.on("cancel",b.onCancel));h.push(p.on(p.onExecute?"execute":"change",q.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));d.push({widget:p,parent:b.parent,onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:h});if(p.onOpen)p.onOpen(i);return i},close:function(a){for(var b=
this._stack;a&&h.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),d=c.widget,e=c.onClose;if(d.onClose)d.onClose();for(var f;f=c.handlers.pop();)f.remove();d&&d.domNode&&this.hide(d);e&&e()}}});return r.popup=new i})},"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\taria-haspopup="true"\n\tdata-dojo-attach-point="_popupStateNode"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox"\n\t/></div\n></div>\n',
"dijit/form/Button":function(){define("require,dojo/_base/declare,dojo/dom-class,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/ready,./_FormWidget,./_ButtonMixin,dojo/text!./templates/Button.html".split(","),function(h,j,g,i,f,e,d,c,b,a){i("dijit-legacy-requires")&&d(0,function(){h(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});return j("dijit.form.Button",[c,b],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",
templateString:a,_setValueAttr:"valueNode",_onClick:function(a){var b=this.inherited(arguments);b&&this.valueNode&&(this.valueNode.click(),a.preventDefault(),a.stopPropagation());return b},_fillContent:function(a){if(a&&(!this.params||!("label"in this.params)))if(a=e.trim(a.innerHTML))this.label=a},_setShowLabelAttr:function(a){this.containerNode&&g.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){f.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments);if(!this.showLabel&&!("title"in this.params))this.titleNode.title=e.trim(this.containerNode.innerText||this.containerNode.textContent||"")}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(h,j,g,i){return h("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(f){if(this.disabled)return g.stop(f),!1;var e=!1===this.onClick(f);
if(!e&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var d=this.domNode;d.parentNode;d=d.parentNode){var c=i.byNode(d);if(c&&"function"==typeof c._onSubmit){c._onSubmit(f);e=!0;break}}e&&f.preventDefault();return!e},postCreate:function(){this.inherited(arguments);j.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(f){this._set("label",f);(this.containerNode||this.focusNode).innerHTML=f}})})},"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n',
"dijit/form/Select":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/_base/event,dojo/i18n,dojo/_base/lang,dojo/sniff,./_FormSelectWidget,../_HasDropDown,../Menu,../MenuItem,../MenuSeparator,../Tooltip,dojo/text!./templates/Select.html,dojo/i18n!./nls/validate".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m){var r=j("dijit.form._SelectMenu",n,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,
b=this.domNode=this.ownerDocument.createElement("div");b.style.cssText="overflow-x: hidden; overflow-y: scroll";a.parentNode&&a.parentNode.replaceChild(b,a);i.remove(a,"dijitMenuTable");b.className=a.className+" dijitSelectMenu";a.className="dijitReset dijitMenuTable";b.setAttribute("role","listbox");a.setAttribute("role","presentation");b.appendChild(a)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",e.stop)},focus:function(){var a=!1,b=this.parentWidget.value;
c.isArray(b)&&(b=b[b.length-1]);b&&h.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)},resize:function(a){if(a&&(f.setMarginBox(this.domNode,a),"w"in a))this.menuTableNode.style.width="100%"}}),j=j("dijit.form.Select",[a,k],{baseClass:"dijitSelect dijitValidationTextBox",templateString:m,_buttonInputDisabled:b("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",
_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown=new r({id:this.id+"_menu",parentWidget:this});i.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(!a.value&&!a.label)return new o({ownerDocument:this.ownerDocument});var b=c.hitch(this,"_setValueAttr",a),a=new q({option:a,
label:a.label||this.emptyLabel,onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return!this.dropDown?[]:this.dropDown.getChildren()},_loadChildren:function(a){!0===a?(this.dropDown&&delete this.dropDown.focusedChild,this.options.length?this.inherited(arguments):(h.forEach(this._getChildren(),function(a){a.destroyRecursive()}),
this.dropDown.addChild(new q({ownerDocument:this.ownerDocument,label:this.emptyLabel})))):this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);g.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setDisabledAttr:function(a){this.inherited(arguments);
this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+a+"</span>"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":
"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?l.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):l.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);l.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=
d.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",e.stop);this.domNode.setAttribute("aria-expanded","false")},_setStyleAttr:function(a){this.inherited(arguments);i.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},closeDropDown:function(){this.inherited(arguments);
if(this.dropDown&&this.dropDown.menuTableNode)this.dropDown.menuTableNode.style.width=""},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)},_onFocus:function(){this.validate(!0);this.inherited(arguments)},_onBlur:function(){l.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});j._Menu=r;return j})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array,dojo/_base/Deferred,dojo/aspect,dojo/data/util/sorter,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/when,dojo/store/util/QueryResults,./_FormValueWidget".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q){return f("dijit.form._FormSelectWidget",q,{multiple:!1,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(a){var c=this.options||[];if(null==a)return c;if(b.isArray(a))return h.map(a,"return this.getOptions(item);",this);b.isString(a)&&(a={value:a});b.isObject(a)&&(h.some(c,function(b,c){for(var d in a)if(!(d in b)||b[d]!=a[d])return!1;a=c;return!0})||(a=-1));
return 0<=a&&a<c.length?c[a]:null},addOption:function(a){h.forEach(b.isArray(a)?a:[a],function(a){a&&b.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(b.isArray(a)?a:[a]);h.forEach(a,function(a){if(a)this.options=h.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a)},this);this._loadChildren()},updateOption:function(a){h.forEach(b.isArray(a)?a:[a],function(a){var b=this.getOptions({value:a.value}),
c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(a,c,d){var e=this.store,d=d||{};if(e!==a){for(var f;f=this._notifyConnections.pop();)f.remove();if(!a.get&&(b.mixin(a,{_oldAPI:!0,get:function(a){var b=new j;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,c){var d=new j(function(){e.abort&&e.abort()});d.total=new j;var e=this.fetch(b.mixin({query:a,onBegin:function(a){d.total.resolve(a)},
onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},c));return new n(d)}}),a.getFeatures()["dojo.data.api.Notification"]))this._notifyConnections=[g.after(a,"onNew",b.hitch(this,"_onNewItem"),!0),g.after(a,"onDelete",b.hitch(this,"_onDeleteItem"),!0),g.after(a,"onSet",b.hitch(this,"_onSetItem"),!0)];this._set("store",a)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();if(this._observeHandle&&this._observeHandle.remove)this._observeHandle.remove(),
this._observeHandle=null;d.query&&(this._set("query",d.query),this._set("queryOptions",d.queryOptions));if(a)this._loadingStore=!0,this.onLoadDeferred=new j,this._queryRes=a.query(this.query,this.queryOptions),k(this._queryRes,b.hitch(this,function(e){if(this.sortByLabel&&!d.sort&&e.length)if(a.getValue)e.sort(i.createSortFunction([{attribute:a.getLabelAttributes(e[0])[0]}],a));else{var f=this.labelAttr;e.sort(function(a,b){return a[f]>b[f]?1:b[f]>a[f]?-1:0})}d.onFetch&&(e=d.onFetch.call(this,e,d));
h.forEach(e,function(a){this._addOptionForItem(a)},this);if(this._queryRes.observe)this._observeHandle=this._queryRes.observe(b.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0);this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:c);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(e):this._loadChildren();this.onLoadDeferred.resolve(!0);this.onSetStore()}),function(a){console.error("dijit.form.Select: "+
a.toString());this.onLoadDeferred.reject(a)});return e},_setValueAttr:function(a,c){this._onChangeActive||(c=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){var a=b.isArray(a)?h.map(a,function(a){return b.isObject(a)?a:{value:a}}):b.isObject(a)?[a]:[{value:a}],a=h.filter(this.getOptions(a),function(a){return a&&a.value}),d=this.getOptions()||[];if(!this.multiple&&(!a[0]||!a[0].value)&&d.length)a[0]=d[0];h.forEach(d,function(b){b.selected=h.some(a,function(a){return a.value===b.value})});
d=h.map(a,function(a){return a.value});if(!("undefined"==typeof d||"undefined"==typeof d[0])){var e=h.map(a,function(a){return a.label});this._setDisplay(this.multiple?e:e[0]);this.inherited(arguments,[this.multiple?d:d[0],c]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=h.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==
typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(h.forEach(this._getChildren(),function(a){a.destroyRecursive()}),h.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this._set("value",this._getValueFromOpts());var a=[].concat(this.value);a&&a[0]&&h.forEach(this._getChildren(),function(b){var c=h.some(a,function(a){return b.option&&a===b.option.value});d.toggle(b.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),c);b.domNode.setAttribute("aria-selected",
c?"true":"false")},this)},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=h.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?h.map(h.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,b){(!b||!b.parent)&&this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},
_getOptionObjForItem:function(a){var b=this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this}):this.addOption(this._getOptionObjForItem(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);
e.setSelectable(this.focusNode,!1)},_fillContent:function(){if(!this.options)this.options=this.srcNodeRef?a("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+c._scopeName+"-value")||a.getAttribute("value"),label:""+a.innerHTML,selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[];this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):
this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);g.after(this,"onChange",b.hitch(this,"_updateSelection"));var a=this.store;if(a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"]))this.store=null,this.setStore(a,this._oValue)},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();if(this._observeHandle&&
this._observeHandle.remove)this._observeHandle.remove(),this._observeHandle=null;this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(h){var j={};h.setObject("dojo.data.util.sorter",j);j.basicComparator=
function(g,i){var f=-1;null===g&&(g=void 0);null===i&&(i=void 0);if(g==i)f=0;else if(g>i||null==g)f=1;return f};j.createSortFunction=function(g,i){function f(a,b,c,d){return function(e,f){var g=d.getValue(e,a),k=d.getValue(f,a);return b*c(g,k)}}for(var e=[],d,c=i.comparatorMap,b=j.basicComparator,a=0;a<g.length;a++){d=g[a];var k=d.attribute;if(k){d=d.descending?-1:1;var n=b;c&&("string"!==typeof k&&"toString"in k&&(k=k.toString()),n=c[k]||b);e.push(f(k,d,n,i))}}return function(a,b){for(var c=0;c<
e.length;){var d=e[c++](a,b);if(0!==d)return d}return 0}};return j})},"dijit/Menu":function(){define("require,dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-geometry,dojo/dom-style,dojo/keys,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window,dojo/window,./popup,./DropDownMenu,dojo/ready".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r){n("dijit-legacy-requires")&&r(0,function(){h(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});
return g("dijit.Menu",m,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):j.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return o.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&q.doc.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||
a.contentWindow&&a.contentWindow.document||a.name&&q.doc.frames[a.name]&&q.doc.frames[a.name].document||null},bindDomNode:function(c){var c=f.byId(c,this.ownerDocument),d;if("iframe"==c.tagName.toLowerCase()){var g=c,n=this._iframeContentWindow(g);d=q.body(n.document)}else d=c==q.body(this.ownerDocument)?this.ownerDocument.documentElement:c;var l={node:c,iframe:g};e.set(c,"_dijitMenu"+this.id,this._bindings.push(l));var m=a.hitch(this,function(a){var c=this.selector,d=c?function(a){return k.selector(c,
a)}:function(a){return a},e=this;return[k(a,d(this.leftClickToOpen?"click":"contextmenu"),function(a){i.stop(a);(new Date).getTime()<this._lastKeyDown+500||e._scheduleOpen(this,g,{x:a.pageX,y:a.pageY},a.target)}),k(a,d("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==b.F10||this.leftClickToOpen&&a.keyCode==b.SPACE)i.stop(a),e._scheduleOpen(this,g,null,a.target),this._lastKeyDown=(new Date).getTime()})]});l.connects=d?m(d):[];if(g)l.onloadHandler=a.hitch(this,function(){var a=this._iframeContentWindow(g);
d=q.body(a.document);l.connects=m(d)}),g.addEventListener?g.addEventListener("load",l.onloadHandler,!1):g.attachEvent("onload",l.onloadHandler)},unBindDomNode:function(a){var b;try{b=f.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&e.has(b,a)){for(var d=e.get(b,a)-1,g=this._bindings[d],k;k=g.connects.pop();)k.remove();(k=g.iframe)&&(k.removeEventListener?k.removeEventListener("load",g.onloadHandler,!1):k.detachEvent("onload",g.onloadHandler));e.remove(b,a);delete this._bindings[d]}},
_scheduleOpen:function(a,b,c,d){if(!this._openTimer)this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1)},_openMyself:function(a){function b(){j.refocus&&r&&r.focus();l.close(j)}var e=a.target,g=a.iframe,k=a.coords;this.currentTarget=a.delegatedTarget;if(k){if(g){var a=d.position(g,!0),e=this._iframeContentWindow(g),e=d.docScroll(e.document),i=c.getComputedStyle(g),m=c.toPixelValue,h=(n("ie")&&n("quirks")?0:m(g,i.paddingLeft))+
(n("ie")&&n("quirks")?m(g,i.borderLeftWidth):0),g=(n("ie")&&n("quirks")?0:m(g,i.paddingTop))+(n("ie")&&n("quirks")?m(g,i.borderTopWidth):0);k.x+=a.x+h-e.x;k.y+=a.y+g-e.y}}else k=d.position(e,!0),k.x+=10,k.y+=10;var j=this,g=this._focusManager.get("prevNode"),a=this._focusManager.get("curNode"),r=!a||f.isDescendant(a,this.domNode)?g:a;l.open({popup:this,x:k.x,y:k.y,onExecute:b,onCancel:b,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);
l.close(this)}},destroy:function(){j.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/DropDownMenu":function(){define("dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/text!./templates/Menu.html,./_OnDijitClickMixin,./_MenuBase".split(","),function(h,j,g,i,f,e){return h("dijit.DropDownMenu",[e,f],{templateString:i,baseClass:"dijitMenu",postCreate:function(){this.inherited(arguments);var d=this.isLeftToRight();this._openSubMenuKey=d?g.RIGHT_ARROW:
g.LEFT_ARROW;this._closeSubMenuKey=d?g.LEFT_ARROW:g.RIGHT_ARROW;this.connectKeyNavHandlers([g.UP_ARROW],[g.DOWN_ARROW])},_onKeyPress:function(d){if(!d.ctrlKey&&!d.altKey)switch(d.charOrCode){case this._openSubMenuKey:this._moveToPopup(d);j.stop(d);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else j.stop(d)}}})})},"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   data-dojo-attach-event="onkeypress:_onKeyPress" cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n',
"dijit/_MenuBase":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/lang,dojo/mouse,dojo/on,dojo/window,./a11yclick,./popup,./registry,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l){return j("dijit._MenuBase",[q,l,o],{parentMenu:null,popupDelay:500,autoFocus:!1,childSelector:function(a){var b=n.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var b=this,f="string"==
typeof this.childSelector?this.childSelector:e.hitch(this,"childSelector");this.own(c(this.containerNode,c.selector(f,d.enter),function(){b.onItemHover(n.byNode(this))}),c(this.containerNode,c.selector(f,d.leave),function(){b.onItemUnhover(n.byNode(this))}),c(this.containerNode,c.selector(f,a),function(a){b.onItemClick(n.byNode(this),a);a.stopPropagation();a.preventDefault()}));this.inherited(arguments)},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&
!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;a.focusedChild&&a.focusedChild._setSelected(!1);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(!0);this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive&&(this.focusChild(a),this.focusedChild.popup&&
!this.focusedChild.disabled&&!this.hover_timer))this.hover_timer=this.defer("_openPopup",this.popupDelay);this.focusedChild&&this.focusChild(a);this._hoveredChild=a;a._set("hovering",!0)},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(!1);var b=a.popup;if(b)this._stopPendingCloseTimer(b),b._pendingClose_timer=this.defer(function(){b._pendingClose_timer=null;if(b.parentMenu)b.parentMenu.currentPopup=null;k.close(b)},this.popupDelay)},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();
if(this._hoveredChild==a)this._hoveredChild=null;a._set("hovering",!1)},_stopPopupTimer:function(){if(this.hover_timer)this.hover_timer=this.hover_timer.remove()},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer)a._pendingClose_timer=a._pendingClose_timer.remove()},_stopFocusTimer:function(){if(this._focus_timer)this._focus_timer=this._focus_timer.remove()},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&
this._markActive();this.focusChild(a);if(a.disabled)return!1;a.popup?this._openPopup("keypress"==b.type):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openPopup:function(a){this._stopPopupTimer();var b=this.focusedChild;if(b){var d=b.popup;if(!d.isShowingNow){this.currentPopup&&(this._stopPendingCloseTimer(this.currentPopup),k.close(this.currentPopup));d.parentMenu=this;d.from_item=b;var f=this;k.open({parent:this,popup:d,around:b.domNode,orient:this._orient||["after","before"],onCancel:function(){f.focusChild(b);
f._cleanUp();b._setSelected(!0);f.focusedChild=b},onExecute:e.hitch(this,"_cleanUp")});this.currentPopup=d;this.popupHoverHandle&&this.popupHoverHandle.remove();this.own(this.popupHoverHandle=c.once(d.domNode,"mouseover",e.hitch(f,"_onPopupHover")))}if(a&&d.focus)d._focus_timer=this.defer(e.hitch(d,function(){this._focus_timer=null;this.focus()}))}},_markActive:function(){this.isActive=!0;f.replace(this.domNode,"dijitMenuActive","dijitMenuPassive")},onOpen:function(){this.isShowingNow=!0;this._markActive()},
_markInactive:function(){this.isActive=!1;f.replace(this.domNode,"dijitMenuPassive","dijitMenuActive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup)0<=h.indexOf(this._focusManager.activeStack,this.id)&&(i.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex),this.focusedChild.focusNode.focus()),k.close(this.currentPopup),this.currentPopup=null;if(this.focusedChild)this.focusedChild._setSelected(!1),
this.onItemUnhover(this.focusedChild),this.focusedChild=null},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild)},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();"undefined"==typeof this.isShowingNow&&this._markInactive()}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/kernel,./_Container,./_FocusMixin,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/_base/event,dojo/dom-attr,dojo/_base/lang".split(","),
function(h,j,g,i,f,e,d,c,b){return e("dijit._KeyNavContainer",[g,j],{tabIndex:"0",connectKeyNavHandlers:function(a,c){var d=this._keyNavCodes={},e=b.hitch(this,"focusPrev"),g=b.hitch(this,"focusNext");i.forEach(a,function(a){d[a]=e});i.forEach(c,function(a){d[a]=g});d[f.HOME]=b.hitch(this,"focusFirstChild");d[f.END]=b.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){h.deprecated("startupKeyNavChildren() call no longer needed",
"","2.0")},startup:function(){this.inherited(arguments);i.forEach(this.getChildren(),b.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,
-1),!0)},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"),this._set("focusedChild",a))},_startupChild:function(a){a.set("tabIndex","-1");this.connect(a,"_onFocus",function(){a.set("tabIndex",this.tabIndex)});this.connect(a,"_onBlur",function(){a.set("tabIndex","-1")})},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||(this.focusFirstChild(),c.set(this.domNode,
"tabIndex","-1"))},_onBlur:function(a){this.tabIndex&&c.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild=null;this.inherited(arguments)},_onContainerKeypress:function(a){if(!a.ctrlKey&&!a.altKey){var b=this._keyNavCodes[a.charOrCode];b&&(b(),d.stop(a))}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_getNextFocusableChild:function(a,b){a&&(a=this._getSiblingOfChild(a,
b));for(var c=this.getChildren(),d=0;d<c.length;d++){a||(a=c[0<b?0:c.length-1]);if(a.isFocusable())return a;a=this._getSiblingOfChild(a,b)}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/kernel,dojo/sniff,./_Widget,./_TemplatedMixin,./_Contained,./_CssStateMixin,dojo/text!./templates/MenuItem.html".split(","),function(h,j,g,i,f,e,d,c,b,a,k){return h("dijit.MenuItem",[d,c,b,a],{templateString:k,baseClass:"dijitMenuItem",label:"",
_setLabelAttr:function(a){this.containerNode.innerHTML=a;this._set("label",a);"auto"===this.textDir&&this.applyTextDir(this.focusNode,this.label)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this.set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);var a=this.id+"_text";g.set(this.containerNode,"id",a);this.accelKeyNode&&(g.set(this.accelKeyNode,"id",this.id+"_accel"),
a+=" "+this.id+"_accel");this.domNode.setAttribute("aria-labelledby",a);j.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==e("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_onFocus:function(){this._setSelected(!0);this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(a){i.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){f.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},setDisabled:function(a){f.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;g.set(this.containerNode,"colSpan",a?"1":"2");this._set("accelKey",a)},_setTextDirAttr:function(a){if(!this._created||
this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.label)}})})},"url:dijit/templates/MenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n',
"dijit/MenuSeparator":function(){define("dojo/_base/declare,dojo/dom,./_WidgetBase,./_TemplatedMixin,./_Contained,dojo/text!./templates/MenuSeparator.html".split(","),function(h,j,g,i,f,e){return h("dijit.MenuSeparator",[g,i,f],{templateString:e,buildRendering:function(){this.inherited(arguments);j.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"url:dijit/templates/MenuSeparator.html":'<tr class="dijitMenuSeparator" role="separator">\n\t<td class="dijitMenuSeparatorIconCell">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>',
"url:dijit/form/templates/Select.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing=\'0\' cellpadding=\'0\'\n\trole="listbox" aria-haspopup="true"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitValidationContainer"\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t/></div\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\n\t\t/></td\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n',
"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(h,j,g,i){return h("dijit.form.ToggleButton",[g,i],{baseClass:"dijitToggleButton",setChecked:function(f){j.deprecated("setChecked("+f+") is deprecated. Use set('checked',"+f+") instead.","","2.0");this.set("checked",f)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(h,j){return h("dijit.form._ToggleButtonMixin",null,
{checked:!1,_aria_attr:"aria-pressed",_onClick:function(g){var i=this.checked;this._set("checked",!i);var f=this.inherited(arguments);this.set("checked",f?this.checked:i);return f},_setCheckedAttr:function(g,i){this._set("checked",g);var f=this.focusNode||this.domNode;this._created&&j.get(f,"checked")!=!!g&&j.set(f,"checked",!!g);f.setAttribute(this._aria_attr,""+g);this._handleOnChange(g,i)},postCreate:function(){this.inherited(arguments);var g=this.focusNode||this.domNode;this.checked&&g.setAttribute("checked",
"checked");if(void 0===this._resetValue)this._lastValueReported=this._resetValue=this.checked},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/query,../registry,../popup,./Button,../_Container,../_HasDropDown,dojo/text!./templates/DropDownButton.html".split(","),function(h,j,g,i,f,e,d,c,b){return h("dijit.form.DropDownButton",[e,d,c],{baseClass:"dijitDropDownButton",templateString:b,
_fillContent:function(){if(this.srcNodeRef){var a=g("*",this.srcNodeRef);this.inherited(arguments,[a[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var a=g("[widgetId]",this.dropDownContainer)[0];this.dropDown=i.byNode(a);delete this.dropDownContainer}this.dropDown&&f.hide(this.dropDown);this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var b=
this.dropDown,c=b.on("load",j.hitch(this,function(){c.remove();a()}));b.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-point="valueNode" role="presentation"\n/></span>\n',
"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(h,j,g,i){return h("dijit.CheckedMenuItem",g,{templateString:i,checked:!1,_setCheckedAttr:function(f){j.toggle(this.domNode,"dijitCheckedMenuItemChecked",f);this.domNode.setAttribute("aria-checked",f?"true":"false");this._set("checked",f)},iconClass:"",onChange:function(){},_onClick:function(f){this.disabled||(this.set("checked",!this.checked),
this.onChange(this.checked));this.onClick(f)}})})},"url:dijit/templates/CheckedMenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitemcheckbox" tabIndex="-1" aria-checked="${checked}">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\n</tr>\n',
"dojox/form/TriStateCheckBox":function(){define("dojo/_base/kernel,dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/_base/event,dojo/query,dojo/dom-attr,dojo/text!./resources/TriStateCheckBox.html,dijit/form/Button,dijit/form/_ToggleButtonMixin,dojo/NodeList-dom".split(","),function(h,j,g,i,f,e,d,c,b,a){return j("dojox.form.TriStateCheckBox",[b,a],{templateString:c,baseClass:"dojoxTriStateCheckBox",type:"checkbox",states:"",_stateLabels:null,stateValue:null,_currentState:0,_stateType:"False",
readOnly:!1,checked:"",_aria_attr:"aria-checked",constructor:function(){this.states=[!1,"mixed",!0];this.checked=!1;this._stateLabels={False:"&#9633;",True:"&#8730;",Mixed:"&#9632;"};this.stateValues={False:!1,True:"on",Mixed:"mixed"}},_fillContent:function(){},postCreate:function(){d.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType]);this.inherited(arguments)},startup:function(){this.set("checked",this.params.checked||this.states[this._currentState]);d.set(this.stateLabelNode,
"innerHTML",this._stateLabels[this._stateType]);this.inherited(arguments)},_setIconClassAttr:null,_setCheckedAttr:function(a,b){var c=g.indexOf(this.states,a);0<=c?(this._currentState=c,this._stateType=this._getStateType(a),d.set(this.focusNode,"value",this.stateValues[this._stateType]),d.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType]),this.inherited(arguments)):console.warn("Invalid state!")},setChecked:function(a){h.deprecated("setChecked("+a+") is deprecated. Use set('checked',"+
a+") instead.","","2.0");this.set("checked",a)},_setStatesAttr:function(a){if(i.isArray(a))this._set("states",a);else if(i.isString(a)){for(var b={"true":!0,"false":!1,mixed:"mixed"},a=a.split(/\s*,\s*/),c=0;c<a.length;c++)a[c]=void 0!==b[a[c]]?b[a[c]]:!1;this._set("states",a)}},_setReadOnlyAttr:function(a){this._set("readOnly",a);d.set(this.focusNode,"readOnly",a)},_setValueAttr:function(a,b){if("string"==typeof a&&0>g.indexOf(this.states,a))""==a&&(a="on"),this.stateValues.True=a,a=!0;if(this._created)this._currentState=
g.indexOf(this.states,a),this.set("checked",a,b),d.set(this.focusNode,"value",this.stateValues[this._stateType])},_setValuesAttr:function(a){this.stateValues.True=a[0]?a[0]:this.stateValues.True;this.stateValues.Mixed=a[1]?a[1]:this.stateValues.Mixed},_getValueAttr:function(){return this.stateValues[this._stateType]},reset:function(){this._hasBeenBlurred=!1;this.set("states",this.params.states||[!1,"mixed",!0]);this.stateValues=this.params.stateValues||{False:!1,True:"on",Mixed:"mixed"};this.set("values",
this.params.values||[]);this.set("checked",this.params.checked||this.states[0])},_onFocus:function(){this.id&&e("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&e("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.mouseFocus=!1;this.inherited(arguments)},_onClick:function(a){if(this.readOnly||this.disabled)return f.stop(a),!1;this.click();return this.onClick(a)},click:function(){this._currentState>=this.states.length-1?
this._currentState=0:-1==this._currentState?this.fixState():this._currentState++;var a=this._currentState;this.set("checked",this.states[this._currentState]);this._currentState=a;d.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType])},fixState:function(){this._currentState=this.states.length-1},_getStateType:function(a){return a?"mixed"==a?"Mixed":"True":"False"},_onMouseDown:function(){this.mouseFocus=!0}})})},"url:dojox/form/resources/TriStateCheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><div class="dojoxTriStateCheckBoxInner" dojoAttachPoint="stateLabelNode"></div\n\t><input ${!nameAttrSetting} type="${type}" role="${type}" dojoAttachPoint="focusNode"\n\tclass="dijitReset dojoxTriStateCheckBoxInput" dojoAttachEvent="onclick:_onClick"\n/></div>\n',
"dojo/NodeList-dom":function(){define("dojo/NodeList-dom","./_base/kernel,./query,./_base/array,./_base/lang,./dom-class,./dom-construct,./dom-geometry,./dom-attr,./dom-style".split(","),function(h,j,g,i,f,e,d,c,b){function a(a){return function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var k=function(a){return 1==a.length&&"string"==typeof a[0]},n=function(a){var b=a.parentNode;b&&b.removeChild(a)},q=j.NodeList,o=q._adaptWithCondition,l=q._adaptAsForEach,
m=q._adaptAsMap;i.extend(q,{_normalize:function(a,b){var c=!0===a.parse;if("string"==typeof a.template)var d=a.templateFunc||h.string&&h.string.substitute,a=d?d(a.template,a):a;d=typeof a;"string"==d||"number"==d?(a=e.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?i._toArray(a.childNodes):[a]):i.isArrayLike(a)?i.isArray(a)||(a=i._toArray(a)):a=[a];if(c)a._runParse=!0;return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,c,d){if(!(1!=b.nodeType&&"only"==c))for(var f,g=a.length,
k=g-1;0<=k;k--){var i=d?this._cloneNode(a[k]):a[k];if(a._runParse&&h.parser&&h.parser.parse){f||(f=b.ownerDocument.createElement("div"));f.appendChild(i);h.parser.parse(f);for(i=f.firstChild;f.firstChild;)f.removeChild(f.firstChild)}k==g-1?e.place(i,b,c):b.parentNode.insertBefore(i,b);b=i}},position:m(d.position),attr:o(a(c),k),style:o(a(b),k),addClass:l(f.add),removeClass:l(f.remove),toggleClass:l(f.toggle),replaceClass:l(f.replace),empty:l(e.empty),removeAttr:l(c.remove),marginBox:m(d.getMarginBox),
place:function(a,b){var c=j(a)[0];return this.forEach(function(a){e.place(a,c,b)})},orphan:function(a){return(a?j._filterResult(this,a):this).forEach(n)},adopt:function(a,b){return j(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new q;this.map(function(c){j(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=j._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(g.filter(c,
b[d],b[d+1]),this)},addContent:function(a,b){for(var a=this._normalize(a,this[0]),c=0,d;d=this[c];c++)this._place(a,d,b,0<c);return this}});return q})},"JBrowse/Util":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/Deferred","dojox/lang/functional/object","dojox/lang/functional/fold"],function(h,j,g){var i;return i={dojof:dojox.lang.functional,is_ie:0<=navigator.appVersion.indexOf("MSIE"),is_ie6:0<=navigator.appVersion.indexOf("MSIE 6"),addCommas:function(f){for(var e=(f+"").split("."),
f=e[0],e=1<e.length?"."+e[1]:"",d=/(\d+)(\d{3})/;d.test(f);)f=f.replace(d,"$1,$2");return f+e},commifyNumber:function(){return this.addCommas.apply(this,arguments)},escapeHTML:function(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},fastDeclare:function(f){var e=f.constructor,d=function(){e.apply(this,arguments)};dojo.mixin(d.prototype,f);return d},isRightButton:function(f){if(!f)f=window.event;return f.which?3==f.which:f.button?2==f.button:!1},getViewportWidth:function(){var f=
0;document.documentElement&&document.documentElement.clientWidth?f=document.documentElement.clientWidth:document.body&&document.body.clientWidth?f=document.body.clientWidth:window.innerWidth&&(f=window.innerWidth-18);return f},getViewportHeight:function(){var f=0;document.documentElement&&document.documentElement.clientHeight?f=document.documentElement.clientHeight:document.body&&document.body.clientHeight?f=document.body.clientHeight:window.innerHeight&&(f=window.innerHeight-18);return f},findNearest:function(f,
e){for(var d=0,c=Math.abs(e-f[0]),b=1;b<f.length;b++)Math.abs(e-f[b])<c&&(d=b,c=Math.abs(e-f[b]));return d},fillTemplate:function(f,e){return f.replace(/\{([\w\s\.]+)\}/g,function(d,c){var b=j.getObject(c,!1,e);if(void 0!==(b=e[c]))return"function"==typeof b?b(c):b;return e.callback&&(b=e.callback.call(this,c),void 0!==b)?b:d})},maybeLoad:function(f,e,d,c){e.state?"loaded"==e.state?d(e.data):"error"==e.state?c():"loading"==e.state&&(e.successCallbacks.push(d),c&&e.errorCallbacks.push(c)):(e.state=
"loading",e.successCallbacks=[d],e.errorCallbacks=[c],f=dojo.clone(f),f.load=function(b){e.state="loaded";e.data=b;for(var a=e.successCallbacks,c=0;c<a.length;c++)a[c](b)},f.error=function(b){console.error(""+b);e.state="error";for(var b=e.errorCallbacks,a=0;a<b.length;a++)b[a]()},dojo.xhrGet(f))},deepUpdate:function(f,e){for(var d in e)if(d in f&&"object"==typeof e[d]&&"object"==typeof f[d])i.deepUpdate(f[d],e[d]);else if("undefined"==typeof f[d]||"undefined"!=typeof e[d])f[d]=e[d];return f},humanReadableNumber:function(f){var f=
parseInt(f),e="";1E12<=f?(f/=1E12,e="T"):1E9<=f?(f/=1E9,e="G"):1E6<=f?(f/=1E6,e="M"):1E3<=f&&(f/=1E3,e="K");return(f.toFixed(2)+" "+e).replace(/0+ /," ").replace(/\. /," ")},resolved:function(f){var e=new g;e.resolve(f);return e},resolveUrl:function(f,e){if(this.isElectron()&&"/"==e[0]||e.match(/\w+:\/\//))return e;if("/"==e.charAt(0))return f=f.match(/.*\/\/[^\/]*/),(f?f[0]:"")+e;f=f.replace(/\?.*$/,"");f=f.substring(0,f.length-f.match(/[^\/]*$/)[0].length);if("."==e)return f;for(;f&&"../"==e.substring(0,
3);)f=f.substring(0,f.length-f.match(/[^\/]*\/$/)[0].length),e=e.substring(3);return f+e},loadJS:function(f){var e=new g;require(f,function(){for(var d=Array.prototype.slice.call(arguments),c=0;c<d.length;c++)if(!{object:!0,"function":!0}[typeof d[c]]){e.reject("could not load "+f[c]+": "+d[c]);return}e.resolve(d)});return e},isElectron:function(){var f=window.process;return!(!f||!f.versions||!f.versions.electron)},parseLocString:function(f){if("string"!=typeof f)return null;var f=dojo.trim(f),e=
(f.match(/\(([^\)]+)\)$/)||[])[1],d=function(a){a=(a+"").replace(/\D/g,"");a=parseInt(a,10);return"number"==typeof a&&!isNaN(a)?a:null},c={},b;if(-1!=f.indexOf(":"))b=f.split(":",2),c.ref=dojo.trim(b[0]),f=b[1];if(b=f.match(/^\s*([\d,]+)\s*\.\.+\s*([\d,]+)/)){if(c.start=d(b[1])-1,c.end=d(b[2]),c.start>c.end)f=c.start+1,c.start=c.end-1,c.end=f}else if(b=f.match(/^\s*([\d,]+)\b/))c.end=c.start=d(b[1])-1;else return null;if(e)c.extra=e;return c},basename:function(f,e){if(f&&f.match){var d=f.match(/[\/\\]([^\/\\]+)[\/\/\/]*$/);
if((d=d?d[1]||void 0:f)&&e)e instanceof Array||(e=[e]),e=h.map(e,function(c){return c.replace(/([\.\?\+])/g,"\\$1")}),d=d.replace(RegExp(e.join("|")+"$","i"),"");return d}},assembleLocString:function(f){var e="",d={start:"number",end:"number",ref:"string",strand:"number"},c={},b;for(b in d)if(d[b]==typeof f[b]&&("number"!=d[b]||!isNaN(f[b])))c[b]=f[b];if("ref"in c&&(e+=c.ref,c.start||c.end))e+=":";"start"in c&&(e+=(Math.round(c.start)+1).toFixed(0).toLocaleString(),"end"in c&&(e+=".."));"end"in c&&
(e+=Math.round(c.end).toFixed(0).toLocaleString());"strand"in c&&(e+={1:" (+ strand)","-1":" (- strand)","0":" (no strand)"}[c.strand||""]||"");"extra"in f&&(e+=f.extra);return e},complement:function(){var f=/[ACGT]/gi,e={S:"S",w:"w",T:"A",r:"y",a:"t",N:"N",K:"M",x:"x",d:"h",Y:"R",V:"B",y:"r",M:"K",h:"d",k:"m",C:"G",g:"c",t:"a",A:"T",n:"n",W:"W",X:"X",m:"k",v:"b",B:"V",s:"s",H:"D",c:"g",D:"H",b:"v",R:"Y",G:"C"},d=String.fromCharCode(160),c=function(b){return e[b]||d};return function(b){return b.replace(f,
c)}}(),revcom:function(f){return i.complement(f).split("").reverse().join("")},assembleLocStringWithLength:function(f){return i.assembleLocString(f)+" ("+i.humanReadableNumber(f.length||f.end-f.start+1)+"b)"},matchRefSeqName:function(f,e){for(var d in e)if(e.hasOwnProperty(d)){var c=f.toUpperCase(),b=d.toUpperCase();if(c==b||"CHR"+c==b||c=="CHR"+b)return e[d]}return null},debugHandler:function(f,e){return function(){var d=arguments;window.setTimeout(function(){var c=e;"string"==typeof c&&(c=f[c]);
c.apply(f,d)},1)}},ucFirst:function(f){return"string"!=typeof f?void 0:f.charAt(0).toUpperCase()+f.slice(1)},uniq:function(f,e){var e=e||function(b){return""+b},d=[],c={};dojo.forEach(f,function(b){var a=e(b);c[e(b)]||d.push(b);c[a]=!0});return d},replacePath:function(f){return f.replace(/^(\w):/,"file:///$1:").replace(/\\/g,"/")},unReplacePath:function(f){return f.replace(/^file:\/\/\//,"")},removeAttribute:function(f,e){try{delete f[e]}catch(d){f.removeAttribute&&f.removeAttribute(e)}},getResolution:function(f,
e){var d;d="auto"==e?(window.devicePixelRatio||1)/(f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1):"disabled"==e?1:e;return 1<=d?d:1}}});if(!Array.prototype.map)Array.prototype.map=function(h,j){if(void 0===this||null===this)throw new TypeError;var g=Object(this),i=g.length>>>0;if("function"!==typeof h)throw new TypeError;for(var f=Array(i),e=0;e<i;e++)e in g&&(f[e]=h.call(j,g[e],e,g));return f};if(!Array.prototype.indexOf)Array.prototype.indexOf=
function(h){if(void 0===this||null===this)throw new TypeError;var j=Object(this),g=j.length>>>0;if(0===g)return-1;var i=0;0<arguments.length&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==1/0&&i!==-(1/0)&&(i=(0<i||-1)*Math.floor(Math.abs(i))));if(i>=g)return-1;for(i=0<=i?i:Math.max(g-Math.abs(i),0);i<g;i++)if(i in j&&j[i]===h)return i;return-1}},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(h,j,g){var i={};j.mixin(g,{keys:function(f){var e=
[],d;for(d in f)d in i||e.push(d);return e},values:function(f){var e=[],d;for(d in f)d in i||e.push(f[d]);return e},filterIn:function(f,e,d){var d=d||h.global,e=g.lambda(e),c={},b,a;for(a in f)a in i||(b=f[a],e.call(d,b,a,f)&&(c[a]=b));return c},forIn:function(f,e,d){var d=d||h.global,e=g.lambda(e),c;for(c in f)c in i||e.call(d,f[c],c,f);return d},mapIn:function(f,e,d){var d=d||h.global,e=g.lambda(e),c={},b;for(b in f)b in i||(c[b]=e.call(d,f[b],b,f));return c}});return g})},"dojox/lang/functional/lambda":function(){define(["../..",
"dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(h,j,g,i){var f=g.getObject("lang.functional",!0,h),e={},d=1<"ab".split(/a*/).length?String.prototype.split:function(a){var b=this.split.call(this,a);(a=a.exec(this))&&0==a.index&&b.unshift("");return b},c=function(a){var b=[],c=d.call(a,/\s*->\s*/m);if(1<c.length)for(;c.length;)a=c.pop(),b=c.pop().split(/\s*,\s*|\s+/m),c.length&&c.push("(function("+b+"){return ("+a+")})");else if(a.match(/\b_\b/))b=["_"];else{var c=a.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),
e=a.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(c||e)c&&(b.push("$1"),a="$1"+a),e&&(b.push("$2"),a+="$2");else{var c=a.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],f={};i.forEach(c,
function(a){a in f||(b.push(a),f[a]=1)})}}return{args:b,body:a}},b=function(a){return a.length?function(){var b=a.length-1,c=f.lambda(a[b]).apply(this,arguments);for(--b;0<=b;--b)c=f.lambda(a[b]).call(this,c);return c}:function(a){return a}};g.mixin(f,{rawLambda:function(a){return c(a)},buildLambda:function(a){a=c(a);return"function("+a.args.join(",")+"){return ("+a.body+");}"},lambda:function(a){if("function"==typeof a)return a;if(a instanceof Array)return b(a);if(a in e)return e[a];a=c(a);return e[a]=
new Function(a.args,"return ("+a.body+");")},clearLambdaCache:function(){e={}}});return f})},"dojox/main":function(){define(["dojo/_base/kernel"],function(h){return h.dojox})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(h,j,g,i){var f={};h.mixin(i,{foldl:function(e,d,c,b){"string"==typeof e&&(e=e.split(""));var b=b||g.global,d=i.lambda(d),a,k;if(h.isArray(e))for(a=0,k=e.length;a<k;c=d.call(b,c,e[a],a,e),++a);else if("function"==
typeof e.hasNext&&"function"==typeof e.next)for(a=0;e.hasNext();c=d.call(b,c,e.next(),a++,e));else for(a in e)a in f||(c=d.call(b,c,e[a],a,e));return c},foldl1:function(e,d,c){"string"==typeof e&&(e=e.split(""));var c=c||g.global,d=i.lambda(d),b,a,k;if(h.isArray(e)){b=e[0];for(a=1,k=e.length;a<k;b=d.call(c,b,e[a],a,e),++a);}else if("function"==typeof e.hasNext&&"function"==typeof e.next){if(e.hasNext()){b=e.next();for(a=1;e.hasNext();b=d.call(c,b,e.next(),a++,e));}}else for(a in k=!0,e)a in f||(k?
(b=e[a],k=!1):b=d.call(c,b,e[a],a,e));return b},foldr:function(e,d,c,b){"string"==typeof e&&(e=e.split(""));for(var b=b||g.global,d=i.lambda(d),a=e.length;0<a;--a,c=d.call(b,c,e[a],a,e));return c},foldr1:function(e,d,c){"string"==typeof e&&(e=e.split(""));for(var c=c||g.global,d=i.lambda(d),b=e.length,a=e[b-1],b=b-1;0<b;--b,a=d.call(c,a,e[b],b,e));return a},reduce:function(e,d,c){return 3>arguments.length?i.foldl1(e,d):i.foldl(e,d,c)},reduceRight:function(e,d,c){return 3>arguments.length?i.foldr1(e,
d):i.foldr(e,d,c)},unfold:function(e,d,c,b,a){for(var a=a||g.global,d=i.lambda(d),c=i.lambda(c),e=i.lambda(e),f=[];!e.call(a,b);f.push(d.call(a,b)),b=c.call(a,b));return f}})})},"JBrowse/Store/LazyTrie":function(){define(["dojo/_base/declare","JBrowse/Util"],function(h,j){return h("JBrowse.Store.LazyTrie",null,{constructor:function(g,i){this.rootURL=g;this.chunkTempl=i;var f=this;dojo.xhrGet({url:g,handleAs:"json",load:function(e){if(e)f.root=e,f.extra=e[0],f.deferred&&(f.deferred.callee.apply(f,
f.deferred),delete f.deferred)}})},chunkUrl:function(g){g=this.chunkTempl.replace("{Chunk}",g);return j.resolveUrl(this.rootURL,g)},pathToPrefix:function(g){var i=this.root,f="",e=0;a:for(;e<g.length;e++){switch(typeof i[g[e]][0]){case "string":f+=i[g[e]][0];break;case "number":f+=i[g[e]][1];break a}i=i[g[e]]}return f},valuesFromPrefix:function(g,i){var f=this;this.findNode(g,function(e,d){i(f.valuesFromNode(d))},function(){i([])})},mappingsFromPrefix:function(g,i){var f=this;this.findNode(g,function(e,
d){i(f.mappingsFromNode(e,d))},function(){i([])})},mappingsFromNode:function(g,i){var f=[];null!==i[1]&&f.push([g,i[1]]);for(var e=2;e<i.length;e++)"string"==typeof i[e][0]&&(f=f.concat(this.mappingsFromNode(g+i[e][0],i[e])));return f},valuesFromNode:function(g){var i=[];null!==g[1]&&i.push(g[1]);for(var f=2;f<g.length;f++)i=i.concat(this.valuesFromNode(g[f]));return i},exactMatch:function(g,i,f){this.findNode(g,function(e,d){e.toLowerCase()==g.toLowerCase()&&d[1]&&i(d[1])},f||function(){})},findNode:function(g,
i,f){var e=this;this.findPath(g,function(d){for(var c=e.root,b=0;b<d.length;b++)c=c[d[b]];d=e.pathToPrefix(d);i(d,c)},f||function(){})},findPath:function(g,i,f){f=f||function(){};if(this.root)for(var g=g.toLowerCase(),e=this.root,d=0,c,b=[];;){c=this.binarySearch(e,g.charAt(d));if(0>c){f();break}b.push(c);if("number"==typeof e[c][0]){var a=this;dojo.xhrGet({url:this.chunkUrl(this.pathToPrefix(b)),handleAs:"json",load:function(b){e[c]=b;a.findPath(g,i)}});break}e=e[c];if(g.substr(d,e[0].length)!=e[0].substr(0,
Math.min(e[0].length,g.length-d))){f();break}d+=e[0].length;if(d>=g.length){i(b);break}}else this.deferred=arguments},binarySearch:function(g,i){for(var f=2,e=g.length-1,d,c;f<=e;){d=f+e>>>1;switch(typeof g[d][0]){case "string":c=g[d][0].charAt(0);break;case "number":c=g[d][1].charAt(0)}if(c<i)f=d+1;else if(c>i)e=d-1;else return d}return-(f+1)}})})},"JBrowse/Store/Names/LazyTrieDojoData":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util","JBrowse/Model/Location"],function(h,
j,g,i){return h(null,{constructor:function(f){if(!f.namesTrie)throw"must provide a namesTrie argument";this.namesTrie=f.namesTrie;this.resultLimit=f.resultLimit||15;this.tooManyMatchesMessage=f.tooManyMatchesMessage||"(too many matches to display)";var e=this.stopPrefixes={};f.stopPrefixes&&dojo.forEach("string"==typeof f.stopPrefixes?[f.stopPrefixes]:f.stopPrefixes,function(d){for(;d.length;)e[d]=!0,d=d.substr(0,d.length-1)});this.nodeText=function(d){this.nodeText="number"==typeof d[1][0][0]?function(c){return c[0]}:
function(c){return c[1][0][0]};return this.nodeText(d)}},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0}},fetch:function(f){var e=Math.min(this.resultLimit,Math.max(0,f.count||Infinity)),d=f.scope||dojo.global,c=!1;f.abort=function(){var a=f.abort||function(){};return function(){c=!0;a.call(d,f)}}.call(this);if(!f.store)f.store=this;f.onBegin&&f.onBegin.call(d,0,f);var b=(f.query.name||"").toString().replace(/\*$/,"");this.stopPrefixes[b]?f.onComplete&&f.onComplete.call(d,
[],f):this.namesTrie.mappingsFromPrefix(b,dojo.hitch(this,function(a){var b=[];if(!c){var g=a[0]&&a[0][1]&&a[0][1][0]&&"string"==typeof a[0][1][0][0];dojo.some(a,function(a){if(e--){var c=this.nodeText(a);j.forEach(a[1],function(a){a=new i({ref:a[g?3:2],start:parseInt(a[g?4:3]),end:parseInt(a[g?5:4]),tracks:[this.namesTrie.extra[a[g?1:0]]],objectName:c});b.push({name:c,location:a})},this)}return 0>e},this);0>e&&b.push({name:this.tooManyMatchesMessage,hitLimit:!0});f.sort&&b.sort(dojo.data.util.sorter.createSortFunction(f.sort,
this));!c&&f.onItem&&dojo.forEach(b,function(a){c||f.onItem.call(d,a,f)});!c&&f.onComplete&&f.onComplete.call(d,b,f)}}));return f},getValue:function(f,e,d){f=f[e];return"undefined"==typeof f?d:f},getValues:function(f,e){var d=[f[e]];return"undefined"==typeof d[0]?[]:d},getAttributes:function(f){return g.dojof.keys(f)},hasAttribute:function(f,e){return f.hasOwnProperty(e)},containsValue:function(f,e,d){return f[e]==d},isItem:function(f){return"object"==typeof f&&"string"==typeof f.label},isItemLoaded:function(){return!0},
loadItem:function(){},close:function(){},getLabel:function(f){return this.getValue(f,"name",void 0)},getLabelAttributes:function(){return["name"]},getIdentity:function(f){return this.getLabel(f)}})})},"JBrowse/Model/Location":function(){define(["dojo/_base/array","JBrowse/Util"],function(h,j){return j.fastDeclare({constructor:function(g){if(g){"string"==typeof g&&(g=j.parseLocString(g));g.location&&this._populate(g.location);if(g.feature){var i=g.feature;this._populate({start:i.get("start"),end:i.get("end"),
ref:i.get("seq_id")||(g.tracks?g.tracks[0].browser.refSeq.name:void 0),strand:i.get("strand"),objectName:i.get("name")||i.get("id")})}this._populate(g)}},_populate:function(g){h.forEach("ref,start,end,strand,tracks,objectName".split(","),function(i){i in g&&(this[i]=g[i])},this)},toString:function(){var g=j.assembleLocString(this);return this.objectName?g+" ("+this.objectName+")":g},fromString:function(g){g=j.parseLocString(g);g.objectName=g.extra;delete g.extra;this._populate(g)},localeCompare:function(g){return this.toString().localeCompare(g.toString())}})})},
"dojo/store/DataStore":function(){define("../_base/lang,../_base/declare,../_base/Deferred,../_base/array,./util/QueryResults,./util/SimpleQueryEngine".split(","),function(h,j,g,i,f,e){return j("dojo.store.DataStore",null,{target:"",constructor:function(d){h.mixin(this,d);if(!1 in d){var c;try{c=this.store.getIdentityAttributes()}catch(b){}this.idProperty=!c||!idAttributes[0]||this.idProperty}d=this.store.getFeatures();if(!d["dojo.data.api.Read"])this.get=null;if(!d["dojo.data.api.Identity"])this.getIdentity=
null;if(!d["dojo.data.api.Write"])this.put=this.add=null},idProperty:"id",store:null,queryEngine:e,_objectConverter:function(d){function c(d){for(var e={},f=b.getAttributes(d),g=0;g<f.length;g++){var i=f[g],h=b.getValues(d,i);if(1<h.length){for(i=0;i<h.length;i++){var j=h[i];"object"==typeof j&&b.isItem(j)&&(h[i]=c(j))}j=h}else j=b.getValue(d,i),"object"==typeof j&&b.isItem(j)&&(j=c(j));e[f[g]]=j}!(a in e)&&b.getIdentity&&(e[a]=b.getIdentity(d));return e}var b=this.store,a=this.idProperty;return function(a){return d(c(a))}},
get:function(d){var c,b,a=new g;this.store.fetchItemByIdentity({identity:d,onItem:this._objectConverter(function(b){a.resolve(c=b)}),onError:function(c){a.reject(b=c)}});if(c)return c;if(b)throw b;return a.promise},put:function(d,c){var b=c&&"undefined"!=typeof c.id||this.getIdentity(d),a=this.store,e=this.idProperty;"undefined"==typeof b?(a.newItem(d),a.save()):a.fetchItemByIdentity({identity:b,onItem:function(b){if(b)for(var c in d)c!=e&&a.getValue(b,c)!=d[c]&&a.setValue(b,c,d[c]);else a.newItem(d);
a.save()}})},remove:function(d){var c=this.store;this.store.fetchItemByIdentity({identity:d,onItem:function(b){c.deleteItem(b);c.save()}})},query:function(d,c){var b,a=new g(function(){b.abort&&b.abort()});a.total=new g;var e=this._objectConverter(function(a){return a});b=this.store.fetch(h.mixin({query:d,onBegin:function(b){a.total.resolve(b)},onComplete:function(b){a.resolve(i.map(b,e))},onError:function(b){a.reject(b)}},c));return f(a)},getIdentity:function(d){return d[this.idProperty]}})})},"JBrowse/FeatureFiltererMixin":function(){define(["dojo/_base/declare",
"dojo/_base/array"],function(h){var j=0;return h(null,{filterFeature:function(){return!0},_featureFilterChain:[],addFeatureFilter:function(g,i){i=this._getFeatureFilterName(i);this._featureFilterChain.push({name:i,filter:g});this._buildFeatureFilter();return i},_getFeatureFilterName:function(g){return void 0===g?"featureFilter_"+ ++j:g},removeFeatureFilter:function(g){for(var i=[],f=0;f<this._featureFilterChain.length;f++)this._featureFilterChain[f].name!==g&&i.push(this._featureFilterChain[f]);this._featureFilterChain=
i;this._buildFeatureFilter()},_buildFeatureFilter:function(){var g=this._featureFilterChain.slice();if(g.length)if(1==g.length){var i=g[0].filter;this.filterFeature=function(f){return i.call(this,f)&&this.featureFilterParentComponent.filterFeature(f)}}else this.filterFeature=function(f){for(var e=0;e<g.length;e++)if(!g[e].filter.call(this,f))return!1;return!this.featureFilterParentComponent.filterFeature(f)?!1:!0};else this.filterFeature=function(f){return this.featureFilterParentComponent.filterFeature(f)}},
featureFilterParentComponent:{filterFeature:function(){return!0}},setFeatureFilter:function(g,i){this._featureFilterChain=[];this.addFeatureFilter(g,i)},clearFeatureFilter:function(){this._featureFilterChain=[];this._buildFeatureFilter()},setFeatureFilterParentComponent:function(g){this.featureFilterParentComponent=g;this._buildFeatureFilter()}})})},"JBrowse/GenomeView":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,JBrowse/Util,JBrowse/has,dojo/dnd/move,dojo/dnd/Source,dijit/focus,JBrowse/Component,JBrowse/FeatureFiltererMixin,JBrowse/View/Track/LocationScale,JBrowse/View/Track/GridLines,JBrowse/BehaviorManager,JBrowse/View/Animation/Zoomer,JBrowse/View/Animation/Slider,JBrowse/View/InfoDialog".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l){var m=i.dojof,r=h(e.constrainedMoveable,{constructor:function(){this.constraints=function(){var a=dojo.marginBox(this.node.parentNode);a.t=0;return a}}});return h([b,a],{constructor:function(a){var b=a.elem,c=a.stripeWidth,e=a.refSeq,f=a.zoomLevel;this.browser=a.browser;this.setFeatureFilterParentComponent(this.browser);this.elem=b;this.posHeight=this.calculatePositionLabelHeight(b);this.topSpace=1.5*this.posHeight;this.maxPxPerBp=this.config.maxPxPerBp;this.ref=
e;this.pxPerBp=f;this.stripeWidth=c;this.scrollContainer=dojo.create("div",{id:"container",style:{position:"absolute",left:"0px",top:"0px"}},b);this._renderVerticalScrollBar();this.zoomContainer=document.createElement("div");this.zoomContainer.id="zoomContainer";this.zoomContainer.style.cssText="position: absolute; left: 0px; top: 0px; height: 100%;";this.scrollContainer.appendChild(this.zoomContainer);this.outerTrackContainer=document.createElement("div");this.outerTrackContainer.className="trackContainer outerTrackContainer";
this.outerTrackContainer.style.cssText="height: 100%;";this.zoomContainer.appendChild(this.outerTrackContainer);this.trackContainer=document.createElement("div");this.trackContainer.className="trackContainer innerTrackContainer draggable";this.trackContainer.style.cssText="height: 100%;";this.outerTrackContainer.appendChild(this.trackContainer);this.regularStripe=c;this.overview=this.browser.overviewDiv;this.overviewBox=dojo.marginBox(this.overview);this.tracks=[];this.uiTracks=[];this.trackIndices=
{};this.sizeInit();this.offset=0;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();this.minLeft=this.bpToPx(this.ref.start);this.drawMargin=0.2;this.slideTimeMultiple=0.8;this.trackHeights=[];this.trackTops=[];this.waitElems=dojo.filter([dojo.byId("moveLeft"),dojo.byId("moveRight"),dojo.byId("zoomIn"),dojo.byId("zoomOut"),dojo.byId("bigZoomIn"),dojo.byId("bigZoomOut"),document.body,b],function(a){return a});this.prevCursors=[];this.locationThumb=document.createElement("div");this.locationThumb.className=
"locationThumb";this.overview.appendChild(this.locationThumb);this.locationThumbMover=new r(this.locationThumb,{area:"content",within:!0});this.x=this.elem.scrollLeft;this.y=0;a=document.createElement("div");a.className="track static_track rubberBandAvailable";a.style.height=this.posHeight+"px";a.id="static_track";this.scaleTrackDiv=a;this.staticTrack=new k({label:"static_track",labelClass:"pos-label",posHeight:this.posHeight,browser:this.browser,refSeq:this.ref});this.staticTrack.setViewInfo(this,
function(){},this.stripeCount,this.scaleTrackDiv,this.stripePercent,this.stripeWidth,this.pxPerBp,this.config.trackPadding);this.zoomContainer.appendChild(this.scaleTrackDiv);this.waitElems.push(this.scaleTrackDiv);a=document.createElement("div");a.className="track";a.style.cssText="top: 0px; height: 100%;";a.id="gridtrack";b=new n({browser:this.browser,refSeq:this.ref});b.setViewInfo(this,function(){},this.stripeCount,a,this.stripePercent,this.stripeWidth,this.pxPerBp,this.config.trackPadding);this.trackContainer.appendChild(a);
this.uiTracks=[this.staticTrack,b];this.trackDndWidget=new d(this.trackContainer,{accept:["track"],withHandles:!0,creator:dojo.hitch(this,function(a,b){return{data:a,type:["track"],node:"avatar"==b?dojo.create("div",{innerHTML:a.key||a.label,className:"track-label dragging"}):this.renderTrack(a)}})});this.browser.subscribe("/dnd/drop",dojo.hitch(this,function(a,b,c,d){this.updateTrackList();d.node===this.trackContainer&&this.browser.publish("/jbrowse/v1/v/tracks/show",dojo.filter(dojo.map(b,function(a){return a.track&&
a.track.config}),function(a){return a}))}));this.browser.subscribe("/jbrowse/v1/c/tracks/show",dojo.hitch(this,"showTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/hide",dojo.hitch(this,"hideTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/replace",dojo.hitch(this,"replaceTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/delete",dojo.hitch(this,"hideTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/pin",dojo.hitch(this,"pinTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/unpin",
dojo.hitch(this,"unpinTracks"));dojo.forEach(this.uiTracks,function(a){a.showRange(0,this.stripeCount-1,Math.round(this.pxToBp(this.offset)),Math.round(this.stripeWidth/this.pxPerBp),this.pxPerBp)},this);this.addOverviewTrack(new k({label:"overview_loc_track",labelClass:"overview-pos",posHeight:this.overviewPosHeight,browser:this.browser,refSeq:this.ref}));this.showFine();this.showCoarse();this.behaviorManager=new q({context:this,behaviors:this._behaviors()});this.behaviorManager.initialize()},_defaultConfig:function(){return{maxPxPerBp:20,
trackPadding:20}},visibleRegion:function(){return{ref:this.ref.name,start:this.minVisible(),end:this.maxVisible()}},visibleRegionLocString:function(){return i.assembleLocString(this.visibleRegion())},_renderVerticalScrollBar:function(){var a=dojo.create("div",{className:"vertical_scrollbar",style:{position:"fixed",right:"0px",bottom:"0px",height:"100%",width:"10px",zIndex:1E3}},this.elem),b=dojo.create("div",{className:"vertical_position_marker",style:{position:"absolute",height:"100%"}},a);this.verticalScrollBar=
{container:a,positionMarker:b,width:a.offsetWidth}},_updateVerticalScrollBar:function(a){if("number"==typeof a.height){var b=this.staticTrack?-this.staticTrack.div.offsetHeight:0;this.verticalScrollBar.container.style.height=a.height+b-(this.pinUnderlay?this.pinUnderlay.offsetHeight+b:0)+"px";b=100*(a.height/(this.containerHeight||1));this.verticalScrollBar.positionMarker.style.height=0.5<b?b+"%":"1px";0.98<a.height/(this.containerHeight||1)?(this.verticalScrollBar.container.style.display="none",
this.verticalScrollBar.visible=!1):(this.verticalScrollBar.container.style.display="block",this.verticalScrollBar.visible=!0)}if("number"==typeof a.y||"number"==typeof a.height)this.verticalScrollBar.positionMarker.style.top=(100*((a.y||this.getY()||0)/(this.containerHeight||1))||0)+"%"},verticalScrollBarVisibleWidth:function(){return this.verticalScrollBar.visible&&this.verticalScrollBar.width||0},visibleTracks:function(){return this.tracks},visibleTrackNames:function(){return dojo.map(this.visibleTracks(),
function(a){return a.name})},keySlideX:function(a){this.setX(this.getX()+a);var b=this;if(!this._keySlideTimeout)this._keySlideTimeout=window.setTimeout(function(){b.afterSlide();delete b._keySlideTimeout},300)},_behaviors:function(){return{always:{apply_on_init:!0,apply:function(){var a=[];a.push(dojo.connect(this.overview,"mousedown",dojo.hitch(this,"startRubberZoom",dojo.hitch(this,"overview_absXtoBp"),this.overview,this.overview)));var b="onwheel"in document.createElement("div")?"wheel":void 0!==
document.onmousewheel?"mousewheel":"DOMMouseScroll";a.push(dojo.connect(this.scrollContainer,b,this,"wheelScroll",!1),dojo.connect(this.scaleTrackDiv,"mousedown",dojo.hitch(this,"startRubberZoom",dojo.hitch(this,"absXtoBp"),this.scrollContainer,this.scaleTrackDiv)),dojo.connect(this.outerTrackContainer,"dblclick",this,"doubleClickZoom"),dojo.connect(this.locationThumbMover,"onMoveStop",this,"thumbMoved"),dojo.connect(this.overview,"onclick",this,"overviewClicked"),dojo.connect(this.scaleTrackDiv,
"onclick",this,"scaleClicked"),dojo.connect(this.scaleTrackDiv,"mouseover",this,"scaleMouseOver"),dojo.connect(this.scaleTrackDiv,"mouseout",this,"scaleMouseOut"),dojo.connect(this.scaleTrackDiv,"mousemove",this,"scaleMouseMove"),dojo.connect(document.body,"onkeyup",this,function(a){a.keyCode==dojo.keys.SHIFT&&this.behaviorManager.swapBehaviors("shiftMouse","normalMouse")}),dojo.connect(document.body,"onkeydown",this,function(a){a.keyCode==dojo.keys.SHIFT&&this.behaviorManager.swapBehaviors("normalMouse",
"shiftMouse")}),dojo.connect(document.body,"onkeypress",this,function(a){if(!c.curNode)if(a.keyCode==dojo.keys.LEFT_ARROW||a.keyCode==dojo.keys.RIGHT_ARROW){var b=a.keyCode==dojo.keys.LEFT_ARROW?-40:40;a.shiftKey&&(b*=5);this.keySlideX(b)}else if(a.keyCode==dojo.keys.DOWN_ARROW||a.keyCode==dojo.keys.UP_ARROW)if(a.shiftKey)this[a.keyCode==dojo.keys.UP_ARROW?"zoomIn":"zoomOut"](a,0.5,a.altKey?2:1);else b=a.keyCode==dojo.keys.UP_ARROW?-40:40,this.setY(this.getY()+b)}),dojo.connect(this.scrollContainer,
"onclick",this,function(){c.curNode&&c.curNode.blur()}));return a}},normalMouse:{apply_on_init:!0,apply:function(){return[dojo.connect(this.outerTrackContainer,"mousedown",this,"startMouseDragScroll"),dojo.connect(this.verticalScrollBar.container,"mousedown",this,"startVerticalMouseDragScroll")]}},highlightingMouse:{apply:function(){dojo.removeClass(this.trackContainer,"draggable");dojo.addClass(this.trackContainer,"highlightingAvailable");return[dojo.connect(this.outerTrackContainer,"mousedown",
dojo.hitch(this,"startMouseHighlight",dojo.hitch(this,"absXtoBp"),this.scrollContainer,this.scaleTrackDiv)),dojo.connect(this.outerTrackContainer,"mouseover",this,"maybeDrawVerticalPositionLine"),dojo.connect(this.outerTrackContainer,"mousemove",this,"maybeDrawVerticalPositionLine")]},remove:function(a,b){dojo.forEach(b,dojo.disconnect,dojo);dojo.removeClass(this.trackContainer,"highlightingAvailable");dojo.addClass(this.trackContainer,"draggable")}},shiftMouse:{apply:function(){if(!dojo.hasClass(this.trackContainer,
"highlightingAvailable"))return dojo.removeClass(this.trackContainer,"draggable"),dojo.addClass(this.trackContainer,"rubberBandAvailable"),[dojo.connect(this.outerTrackContainer,"mousedown",dojo.hitch(this,"startRubberZoom",dojo.hitch(this,"absXtoBp"),this.scrollContainer,this.scaleTrackDiv)),dojo.connect(this.outerTrackContainer,"onclick",this,"scaleClicked"),dojo.connect(this.outerTrackContainer,"mouseover",this,"maybeDrawVerticalPositionLine"),dojo.connect(this.outerTrackContainer,"mousemove",
this,"maybeDrawVerticalPositionLine")]},remove:function(a,b){this.clearBasePairLabels();this.clearVerticalPositionLine();dojo.forEach(b,dojo.disconnect,dojo);dojo.removeClass(this.trackContainer,"rubberBandAvailable");dojo.addClass(this.trackContainer,"draggable")}},mouseDragScrolling:{apply:function(){return[dojo.connect(document.body,"mouseup",this,"dragEnd"),dojo.connect(document.body,"mousemove",this,"dragMove"),dojo.connect(document.body,"mouseout",this,"checkDragOut")]}},verticalMouseDragScrolling:{apply:function(){return[dojo.connect(document.body,
"mouseup",this,"dragEnd"),dojo.connect(document.body,"mousemove",this,"verticalDragMove"),dojo.connect(document.body,"mouseout",this,"checkDragOut")]}},mouseRubberBanding:{apply:function(){return[dojo.connect(document.body,"mouseup",this,"rubberExecute"),dojo.connect(document.body,"mousemove",this,"rubberMove"),dojo.connect(document.body,"mouseout",this,"rubberCancel"),dojo.connect(window,"onkeydown",this,function(a){a.keyCode!==dojo.keys.SHIFT&&this.rubberCancel(a)})]}}}},calculatePositionLabelHeight:function(a){var b=
document.createElement("div");b.className="pos-label";b.style.visibility="hidden";b.appendChild(document.createTextNode("42"));a.appendChild(b);var c=b.clientHeight;a.removeChild(b);return c},wheelScroll:function(a){if(!a)a=window.event;var b=0,c=0;"wheelDeltaX"in a?(b=a.wheelDeltaX/2,c=a.wheelDeltaY/2):"deltaX"in a?(b=-1!==navigator.userAgent.indexOf("OS X 10.9")?-5:-40,b=Math.abs(a.deltaY)>Math.abs(2*a.deltaX)?0:a.deltaX*b,c=-10*a.deltaY):a.wheelDelta?(c=a.wheelDelta/2,window.opera&&(c=-c)):a.detail&&
(c=100*-a.detail);b=Math.round(2*b);c=Math.round(c);b&&this.keySlideX(-b);c&&this.setY(this.getY()-c);this.wheelScrollTimeout&&window.clearTimeout(this.wheelScrollTimeout);this.wheelScrollTimeout=window.setTimeout(dojo.hitch(this,function(){this.showVisibleBlocks(!0);this.wheelScrollTimeout=null},100));dojo.stopEvent(a)},getX:function(){return this.x||0},getY:function(){return this.y||0},getHeight:function(){return this.elemBox.h},getWidth:function(){return this.elemBox.w},clampX:function(a){return Math.round(Math.max(Math.min(this.maxLeft-
this.offset,a||0),this.minLeft-this.offset))},clampY:function(a){return Math.round(Math.min(Math.max(0,a||0),this.containerHeight-this.getHeight()))},rawSetX:function(a){this.x=this.elem.scrollLeft=a},setX:function(a){a=this.clampX(a);this.rawSetX(a);this.updateStaticElements({x:a});this.showFine();return a},rawSetY:function(a){this.y=a;this.layoutTracks()},setY:function(a){a=this.clampY(a);this.rawSetY(a);this.updateStaticElements({y:a});return a},rawSetPosition:function(a){this.rawSetX(a.x);this.rawSetY(a.y);
return a},setPosition:function(a){var b=this.clampX(a.x),a=this.clampY(a.y);this.updateStaticElements({x:b,y:a});this.rawSetX(b);this.rawSetY(a);this.showFine()},getPosition:function(){return{x:this.x,y:this.y}},zoomCallback:function(){this.zoomUpdate()},afterSlide:function(){this.showCoarse();this.scrollUpdate();this.showVisibleBlocks(!0)},suppressDoubleClick:function(a){this._noDoubleClick&&window.clearTimeout(this._noDoubleClick);var b=this;this._noDoubleClick=window.setTimeout(function(){delete b._noDoubleClick},
a||100)},doubleClickZoom:function(a){if(!this._noDoubleClick&&!this.dragging&&!("animation"in this)){this.scaleClickedTimeout&&window.clearTimeout(this.scaleClickedTimeout);var b=(a.pageX-dojo.position(this.elem,!0).x)/this.getWidth();a.shiftKey?this.zoomOut(a,b,2):this.zoomIn(a,b,2);dojo.stopEvent(a)}},_beforeMouseDrag:function(a){if(this.animation){if(this.animation instanceof o)return dojo.stopEvent(a),0;this.animation.stop()}if(i.isRightButton(a))return 0;dojo.stopEvent(a);return 1},startMouseDragScroll:function(a){if(this._beforeMouseDrag(a))this.behaviorManager.applyBehaviors("mouseDragScrolling"),
this.dragStartPos={x:a.clientX,y:a.clientY},this.winStartPos=this.getPosition()},startVerticalMouseDragScroll:function(a){if(this._beforeMouseDrag(a))this.behaviorManager.applyBehaviors("verticalMouseDragScrolling"),this.dragStartPos={x:a.clientX,y:a.clientY},this.winStartPos=this.getPosition()},startMouseHighlight:function(a,b,c,d){if(this._beforeMouseDrag(d))this.behaviorManager.applyBehaviors("mouseRubberBanding"),this.rubberbanding={absFunc:a,container:b,scaleDiv:c,message:"Highlight region",
start:{x:d.clientX,y:d.clientY},execute:function(a,b){this.browser.setHighlightAndRedraw({ref:this.ref.name,start:a,end:b})}},this.winStartPos=this.getPosition()},startRubberZoom:function(a,b,c,d){if(this._beforeMouseDrag(d))this.behaviorManager.applyBehaviors("mouseRubberBanding"),this.rubberbanding={absFunc:a,container:b,scaleDiv:c,message:"Zoom to region",start:{x:d.clientX,y:d.clientY},execute:function(a,b){this.setLocation(this.ref,a,b)}},this.winStartPos=this.getPosition(),this.clearVerticalPositionLine(),
this.clearBasePairLabels()},_rubberStop:function(a){this.behaviorManager.removeBehaviors("mouseRubberBanding");this.hideRubberHighlight();this.clearBasePairLabels();a&&dojo.stopEvent(a);delete this.rubberbanding},rubberCancel:function(a){var b=document.body.parentNode,c=document.body;(!a||!a.relatedTarget&&!a.toElement||b===(a.relatedTarget||a.toElement)||c===(a.relatedTarget||a.toElement))&&this._rubberStop(a)},rubberMove:function(a){this.setRubberHighlight(this.rubberbanding.start,{x:a.clientX,
y:a.clientY})},rubberExecute:function(a){var b=this.rubberbanding.start,c=a.clientX,d=Math.floor(this.rubberbanding.absFunc(Math.min(b.x,c))),e=Math.ceil(this.rubberbanding.absFunc(Math.max(b.x,c))),f=this.rubberbanding.execute;this._rubberStop(a);3>Math.abs(b.x-c)||f.call(this,d,e)},setRubberHighlight:function(a,b){var c=this.rubberbanding.container,d=dojo.position(c,!0),e;if(!(e=this.rubberHighlight)){e=this.rubberHighlight=document.createElement("div");e.className="rubber-highlight";e.style.position=
"absolute";e.style.zIndex=20;var f=document.createElement("div");f.appendChild(document.createTextNode(this.rubberbanding.message));e.appendChild(f);f.style.position="relative";f.style.top=50-d.y+"px";c.appendChild(e)}e.style.visibility="visible";e.style.left=Math.min(a.x,b.x)-d.x+"px";e.style.width=Math.abs(b.x-a.x)+"px";this.drawBasePairLabel({name:"rubberLeft",xToBp:this.rubberbanding.absFunc,scaleDiv:this.rubberbanding.scaleDiv,offset:0,x:Math.min(a.x,b.x),parent:c,className:"rubber"});this.drawBasePairLabel({name:"rubberRight",
xToBp:this.rubberbanding.absFunc,scaleDiv:this.rubberbanding.scaleDiv,offset:0,x:Math.max(a.x,b.x)+1,parent:c,className:"rubber"});this.clearVerticalPositionLine()},dragEnd:function(a){this.behaviorManager.removeBehaviors("mouseDragScrolling","verticalMouseDragScrolling");dojo.stopEvent(a);this.showCoarse();this.scrollUpdate();this.showVisibleBlocks(!0);window.setTimeout(dojo.hitch(this,function(){this.dragging=!1}),100)},checkDragOut:function(a){var b=document.body.parentNode,c=document.body;(!a.relatedTarget&&
!a.toElement||b===(a.relatedTarget||a.toElement)||c===(a.relatedTarget||a.toElement))&&this.dragEnd(a)},dragMove:function(a){this.dragging=!0;this.setPosition({x:this.winStartPos.x-(a.clientX-this.dragStartPos.x),y:this.winStartPos.y-(a.clientY-this.dragStartPos.y)});dojo.stopEvent(a)},verticalDragMove:function(a){this.dragging=!0;var b=parseInt(this.verticalScrollBar.container.style.height,10);this.setPosition({x:this.winStartPos.x,y:this.winStartPos.y+(a.clientY-this.dragStartPos.y)*(this.trackContainer.clientHeight/
b)});dojo.stopEvent(a)},hideRubberHighlight:function(){this.rubberHighlight&&(this.rubberHighlight.parentNode.removeChild(this.rubberHighlight),delete this.rubberHighlight)},slide:function(a){this.animation&&this.animation.stop();this.trimVertical();new l(this,this.afterSlide,Math.abs(a)*this.getWidth()*this.slideTimeMultiple+200,a*this.getWidth())},setLocation:function(a,b,c){function d(a){a.div&&a.div.parentNode&&a.div.parentNode.removeChild(a.div)}void 0===b&&(b=this.minVisible());void 0===c&&
(c=this.maxVisible());"string"==typeof a&&(a=this.browser.getRefSeq(a));if(!a)a=this.ref;if(b<a.start||b>a.end)b=a.start;if(c<a.start||c>a.end)c=a.end;if(this.ref!==a){var e=this;this.ref=a;this._unsetPosBeforeZoom();j.forEach(this.tracks,d);this.tracks=[];this.trackIndices={};this.trackHeights=[];this.trackTops=[];j.forEach(this.uiTracks,function(a){a.refSeq=e.ref;a.clear()});this.overviewTrackIterate(d);this.addOverviewTrack(new k({label:"overview_loc_track",labelClass:"overview-pos",posHeight:this.overviewPosHeight,
browser:this.browser,refSeq:this.ref}));this.sizeInit();this.setY(0);this.behaviorManager.initialize()}this.pxPerBp=Math.min(this.getWidth()/(c-b),this.maxPxPerBp);this.curZoom=i.findNearest(this.zoomLevels,this.pxPerBp);if(0.2>Math.abs(this.pxPerBp-this.zoomLevels[this.zoomLevels.length-1]))this.pxPerBp=this.zoomLevels[this.zoomLevels.length-1];this.stripeWidth=this.stripeWidthForZoom(this.curZoom)/this.zoomLevels[this.curZoom]*this.pxPerBp;this.instantZoomUpdate();this.centerAtBase((b+c)/2,!0)},
stripeWidthForZoom:function(a){return this.zoomLevels.length-1==a?this.regularStripe/10*this.maxPxPerBp:0==a?this.minZoomStripe:this.regularStripe},instantZoomUpdate:function(){this.scrollContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.zoomContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.maxOffset=this.bpToPx(this.ref.end)-this.stripeCount*this.stripeWidth;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();this.minLeft=this.bpToPx(this.ref.start)},centerAtBase:function(a,
b){a=Math.min(Math.max(a,this.ref.start),this.ref.end);if(b){var c=this.bpToPx(a);this.offset=Math.floor((c-this.stripeCount*this.stripeWidth/2)/this.stripeWidth)*this.stripeWidth;this.setX(c-this.offset-this.getWidth()/2);this.trackIterate(function(a){a.clear()});this.showVisibleBlocks(!0);this.showCoarse()}else{var c=this.pxToBp(this.x+this.offset),d=this.getWidth()/this.pxPerBp/2,e=c+d;a>=c-d&&a<=c+d+d+d?(this.animation&&this.animation.stop(),c=(e-a)*this.pxPerBp,this.trimVertical(),new l(this,
this.afterSlide,Math.abs(c)*this.slideTimeMultiple+200,c)):this.centerAtBase(a,!0)}},minVisible:function(){var a=this.pxToBp(this.x+this.offset);return a<this.pxToBp(1)?0:Math.round(a)},maxVisible:function(){var a=this.pxToBp(this.x+this.offset+this.getWidth()),b=this.pxToBp(this.verticalScrollBarVisibleWidth());return a>this.ref.end-this.pxToBp(1)?this.ref.end-b:Math.round(a)-b},showFine:function(){this.onFineMove(this.minVisible(),this.maxVisible())},showCoarse:function(){this.onCoarseMove(this.minVisible(),
this.maxVisible())},onFineMove:function(){this.updateLocationThumb()},onCoarseMove:function(){this.updateLocationThumb()},onResize:function(){this.sizeInit();this.showVisibleBlocks();this.showFine();this.showCoarse()},overviewClicked:function(a){this.centerAtBase(this.overview_absXtoBp(a.clientX))},scaleMouseOver:function(a){this.rubberbanding||this.drawVerticalPositionLine(this.scaleTrackDiv,a)},scaleMouseMove:function(a){this.rubberbanding||this.drawVerticalPositionLine(this.scaleTrackDiv,a)},scaleMouseOut:function(){this.clearVerticalPositionLine();
this.clearBasePairLabels()},maybeDrawVerticalPositionLine:function(a){this.rubberbanding||this.drawVerticalPositionLine(this.scaleTrackDiv,a)},drawVerticalPositionLine:function(a,b){var c=b.pageX+2;if(!this.verticalPositionLine)this.verticalPositionLine=dojo.create("div",{className:"trackVerticalPositionIndicatorMain"},this.staticTrack.div);var d=this.verticalPositionLine;d.style.display="block";d.style.left=c+"px";var e=dojo.position(this.scaleTrackDiv);d.style.top=e.y+"px";this.drawBasePairLabel({name:"single",
offset:0,x:c,parent:a,scaleDiv:a})},drawBasePairLabel:function(a){var b=a.name||0,c=a.offset||0,d=a.x;this.basePairLabels=this.basePairLabels||{};if(!this.basePairLabels[b]){var e=dojo.position(a.scaleDiv||this.scaleTrackDiv);this.basePairLabels[b]=dojo.create("div",{className:"basePairLabel"+(a.className?" "+a.className:""),style:{top:e.y+e.h-3+"px"}},document.body)}b=this.basePairLabels[b];if("object"==typeof d)d=d.clientX;b.style.display="block";a=a.xToBp||dojo.hitch(this,"absXtoBp");b.innerHTML=
i.addCommas(Math.floor(a(d))+1);b.style.left=window.innerWidth-d>8+b.offsetWidth?d+c+"px":d+1-c-b.offsetWidth+"px"},clearVerticalPositionLine:function(){if(this.verticalPositionLine)this.verticalPositionLine.style.display="none"},clearBasePairLabels:function(){for(var a in this.basePairLabels){var b=this.basePairLabels[a];b.parentNode&&b.parentNode.removeChild(b)}this.basePairLabels={}},overview_absXtoBp:function(a){var b=dojo.position(this.overview);return(a-b.x)/b.w*(this.ref.end-this.ref.start)+
this.ref.start},scaleClicked:function(a){var b=this.absXtoBp(a.clientX);this.scaleClickedTimeout=window.setTimeout(dojo.hitch(this,function(){this.centerAtBase(b)},100))},thumbMoved:function(){var a=parseInt(this.locationThumb.style.left),b=parseInt(this.locationThumb.style.width);this.centerAtBase((a+b/2)/this.overviewBox.w*(this.ref.end-this.ref.start)+this.ref.start)},updateLocationThumb:function(){var a=this.minVisible(),b=this.maxVisible(),c=this.ref.end-this.ref.start,a=Math.round((a-this.ref.start)/
c*this.overviewBox.w+this.overviewBox.l),b=Math.round((b-this.ref.start)/c*this.overviewBox.w+this.overviewBox.l);this.locationThumb.style.cssText="height: "+(this.overviewBox.h-4)+"px; left: "+a+"px; width: "+(b-a)+"px;z-index: 20"},checkY:function(a){return Math.min(0>a?0:a,this.containerHeight-this.getHeight())},updateStaticElements:function(a){this.trackIterate(function(b){b.updateStaticElements(a)},this);this._updateVerticalScrollBar(a)},showWait:function(){for(var a=[],b=0;b<this.waitElems.length;b++)a[b]=
this.waitElems[b].style.cursor,this.waitElems[b].style.cursor="wait";this.prevCursors.push(a)},showDone:function(){for(var a=this.prevCursors.pop(),b=0;b<this.waitElems.length;b++)this.waitElems[b].style.cursor=a[b]},pxToBp:function(a){return a/this.pxPerBp},absXtoBp:function(a){return this.pxToBp(this.getPosition().x+this.offset-dojo.position(this.elem,!0).x+a)-1},bpToPx:function(a){return a*this.pxPerBp},sizeInit:function(){this.overviewBox=dojo.marginBox(this.overview);this.elemBox={h:this.elem.offsetHeight,
w:this.elem.offsetWidth};var a=[2.0E-6,5.0E-6,1.0E-5,2.0E-5,5.0E-5,1.0E-4,2.0E-4,5.0E-4,0.001,0.002,0.005,0.01,0.02,0.05,0.1,0.2,0.5,1,2,5,10,20];this.zoomLevels=[];for(var b=0;b<a.length;b++){var c=a[b];if(c<this.maxPxPerBp)this.zoomLevels.push(c);else break}for(this.zoomLevels.push(this.maxPxPerBp);(this.ref.end-this.ref.start)*this.zoomLevels[0]<this.getWidth();)this.zoomLevels.shift();this.zoomLevels.unshift(this.getWidth()/(this.ref.end-this.ref.start));this.minZoomStripe=this.regularStripe*
(this.zoomLevels[0]/this.zoomLevels[1]);for(this.curZoom=0;this.pxPerBp>this.zoomLevels[this.curZoom];)this.curZoom++;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();delete this.stripePercent;a=[20,10,5,4,2,1];for(b=0;b<a.length;b++)if(100/a[b]*0.7*this.regularStripe>3*this.getWidth()+this.regularStripe){this.stripePercent=a[b];break}if(!this.stripePercent)console.warn("stripeWidth too small: "+this.stripeWidth+", "+this.getWidth()),this.stripePercent=1;(b=this.stripeCount)&&this.getX();
this.stripeCount=Math.round(100/this.stripePercent);this.scrollContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.zoomContainer.style.width=this.stripeCount*this.stripeWidth+"px";var d;b&&b!=this.stripeCount&&(d=Math.floor((b-this.stripeCount)/2),b=d*this.stripeWidth,a=this.getX()-b,this.offset+=b,this.updateStaticElements({x:a}),this.rawSetX(a));this.trackIterate(function(a,b){a.sizeInit(b.stripeCount,b.stripePercent,d)});b=this.trackHeights&&this.trackHeights.length?Math.max(m.reduce(this.trackHeights,
"+")+this.config.trackPadding*this.trackHeights.length,this.getHeight()):this.getHeight();this.scrollContainer.style.height=b+"px";this.containerHeight=b;b=this.ref.end-this.ref.start;if(0>b)throw Error("reference sequence "+this.ref.name+" has an invalid start coordinate, it is greater than its end coordinate.");c=document.createElement("div");c.className="overview-pos";c.appendChild(document.createTextNode(i.addCommas(this.ref.end)));c.style.visibility="hidden";this.overview.appendChild(c);a=1.2*
c.clientWidth;this.overviewPosHeight=1.2*c.clientHeight;this.overview.removeChild(c);for(c=1;30>c;c++){this.overviewStripeBases=(Math.pow(c%3,2)+1)*Math.pow(10,Math.floor(c/3));this.overviewStripes=Math.ceil(b/this.overviewStripeBases);if(this.overviewBox.w/this.overviewStripes>a)break;if(2>this.overviewStripes)break}var e=100/(b/this.overviewStripeBases);this.overviewTrackIterate(function(a,b){a.clear();a.sizeInit(b.overviewStripes,e);a.showRange(0,b.overviewStripes-1,b.ref.start-1,b.overviewStripeBases,
b.overviewBox.w/(b.ref.end-b.ref.start))});this.updateOverviewHeight();this.updateScroll()},updateScroll:function(){var a={height:this.getHeight()};if(0<this.getY()&&this.containerHeight-this.getY()<a.height)a.y=this.setY(Math.max(0,this.containerHeight-a.height));this.updateStaticElements(a)},overviewTrackIterate:function(a){var b=this.overview.firstChild;do b&&b.track&&a.call(this,b.track,this);while(b&&(b=b.nextSibling))},updateOverviewHeight:function(){var a=0;this.overviewTrackIterate(function(b){a+=
b.height;b.div.style.height=b.height+"px"});this.overview.style.height=a+"px";this.overviewBox=dojo.marginBox(this.overview)},addOverviewTrack:function(a){var b=100/((this.ref.end-this.ref.start)/this.overviewStripeBases),c=document.createElement("div");c.className="track";c.style.height=this.overviewBox.h+"px";c.id="overviewtrack_"+a.name;c.track=a;var d=this;a.setViewInfo(this,function(){d.updateOverviewHeight()},this.overviewStripes,c,b,this.overviewStripeBases,this.pxPerBp,this.config.trackPadding);
this.overview.appendChild(c);this.updateOverviewHeight();return c},trimVertical:function(a){void 0===a&&(a=this.getY());for(var b,c=this.topSpace,d=a+this.getHeight(),e=0;e<this.tracks.length;e++)this.tracks[e].shown&&(b=c+this.trackHeights[e],b>a&&c<d||this.tracks[e].hideAll(),c=b+this.config.trackPadding)},redrawTracks:function(){this.trackIterate(function(a){a.hideAll()});this.showVisibleBlocks(!1)},hideRegion:function(a){this.overviewTrackIterate(function(b){b.hideRegion(a)});this.trackIterate(function(b){b.hideRegion(a)})},
redrawRegion:function(a){this.hideRegion(a);this.showVisibleBlocks(!1)},zoomIn:function(a,b,c){if(!this.animation&&(this._unsetPosBeforeZoom(),void 0===b&&(b=0.5),void 0===c&&(c=1),c=Math.min(c,this.zoomLevels.length-1-this.curZoom),!(0==c&&this.pxPerBp==this.zoomLevels[this.curZoom]))){this.showWait();var d=this.getPosition();this.trimVertical(d.y);var a=this.zoomLevels[this.curZoom+c]/this.pxPerBp,e=this.pxToBp(d.x+this.offset+b*this.getWidth());this.curZoom+=c;this.pxPerBp=this.zoomLevels[this.curZoom];
this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();for(c=0;c<this.tracks.length;c++)this.tracks[c].startZoom(this.pxPerBp,e-b*this.getWidth()/this.pxPerBp,e+(1-b)*this.getWidth()/this.pxPerBp);new o(a,this,function(){this.zoomUpdate(b,e)},700,b)}},zoomToBaseLevel:function(a,b){if(!this.animation){var c=this.zoomLevels.length-1;if(this.curZoom!==c){this._setPosBeforeZoom(this.minVisible(),this.maxVisible(),this.curZoom);this.showWait();this.trimVertical();var d=this.zoomLevels[c]/this.pxPerBp;
this.curZoom=c;this.pxPerBp=this.zoomLevels[c];this.maxLeft=this.pxPerBp*this.ref.end-this.getWidth();for(c=0;c<this.tracks.length;c++)this.tracks[c].startZoom(this.pxPerBp,b-0.5*this.getWidth()/this.pxPerBp,b+0.5*this.getWidth()/this.pxPerBp);new o(d,this,function(){this.zoomUpdate(0.5,b)},700,0.5)}}},zoomOut:function(a,b,c){if(!this.animation&&(this._unsetPosBeforeZoom(),void 0===c&&(c=1),c=Math.min(c,this.curZoom),0!=c)){this.showWait();var d=this.getPosition();this.trimVertical(d.y);void 0===
b&&(b=0.5);var a=this.zoomLevels[this.curZoom-c]/this.pxPerBp,e=this.bpToPx(this.ref.end)-(this.offset+d.x+this.getWidth()),b=Math.max(b,1-e*a/(1-a)/this.getWidth()),e=d.x+this.offset-this.bpToPx(this.ref.start),b=Math.min(b,e*a/(1-a)/this.getWidth()),f=this.pxToBp(d.x+this.offset+b*this.getWidth());this.curZoom-=c;this.pxPerBp=this.zoomLevels[this.curZoom];for(c=0;c<this.tracks.length;c++)this.tracks[c].startZoom(this.pxPerBp,f-b*this.getWidth()/this.pxPerBp,f+(1-b)*this.getWidth()/this.pxPerBp);
this.minLeft=this.pxPerBp*this.ref.start;new o(a,this,function(){this.zoomUpdate(b,f)},700,b)}},zoomBackOut:function(){if(!this.animation&&this.isZoomedToBase()){var a=this.posBeforeZoom.min,b=this.posBeforeZoom.max,c=this.posBeforeZoom.zoomIndex;this.posBeforeZoom=void 0;this.showWait();var d=this.zoomLevels[c]/this.pxPerBp,e=(a+b)/2;this.curZoom=c;this.pxPerBp=this.zoomLevels[c];for(c=0;c<this.tracks.length;c++)this.tracks[c].startZoom(this.pxPerBp,e-0.5*this.getWidth()/this.pxPerBp,e+0.5*this.getWidth()/
this.pxPerBp);this.minLeft=this.pxPerBp*this.ref.start;var f=this;new o(d,this,function(){f.setLocation(f.ref,a,b);f.zoomUpdate(0.5,e)},700,0.5)}},isZoomedToBase:function(){return void 0!==this.posBeforeZoom},_setPosBeforeZoom:function(a,b,c){this.posBeforeZoom={min:a,max:b,zoomIndex:c}},_unsetPosBeforeZoom:function(){this.posBeforeZoom=void 0},zoomUpdate:function(a,b){var c=this.elem.clientWidth,d=this.bpToPx(b)-a*c+c/2;this.stripeWidth=this.stripeWidthForZoom(this.curZoom);this.scrollContainer.style.width=
this.stripeCount*this.stripeWidth+"px";this.zoomContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.offset=(Math.round(d/this.stripeWidth)-this.stripeCount/2|0)*this.stripeWidth;this.maxOffset=this.bpToPx(this.ref.end+1)-this.stripeCount*this.stripeWidth;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();this.minLeft=this.bpToPx(this.ref.start);this.zoomContainer.style.left="0px";this.setX(d-this.offset-c/2);dojo.forEach(this.uiTracks,function(a){a.clear()});this.trackIterate(function(a){a.endZoom(this.pxPerBp,
Math.round(this.stripeWidth/this.pxPerBp))});this.showVisibleBlocks(!0);this.showDone();this.showCoarse()},scrollUpdate:function(){var a=this.getX(),b=this.stripeCount*this.stripeWidth,c=this.getWidth(),d=(b/2-(c/2+a))/this.stripeWidth|0;if(0!=d&&(Math.abs(d),b=this.offset-d*this.stripeWidth,this.offset!=b))this.offset=b,this.trackIterate(function(a){a.moveBlocks(d)}),a+=d*this.stripeWidth,this.updateStaticElements({x:a}),this.rawSetX(a)},trackHeightUpdate:function(a,b){var c=this.getY();if(a in this.trackIndices){var d=
this.trackIndices[a];if(!(1>Math.abs(b-this.trackHeights[d])))this.trackTops[d]+this.trackHeights[d]-c<this.getHeight()/2&&0<c&&this.setY(c+(b-this.trackHeights[d])),this.trackHeights[d]=b,this.tracks[d].div.style.height=b+this.config.trackPadding+"px",this.layoutTracks(),this.setY(this.getY()),this.updateStaticElements({height:this.getHeight()})}},showVisibleBlocks:function(a,b,c,d){void 0===b&&(b=this.getPosition());void 0===c&&(c=b.x-this.drawMargin*this.getWidth());void 0===d&&(d=b.x+(1+this.drawMargin)*
this.getWidth());var e=Math.max(0,c/this.stripeWidth|0),f=Math.min(this.stripeCount-1,d/this.stripeWidth|0),g=Math.round(this.stripeWidth/this.pxPerBp),k=Math.round(this.pxToBp(e*this.stripeWidth+this.offset)),k=k-1,i=Math.round(this.pxToBp(this.offset)),l=Math.round(this.pxToBp(this.offset+this.stripeCount*this.stripeWidth));this.overviewTrackIterate(function(a,b){a.showRange(0,b.overviewStripes-1,b.ref.start-1,b.overviewStripeBases,b.overviewBox.w/(b.ref.end-b.ref.start))});this.trackIterate(function(a,
b){a.showRange(e,f,k,g,b.pxPerBp,i,l)});this.updateStaticElements({height:this.getHeight(),width:this.getWidth(),x:this.getX(),y:this.getY()});this.browser.publish("/jbrowse/v1/n/tracks/redraw")},showTracks:function(a){a=dojo.filter(a,function(a){return 0==this._getTracks([a.label]).length},this);if(a.length){this.trackDndWidget.insertNodes(!1,a);this.updateTrackList();var b=this;window.setTimeout(function(){b.setY(Infinity)},300)}},replaceTracks:function(a){j.forEach(a,function(a){var b,c;j.forEach(this.trackDndWidget.parent.children,
function(d){if(!c){var e=d.track;e&&e.config.label==a.label?(c=1,this.trackDndWidget.delItem(d.id),d&&d.parentNode&&d.parentNode.removeChild(d)):b=d}},this);this.updateTrackList();this.trackDndWidget.insertNodes(!1,[a],!1,b)},this);a.length&&this.updateTrackList()},hideTracks:function(a){a=dojo.filter(a,function(a){return 0!=this._getTracks([a.label]).length},this);a.length&&(dojo.forEach(a,function(a){this.trackDndWidget.forInItems(function(b,c){if(a.label===b.data.label){this.trackDndWidget.delItem(c);
var d=dojo.byId(c);d&&d.parentNode&&d.parentNode.removeChild(d)}},this)},this),this.updateTrackList())},pinTracks:function(a){a=this._getTracks(a);j.forEach(a,function(a){a.setPinned(!0)});this.updateTrackList();return j.map(a,function(a){return a.name})},unpinTracks:function(a){a=this._getTracks(a);j.forEach(a,function(a){a.setPinned(!1)});this.updateTrackList();return j.map(a,function(a){return a.name})},_getTracks:function(a){var b=[],c={count:a.length};dojo.forEach(a,function(a){c[a]=1});dojo.some(this.tracks,
function(a){c[a.name]&&(b.push(a),c.count--);return!c.count},this);return b},renderTrack:function(a){if(!a)return null;var b;if(dojo.some(this.tracks,function(c){return c.name==a.label?(b=c,!0):!1}))return b.div;var c=a.label,d=dojo.create("div",{className:["track",("track_"+a.type).replace(/[^A-Za-z_0-9]/g,"_").toLowerCase(),("track_"+c).replace(/[^A-Za-z_0-9]/g,"_").toLowerCase()].join(" "),id:"track_"+c});d.trackName=c;var e,f,g=dojo.hitch(this,function(){var b=new e({refSeq:this.ref,config:a,
changeCallback:dojo.hitch(this,"showVisibleBlocks",!0),trackPadding:this.config.trackPadding,store:f,browser:this.browser});"function"==typeof f.setTrack&&f.setTrack(b);d.track=b;var g=dojo.hitch(this,"trackHeightUpdate",c);b.setViewInfo(this,g,this.stripeCount,d,this.stripePercent,this.stripeWidth,this.pxPerBp,this.config.trackPadding);b.updateStaticElements({x:this.getX(),y:this.getY(),height:this.getHeight(),width:this.getWidth()});this.updateTrackList()});a.store||console.warn("configuration for track "+
a.label+" has no store set",a);this.browser.getStore(a.store,function(a){f=a;e&&f&&g()});require([a.type],function(a){(e=a)&&f&&g()});return d},trackIterate:function(a){var b;for(b=0;b<this.uiTracks.length;b++)a.call(this,this.uiTracks[b],this);for(b=0;b<this.tracks.length;b++)a.call(this,this.tracks[b],this)},updateTrackList:function(){var a=[],b=dojo.toJson(this.trackIndices||{}),c=this.trackContainer.firstChild;do c.track&&a.push(c.track);while(c=c.nextSibling);a=j.map(a,function(a,b){return[a,
b]});a=a.sort(function(a,b){var c=a[0].isPinned()?1:0;return(b[0].isPinned()?1:0)-c||a[1]-b[1]});a=j.map(a,function(a){return a[0]});if(a[0]&&a[0].isPinned()){if(!this.pinUnderlay)this.pinUnderlay=g.create("div",{className:"pin_underlay",style:"top: "+this.topSpace},this.trackContainer);if(!this.pinGridlinesTrack)c=g.create("div",{className:"track",style:"top: 0px; height: 100%"},this.pinUnderlay),this.pinGridlinesTrack=new n({browser:this.browser,refSeq:this.ref}),this.pinGridlinesTrack.setViewInfo(this,
function(){},this.stripeCount,c,this.stripePercent,this.stripeWidth,this.pxPerBp,this.config.trackPadding),this.uiTracks.push(this.pinGridlinesTrack)}else if(this.pinUnderlay)g.destroy(this.pinUnderlay),delete this.pinUnderlay,this.uiTracks=j.filter(this.uiTracks,function(a){return a!==this.pinGridlinesTrack},this),delete this.pinGridlinesTrack;c=this.tracks;this.tracks=a;for(var d={},e=Array(this.tracks.length),f=0;f<a.length;f++)d[a[f].name]=f,e[f]=a[f].name in this.trackIndices?this.trackHeights[this.trackIndices[a[f].name]]:
0,this.trackIndices[a[f].name]=f;this.trackIndices=d;this.trackHeights=e;j.forEach(c||[],function(a){a.name in d||(i.removeAttribute(a.div,"track"),a.destroy())},this);this.layoutTracks();this.updateScroll();if(b!=dojo.toJson(this.trackIndices||{}))this.browser.publish("/jbrowse/v1/n/tracks/visibleChanged",[this.visibleTrackNames()]),this.showVisibleBlocks()},layoutTracks:function(){var a=this.topSpace,b=0,c=0,d=!1;j.forEach(this.tracks,function(e,f){b=this.trackTops[f]=a;e.isPinned()?(e.div.style.top=
a+"px",d=!0):(e.div.style.top=a-this.y+(d?15:0)+"px",d=!1);e.shown&&(a+=this.trackHeights[f]+this.config.trackPadding,e.isPinned()&&(c=a))},this);if(c&&this.pinUnderlay)this.pinUnderlay.style.height=c+"px";this.containerHeight=Math.max(a||0,Math.min(this.getY(),b)+this.getHeight());this.scrollContainer.style.height=this.containerHeight+"px"}})})},"dojo/dnd/move":function(){define("../_base/declare,../dom-geometry,../dom-style,./common,./Mover,./Moveable".split(","),function(h,j,g,i,f,e){i=h("dojo.dnd.move.constrainedMoveable",
e,{constraints:function(){},within:!1,constructor:function(d,c){c||(c={});this.constraints=c.constraints;this.within=c.within},onFirstMove:function(d){var c=this.constraintBox=this.constraints.call(this,d);c.r=c.l+c.w;c.b=c.t+c.h;this.within&&(d=j.getMarginSize(d.node),c.r-=d.w,c.b-=d.h)},onMove:function(d,c){var b=this.constraintBox,a=d.node.style;this.onMoving(d,c);c.l=c.l<b.l?b.l:b.r<c.l?b.r:c.l;c.t=c.t<b.t?b.t:b.b<c.t?b.b:c.t;a.left=c.l+"px";a.top=c.t+"px";this.onMoved(d,c)}});f=h("dojo.dnd.move.boxConstrainedMoveable",
i,{box:{},constructor:function(d,c){var b=c&&c.box;this.constraints=function(){return b}}});h=h("dojo.dnd.move.parentConstrainedMoveable",i,{area:"content",constructor:function(d,c){var b=c&&c.area;this.constraints=function(){var a=this.node.parentNode,c=g.getComputedStyle(a),d=j.getMarginBox(a,c);if("margin"==b)return d;var e=j.getMarginExtents(a,c);d.l+=e.l;d.t+=e.t;d.w-=e.w;d.h-=e.h;if("border"==b)return d;e=j.getBorderExtents(a,c);d.l+=e.l;d.t+=e.t;d.w-=e.w;d.h-=e.h;if("padding"==b)return d;e=
j.getPadExtents(a,c);d.l+=e.l;d.t+=e.t;d.w-=e.w;d.h-=e.h;return d}}});return{constrainedMoveable:i,boxConstrainedMoveable:f,parentConstrainedMoveable:h}})},"dojo/dnd/Source":function(){define("../_base/array,../_base/connect,../_base/declare,../_base/kernel,../_base/lang,../dom-class,../dom-geometry,../mouse,../ready,../topic,./common,./Selector,./Manager".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q){i.isAsync||b(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var o=g("dojo.dnd.Source",
n,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(b,c){f.mixin(this,f.mixin({},c));var d=this.accept;if(d.length){this.accept={};for(var g=0;g<d.length;++g)this.accept[d[g]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&e.add(this.node,"dojoDndSource");this.targetState="";this.accept&&
e.add(this.node,"dojoDndTarget");this.horizontal&&e.add(this.node,"dojoDndHorizontal");this.topics=[a.subscribe("/dnd/source/over",f.hitch(this,"onDndSourceOver")),a.subscribe("/dnd/start",f.hitch(this,"onDndStart")),a.subscribe("/dnd/drop",f.hitch(this,"onDndDrop")),a.subscribe("/dnd/cancel",f.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=
!0;break}if(!e)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==q.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){o.superclass.destroy.call(this);h.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!(this.isDragging&&"Disabled"==this.targetState)){o.superclass.onMouseMove.call(this,a);var b=q.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&
(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();c.length&&b.startDrag(this,c,this.copyState(k.getCopyKeyState(a),!0))}if(this.isDragging){c=!1;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=d.position(this.current,!0);c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==d.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||
c!=this.before)this._markTargetAnchor(c),b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||!k.isFormElement(a)))this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,o.superclass.onMouseDown.call(this,a)},onMouseUp:function(a){if(this.mouseDown)this.mouseDown=!1,o.superclass.onMouseUp.call(this,a)},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):
this.isDragging&&(a=q.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");this._changeState("Target",this.accept&&this.checkAcceptance(a,b)?"":"Disabled");this==a&&q.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor)this._unmarkTargetAnchor(),
this.targetAnchor=null;this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var d=this._normalizedCreator;this._normalizedCreator=this.creator?function(b,c){return d.call(this,a.getItem(b.id).data,c)}:c?function(b){var c=a.getItem(b.id),b=b.cloneNode(!0);b.id=k.getUniqueId();return{node:b,data:c.data,type:c.type}}:function(b){var c=
a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();!c&&!this.creator&&a.selectNone();this.insertNodes(!0,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,b){var c=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(a,b){return c.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id),a=a.cloneNode(!0);
a.id=k.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){o.superclass.onOverEvent.call(this);q.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},
onOutEvent:function(){o.superclass.onOutEvent.call(this);q.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(!(this.current==this.targetAnchor&&this.before==a))this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!c.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(e.contains(a,"dojoDndHandle"))return!0;if(e.contains(a,"dojoDndItem")||e.contains(a,"dojoDndIgnore"))break}return!1}});return o})},"dojo/dnd/Selector":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../dom,../dom-construct,../mouse,../_base/NodeList,../on,../touch,./common,./Container".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q){var o=j("dojo.dnd.Selector",q,{constructor:function(b,c){c||(c={});this.singular=c.singular;this.autoSync=c.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(a(this.node,k.press,f.hitch(this,"onMouseDown")),a(this.node,k.release,f.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new b,c=n._empty,d;for(d in this.selection)d in c||a.push(e.byId(d));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(a,b){this._addItemClass(e.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=n._empty,b;for(b in this.selection)if(!(b in a)){var c=e.byId(b);this.delItem(b);d.destroy(c)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){var b=b||i.global,c=this.selection,d=n._empty,e;for(e in c)e in d||a.call(b,this.getItem(e),e,this)},sync:function(){o.superclass.sync.call(this);
if(this.anchor&&!this.getItem(this.anchor.id))this.anchor=null;var a=[],b=n._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);h.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,d){var e=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=e.call(this,b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),
this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,"Selected"),this._removeItemClass(d.node,"Anchor"));return d};o.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=e;return this},destroy:function(){o.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!n.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=
!0,c.isLeft(a)&&g.stop(a);else{if(!this.singular&&a.shiftKey){n.getCopyKeyState(a)||this._removeSelection();var b=this.getAllNodes();if(b.length){if(!this.anchor)this.anchor=b[0],this._addItemClass(this.anchor,"Anchor");this.selection[this.anchor.id]=1;if(this.anchor!=this.current){for(var d=0,e;d<b.length&&!(e=b[d],e==this.anchor||e==this.current);++d);for(++d;d<b.length;++d){e=b[d];if(e==this.anchor||e==this.current)break;this._addItemClass(e,"Selected");this.selection[e.id]=1}this._addItemClass(this.current,
"Selected");this.selection[this.current.id]=1}}}else if(this.singular)this.anchor==this.current?n.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1);else if(n.getCopyKeyState(a))this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&
(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);else if(!(this.current.id in this.selection))this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1;g.stop(a)}},onMouseUp:function(){if(this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current))this.anchor=this.current,this._addItemClass(this.anchor,
"Anchor"),this.selection[this.current.id]=1},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=a(this.node,k.move,f.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=n._empty,b;for(b in this.selection)if(!(b in a)){var c=e.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor)this._removeItemClass(this.anchor,
"Anchor"),this.anchor=null;return this}});return o})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(h,j,g){var j=j.NodeList,i=j.prototype;i.connect=j._adaptAsForEach(function(){return h.connect.apply(this,arguments)});i.coords=j._adaptAsMap(h.coords);j.events="blur,focus,change,click,error,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,submit".split(",");g.forEach(j.events,function(f){var e=
"on"+f;i[e]=function(d,c){return this.connect(e,d,c)}});return h.NodeList=j})},"dojo/dnd/Container":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../_base/window,../dom,../dom-class,../dom-construct,../Evented,../has,../on,../query,../ready,../touch,./common".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m){j=j("dojo.dnd.Container",a,{skipForm:!1,allowNested:!1,constructor:function(a,b){this.node=d.byId(a);b||(b={});this.creator=b.creator||null;
this.skipForm=b.skipForm;this.parent=b.dropParent&&d.byId(b.dropParent);this.map={};this.current=null;this.containerState="";c.add(this.node,"dojoDndContainer");(!b||!b._skipStartup)&&this.startup();this.events=[n(this.node,l.over,f.hitch(this,"onMouseOver")),n(this.node,l.out,f.hitch(this,"onMouseOut")),n(this.node,"dragstart",f.hitch(this,"onSelectStart")),n(this.node,"selectstart",f.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=
b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){var b=b||i.global,c=this.map,d=m._empty,e;for(e in c)e in d||a.call(b,c[e],e,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return q((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=m.getUniqueId();var c=b.getAttribute("dndType"),d=b.getAttribute("dndData");a[b.id]={data:d||
b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){if(this.parent.firstChild)if(b){if(!c)c=this.parent.firstChild}else{if(c)c=c.nextSibling}else c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);
return this},destroy:function(){h.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");if(a&&a.length)this.parent=a[0]}this.defaultCreator=m._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&
!(b==this.node);)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);if(this.current!=b)this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}if(this.current)this._removeItemClass(this.current,"Over"),this.current=null;this._changeState("Container","");this.onOutEvent()},
onSelectStart:function(a){(!this.skipForm||!m.isFormElement(a))&&g.stop(a)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var d="dojoDnd"+a,e=a.toLowerCase()+"State";c.replace(this.node,d+b,d+this[e]);this[e]=b},_addItemClass:function(a,b){c.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){c.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&c.contains(a,"dojoDndItem"))return a;
return null},_normalizedCreator:function(a,b){var d=(this.creator||this.defaultCreator).call(this,a,b);if(!f.isArray(d.type))d.type=["text"];if(!d.node.id)d.node.id=m.getUniqueId();c.add(d.node,"dojoDndItem");return d}});m._createNode=function(a){return!a?m._createSpan:function(c){return b.create(a,{innerHTML:c})}};m._createTrTd=function(a){var c=b.create("tr");b.create("td",{innerHTML:a},c);return c};m._createSpan=function(a){return b.create("span",{innerHTML:a})};m._defaultCreatorNodes={ul:"li",
ol:"li",div:"div",p:"div"};m._defaultCreator=function(a){var a=a.tagName.toLowerCase(),b="tbody"==a||"thead"==a?m._createTrTd:m._createNode(m._defaultCreatorNodes[a]);return function(a,c){var d=a&&f.isObject(a),e,g;d&&a.tagName&&a.nodeType&&a.getAttribute?(e=a.getAttribute("dndData")||a.innerHTML,d=(d=a.getAttribute("dndType"))?d.split(/\s*,\s*/):["text"],g=a):(e=d&&a.data?a.data:a,d=d&&a.type?a.type:["text"],g=("avatar"==c?m._createSpan:b)(""+e));if(!g.id)g.id=m.getUniqueId();return{node:g,data:e,
type:d}}};return j})},"dojo/dnd/Manager":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../_base/window,../dom-class,../Evented,../has,../keys,../on,../topic,../touch,./common,./autoscroll,./Avatar".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l){var m=j("dojo.dnd.Manager",[d],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:c("touch")?0:16,OFFSET_Y:c("touch")?-64:16,overSource:function(a){if(this.avatar)this.target=
a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update();k.publish("/dnd/source/over",a)},outSource:function(a){if(this.avatar){if(this.target==a)this.target=null,this.canDropFlag=!1,this.avatar.update(),k.publish("/dnd/source/over",null)}else k.publish("/dnd/source/over",null)},startDrag:function(b,c,d){o.autoScrollStart(f.doc);this.source=b;this.nodes=c;this.copy=Boolean(d);this.avatar=this.makeAvatar();f.body().appendChild(this.avatar.node);k.publish("/dnd/start",
b,c,this.copy);this.events=[a(f.doc,n.move,i.hitch(this,"onMouseMove")),a(f.doc,n.release,i.hitch(this,"onMouseUp")),a(f.doc,"keydown",i.hitch(this,"onKeyDown")),a(f.doc,"keyup",i.hitch(this,"onKeyUp")),a(f.doc,"dragstart",g.stop),a(f.body(),"selectstart",g.stop)];e.add(f.body(),"dojoDnd"+(d?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);if(this.canDropFlag!=a)this.canDropFlag=a,this.avatar.update()},stopDrag:function(){e.remove(f.body(),["dojoDndCopy","dojoDndMove"]);h.forEach(this.events,
function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new l(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;if(b)o.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=Boolean(this.source.copyState(q.getCopyKeyState(a))),this.copy!=b&&this._setCopyStatus(b);c("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&
this.canDropFlag){var b=Boolean(this.source.copyState(q.getCopyKeyState(a)));k.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);k.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else k.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case b.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case b.ESCAPE:k.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==
b.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();e.replace(f.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});q._manager=null;m.manager=q.manager=function(){if(!q._manager)q._manager=new m;return q._manager};return m})},"dojo/dnd/Avatar":function(){define("../_base/declare,../_base/window,../dom,../dom-attr,../dom-class,../dom-construct,../hccss,../query".split(","),
function(h,j,g,i,f,e,d,c){return h("dojo.dnd.Avatar",null,{constructor:function(b){this.manager=b;this.construct()},construct:function(){var b=e.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),a=this.manager.source,c,f=e.create("tbody",null,b),g=e.create("tr",null,f),h=e.create("td",null,g),l=Math.min(5,this.manager.nodes.length),j=0;d("highcontrast")&&e.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},h);e.create("span",{innerHTML:a.generateText?
this._generateText():""},h);for(i.set(g,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});j<l;++j)a.creator?c=a._normalizedCreator(a.getItem(this.manager.nodes[j].id).data,"avatar").node:(c=this.manager.nodes[j].cloneNode(!0),"tr"==c.tagName.toLowerCase()&&(g=e.create("table"),e.create("tbody",null,g).appendChild(c),c=g)),c.id="",g=e.create("tr",null,f),h=e.create("td",null,g),h.appendChild(c),i.set(g,{"class":"dojoDndAvatarItem",style:{opacity:(9-j)/10}});this.node=b},destroy:function(){e.destroy(this.node);
this.node=!1},update:function(){f.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(d("highcontrast")){var b=g.byId("a11yIcon"),a="+";this.manager.canDropFlag&&!this.manager.copy?a="< ":!this.manager.canDropFlag&&!this.manager.copy?a="o":this.manager.canDropFlag||(a="x");b.innerHTML=a}c("tr.dojoDndAvatarHeader td span"+(d("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"JBrowse/Component":function(){define(["dojo/_base/declare","dojo/_base/lang","JBrowse/Util"],function(h,j,g){return h(null,{constructor:function(g){g=g||{};this._finalizeConfig(g.config);this.browser=g.browser;if(!this.browser)throw"a reference to the main browser is required by this constructor";this.compiledConfig={}},_finalizeConfig:function(g){this.config=this._mergeConfigs(dojo.clone(this._defaultConfig()),g||{})},_defaultConfig:function(){return{baseUrl:"/"}},resolveUrl:function(i,f){f=f||
{};return g.resolveUrl(this.getConf("baseUrl",[]),this.fillTemplate(i,f))},_mergeConfigs:function(g,f){if(null===f)return null;null===g&&(g={});for(var e in f)if(e in g&&"object"==typeof f[e]&&"object"==typeof g[e])g[e]=this._mergeConfigs(g[e],f[e]);else if("undefined"==typeof g[e]||"undefined"!=typeof f[e])g[e]=f[e];return g},_compileConfigurationPath:function(g){var f=this.config;for("string"==typeof g&&(g=g.split("."));g.length&&f;)f=f[g.shift()];return g.length?function(){return null}:"function"==
typeof f?f:function(){return f}},getConf:function(g,f){var e=this.compiledConfig[g];e||(e=this.compiledConfig[g]=this._compileConfigurationPath(g));return f?e.apply(this,f):e.call(this)},fillTemplate:function(i,f){if("string"!=typeof i||-1==i.indexOf("{"))return i;var e={refseq:(this.refSeq||{}).name||(this.ref||{}).name||this.ref||""};e.refSeq=e.refseq;if(e.refSeq)e.refSeqNum=(/\d+/.exec(e.refSeq)||[])[0]||"";if(e.refSeqNum)e.refSeqNumNoLeadingZeroes=(/^0*(\d+)/.exec(e.refSeqNum)||[])[1]||"";f&&
j.mixin(e,f);return g.fillTemplate(i,e)}})})},"JBrowse/View/Track/LocationScale":function(){define(["dojo/_base/declare","dojo/dom-construct","JBrowse/View/Track/BlockBased","JBrowse/Util"],function(h,j,g,i){return h(g,{constructor:function(f){this.loaded=!0;this.labelClass=f.labelClass;this.posHeight=f.posHeight;this.height=Math.round(1.2*f.posHeight)},makeTrackLabel:function(){},makeTrackMenu:function(){},fillBlock:function(f){var e=f.blockIndex,d=f.block,c=f.leftBase,b=f.scale,a=this.chooseLabel(f),
c=(c+1-a)*b/10,b=document.createElement("div"),a=i.addCommas(a);b.className=this.labelClass;b.style.left="-"+Number(a.length)/1.7+c+"ex";b.appendChild(document.createTextNode(a));d.domNode.appendChild(b);(d=this.browser.getHighlight())&&d.ref==this.refSeq.name&&this.renderRegionHighlight(f,d);this.heightUpdate(Math.round(1.2*this.posHeight),e);f.finishCallback()},chooseLabel:function(f){for(var e=f.leftBase+1,f=f.scale,d=1E6;0<d;d/=10)if(3>=e%d*f)return e-e%d;return e}})})},"JBrowse/View/Track/BlockBased":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/json,dojo/aspect,dojo/dom-construct,dojo/dom-geometry,dojo/dom-class,dojo/dom-style,dojo/query,dojo/on,dojo/when,dijit/Destroyable,JBrowse/View/InfoDialog,dijit/Dialog,dijit/Menu,dijit/PopupMenuItem,dijit/MenuItem,dijit/CheckedMenuItem,dijit/MenuSeparator,JBrowse/Util,JBrowse/Component,JBrowse/FeatureFiltererMixin,JBrowse/Errors,JBrowse/View/TrackConfigEditor,JBrowse/View/ConfirmDialog,JBrowse/View/Track/BlockBased/Block,JBrowse/View/DetailsMixin".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r,p,u,s,t,v,w,x,E,A,y,D){return h([v,D,w,q],{constructor:function(a){a=a||{};this.refSeq=a.refSeq;this.name=a.label||this.config.label;this.key=a.key||this.config.key||this.name;this._changedCallback=a.changeCallback||function(){};this.height=0;this.shown=!0;this.empty=!1;this.browser=a.browser;this.setFeatureFilterParentComponent(this.browser.view);this.store=a.store;j.mixin(this.config.style,this.getUserStyles())},updateUserStyles:function(a){j.mixin(this.config.style,
a);var b=i.parse(this.browser.cookie("track-style-"+this.name)||"{}");j.mixin(b,a);this.browser.cookie("track-style-"+this.name,b);this.redraw()},getUserStyles:function(){return i.parse(this.browser.cookie("track-style-"+this.name)||"{}")},_defaultConfig:function(){return{maxFeatureSizeForUnderlyingRefSeq:25E4}},heightUpdate:function(b,c){this.shown?(void 0!==c&&(this.blockHeights[c]=b),this.height=Math.max(this.height,b),this.inShowRange||(this.heightUpdateCallback(Math.max(this.labelHeight,this.height)),
a(".height_overflow_message",this.div).style("top",this.height-16+"px"))):this.heightUpdateCallback(0)},setViewInfo:function(a,b,c,d,e,f){this.genomeView=a;this.heightUpdateCallback=b;this.div=d;this.widthPct=e;this.widthPx=f;this.leftBlank=document.createElement("div");this.leftBlank.className="blank-block";this.rightBlank=document.createElement("div");this.rightBlank.className="blank-block";this.div.appendChild(this.rightBlank);this.div.appendChild(this.leftBlank);this.sizeInit(c,e);this.labelHTML=
"";this.labelHeight=0;this.config.pinned&&this.setPinned(!0);this.label||this.makeTrackLabel();this.setLabel(this.key)},makeTrackLabel:function(){var a=dojo.create("div",{className:"track-label dojoDndHandle",id:"label_"+this.name,style:{position:"absolute"}},this.div);this.label=a;if((this.config.style||{}).trackLabelCss)a.style.cssText+=";"+this.config.style.trackLabelCss;var b=dojo.create("div",{className:"track-close-button"},a);this.own(k(b,"click",dojo.hitch(this,function(a){this.browser.view.suppressDoubleClick(100);
this.browser.publish("/jbrowse/v1/v/tracks/hide",[this.config]);a.stopPropagation()})));dojo.create("span",{className:"track-label-text"},a);a=dojo.create("div",{className:"track-menu-button"},a);dojo.create("div",{},a);this.labelMenuButton=a;this.makeTrackMenu()},hide:function(){if(this.shown)this.div.style.display="none",this.shown=!1},show:function(){if(!this.shown)this.div.style.display="block",this.shown=!0},initBlocks:function(){this.blocks=Array(this.numBlocks);this.blockHeights=Array(this.numBlocks);
for(var a=0;a<this.numBlocks;a++)this.blockHeights[a]=0;this.lastAttached=this.firstAttached=null;this._adjustBlanks()},clear:function(){if(this.blocks)for(var a=0;a<this.numBlocks;a++)this._hideBlock(a);this.initBlocks();this.makeTrackMenu()},setLabel:function(b){if(!(void 0===this.label||this.labelHTML==b))this.labelHTML=b,a(".track-label-text",this.label).forEach(function(a){a.innerHTML=b}),this.labelHeight=this.label.offsetHeight},transfer:function(){},startZoom:function(){},endZoom:function(){},
showRange:function(a,b,c,d,e,f,g){if(this.fatalError)this.showFatalError(this.fatalError);else if(void 0!==this.blocks&&this.blocks.length){if(0==this.labelHeight&&this.label)this.labelHeight=this.label.offsetHeight;this.inShowRange=!0;this.height=this.labelHeight;var k=null==this.firstAttached?b+1:this.firstAttached,i=null==this.lastAttached?a-1:this.lastAttached,h,l;for(h=i;h>=a;h--)l=c+d*(h-a),this._showBlock(h,l,l+d,e,f,g);for(h=i+1;h<=b;h++)l=c+d*(h-a),this._showBlock(h,l,l+d,e,f,g);c=this.blocks[a];
for(h=k;h<a;h++)this.transfer(this.blocks[h],c,e,f,g),this.cleanupBlock(this.blocks[h]),this._hideBlock(h);c=this.blocks[b];for(h=i;h>b;h--)this.transfer(this.blocks[h],c,e,f,g),this.cleanupBlock(this.blocks[h]),this._hideBlock(h);this.firstAttached=a;this.lastAttached=b;this._adjustBlanks();this.inShowRange=!1;this.heightUpdate(this.height);this.updateStaticElements(this.genomeView.getPosition())}},cleanupBlock:function(a){a&&a.destroy()},destroy:function(){g.forEach(this.blocks||[],function(a){this.cleanupBlock(a)},
this);delete this.blocks;delete this.div;this.inherited(arguments)},_hideBlock:function(a){this.blocks[a]&&(this.div.removeChild(this.blocks[a].domNode),this.cleanupBlock(this.blocks[a]),this.blocks[a]=void 0,this.blockHeights[a]=0)},_adjustBlanks:function(){null===this.firstAttached||null===this.lastAttached?(this.leftBlank.style.left="0px",this.leftBlank.style.width="50%",this.rightBlank.style.left="50%",this.rightBlank.style.width="50%"):(this.leftBlank.style.width=this.firstAttached*this.widthPct+
"%",this.rightBlank.style.left=(this.lastAttached+1)*this.widthPct+"%",this.rightBlank.style.width=(this.numBlocks-this.lastAttached-1)*this.widthPct+"%")},hideAll:function(){if(null!=this.firstAttached){for(var a=this.firstAttached;a<=this.lastAttached;a++)this._hideBlock(a);this.lastAttached=this.firstAttached=null;this._adjustBlanks()}},hideRegion:function(a){if(null!=this.firstAttached){for(var b=this.firstAttached;b<=this.lastAttached;b++)this.blocks[b]&&a.ref==this.refSeq.name&&!(this.blocks[b].leftBase>
a.end||this.blocks[b].rightBase<a.start)&&this._hideBlock(b);this._adjustBlanks()}},changed:function(){this.hideAll();this._changedCallback&&this._changedCallback()},_makeLoadingMessage:function(){var a=dojo.create("div",{className:"loading",innerHTML:'<div class="text">Loading</span>',title:"Loading data...",style:{visibility:"hidden"}});window.setTimeout(function(){a.style.visibility="visible"},200);return a},showFatalError:function(b){a(".block",this.div).concat(a(".blank-block",this.div)).concat(a(".error",
this.div)).orphan();this.blocks=[];this.blockHeights=[];this.fatalErrorMessageElement=this._renderErrorMessage(b||this.fatalError,this.div);this.heightUpdate(d.position(this.fatalErrorMessageElement).h);this.updateStaticElements(this.genomeView.getPosition())},_handleError:function(a,b){var c=dojo.mixin({},a);dojo.mixin(c,b);var d="object"==typeof a;d&&a instanceof x.TimeOut&&c.block?this.fillBlockTimeout(c.blockIndex,c.block,a):d&&a instanceof x.DataOverflow?c.block?this.fillTooManyFeaturesMessage(c.blockIndex,
c.block,b.scale,a):g.forEach(this.blocks,function(c,d){c&&this.fillTooManyFeaturesMessage(d,c,b.scale,a)},this):(console.error(a.stack||""+a,a),this.fatalError=a,this.showFatalError(a))},fillBlockError:function(a,b,c){c=c||this.fatalError||this.error;e.empty(b.domNode);b=this._renderErrorMessage(c,b.domNode);this.heightUpdate(dojo.position(b).h,a)},_renderErrorMessage:function(a,b){return e.create("div",{className:"error",innerHTML:'<h2>Error</h2><div class="text">An error was encountered when displaying this track.</div>'+
(a?'<div class="codecaption">Diagnostic message</div><code>'+a+"</code>":""),title:"An error occurred"},b)},fillTooManyFeaturesMessage:function(a,b,c,d){d=(d&&d.message||"Too much data to show").replace(/\.$/,"");this.fillMessage(a,b,d+(c>=this.browser.view.maxPxPerBp?"":"; zoom in to see detail")+".")},redraw:function(){this.clear();this.genomeView.showVisibleBlocks(!0)},markBlockHeightOverflow:function(a){if(!a.heightOverflowed)a.heightOverflowed=!0,c.add(a.domNode,"height_overflow"),e.create("div",
{className:"height_overflow_message",innerHTML:"Max height reached",style:{top:this.height-16+"px",height:"16px"}},a.domNode)},_showBlock:function(a,b,c,d,e,f){if(this.empty||this.fatalError)this.heightUpdate(this.labelHeight);else if(this.blocks[a])this.heightUpdate(this.blockHeights[a],a);else{var g=new y({startBase:b,endBase:c,scale:d,node:{className:"block",style:{left:a*this.widthPct+"%",width:this.widthPct+"%"}}});this.blocks[a]=g;this.div.appendChild(g.domNode);if(this.fatalError)this.fillBlockError(a,
g);else{var k=this._makeLoadingMessage();g.domNode.appendChild(k);var i=function(){g&&k.parentNode&&g.domNode.removeChild(k)},a={blockIndex:a,block:g,leftBlock:this.blocks[a-1],rightBlock:this.blocks[a+1],leftBase:b,rightBase:c,scale:d,stripeWidth:this.widthPx,containerStart:e,containerEnd:f,finishCallback:i};try{this.fillBlock(a)}catch(h){this._handleError(h,a),i()}}}},moveBlocks:function(a){var b=Array(this.numBlocks),c=Array(this.numBlocks),d;for(d=0;d<this.numBlocks;d++)c[d]=0;var e;0>this.lastAttached+
a||this.firstAttached+a>=this.numBlocks?this.lastAttached=this.firstAttached=null:(this.firstAttached=Math.max(0,Math.min(this.numBlocks-1,this.firstAttached+a)),this.lastAttached=Math.max(0,Math.min(this.numBlocks-1,this.lastAttached+a)),e=0>a?this.blocks[this.firstAttached-a]:this.blocks[this.lastAttached-a]);for(d=0;d<this.blocks.length;d++){var f=d+a;if(0>f||f>=this.numBlocks)e&&this.blocks[d]&&this.transfer(this.blocks[d],e),this._hideBlock(d);else{b[f]=this.blocks[d];if(b[f])b[f].domNode.style.left=
f*this.widthPct+"%";c[f]=this.blockHeights[d]}}this.blocks=b;this.blockHeights=c;this._adjustBlanks()},sizeInit:function(a,b,c){this.numBlocks=a;this.widthPct=b;c&&this.moveBlocks(-c);if(this.blocks&&0<this.blocks.length){for(var d=this.blocks[a-1],c=a;c<this.blocks.length;c++)d&&this.blocks[c]&&this.transfer(this.blocks[c],d),this._hideBlock(c);c=this.blocks.length;this.blocks.length=a;for(this.blockHeights.length=a;c<a;c++)this.blocks[c]=void 0,this.blockHeights[c]=0;this.lastAttached=Math.min(this.lastAttached,
a-1);if(this.firstAttached>this.lastAttached)this.lastAttached=this.firstAttached=null;if(this.blocks.length!=a)throw Error("block number mismatch: should be "+a+"; blocks.length: "+this.blocks.length);for(c=0;c<a;c++)if(this.blocks[c])this.blocks[c].domNode.style.left=c*b+"%",this.blocks[c].domNode.style.width=b+"%"}else this.initBlocks();this.makeTrackMenu()},fillMessage:function(a,c,f,g){e.empty(c.domNode);c=dojo.create("div",{className:g||"message",innerHTML:f},c.domNode);this.heightUpdate(d.getMarginBox(c,
b.getComputedStyle(c)).h,a)},updateStaticElements:function(a){this.window_info=dojo.mixin(this.window_info||{},a);if(this.fatalErrorMessageElement&&(this.fatalErrorMessageElement.style.width=0.6*this.window_info.width+"px","x"in a))this.fatalErrorMessageElement.style.left=a.x+0.2*this.window_info.width+"px";if(this.label&&"x"in a)this.label.style.left=a.x+"px"},_renderContextMenu:function(a,b,c){c||(c=new m,this.own(c));for(var d in a){var e=a[d];try{if(e.children){var f=new m;c.addChild(f);c.addChild(new r({popup:f,
label:e.label}));this._renderContextMenu(e.children,b,f)}else{var g=dojo.clone(e);if(g.action||g.url||g.href)g.onClick=this._makeClickHandler(e,b);if(g.label&&!g.onClick)g.disabled=!0;c.addChild(new ({"dijit/MenuItem":p,"dijit/CheckedMenuItem":u,"dijit/MenuSeparator":s}[e.type]||p)(g))}}catch(k){console.error("failed to render menu item: "+k)}}return c},_makeClickHandler:function(a,b){var c=this;if("function"==typeof a)a={action:a};else{if("undefined"==typeof a)return console.error("Undefined click specification, cannot make click handler"),
function(){};if("defaultDialog"==a.action)a.action="contentDialog",a.content=dojo.hitch(this,"defaultFeatureDetail")}var d=function(d){if(!c.genomeView.dragging){var e=b||this,f=c._processMenuSpec(dojo.clone(a),e),g=f.url||f.href;f.url=g;dojo.clone(f.style||{});f.action=f.action||(g?"iframeDialog":f.content?"contentDialog":!1);f.title=f.title||f.label;"string"==typeof f.action?(f.action={iframedialog:"iframeDialog",iframe:"iframeDialog",contentdialog:"contentDialog",content:"contentDialog",baredialog:"bareDialog",
bare:"bareDialog",xhrdialog:"xhrDialog",xhr:"xhrDialog",newwindow:"newWindow",_blank:"newWindow",thiswindow:"navigateTo",navigateto:"navigateTo"}[(""+f.action).toLowerCase()],"newWindow"==f.action?window.open(g,"_blank"):"navigateTo"==f.action?window.location=g:f.action in{iframeDialog:1,contentDialog:1,xhrDialog:1,bareDialog:1}&&c._openDialog(f,d,e)):"function"==typeof f.action&&f.action.call(e,d)}};if(a.label)d.label=a.label;return d},_trackDetailsContent:function(a){var b=e.create("div",{className:"detail"}),
c=j.hitch(this,"renderDetailField",b);c("Name",this.key||this.name);var d=j.clone(this.getMetadata());j.mixin(d,a);delete d.key;delete d.label;"object"==typeof d.conf&&delete d.conf;var a=[],f;for(f in d)a.push(f);g.forEach(a,function(a){c(t.ucFirst(a),d[a])});return b},getMetadata:function(){return(this.browser&&this.browser.trackMetaDataStore?this.browser.trackMetaDataStore.getItem(this.name):this.config.metadata?this.config.metadata:{})||{}},setPinned:function(a){this.config.pinned=!!a;this.config.pinned?
c.add(this.div,"pinned"):c.remove(this.div,"pinned");return this.config.pinned},isPinned:function(){return!!this.config.pinned},_trackMenuOptions:function(){var a=this;return[{label:"About this track",title:"About track: "+(this.key||this.name),iconClass:"jbrowseIconHelp",action:"contentDialog",content:dojo.hitch(this,"_trackDetailsContent")},{label:"Pin to top",type:"dijit/CheckedMenuItem",title:"make this track always visible at the top of the view",checked:a.isPinned(),onClick:function(){a.browser.publish("/jbrowse/v1/v/tracks/"+
(this.checked?"pin":"unpin"),[a.name])}},{label:"Edit config",title:"edit this track's configuration",iconClass:"dijitIconConfigure",action:function(){(new E(a.config)).show(function(b){a.browser.publish("/jbrowse/v1/v/tracks/replace",[b.conf])})}},{label:"Delete track",title:"delete this track",iconClass:"dijitIconDelete",action:function(){(new A({title:"Delete track?",message:"Really delete this track?"})).show(function(b){b&&a.browser.publish("/jbrowse/v1/v/tracks/delete",[a.config])})}}]},_processMenuSpec:function(a,
b){for(var c in a)a.hasOwnProperty(c)&&(a[c]="object"==typeof a[c]?this._processMenuSpec(a[c],b):this.template(b.feature,this._evalConf(b,a[c],c)));return a},_evalConf:function(a,b,c){var d={action:1,click:1,content:1};return"function"==typeof b&&!d[c]?b.apply(a,a.callbackArgs||[]):b},getConfForFeature:function(a,b){return this.getConf(a,[b,a,null,null,this])},isFeatureHighlighted:function(a,b){var c=this.browser.getHighlight();return c&&c.objectName&&c.objectName==b&&c.ref==this.refSeq.name&&!(a.get("start")>
c.end||a.get("end")<c.start)},_openDialog:function(a,b,c){function e(a,b){"function"==typeof b.then?b.then(function(b){a.set("content",b)}):a.set("content",b)}var c=c||{},b=a.action,b=b.replace(/Dialog/,""),g=c.feature&&(c.feature.get("name")||c.feature.get("id")),g={"class":"popup-dialog popup-dialog-"+b,title:a.title||a.label||(g?g+" details":"Details"),style:dojo.clone(a.style||{})};a.dialog&&h.safeMixin(g,a.dialog);var k;if("xhr"==b||"content"==b){if("xhr"==b)g.href=a.url;k=new o(g);c.dialog=
k;"content"==b&&e(k,this._evalConf(c,a.content,null));t.removeAttribute(c,"dialog")}else if("bare"==b)k=new l(g),c.dialog=k,e(k,this._evalConf(c,a.content,null)),t.removeAttribute(c,"dialog");else if("iframe"==b){c=function(){var a=d.position(this.browser.container);return{h:Math.round(0.8*a.h),w:Math.round(0.8*a.w)}}.call(this);k=new l(g);var i=dojo.create("iframe",{tabindex:"0",width:c.w,height:c.h,style:{border:"none"},src:a.url});k.set("content",i);dojo.create("a",{href:a.url,target:"_blank",
className:"dialog-new-window",title:"open in new window",onclick:dojo.hitch(k,"hide"),innerHTML:a.url},k.titleBar);a=function(){var a=d.position(k.containerNode),b=a.w,a=a.h-d.position(k.titleBar).h;i.width=b;i.height=a};f.after(k,"layout",a);f.after(k,"show",a)}f.after(k,"hide",function(){setTimeout(function(){k.destroyRecursive()},500)});k.show()},template:function(a,b){if("string"!=typeof b||!a)return b;if(b)return b.replace(/\{([^}]+)\}/g,function(b,c){var d=a?a.get(c.toLowerCase()):void 0;return void 0!==
d?d:""})},makeTrackMenu:function(){var a=this;n(this._trackMenuOptions()).then(function(b){if(b&&b.length&&a.label&&a.labelMenuButton)a.trackMenu&&a.trackMenu.destroyRecursive(),b=a._renderContextMenu(b,{menuButton:a.labelMenuButton,track:a,browser:a.browser,refSeq:a.refSeq}),b.startup(),b.set("leftClickToOpen",!0),b.bindDomNode(a.labelMenuButton),b.set("leftClickToOpen",!1),b.bindDomNode(a.label),a.trackMenu=b,a.own(a.trackMenu)})},fillBlockTimeout:function(a,b){e.empty(b.domNode);c.add(b.domNode,
"timed_out");this.fillMessage(a,b,"This region took too long to display, possibly because it contains too much data. Try zooming in to show a smaller region.")},renderRegionHighlight:function(a,b){if(!(b.start>a.rightBase||b.end<a.leftBase)){var c=a.rightBase-a.leftBase,d=b.start,f=b.end,g=a.leftBase-d;0<g&&(d+=g);var k=f-a.rightBase;0<k&&(f-=k);f=100*(f-d)/c;d=100*(d-a.leftBase)/c;e.create("div",{className:"global_highlight"+(0>=g?" left":"")+(0>=k?" right":""),style:{left:d+"%",width:f+"%",height:"100%"}},
a.block.domNode)}}})})},"JBrowse/View/InfoDialog":function(){define("dojo/_base/declare,dojo/_base/array,dijit/focus,JBrowse/View/Dialog/WithActionBar,dojo/on,dijit/form/Button".split(","),function(h,j,g,i,f,e){return h(i,{refocus:!1,autofocus:!1,_fillActionBar:function(d){(new e({className:"OK",label:"OK",onClick:dojo.hitch(this,"hide")})).placeAt(d)},show:function(){this.inherited(arguments);var d=this;this._extraEvents=[];var c=((dijit||{})._underlay||{}).domNode;c&&this._extraEvents.push(f(c,
"click",dojo.hitch(this,"hideIfVisible")));this._extraEvents.push(f(document.body,"keydown",function(b){0<=[dojo.keys.ESCAPE,dojo.keys.ENTER].indexOf(b.keyCode)&&d.hideIfVisible()}));g.focus(this.closeButtonNode)},hideIfVisible:function(){this.get("open")&&this.hide()},hide:function(){this.inherited(arguments);j.forEach(this._extraEvents,function(d){d.remove()})}})})},"JBrowse/View/Dialog/WithActionBar":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/Dialog"],function(h,j,g){return h(g,
{constructor:function(){dojo.connect(this,"onLoad",this,"_addActionBar")},_addActionBar:function(){if(this.containerNode&&!this.actionBar)this.actionBar=dojo.create("div",{className:"infoDialogActionBar dijitDialogPaneActionBar"}),this._fillActionBar(this.actionBar),this.containerNode.appendChild(this.actionBar)},_fillActionBar:function(){},show:function(g){this._addActionBar();this.inherited(arguments);this.domNode.style.width=j.position(this.titleBar).w+"px"}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare,dojo/dom-style,dojo/query,./registry,./MenuItem,./hccss".split(","),
function(h,j,g,i,f){return h("dijit.PopupMenuItem",f,{_fillContent:function(){if(this.srcNodeRef){var e=g("*",this.srcNodeRef);this.inherited(arguments,[e[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var e=g("[widgetId]",this.dropDownContainer)[0];this.popup=i.byNode(e)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&j.set(this.arrowWrapper,
"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(e){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(e),delete this.popup);this.inherited(arguments)}})})},"JBrowse/Errors":function(){define(["dojo/_base/declare"],function(h){var j=h(Error,{constructor:function(g){if("object"==typeof g)g instanceof Error?(this._originalError=g,this.message=""+g,this.stack=g.stack):dojo.mixin(this,g);else if("string"==typeof g)this.message=g;if(!this.message)this.message=
this._defaultMessage}}),g={};g.Fatal=h(j,{_defaultMessage:"Unknown fatal error."});g.TimeOut=h(j,{_defaultMessage:"Data took too long to fetch."});g.DataOverflow=h(j,{_defaultMessage:"Too much data to show."});return g})},"JBrowse/View/TrackConfigEditor":function(){define("dojo/_base/declare,dojo/aspect,dojo/json,dojo/on,dojo/dom-construct,dijit/Dialog,dijit/form/Button".split(","),function(h,j,g,i,f,e,d){return h(null,{constructor:function(c){this.trackConfig=c},_makeActionBar:function(c,b){var a=
f.create("div",{className:"dijitDialogPaneActionBar"});(new d({iconClass:"dijitIconDelete",label:"Cancel",onClick:dojo.hitch(this,function(){b&&b();this.dialog.hide()})})).placeAt(a);this.applyButton=new d({iconClass:"dijitIconEdit",label:"Apply",onClick:dojo.hitch(this,function(){this.newConfig?c&&c({conf:this.newConfig}):b&&b();this.dialog.hide()})});this.applyButton.placeAt(a);return{domNode:a}},show:function(c,b){var a=this.dialog=new e({title:"Edit track configuration",className:"trackConfigEditor"}),
d=[this._makeEditControls().domNode,this._makeActionBar(c,b).domNode];a.set("content",d);a.show();j.after(a,"hide",dojo.hitch(this,function(){setTimeout(function(){a.destroyRecursive()},500)}))},_makeEditControls:function(){var c=dojo.hitch(this,function(){this.newConfig=this._parseNewConfig(d.value)}),b=f.create("div",{className:"editControls"}),a=this._stringifyConfig(this.trackConfig),d=f.create("textarea",{rows:Math.min((a||"").match(/\n/g).length+4,20),cols:70,value:a,spellcheck:!1,onchange:c},
b),e="",g=this,i=function(){if(g.dialog.get("open")){if(d.value!=e)c(),e=d.value;window.setTimeout(i,700)}};window.setTimeout(i,700);this.errorReportArea=f.create("div",{className:"errors"},b);return{domNode:b}},_stringifyConfig:function(c){c=dojo.mixin({},c);delete c.store;if(!c.style)c.style={};if(!c.metadata)c.metadata={};return g.stringify(c,void 0,2)},_reportError:function(c){this.errorReportArea.innerHTML='<div class="error">'+c+"</div>";this.applyButton.set("disabled",!0)},_clearErrors:function(){f.empty(this.errorReportArea);
this.applyButton.set("disabled",!1)},_parseNewConfig:function(c){var b;try{b=g.parse(c,!0),this._clearErrors()}catch(a){this._reportError(a)}if(b)b.store=this.trackConfig.store;return b}})})},"JBrowse/View/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/focus","JBrowse/View/Dialog/WithActionBar","dojo/on","dijit/form/Button"],function(h,j,g,i,f){return h(g,{autofocus:!1,constructor:function(e){this.message=e.message||"Do you really want to do this?";this.confirmLabel=e.confirmLabel||
"Yes";this.denyLabel=e.denyLabel||"No"},_fillActionBar:function(e){var d=this;(new f({className:"yes",label:this.confirmLabel,onClick:function(){d.callback(!0);d.hide()}})).placeAt(e);(new f({className:"no",label:this.denyLabel,onClick:function(){d.callback(!1);d.hide()}})).placeAt(e)},show:function(e){this.callback=e||function(){};this.set("content",this.message);this.inherited(arguments);j.focus(this.closeButtonNode)}})})},"JBrowse/View/Track/BlockBased/Block":function(){define(["dojo/_base/declare",
"dijit/Destroyable","JBrowse/Util"],function(h,j,g){return h(j,{constructor:function(g){dojo.mixin(this,g);g=this.node||{};delete this.node;this.domNode=dojo.create("div",g);this.domNode.block=this},containsBp:function(g){return this.startBase<=g&&this.endBase>=g},bpToX:function(g){return(g-this.startBase)*this.scale},toString:function(){return this.startBase+".."+this.endBase},destroy:function(){this.domNode&&g.removeAttribute(this.domNode,"block");this.inherited(arguments)}})})},"JBrowse/View/DetailsMixin":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/query,dojo/dom-construct,dojo/dom-class,dojo/store/Memory,dgrid/OnDemandGrid,dgrid/extensions/DijitRegistry,JBrowse/Util".split(","),
function(h,j,g,i,f,e,d,c,b,a){var k=h([c,b]);return h(null,{renderDetailField:function(b,c,d,e,g){if(null===d||void 0===d)return"";var k;if(k=this["fmtDetail"+a.ucFirst(c)+"Field"])return k.apply(this,arguments);var g=g||c.replace(/\W/g,"_").toLowerCase(),h=c;if((k=this.config["fmtDetailField_"+c])&&e){if(h=k(c,e),!h)return""}else if((k=this.config["fmtMetaField_"+c])&&!e)if(h=k(c),!h)return"";var u;if("object"==typeof d&&!j.isArray(d)&&"values"in d)u=(d.meta||{}).description,j.isArray(u)&&(u=u.join(", ")),
d=d.values;if((k=this.config["fmtDetailDescription_"+c])&&e)u=k(u);else if((k=this.config["fmtMetaDescription_"+c])&&!e)u=k(u);k=f.create("div",{className:"field_container",innerHTML:'<h2 class="field '+g+'"'+(u?' title="'+u+'"':"")+">"+h+"</h2>"},b);u=this.renderDetailValue(f.create("div",{className:"value_container "+g},k),c,d,e,g);if("number"==typeof u&&4<u)i("h2",k)[0].innerHTML=h+" ("+u+")";return k},renderDetailValue:function(b,c,d,k,i){var h=this;if(!j.isArray(d)&&d.values)d=d.values;var p;
if(p=this["fmtDetail"+a.ucFirst(c)+"Value"])return p.apply(this,arguments);if((p=this.config["fmtDetailValue_"+c])&&k)(d=p(d,k))||(d=""),1==d.length&&(d=d[0]);else if((p=this.config["fmtMetaValue_"+c])&&!k)d=p(d),1==d.length&&(d=d[0]);p=typeof d;"function"==typeof d.toHTML&&(d=d.toHTML());if("boolean"==p)d=d?"yes":"no";else{if("undefined"==p||null===d)return 0;if(j.isArray(d))return p=g.map(d,function(a){return this.renderDetailValue(b,c,a,k,i)},this),1<p.length&&e.add(b,"multi_value"),10<p.length&&
e.add(b,"big"),p.length;if("object"==p){var u=a.dojof.keys(d).sort();p=u.length;if(5<p)return this.renderDetailValueGrid(b,c,k,function(){if(!u.length)return null;var a=u.shift(),b=d[a],a={id:a};if("object"==typeof b)for(var c in b)a[c]=h._valToString(b[c]);else a.value=b;return a},{descriptions:function(){if(!u.length)return{};var a=d[u[0]],b={},c;for(c in a)b[c]=a[c].meta&&a[c].meta.description||null;return b}()}),p;g.forEach(u,function(a){return this.renderDetailField(b,a,d[a],k,i)},this);return u.length}}f.create("div",
{className:"value "+i,innerHTML:d},b);return 1},renderDetailValueGrid:function(b,c,e,f,g){function i(a,b,c){h.renderDetailValue(c,"",b,e,"")}for(var h=this,c=[],j=g.descriptions||{},s=g.renderCell||{};g=f();)c.push(g);if(!c.length)return document.createElement("span");var t=[],v;for(v in c[0])(function(b){var c={label:{id:"Name"}[b]||a.ucFirst(b),field:b,renderCell:s[b]||i,renderHeaderCell:function(a){if(j[b])a.title=j[b];a.appendChild(document.createTextNode(c.label||c.field))}};t.push(c)})(v);b.style.overflow=
"hidden";b.style.width="90%";new k({columns:t,store:new d({data:c})},b);return b},_valToString:function(a){return j.isArray(a)?g.map(a,j.hitch(this,"_valToString")).join(" "):"object"==typeof a?"values"in a?this._valToString(a.values):JSON.stringify(a):""+a}})})},"dgrid/OnDemandGrid":function(){define("dgrid/OnDemandGrid",["dojo/_base/declare","./Grid","./OnDemandList"],function(h,j,g){return h([j,g],{})})},"dgrid/Grid":function(){define("dgrid/Grid","dojo/_base/kernel,dojo/_base/declare,dojo/on,dojo/has,put-selector/put,./List,dojo/_base/sniff".split(","),
function(h,j,g,i,f,e){function d(a,b){b&&b.nodeType&&a.appendChild(b)}var c=8>i("ie")&&!i("quirks"),b=/[^\._a-zA-Z0-9-]/g,j=j(e,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"string"==typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,b){if(a.row&&a.row instanceof this._Row)return a;if(a.target&&a.target.nodeType)a=a.target;var c;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var d=a.columnId;if(d){b=d;c=a;break}a=a.parentNode}while(a&&
a!=this.domNode)}if(!c&&"undefined"!=typeof b){var e=this.row(a);if(d=e.element)for(var d=d.getElementsByTagName("td"),f=0;f<d.length;f++)if(d[f].columnId==b){c=d[f];break}}if(null!=a)return{row:e||this.row(a),column:b&&this.column(b),element:c}},_columnsCss:function(a){a.fullSelector=function(){return this.parent.fullSelector()+" .dgrid-cell"};for(var b=0;b<a.children.length;b++){var c=a.children[b];c.field=c.className=c.selector.substring(1)}return a.children},createRowCells:function(a,d,e){var g=
f("table.dgrid-row-table[role=presentation]"),h=9>i("ie")||i("quirks")?f(g,"tbody"):g,l,j,r,p,u,s,t,v,w,x,e=e||this.subRows;for(j=0,r=e.length;j<r;j++){s=e[j];l=1==r&&!i("ie")?h:f(h,"tr");s.className&&f(l,"."+s.className);for(p=0,u=s.length;p<u;p++){t=s[p];v=t.id;w=t.className||t.field&&"field-"+t.field;w=f(a+(".dgrid-cell.dgrid-cell-padding"+(v?".dgrid-column-"+v:"")+(w?"."+w:"")).replace(b,"-")+"[role="+("th"===a?"columnheader":"gridcell")+"]");w.columnId=v;c?(v=f(w,"!dgrid-cell-padding div.dgrid-cell-padding"),
w.contents=v):v=w;if(x=t.colSpan)w.colSpan=x;if(x=t.rowSpan)w.rowSpan=x;d(v,t);l.appendChild(w)}}return g},left:function(a,b){return this.cell(this._move(a,-(b||1),"dgrid-cell"))},right:function(a,b){return this.cell(this._move(a,b||1,"dgrid-cell"))},renderRow:function(a,b){var c=this.createRowCells("td",function(c,e){var f=a;e.get?f=e.get(a):"field"in e&&"_item"!=e.field&&(f=f[e.field]);e.formatter?c.innerHTML=e.formatter(f):e.renderCell?d(c,e.renderCell(a,f,c,b)):null!=f&&c.appendChild(document.createTextNode(f))},
b&&b.subRows);return f("div[role=row]>",c)},renderHeader:function(){var a=this,b=this.headerNode,e=b.childNodes.length;for(b.setAttribute("role","row");e--;)f(b.childNodes[e],"!");e=this.createRowCells("th",function(a,b){var e=b.headerNode=a;if(c)a=a.parentNode;var f=b.field;if(f)a.field=f;if(b.renderHeaderCell)d(e,b.renderHeaderCell(e));else if(b.label||b.field)e.appendChild(document.createTextNode(b.label||b.field));if(!1!==b.sortable&&f&&"_item"!=f)a.sortable=!0,a.className+=" dgrid-sortable"},
this.subRows&&this.subRows.headerRows);this._rowIdToObject[e.id=this.id+"-header"]=this.columns;b.appendChild(e);g(e,"click,keydown",function(c){if("click"==c.type||32==c.keyCode||!i("opera")&&13==c.keyCode){var c=c.target,d,e;do if(c.sortable)return a._sortNode=c,c=c.field||c.columnId,d=(e=a._sort[0])&&e.attribute==c&&!e.descending,a.set("sort",c,d);while((c=c.parentNode)&&c!=b)}})},resize:function(){var a=this.headerNode.firstChild,b=this.contentNode,c;this.inherited(arguments);if(!i("ie")||7<i("ie")&&
!i("quirks"))if(b.style.width="",b&&a&&(c=a.offsetWidth)!=b.offsetWidth)b.style.width=c+"px"},destroy:function(){this._destroyColumns();this.inherited(arguments)},_setSort:function(a,b){this.inherited(arguments);this._lastSortedArrow&&(f(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),f(this._lastSortedArrow,"!"),delete this._lastSortedArrow);if(this._sort[0]){var c=this._sort[0].attribute,d=this._sort[0].descending,e=this._sortNode,g,i,h;delete this._sortNode;if(!e)for(h in g=this.columns,
g)if(i=g[h],i.field==c){e=i.headerNode;break}if(e)e=e.contents||e,this._lastSortedArrow=f(e.firstChild,"-div.dgrid-sort-arrow.ui-icon[role=presentation]"),this._lastSortedArrow.innerHTML="&nbsp;",f(e,d?".dgrid-sort-down":".dgrid-sort-up"),this.resize()}},styleColumn:function(a,b){return this.addCssRule("#"+this.domNode.id+" .dgrid-column-"+a,b)},_configColumns:function(a,b){var c=[],d=b instanceof Array,e,f;for(e in b){f=b[e];"string"==typeof f&&(b[e]=f={label:f});if(!d&&!f.field)f.field=e;e=f.id=
f.id||(isNaN(e)?e:a+e);a&&(this.columns[e]=f);this._configColumn&&this._configColumn(f,e,b,a);f.grid=this;"function"===typeof f.init&&f.init();c.push(f)}return d?b:c},_destroyColumns:function(){var a=this.subRows.length,b,c,d,e;this.cleanup();for(b=0;b<a;b++)for(c=0,e=this.subRows[b].length;c<e;c++)d=this.subRows[b][c],"function"===typeof d.destroy&&d.destroy()},configStructure:function(){var a=this.subRows;if(a){this.columns={};for(var b=0;b<a.length;b++)a[b]=this._configColumns(b+"-",a[b])}else this.subRows=
[this._configColumns("",this.columns)]},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();this.subRows=a;this._updateColumns()},setColumns:function(a){h.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 1.0");this.set("columns",a)},setSubRows:function(a){h.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 1.0");this.set("subRows",a)},_updateColumns:function(){this.configStructure();
this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this.resize()}});j.appendIfNode=d;j.defaultRenderCell=function(a,b,c){null!=b&&c.appendChild(document.createTextNode(b))};return j})},"put-selector/put":function(){(function(h){var j,g=/[-+,> ]/;h([],j=function(i,f){function e(b){function a(){l&&o&&l!=o&&(o==b&&(f||(f=g.test(u)&&i.createDocumentFragment()))||o).insertBefore(l,j||null)}for(var f,h,j,o,l,m=arguments,r=m[0],p=0;p<m.length;p++){var u=m[p];
if("object"==typeof u){h=!1;if(u instanceof Array){l=i.createDocumentFragment();for(var s=0;s<u.length;s++)l.appendChild(e(u[s]));u=l}if(u.nodeType)l=u,a(),o=u,j=0;else for(s in u)l[s]=u[s]}else if(h)h=!1,l.appendChild(i.createTextNode(u));else{1>p&&(b=null);h=!0;if(r=u.replace(d,function(d,f,g,k,h,n){if(f){a();if("-"==f||"+"==f){if(o=(j=l||o).parentNode,l=null,"+"==f)j=j.nextSibling}else"<"==f?o=l=(l||o).parentNode:(","==f?o=b:l&&(o=l),l=null),j=0;l&&(o=l)}if((d=!g&&k)||!l&&(g||h))"$"==d?(d=m[++p],
o.appendChild(i.createTextNode(d))):(d=d||e.defaultTag,(f=c&&m[p+1]&&m[p+1].name)&&(d="<"+d+' name="'+f+'">'),l=i.createElement(d));if(g)if("$"==k&&(k=m[++p]),"#"==g)l.id=k;else if(f=(d=l.className)&&(" "+d+" ").replace(" "+k+" "," "),"."==g)l.className=d?(f+k).substring(1):k;else if("!"==u)e("div",l,"<").innerHTML="";else if(f=f.substring(1,f.length-1),f!=d)l.className=f;if(h)if("$"==n&&(n=m[++p]),"style"==h)l.style.cssText=n;else l["!"==h.charAt(0)?(h=h.substring(1))&&"removeAttribute":"setAttribute"](h,
""===n?h:n);return""}))throw new SyntaxError("Unexpected char "+r+" in "+u);a();o=r=l||o}}b&&f&&b.appendChild(f);return r}g=f||g;var d=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,i=i||document,c="object"==typeof i.createElement;e.defaultTag="div";e.forDocument=j;return e})})("undefined"==typeof define?function(h,j){"undefined"==typeof window?require("./node-html")(module,j):put=j()}:define)},"dgrid/List":function(){define("dgrid/List","dojo/_base/array,dojo/_base/kernel,dojo/_base/declare,dojo/on,dojo/has,./util/misc,dojo/has!touch?./TouchScroll,xstyle/has-class,put-selector/put,dojo/_base/sniff,xstyle/css!./css/dgrid.css".split(","),
function(h,j,g,i,f,e,d,c,b){function a(a){var c=a?"."+a.replace(m,"."):"";this._class&&(c="!"+this._class.replace(m,"!")+c);b(this.domNode,c);this._class=a}function k(){return this._class}c("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var n,q=b(document.getElementsByTagName("head")[0],"style"),o=[],q=q.sheet||q.styleSheet,l=0,m=/ +/g,r=7>f("ie")&&!f("quirks")?function(){var a,b,c;if(this._started&&(a=document.documentElement,b=a.clientWidth,a=a.clientHeight,c=this._prevWinDims||
[],c[0]!==b||c[1]!==a))this.resize(),this._prevWinDims=[b,a]}:function(){this._started&&this.resize()};return g(d?d:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};if(b)this.srcNodeRef=b=b.nodeType?b:document.getElementById(b);this.create(a,b)},listType:"list",create:function(c,d){var e=this.domNode=d||b("div"),f;c?(this.params=
c,g.safeMixin(this,c),f=c["class"]||c.className||e.className,this._sort=c.sort||[],delete this.sort):this._sort=[];this.observers=[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=e.id=e.id||this.id||"dgrid_"+l++;this.buildRendering();f&&a.call(this,f);this.postCreate&&this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,c=this,d,g,k,h;h=this.isRTL="rtl"==(document.body.dir||
document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";b(a,"[role=grid].ui-widget.dgrid.dgrid-"+this.listType);d=this.headerNode=b(a,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?"":".dgrid-header-hidden"));(f("quirks")||8>f("ie"))&&b(a,"div.dgrid-spacer");g=this.bodyNode=b(a,"div.dgrid-scroller");g.tabIndex=-1;this.headerScrollNode=b(a,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");k=this.footerNode=b("div.dgrid-footer"+
(this.showFooter?"":".dgrid-footer-hidden"));b(a,k);h&&(a.className+=" dgrid-rtl"+(f("webkit")?"":" dgrid-rtl-nonwebkit"));i(g,"scroll",function(b){if(c.showHeader)d.scrollLeft=b.scrollLeft||g.scrollLeft;b.stopPropagation();i.emit(a,"scroll",{scrollTarget:g})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=b(this.bodyNode,"div.dgrid-content.ui-widget-content");this._listeners.push(this._resizeHandle=i(window,"resize",e.throttleDelayed(r,this)))},startup:function(){this.inherited(arguments);
if(!this._started)this._started=!0,this.resize(),this.set("sort",this._sort)},configStructure:function(){},resize:function(){var a=this.bodyNode,c=this.headerNode,d=this.footerNode,e=c.offsetHeight,g=this.showFooter?d.offsetHeight:0,k=f("quirks")||7>f("ie");this.headerScrollNode.style.height=a.style.marginTop=e+"px";a.style.marginBottom=g+"px";if(k&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-e-g,0)+"px",g))d.style.bottom="1px",setTimeout(function(){d.style.bottom=""},0);
n||(e=b(document.body,"div.dgrid-scrollbar-measure"),n=e.offsetWidth-e.clientWidth,b(e,"!"),7===f("ie")&&n++,this.addCssRule(".dgrid-scrollbar-width","width: "+n+"px"),this.addCssRule(".dgrid-scrollbar-height","height: "+n+"px"),17!=n&&!k&&(this.addCssRule(".dgrid-header","right: "+n+"px"),this.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+n+"px")));if(k)c.style.width=a.clientWidth+"px",setTimeout(function(){c.scrollLeft=a.scrollLeft},0)},addCssRule:function(a,b){var c=o.length;o[c]=(q.cssRules||
q.rules).length;q.addRule?q.addRule(a,b):q.insertRule(a+"{"+b+"}",o[c]);return{remove:function(){var a=o[c],b,d=o.length;if(void 0!==a){q.deleteRule?q.deleteRule(a):q.removeRule(a);o[c]=void 0;for(b=c;b<d;b++)o[b]>a&&o[b]--}}}},on:function(a,b){var c=i(this.domNode,a,b);f("dom-addeventlistener")||this._listeners.push(c);return c},cleanup:function(){var a=this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var c=document.getElementById(b);c&&this.removeRow(c,!0)}for(b=
0;b<a.length;b++)(c=a[b])&&c.cancel();this.observers=[];this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this.cleanup();b(this.domNode,"!")},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,c,d,e){if(!c||c.parentNode){var f=this.insertRow(a,c?c.parentNode:this.contentNode,c,e.start+d,e);b(f,".ui-state-highlight");
setTimeout(function(){b(f,"!ui-state-highlight")},250);return f}},adjustRowIndices:function(a){if(this.maintainOddEven){var c=a.rowIndex;if(-1<c){do if(-1<a.rowIndex)-1<(a.className+" ").indexOf("dgrid-row ")&&b(a,"."+(1==c%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==c%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=c++;while((a=a.nextSibling)&&a.rowIndex!=c)}}},renderArray:function(a,b,c){function d(a){o=f.insertRow(a,l,null,g++,c);o.observerIndex=j;return o}function e(a){if(h=b?b.parentNode:f.contentNode)h.insertBefore(l,
b||null),(o=a[a.length-1])&&f.adjustRowIndices(o);return i=a}var c=c||{},f=this,g=c.start||0,k,i,h;if(!b)this._lastCollection=a;if(a.observe)var j=this.observers.push(a.observe(function(a,b,d){var e,g;if(-1<b&&i[b]){k=i.splice(b,1)[0];if(k.parentNode==h)(e=k.nextSibling)&&b!=d&&e.rowIndex--,f.removeRow(k);f._processScroll&&f._processScroll()}if(-1<d){g=i[d];if(!g&&(g=i[d-1]))g=(g.connected||g).nextSibling;if(k=f.newRow(a,g,d,c))if(k.observerIndex=j,i.splice(d,0,k),!e||d<b)a=k.previousSibling,e=!a||
a.rowIndex+1==k.rowIndex||0==k.rowIndex?k:a;c.count++}b!=d&&e&&f.adjustRowIndices(e)},!0))-1;var l=document.createDocumentFragment();if(a.map){if(i=a.map(d,console.error),i.then)return i.then(e)}else{i=[];for(var n=0,m=a.length;n<m;n++)i[n]=d(a[n])}var o;return e(i)},renderHeader:function(){},_autoId:0,insertRow:function(a,b,c,d,e){var f=e.parentId,f=this.id+"-row-"+(f?f+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),g=document.getElementById(f),k=g&&g.previousSibling;
if(!g||c&&g.parentNode!=c.parentNode)g&&this.removeRow(g),g=this.renderRow(a,e),g.className=(g.className||"")+" ui-state-default dgrid-row "+(1==d%2?"dgrid-row-odd":"dgrid-row-even"),this._rowIdToObject[g.id=f]=a;b.insertBefore(g,c||null);k&&this.adjustRowIndices(k);g.rowIndex=d;return g},renderRow:function(a){return b("div",""+a)},removeRow:function(a,c){a=a.element||a;delete this._rowIdToObject[a.id];c||b(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;if(a.target&&a.target.nodeType)a=
a.target;if(a.nodeType){do{var c=a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var e,f;f=e=a.element;b=b||1;do if(a=e[0>b?"previousSibling":"nextSibling"]){do if((e=a)&&-1<(e.className+
" ").indexOf(c+" ")){f=e;b+=0>b?1:-1;break}while(a=(!d||!e.hidden)&&e[0>b?"lastChild":"firstChild"])}else if(e=e.parentNode,e===this.bodyNode||e===this.headerNode)break;while(b);return f},up:function(a,b,c){return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:f("touch")?function(){return this.inherited(arguments)}:function(a){if("undefined"!==typeof a.x)this.bodyNode.scrollLeft=a.x;if("undefined"!==typeof a.y)this.bodyNode.scrollTop=
a.y},getScrollPosition:f("touch")?function(){return this.inherited(arguments)}:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,
1)):this[a]=b;return this},_getClass:k,_setClass:a,_getClassName:k,_setClassName:a,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,descending:b}];this.refresh();if(this._lastCollection){if(a.length){if("string"!=typeof a)b=a[0].descending,a=a[0].attribute;this._lastCollection.sort(function(c,d){var e=c[a],f=d[a];void 0===e&&(e="");void 0===f&&(f="");return e==f?0:e>f==!b?1:-1})}this.renderArray(this._lastCollection)}},sort:function(a,b){j.deprecated("sort(...)",'use set("sort", ...) instead',
"dgrid 1.0");this.set("sort",a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var c=this.headerNode;this.showHeader=a;b(c,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();if(a)c.scrollLeft=this.getScrollPosition().x},setShowHeader:function(a){j.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 1.0");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;b(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},
"dgrid/util/misc":function(){define("dgrid/util/misc",[],function(){var h={defaultDelay:15,throttle:function(j,g,i){var f=!1,i=i||h.defaultDelay;return function(){f||(f=!0,j.apply(g,arguments),setTimeout(function(){f=!1},i))}},throttleDelayed:function(j,g,i){var f=!1,i=i||h.defaultDelay;return function(){if(!f){f=!0;var e=arguments;setTimeout(function(){f=!1;j.apply(g,e)},i)}}},debounce:function(j,g,i){var f,i=i||h.defaultDelay;return function(){f&&(clearTimeout(f),f=null);var e=arguments;f=setTimeout(function(){j.apply(g,
e)},i)}}};return h})},"xstyle/has-class":function(){define(["dojo/has"],function(h){var j={};return function(){for(var g,i=arguments,f=0;f<i.length;f++)if(g=i[f],!j[g]){j[g]=!0;var e=g.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),d=h(e[2]),c=-e[4];if((0<c?c<=d&&(-e[5]||c)>=d:!!d)==!e[1])document.documentElement.className+=" has-"+g}}})},"xstyle/css":function(){define(["require"],function(h){var j=window.cssCache||(window.cssCache={});return{load:function(g,i,f){var e=i.toUrl(g);if(j[e])return createStyleSheet(j[e]);
var d=document.documentElement,c=d.insertBefore(document.createElement("div"),d.firstChild);c.id=i.toAbsMid(g).replace(/\//g,"-").replace(/\..*/,"")+"-loaded";g=(c.currentStyle||getComputedStyle(c,null)).display;d.removeChild(c);if("none"==g)return f();h(["./load-css"],function(b){b(e,f)})},pluginBuilder:"xstyle/css-builder"}})},"dgrid/OnDemandList":function(){define("dgrid/OnDemandList","./List,./_StoreMixin,dojo/_base/declare,dojo/_base/lang,dojo/_base/Deferred,dojo/on,./util/misc,put-selector/put".split(","),
function(h,j,g,i,f,e,d,c){return g([h,j],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,rowHeight:22,queryRowsOverlap:1,pagingDelay:d.defaultDelay,postCreate:function(){this.inherited(arguments);var b=this;e(this.bodyNode,"scroll",d.throttleDelayed(function(a){b._processScroll(a)},null,this.pagingDelay))},renderQuery:function(b,a,d){var e={query:b,count:0,node:a,options:d};if(!a){var g={node:c(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,
query:b,next:e,options:d};e.node=a=c(this.contentNode,"div.dgrid-preload");e.previous=g}a.rowIndex=this.minRowsPerPage;(g=this.preload)?((e.next=g.next)&&this.bodyNode.scrollTop>=g.node.offsetTop?e.previous=g:(e.next=g,e.previous=g.previous),e.previous.next=e,e.next.previous=e):this.preload=e;var h=c(a,"-div.dgrid-loading");c(h,"div.dgrid-below").innerHTML=this.loadingMessage;var d=i.mixin(this.get("queryOptions"),d,{start:0,count:this.minRowsPerPage,query:b}),j=b(d),m=this;f.when(this.renderArray(j,
a,d),function(b){return f.when(j.total||j.length,function(d){c(h,"!");var f=b.length,d=d||f;if(!d)m.noDataNode=c(m.contentNode,"div.dgrid-no-data"),m.noDataNode.innerHTML=m.noDataMessage;for(var g=0,k=0;k<f;k++)g+=m._calcRowHeight(b[k]);if(f&&g)m.rowHeight=g/f;d-=f;e.count=d;a.rowIndex=f;d?a.style.height=Math.min(d*m.rowHeight,m.maxEmptySpace)+"px":a.style.display="none";m._processScroll();return b})});return j},refresh:function(){this.inherited(arguments);if(this.store){var b=this;this._trackError(function(){return b.renderQuery(function(a){return b.store.query(b.query,
a)})})}},_calcRowHeight:function(b){var a=b.previousSibling;return a&&a.offsetTop!=b.offsetTop?b.offsetHeight:0},lastScrollTop:0,_processScroll:function(b){function a(a,b,f,g){var i=e.farOffRemoval,h=a.node;if(b>2*i){for(var j,l=h[f],m=0,v=0,o=[];j=l;){var w=e._calcRowHeight(j);if(m+w+i>b||0>l.className.indexOf("dgrid-row")&&0>l.className.indexOf("dgrid-loading"))break;var l=j[f],q,r=j.observerIndex;if(r!=q&&-1<q){var p=e.observers,t=p[q];t&&t.cancel();p[q]=0}m+=w;v+=j.count||1;q=r;e.removeRow(j,
!0);o.push(j)}a.count+=v;g?(h.rowIndex-=v,d(a)):h.style.height=h.offsetHeight+m+"px";for(var x=c("div"),a=0;a<o.length;a++)c(x,o[a]);setTimeout(function(){c(x,"!")},1)}}function d(a,b){a.node.style.height=Math.min(a.count*e.rowHeight,b?Infinity:e.maxEmptySpace)+"px"}var e=this,g=e.bodyNode,b=b&&b.scrollTop||g.scrollTop,h=g.offsetHeight+b,j,m,r=e.preload,p=e.lastScrollTop,u=e.bufferRows*e.rowHeight,s=u-e.rowHeight;for(e.lastScrollTop=b;r&&!r.node.offsetWidth;)r=r.previous;for(;r&&r!=j;){j=e.preload;
e.preload=r;m=r.node;var t=m.offsetTop;if(h+1+s<t){do r=r.previous;while(r&&!r.node.offsetWidth)}else if(b-1-s>t+m.offsetHeight){do r=r.next;while(r&&!r.node.offsetWidth)}else{var v=((m.rowIndex?b-u:h)-t)/e.rowHeight,t=(h-b+2*u)/e.rowHeight,w=Math.max(Math.min((b-p)*e.rowHeight,e.maxRowsPerPage/2),e.maxRowsPerPage/-2),t=t+Math.min(Math.abs(w),10);0==m.rowIndex&&(v-=t);v=Math.max(v,0);10>v&&0<v&&t+v<e.maxRowsPerPage&&(t+=Math.max(0,v),v=0);t=Math.min(Math.max(t,e.minRowsPerPage),e.maxRowsPerPage,r.count);
if(0==t)break;var t=Math.ceil(t),v=Math.min(Math.floor(v),r.count-t),x=i.mixin(e.get("queryOptions"),r.options);r.count-=t;var E=m,A,y=e.queryRowsOverlap;if(w=0<m.rowIndex&&r){var D=r.previous;D&&(a(D,b-(D.node.offsetTop+D.node.offsetHeight),"nextSibling"),0<v&&D.node==m.previousSibling?(v=Math.min(r.count,v),r.previous.count+=v,d(r.previous,!0),r.count-=v,m.rowIndex+=v,y=0):t+=v);x.start=m.rowIndex-y;m.rowIndex+=t}else{if(r.next)a(r.next,r.next.node.offsetTop-h,"previousSibling",!0),E=m.nextSibling,
E==r.next.node?(r.next.count+=r.count-v,r.next.node.rowIndex=v+t,d(r.next),r.count=v,y=0):A=!0;x.start=r.count}x.count=Math.min(t+y,e.maxRowsPerPage);if(A)A=E.offsetTop;d(r);m=c(E,"-div.dgrid-loading[style=height:"+t*e.rowHeight+"px]");c(m,"div.dgrid-"+(w?"below":"above")).innerHTML=e.loadingMessage;m.count=t;x.query=r.query;var F=r.query(x);if(void 0===e._trackError(function(){return F}))break;(function(a,b,g,i,h){f.when(e.renderArray(h,a,x),function(){E=a.nextSibling;c(a,"!");if(i&&E){var b=e.getScrollPosition();
e.scrollTo({x:b.x,y:b.y+E.offsetTop-i,preserveMomentum:!0})}g&&f.when(h.total||h.length,function(a){g.count=a-g.node.rowIndex;d(g)});e._processScroll()})}).call(this,m,g,w,A,F);r=r.previous}}}})})},"dgrid/_StoreMixin":function(){define("dgrid/_StoreMixin","dojo/_base/kernel,dojo/_base/declare,dojo/_base/lang,dojo/_base/Deferred,dojo/on,put-selector/put".split(","),function(h,j,g,i,f,e){function d(c){"object"!==typeof c&&(c=Error(c));c.grid=this;f.emit(this.domNode,"dgrid-error",{grid:this,error:c,
cancelable:!0,bubbles:!0})&&console.error(c)}return j(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={}},_configColumn:function(c){if(c.set){if(!this._columnsWithSet)this._columnsWithSet={};this._columnsWithSet[c.field]=c}},_configColumns:function(){this._columnsWithSet=null;return this.inherited(arguments)},_setStore:function(c,b,a){this.store=c;this.dirty={};this.set("query",
b,a)},_setQuery:function(c,b){var a=b&&b.sort;this.query=void 0!==c?c:this.query;this.queryOptions=b||this.queryOptions;a?this.set("sort",a):this.refresh()},setStore:function(c,b,a){h.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 1.0");this.set("store",c,b,a)},setQuery:function(c,b){h.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 1.0");this.set("query",c,b)},_getQueryOptions:function(){var c=g.delegate(this.queryOptions,{});if(this._sort.length)c.sort=this._sort;
return c},_getQuery:function(){var c=this.query;return"object"==typeof c&&null!=c?g.delegate(c,{}):c},_setSort:function(c,b){if(this.store)this._lastCollection=null;this.inherited(arguments)},insertRow:function(c,b,a,d,e){var f=this.store,i=this.dirty,f=f&&f.getIdentity(c),h;f in i&&!(f in this._updating)&&(h=i[f]);h&&(c=g.delegate(c,h));return this.inherited(arguments)},updateDirty:function(c,b,a){var d=this.dirty,e=d[c];e||(e=d[c]={});e[b]=a},setDirty:function(c,b,a){h.deprecated("setDirty(...)",
"use updateDirty() instead","dgrid 1.0");this.updateDirty(c,b,a)},save:function(){function c(c,e){return function(f){var g=b._columnsWithSet,h=b._updating,j,l;for(j in e)f[j]=e[j];if(g)for(j in g)l=g[j].set(f),void 0!==l&&(f[j]=l);h[c]=!0;return i.when(a.put(f),function(){delete d[c];delete h[c]})}}var b=this,a=this.store,d=this.dirty,e=new i,f=e.promise,g=function(c){var d;return b.getBeforePut||!(d=b.row(c).data)?function(){return a.get(c)}:function(){return d}},h;for(h in d)var j=c(h,d[h]),f=f.then(g(h)).then(j);
e.resolve();return f},revert:function(){this.dirty={};this.refresh()},_trackError:function(c){var b;"string"==typeof c&&(c=g.hitch(this,c));try{b=c()}catch(a){d.call(this,a)}return i.when(b,null,g.hitch(this,d))},newRow:function(){this.noDataNode&&(e(this.noDataNode,"!"),delete this.noDataNode);return this.inherited(arguments)},removeRow:function(c,b){var a={element:c};if(!b&&this.noDataMessage&&this.up(a).element===c&&this.down(a).element===c)this.noDataNode=e(this.contentNode,"div.dgrid-no-data"),
this.noDataNode.innerHTML=this.noDataMessage;return this.inherited(arguments)}})})},"dgrid/extensions/DijitRegistry":function(){define("dgrid/extensions/DijitRegistry",["dojo/_base/declare","dijit/registry"],function(h,j){return h(null,{buildRendering:function(){j.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var g=j.getEnclosingWidget(this.domNode.parentNode);g&&g.isLayoutContainer&&this._resizeHandle.remove()}},
destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);j.remove(this.id)},getChildren:function(){return[]}})})},"JBrowse/View/Track/GridLines":function(){define(["dojo/_base/declare","dojo/dom-construct","JBrowse/View/Track/BlockBased"],function(h,j,g){return dojo.declare(g,{constructor:function(){this.loaded=!0;this.name="gridlines"},makeTrackLabel:function(){},makeTrackMenu:function(){},fillBlock:function(g){this.renderGridlines(g.block,g.leftBase,g.rightBase);
var f=this.browser.getHighlight();f&&f.ref==this.refSeq.name&&this.renderRegionHighlight(g,f);g.finishCallback();this.heightUpdate(100,g.blockIndex)},renderGridlines:function(g,f,e){for(var f=e-f,f=!(f%20)?20:!(f%10)?10:!(f%5)?5:!(f%2)?2:5,e=function(b,a){var c=document.createElement("div");c.style.cssText="left: "+a+"%; width: 0px";c.className="gridline "+b;return c},d=0;d<f;d++){var c=100/f*d;g.domNode.appendChild(e(0==c||20==f&&10==d?"gridline_major":"gridline_minor",c))}}})})},"JBrowse/BehaviorManager":function(){define([],
function(){function h(h){this.context=h.context;this.behaviors=h.behaviors}h.prototype.initialize=function(){this.removeAll();for(var h in this.behaviors)this.behaviors[h].apply_on_init&&this.applyBehaviors(h)};h.prototype.applyBehaviors=function(){dojo.forEach(arguments,function(h){h=this._get(h);if(!h.applied)h.handles=h.handles||[],h.handles=h.apply.call(this.context||this,this,h.handles),h.applied=!0},this)};h.prototype._get=function(h){h=this.behaviors[h];if(!h)throw"no behavior registed with name ''name";
return h};h.prototype.swapBehaviors=function(h,g){this.removeBehaviors(h);this.applyBehaviors(g)};h.prototype.removeBehaviors=function(){dojo.forEach(arguments,function(h){h=this._get(h);if(h.applied)(h.remove||function(g,i){dojo.forEach(i,dojo.disconnect,dojo)}).call(this.context||this,this,h.handles),h.applied=!1},this)};h.prototype.removeAll=function(){for(var h in this.behaviors)this.removeBehaviors(h)};return h})},"JBrowse/View/Animation/Zoomer":function(){define(["JBrowse/View/Animation"],function(h){function j(g,
i,f,e,d){h.call(this,i,f,e);this.toZoom=i.zoomContainer;this.initialWidth=f=this.toZoom.clientWidth;this.width0=f*Math.min(1,g);this.distance=f*Math.max(1,g)-this.width0;this.zoomingIn=1<g;this.center=(i.getX()+i.elem.clientWidth*d)/i.scrollContainer.clientWidth;this.initialX=this.subject.getX();this.initialLeft=parseInt(this.toZoom.style.left)}j.prototype=new h;j.prototype.step=function(g){var g=this.zoomingIn?g:1-g,g=g*g*this.distance+this.width0,i=this.center*this.initialWidth-this.center*g;this.toZoom.style.width=
g+"px";this.toZoom.style.left=this.initialLeft+i+"px";this.subject.updateStaticElements&&this.subject.updateStaticElements({x:this.initialX-i})};return j})},"JBrowse/View/Animation":function(){define([],function(){function h(h,g,i){if(void 0!==h){"animation"in h&&h.animation.stop();this.index=0;this.time=i;this.subject=h;this.callback=g;var f=this;this.animFunction=function(){f.animate()};this.animID=setTimeout(this.animFunction,33);this.frames=0;h.animation=this}}h.prototype.animate=function(){if(this.finished)this.stop();
else{var h=33,g=0;"startTime"in this?(g=(new Date).getTime()-this.startTime,h=Math.max(33,g/this.frames)):this.startTime=(new Date).getTime();g<this.time?(this.step(g/this.time),this.frames++):(this.step(1),this.finished=!0);this.animID=setTimeout(this.animFunction,h)}};h.prototype.stop=function(){clearTimeout(this.animID);delete this.subject.animation;this.callback.call(this.subject,this)};return h})},"JBrowse/View/Animation/Slider":function(){define(["JBrowse/View/Animation"],function(h){function j(g,
i,f,e){h.call(this,g,i,f);this.slideStart=g.getX();this.slideDistance=e}j.prototype=new h;j.prototype.step=function(g){g=this.slideStart-this.slideDistance*(-0.5*Math.cos(g*Math.PI)+0.5)|0;g=Math.max(Math.min(this.subject.maxLeft-this.subject.offset,g),this.subject.minLeft-this.subject.offset);this.subject.setX(g)};return j})},"JBrowse/TouchScreenSupport":function(){define([],function(){var h,j,g;return g={CompareObjPos:function(i,f){for(var e=0,d=0,c=f.pageY,b=0;b<i.length&&!(e=d++,g.findPos(i[b]).top>
c);b++);return e},checkAvatarPosition:function(g){var f=document.getElementById("tracksAvail"),e=document.getElementById("container");return g.pageX<f.offsetLeft+f.offsetWidth?f:e},removeTouchEvents:function(){h=null},touchSimulated:function(i){if(1>=i.touches.length){var f=i.changedTouches[0],e="",d=document.getElementsByClassName("dojoDndAvatar"),c={},b=g.checkAvatarPosition(f),a=b.getElementsByClassName("dojoDndItem"),e={},k=document.createEvent("MouseEvent"),n=document.createEvent("MouseEvent");
switch(i.type){case "touchstart":h=f.pageX;e="mousedown";break;case "touchmove":i.preventDefault();e="mousemove";break;default:return}k.initMouseEvent(e,!0,!0,window,1,f.pageX,f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);n.initMouseEvent("mouseover",!0,!0,window,1,f.pageX,f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);switch(i.type){case "touchstart":f.target.dispatchEvent(k);f.target.dispatchEvent(n);j=b;break;case "touchmove":if(0<d.length){0<a.length&&(e=g.CompareObjPos(a,f),c=a[e]);try{if(j!=
b){var q=document.createEvent("MouseEvent");q.initMouseEvent("mouseout",!0,!0,window,1,f.pageX,f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);j.dispatchEvent(q)}c.dispatchEvent(n);c.dispatchEvent(k)}catch(o){b.dispatchEvent(n),b.dispatchEvent(k)}}}}else g.removeTouchEvents()},touchEnd:function(i){var f=i.changedTouches[0],e=document.getElementsByClassName("dojoDndAvatar"),d={},c=g.checkAvatarPosition(f),b=c.getElementsByClassName("dojoDndItem"),a={},k=document.createEvent("MouseEvent"),j=document.createEvent("MouseEvent");
h!==f.pageX&&i.preventDefault();g.findPos(f.target);k.initMouseEvent("mouseup",!0,!0,window,1,f.pageX,f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);j.initMouseEvent("mouseover",!0,!0,window,1,f.pageX,f.pageY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);if(0<e.length){0<b.length&&(a=g.CompareObjPos(b,f),d=b[a]);try{d.dispatchEvent(j),d.dispatchEvent(k)}catch(q){f.target.dispatchEvent(j),c.dispatchEvent(j)}}else f.target.dispatchEvent(k),f.target.dispatchEvent(j);g.removeTouchEvents()},touchHandle:function(i){dojo.query(".dojoDndItemAnchor").connect("touchstart",
g.touchSimulated);dojo.query(".dojoDndItemAnchor").connect("touchmove",g.touchSimulated);dojo.query(".dojoDndItemAnchor").connect("touchend",g.touchEnd);dojo.query(".dojoDndItemAnchor").connect("click",function(){});if(1>=i.touches.length){var f=i.changedTouches[0],e="";switch(i.type){case "touchstart":h=f.pageX;e="mousedown";break;case "touchmove":i.preventDefault();e="mousemove";break;case "touchend":h!==f.pageX&&i.preventDefault();e="mouseup";break;default:return}i=document.createEvent("MouseEvent");
i.initMouseEvent(e,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);f.target.dispatchEvent(i)}else g.removeTouchEvents()},touchinit:function(){dojo.query(".dojoDndItem").connect("touchstart",g.touchSimulated);dojo.query(".dojoDndItem").connect("touchmove",g.touchSimulated);dojo.query(".dojoDndItem").connect("touchend",g.touchEnd);dojo.query(".locationThumb").connect("touchstart",g.touchHandle);dojo.query(".locationThumb").connect("touchmove",g.touchHandle);dojo.query(".locationThumb").connect("touchend",
g.touchHandle);dojo.query(".dojoDndItem").connect("click",function(){});dojo.query(".dojoDndTarget").connect("touchstart",g.touchHandle);dojo.query(".dojoDndTarget").connect("touchmove",g.touchHandle);dojo.query(".dojoDndTarget").connect("touchend",g.touchHandle);dojo.query(".dijitSplitter").connect("touchstart",g.touchHandle);dojo.query(".dijitSplitter").connect("touchmove",g.touchHandle);dojo.query(".dijitSplitter").connect("touchend",g.touchHandle)},loadTouch:function(){g.touchinit();document.documentElement.style.webkitTouchCallout=
"none"},findPos:function(g){var f=0,e={};if(g.offsetParent){do f+=g.offsetTop;while(g=g.offsetParent)}e.top=f;return e}}})},"JBrowse/ConfigManager":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/Deferred,dojo/promise/all,JBrowse/Util,JBrowse/ConfigAdaptor/AdaptorUtil".split(","),function(h,j,g,i,f,e,d){return h(null,{constructor:function(c){this.bootConfig=j.clone(c.bootConfig||{});this.defaults=j.clone(c.defaults||{});this.browser=c.browser;this.skipValidation=c.skipValidation;
this.bootConfig=this._regularizeIncludes([this.bootConfig])[0];var b=this;this._getConfigAdaptor(this.bootConfig).then(function(a){b.bootConfig=a.regularizeTrackConfigs(b.bootConfig)})},getFinalConfig:function(){return this.finalConfig||(this.finalConfig=function(){var c=this,b=this._applyDefaults(j.clone(this.bootConfig),this.defaults);return this._loadIncludes(this._fillTemplates(b,b)).then(function(a){a=c._mergeConfigs(a,c.bootConfig);c._fillTemplates(a,a);a=d.evalHooks(a);c.skipValidation||c._validateConfig(a);
return a})}.call(this))},_getConfigAdaptor:function(c){var b="JBrowse/ConfigAdaptor/"+c.format;"version"in c&&(b+="_v"+c.version);b.replace(/\W/g,"");return e.loadJS([b]).then(function(a){return new a[0](c)})},_fillTemplates:function(c,b){var a={},d=typeof c;if(j.isArray(c))for(a=0;a<c.length;a++)c[a]=this._fillTemplates(c[a],b);else if("object"==d)for(var f in c)c.hasOwnProperty(f)&&!a[f]&&(c[f]=this._fillTemplates(c[f],b));else if("string"==d)return e.fillTemplate(c,b);return c},_loadIncludes:function(c){function b(c,
d){var e=c.sourceUrl||c.baseUrl,i=a._mergeConfigs(j.clone(d),c),h=a._fillTemplates(a._regularizeIncludes(c.include||[]),i);delete c.include;h=g.map(h,function(c){return a._loadInclude(c,e).then(function(a){return b(a,i)})});return f(h).then(function(b){g.forEach(b,function(b){c=a._mergeConfigs(c,b)});return c})}var a=this,c=j.clone(c);return b(c,{})},_loadInclude:function(c,b){return this._getConfigAdaptor(c).then(function(a){if(!a)throw Error("Could not load config "+c.url+", no configuration adaptor found for config format "+
c.format+" version "+c.version);return a.load({config:c,baseUrl:b})}).then(null,function(a){try{if(404==a.response.status)return{}}catch(b){}throw a;})},_regularizeIncludes:function(c){if(!c)return[];"object"!=typeof c&&(c=[c]);c=g.filter(c,function(b){return b});return g.map(c,function(b){"string"==typeof b&&(b={url:b});if(!("format"in b))b.format=/\.conf$/.test(b.url)?"conf":"JB_json";if("JB_json"==b.format&&!("version"in b))b.version=1;return b})},_applyDefaults:function(c,b){return e.deepUpdate(dojo.clone(b),
c)},_validateConfig:function(c){if(!c.tracks)c.tracks=[];c.baseUrl||this._fatalError("Must provide a <code>baseUrl</code> in configuration");if(this.hasFatalErrors)throw"Errors in configuration, cannot start.";},_fatalError:function(c){this.hasFatalErrors=!0;this.browser.fatalError(c)},_noRecursiveMerge:function(c){return"datasets"==c},_mergeConfigs:function(c,b){if(null===b)return null;null===c&&(c={});for(var a in b)if("tracks"==a&&a in c)c[a]=this._mergeTrackConfigs(c[a]||[],b[a]||[]);else if(!this._noRecursiveMerge(a)&&
a in c&&"object"==typeof b[a]&&"object"==typeof c[a])c[a]=e.deepUpdate(c[a],b[a]);else if("undefined"==typeof c[a]||"undefined"!=typeof b[a])c[a]=b[a];return c},_mergeTrackConfigs:function(c,b){if(!b.length)return c;var a={};g.forEach(c,function(b,c){b.index=c;a[b.label]=b});g.forEach(b,function(b){var d=a[b.label];d?this._mergeConfigs(d,b):c.push(b)},this);return c}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(h,j,g){var i=h.some;return function(f){var e,
d;f instanceof Array?d=f:f&&"object"===typeof f&&(e=f);var c,b=[];if(e){d=[];for(var a in e)Object.hasOwnProperty.call(e,a)&&(b.push(a),d.push(e[a]));c={}}else d&&(c=[]);if(!d||!d.length)return(new j).resolve(c);var k=new j;k.promise.always(function(){c=b=null});var h=d.length;i(d,function(a,d){e||b.push(d);g(a,function(a){k.isFulfilled()||(c[b[d]]=a,0===--h&&k.resolve(c))},k.reject);return k.isFulfilled()});return k.promise}})},"JBrowse/ConfigAdaptor/AdaptorUtil":function(){define(["dojox/lang/functional/object",
"dojox/lang/functional/fold"],function(){return{evalHooks:function(h){for(var j in h)if("object"==typeof h[j])h[j]=this.evalHooks(h[j]);else if("string"==typeof h[j]){var g=h[j];/^\s*function\s*\(/.test(g)&&(h[j]=this.evalHook(g))}return h},evalHook:function(h){if("string"!=typeof h)return h;try{eval("arguments[0]="+h+";")}catch(j){console.error(j+" parsing config callback '"+h+"'")}return h}}})},"JBrowse/View/FileDialog":function(){define("dojo/_base/declare,dojo/_base/array,dojo/aspect,dojo/on,dijit/focus,dijit/form/Button,dijit/form/RadioButton,dojo/dom-construct,dijit/Dialog,dojox/form/Uploader,dojox/form/uploader/plugins/IFrame,./FileDialog/TrackList/BAMDriver,./FileDialog/TrackList/BigWigDriver,./FileDialog/TrackList/GFF3Driver,./FileDialog/TrackList/GTFDriver,./FileDialog/TrackList/VCFTabixDriver,./FileDialog/ResourceList,./FileDialog/TrackList,JBrowse/Util".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r,p,u){return h(null,{constructor:function(a){this.browser=a.browser;this.config=dojo.clone(a.config||{});this.browserSupports={dnd:"draggable"in document.createElement("span")};this._fileTypeDrivers=[new n,new q,new o,new l,new m]},addFileTypeDriver:function(a){this._fileTypeDrivers.unshift(a)},getFileTypeDrivers:function(){return this._fileTypeDrivers.slice()},_makeActionBar:function(a,b){var f=c.create("div",{className:"dijitDialogPaneActionBar"}),g=this.trackDispositionChoice=
[new d({id:"openImmediately",value:"openImmediately",checked:!0}),new d({id:"addToTrackList",value:"addToTrackList"})],k=c.create("div",{className:"aux"},f);g[0].placeAt(k);c.create("label",{"for":"openImmediately",innerHTML:"Open immediately"},k);g[1].placeAt(k);c.create("label",{"for":"addToTrackList",innerHTML:"Add to tracks"},k);(new e({iconClass:"dijitIconDelete",label:"Cancel",onClick:dojo.hitch(this,function(){b&&b();this.dialog.hide()})})).placeAt(f);(new e({iconClass:"dijitIconFolderOpen",
label:"Open",onClick:dojo.hitch(this,function(){a&&a({trackConfs:this.trackList.getTrackConfigurations(),trackDisposition:this.trackDispositionChoice[0].checked?this.trackDispositionChoice[0].value:this.trackDispositionChoice[1].checked?this.trackDispositionChoice[1].value:void 0});this.dialog.hide()})})).placeAt(f);return{domNode:f}},show:function(a){var d=this.dialog=new b({title:"Open files",className:"fileDialog"}),e=this._makeLocalFilesControl(),k=this._makeRemoteURLsControl(),h=this._makeResourceListControl(),
l=this._makeTrackListControl(),m=this._makeActionBar(a.openCallback,a.cancelCallback);u.isElectron()?i(e.uploader,"click",function(){var a=electronRequire("remote");a.require("app");if(a=a.require("dialog").showOpenDialog({properties:["openFile","multiSelections"]}))a=j.map(a,function(a){return u.replacePath(a)}),h.addURLs(a)}):dojo.connect(e.uploader,"onChange",function(){h.addLocalFiles(e.uploader._files)});dojo.connect(k,"onChange",function(a){h.clearURLs();h.addURLs(a)});dojo.connect(h,"onChange",
function(a){l.update(a)});a=[c.create("div",{className:"intro",innerHTML:a.introMsg||"Add any combination of data files and URLs, and JBrowse will automatically suggest tracks to display their contents."}),function(a,b){var d=c.create("div",a);j.forEach(b,dojo.hitch(d,"appendChild"));return d}({className:"resourceControls"},[e.domNode,k.domNode]),h.domNode,l.domNode,m.domNode];d.set("content",a);d.show();g.after(d,"hide",dojo.hitch(this,function(){f.curNode&&f.curNode.blur();setTimeout(function(){d.destroyRecursive()},
500)}))},_makeLocalFilesControl:function(){var a=c.create("div",{className:"localFilesControl"});c.create("h3",{innerHTML:"Local files"},a);var b=c.create("div",{className:"dragArea"},a),d;u.isElectron()?d=c.create("input",{type:"button",value:"Select files...",id:"openFile"},b):(d=new dojox.form.Uploader({multiple:!0}),d.placeAt(b),this.browserSupports.dnd&&(d.addDropTarget(this.dialog.domNode),c.create("div",{className:"dragMessage",innerHTML:"Select or drag files here."},b)));c.create("div",{className:"connector",
innerHTML:"&nbsp;"},a);return{domNode:a,uploader:d}},_makeRemoteURLsControl:function(){var a=c.create("div",{className:"remoteURLsControl"});c.create("h3",{innerHTML:"Remote URLs - <smaller>one per line</smaller>"},a);var b={domNode:a,onChange:function(){}};b.input=c.create("textarea",{className:"urlInput",placeHolder:"http://paste.urls.here/example.bam",cols:25,rows:5,spellcheck:!1},a);var d="",e=function(){if(b.input.value.replace(/\s+/g,",")!=d){var a=dojo.trim(b.input.value),a=a.length?a.split(/\s+/):
[];b.onChange(a);d=b.input.value.replace(/\s+/g,",")}window.setTimeout(e,900)};window.setTimeout(e,900);c.create("div",{className:"connector",innerHTML:"&nbsp;"},a);return b},_makeResourceListControl:function(){return new r({dialog:this})},_makeTrackListControl:function(){var a=new p({browser:this.browser,fileDialog:this});return this.trackList=a}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(h,j,g){return h("dijit.form.RadioButton",
[j,g],{baseClass:"dijitRadio"})})},"dijit/form/CheckBox":function(){define("require,dojo/_base/declare,dojo/dom-attr,dojo/has,dojo/query,dojo/ready,./ToggleButton,./_CheckBoxMixin,dojo/text!./templates/CheckBox.html,dojo/NodeList-dom".split(","),function(h,j,g,i,f,e,d,c,b){i("dijit-legacy-requires")&&e(0,function(){h(["dijit/form/RadioButton"])});return j("dijit.form.CheckBox",[d,c],{templateString:b,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),
a=!0);this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked?this.value:!1},_setIconClassAttr:null,postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&f("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&f("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare",
"dojo/dom-attr","dojo/_base/event"],function(h,j,g){return h("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(g){this._set("readOnly",g);j.set(this.focusNode,"readOnly",g)},_setLabelAttr:void 0,_getSubmitValue:function(g){return null==g||""===g?"on":g},_setValueAttr:function(g){g=this._getSubmitValue(g);this._set("value",g);j.set(this.focusNode,"value",g)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));
j.set(this.focusNode,"value",this.value)},_onClick:function(i){return this.readOnly?(g.stop(i),!1):this.inherited(arguments)}})})},"url:dijit/form/templates/CheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><input\n\t \t${!nameAttrSetting} type="${type}" role="${type}" aria-checked="false" ${checkedAttrSetting}\n\t\tclass="dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point="focusNode"\n\t \tdata-dojo-attach-event="onclick:_onClick"\n/></div>\n',"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/_base/lang,dojo/query,../registry".split(","),
function(h,j,g,i,f,e,d){return j("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var c=[];e("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(f.hitch(this,function(b){b.name==this.name&&b.form==this.focusNode.form&&(b=d.getEnclosingWidget(b))&&c.push(b)}));return c},_setCheckedAttr:function(c){this.inherited(arguments);this._created&&c&&h.forEach(this._getRelatedWidgets(),f.hitch(this,function(b){b!=this&&b.checked&&b.set("checked",!1)}))},_getSubmitValue:function(c){return null==
c?"on":c},_onClick:function(c){if(this.checked||this.disabled)return i.stop(c),!1;return this.readOnly?(i.stop(c),h.forEach(this._getRelatedWidgets(),f.hitch(this,function(b){g.set(this.focusNode||this.domNode,"checked",b.checked)})),!1):this.inherited(arguments)}})})},"dojox/form/Uploader":function(){define("dojo/_base/kernel,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/connect,dojo/_base/window,dojo/dom-style,dojo/dom-geometry,dojo/dom-attr,dojo/dom-construct,dojo/dom-form,dijit,dijit/form/Button,dojox/form/uploader/Base,dojo/i18n!./nls/Uploader,dojo/text!./resources/Uploader.html".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m){h.experimental("dojox.form.Uploader");j("dojox.form.Uploader",[o,q],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:l.label,url:"",name:"uploadedfile",flashFieldName:"",uploadType:"form",showInput:"",_nameIndex:0,templateString:m,baseClass:"dijitUploader "+q.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);d.set(this.domNode,{overflow:"hidden",position:"relative"});
this._buildDisplay();b.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){if(this.showInput)this.displayInput=dojo.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(a){for(var b=0,c,d=[];c=a[b++];)c&&c.name&&d.push(c.name);this.displayInput.value=d.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""})},startup:function(){if(!this._buildInitialized)this._buildInitialized=
!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments)},onChange:function(){},onBegin:function(){},onProgress:function(){},onComplete:function(){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(){},upload:function(){},submit:function(a){a=a?a.tagName?a:this.getForm():this.getForm();this.upload(k.toObject(a))},reset:function(){delete this._files;this._disconnectButton();i.forEach(this._inputs,a.destroy,dojo);this._inputs=[];this._nameIndex=0;
this._createInput()},getFileList:function(){var a=[];this.supports("multiple")?i.forEach(this._files,function(b,c){a.push({index:c,name:b.name,size:b.size,type:b.type})},this):i.forEach(this._inputs,function(b,c){b.value&&a.push({index:c,name:b.value.substring(b.value.lastIndexOf("\\")+1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)})},this);return a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(){console.error("Uploader value is read only")},_setDisabledAttr:function(a){this.disabled!=
a&&this.inputNode&&(this.inherited(arguments),d.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:d.get(a,"width"),h:d.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15)));this._createInput()},_getFileFieldName:function(){return this.multiple&&this.supports("multiple")?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&
(d.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var c=this._getFileFieldName();this.focusNode=this.inputNode=a.create("input",{type:"file",name:c},this.domNode,"first");this.supports("multiple")&&this.multiple&&b.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);d.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(f.connect(this.inputNode,
"change",this,function(a){this._files=this.inputNode.files;this.onChange(this.getFileList(a));!this.supports("multiple")&&this.multiple&&this._createInput()}));if(-1<this.tabIndex)this.inputNode.tabIndex=this.tabIndex,this._cons.push(f.connect(this.inputNode,"focus",this,function(){this.titleNode.style.outline="1px dashed #ccc"})),this._cons.push(f.connect(this.inputNode,"blur",this,function(){this.titleNode.style.outline=""}))},_disconnectButton:function(){i.forEach(this._cons,f.disconnect);this._cons.splice(0,
this._cons.length)}});dojox.form.UploaderOrg=dojox.form.Uploader;var r=[dojox.form.UploaderOrg];dojox.form.addUploaderPlugin=function(a){r.push(a);j("dojox.form.Uploader",r,{})};return dojox.form.Uploader})},"dojox/form/uploader/Base":function(){define("dojo/dom-form,dojo/dom-style,dojo/dom-construct,dojo/dom-attr,dojo/has,dojo/_base/declare,dojo/_base/event,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin".split(","),function(h,j,g,i,f,e,d,c,b,a){f.add("FormData",function(){return!!window.FormData});
f.add("xhr-sendAsBinary",function(){var a=window.XMLHttpRequest&&new window.XMLHttpRequest;return a&&!!a.sendAsBinary});f.add("file-multiple",function(){return!!{"true":1,"false":1}[i.get(document.createElement("input",{type:"file"}),"multiple")]});return e("dojox.form.uploader.Base",[c,b,a],{getForm:function(){if(!this.form)for(var a=this.domNode;a&&a.tagName&&a!==document.body;){if("form"==a.tagName.toLowerCase()){this.form=a;break}a=a.parentNode}return this.form},getUrl:function(){if(this.uploadUrl)this.url=
this.uploadUrl;if(this.url)return this.url;if(this.getForm())this.url=this.form.action;return this.url},connectForm:function(){this.url=this.getUrl();if(!this._fcon&&this.getForm())this._fcon=!0,this.connect(this.form,"onsubmit",function(a){d.stop(a);this.submit(this.form)})},supports:function(a){switch(a){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return f("file-multiple");case "FormData":return f(a);case "sendAsBinary":return f("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},
getFileType:function(a){return a.substring(a.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(a){var b=Math.round(1E5*(a/1024))/1E5,c=Math.round(1E5*(a/1048576))/1E5,d=Math.round(1E5*(a/1073741824))/1E5,e=a;1<b&&(e=b.toFixed(1)+" kb");1<c&&(e=c.toFixed(1)+" mb");1<d&&(e=d.toFixed(1)+" gb");return{kb:b,mb:c,gb:d,bytes:a,value:e}}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(h,j,g){return j("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,_beforeFillContent:function(){if(this.widgetsInTemplate){var i=this._startupWidgets=g.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"});if(!i.isFulfilled())throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
this._attachTemplateNodes(i,function(f,e){return f[e]})}},startup:function(){h.forEach(this._startupWidgets,function(g){g&&!g._started&&g.startup&&g.startup()});this.inherited(arguments)}})})},"url:dojox/form/resources/Uploader.html":'<span class="dijit dijitReset dijitInline"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdojoAttachEvent="ondijitclick:_onClick"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdojoAttachPoint="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" dojoAttachPoint="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdojoAttachPoint="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><\!--no need to have this for Uploader \n\t<input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdojoAttachPoint="valueNode"\n/--\></span>\n',
"dojox/form/uploader/plugins/IFrame":function(){define("dojo/dom-construct,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/io/iframe,dojox/form/uploader/plugins/HTML5".split(","),function(h,j,g,i,f){j=j("dojox.form.uploader.plugins.IFrame",[],{force:"",postMixInProperties:function(){this.inherited(arguments);if(!this.supports("multiple")||"iframe"==this.force)this.uploadType="iframe",this.upload=this.uploadIFrame},uploadIFrame:function(e){var d,c=!1;this.getForm()?d=this.form:(d=h.place('<form enctype="multipart/form-data" method="post"></form>',
this.domNode),i.forEach(this._inputs,function(a){a.value&&d.appendChild(a)},this),c=!0);var b=this.getUrl();f.send({url:b,form:d,handleAs:"json",content:e,method:"POST",error:g.hitch(this,function(a){console.error("error parsing server result",a);c&&h.destroy(d);this.onError(a)}),load:g.hitch(this,function(a){c&&h.destroy(d);if(a.ERROR||a.error)this.onError(a);else this.onComplete(a)})})}});dojox.form.addUploaderPlugin(j);return j})},"dojo/io/iframe":function(){define("../_base/config,../_base/json,../_base/kernel,../_base/lang,../_base/xhr,../sniff,../_base/window,../dom,../dom-construct,../query,require,../aspect,../request/iframe".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q){g.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var e=q._iframeName,e=e.substring(0,e.lastIndexOf("_")),o=i.delegate(q,{create:function(){return o._frame=q.create.apply(q,arguments)},get:null,post:null,send:function(a){var b,d=f._ioSetArgs(a,function(){b&&b.cancel()},function(a){var c=null,a=a.ioArgs;try{var d=a.handleAs;"xml"===d||"html"===d?c=b.response.data:(c=b.response.text,"json"===d?c=j.fromJson(c):"javascript"===d&&(c=g.eval(c)))}catch(e){c=
e}return c},function(a,b){b.ioArgs._hasError=!0;return a}),e=d.ioArgs,k="GET",i=c.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&i&&(k="POST");a={method:k,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:i?null:a.content,data:i?a.content:null,timeout:a.timeout,ioArgs:e};if(a.method)a.method=a.method.toUpperCase();if(h.ioPublish&&g.publish&&!1!==e.args.ioPublish)var o=n.after(q,"_notifyStart",function(a){a.options.ioArgs===e&&(o.remove(),f._ioNotifyStart(d))},
!0);b=q(e.url,a,!0);e._callNext=b._callNext;b.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},_iframeOnload:d.global[e+"_onload"]});i.setObject("dojo.io.iframe",o);return o})},"dojo/request/iframe":function(){define("module,require,./watch,./util,./handlers,../_base/lang,../io-query,../query,../has,../dom,../dom-construct,../_base/window,../NodeList-dom".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n){function q(){return!this.isFulfilled()}function o(){return!!this._finished}
function l(a,b){if(!b)try{var d=a.options,g=r.doc(r._frame),k=d.handleAs;if("html"!==k){if("xml"===k)if("html"===g.documentElement.tagName.toLowerCase()){c("a",g.documentElement).orphan();var i=g.documentElement.innerText,i=i.replace(/>\s+</g,"><");a.text=e.trim(i)}else a.data=g;else a.text=g.getElementsByTagName("textarea")[0].value;f(a)}else a.data=g}catch(h){b=h}b?this.reject(b):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function m(){this._callNext()}
function r(a,b,c){var d=i.parseArgs(a,i.deepCreate(s,b),!0),a=d.url,b=d.options;if("GET"!==b.method&&"POST"!==b.method)throw Error(b.method+" not supported by dojo/request/iframe");if(!r._frame)r._frame=r.create(r._iframeName,u+"();");a=i.deferred(d,null,q,o,l,m);a._callNext=function(){if(!this._calledNext)this._calledNext=!0,r._currentDfd=null,r._fireNextRequest()};a._legacy=c;r._dfdQueue.push(a);r._fireNextRequest();g(a);return c?a:a.promise}var p=h.id.replace(/[\/\.\-]/g,"_"),u=p+"_onload";n.global[u]||
(n.global[u]=function(){var b=r._currentDfd;if(b){var c=a.byId(b.response.options.form)||b._tmpForm;if(c){for(var d=b._contentToClean,e=0;e<d.length;e++)for(var f=d[e],g=0;g<c.childNodes.length;g++){var i=c.childNodes[g];if(i.name===f){k.destroy(i);break}}b._originalAction&&c.setAttribute("action",b._originalAction);if(b._originalMethod)c.setAttribute("method",b._originalMethod),c.method=b._originalMethod;if(b._originalTarget)c.setAttribute("target",b._originalTarget),c.target=b._originalTarget}b._tmpForm&&
(k.destroy(b._tmpForm),delete b._tmpForm);b._finished=!0}else r._fireNextRequest()});var s={method:"POST"};r.create=function(a,c,d){if(n.global[a])return n.global[a];if(n.global.frames[a])return n.global.frames[a];d||(b("config-useXDomain")&&!b("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),d=b("config-dojoBlankHtmlUrl")||
j.toUrl("dojo/resources/blank.html"));c=k.place('<iframe id="'+a+'" name="'+a+'" src="'+d+'" onload="'+c+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',n.body());return n.global[a]=c};r.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=n.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(n.doc.frames[b]&&n.doc.frames[b].document)return n.doc.frames[b].document}return null};
r.setSrc=function(a,b,c){a=n.global.frames[a.name];if(a.contentWindow)a=a.contentWindow;try{c?a.location.replace(b):a.location=b}catch(d){}};r._iframeName=p+"_IoIframe";r._notifyStart=function(){};r._dfdQueue=[];r._currentDfd=null;r._fireNextRequest=function(){var b;try{if(!r._currentDfd&&r._dfdQueue.length){do b=r._currentDfd=r._dfdQueue.shift();while(b&&(b.canceled||b.isCanceled&&b.isCanceled())&&r._dfdQueue.length);if(!b||b.canceled||b.isCanceled&&b.isCanceled())r._currentDfd=null;else{var c=b.response,
f=c.options,g=b._contentToClean=[],h=a.byId(f.form),j=i.notify,l=f.data||null,m;!b._legacy&&"POST"===f.method&&!h?h=b._tmpForm=k.create("form",{name:p+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},n.body()):"GET"===f.method&&h&&-1<c.url.indexOf("?")&&(m=c.url.slice(c.url.indexOf("?")+1),l=e.mixin(d.queryToObject(m),l));if(h){if(!b._legacy){var o=h;do o=o.parentNode;while(o&&o!==n.doc.documentElement);if(!o)h.style.position="absolute",h.style.left="-1000px",h.style.top="-1000px",
n.body().appendChild(h);if(!h.name)h.name=p+"_form"}if(l){var o=function(a,b){k.create("input",{type:"hidden",name:a,value:b},h);g.push(a)},q;for(q in l){var u=l[q];if(e.isArray(u)&&1<u.length)for(m=0;m<u.length;m++)o(q,u[m]);else h[q]?h[q].value=u:o(q,u)}}var s=h.getAttributeNode("action"),z=h.getAttributeNode("method"),C=h.getAttributeNode("target");if(c.url)b._originalAction=s?s.value:null,s?s.value=c.url:h.setAttribute("action",c.url);if(b._legacy){if(!z||!z.value)z?z.value=f.method:h.setAttribute("method",
f.method)}else b._originalMethod=z?z.value:null,z?z.value=f.method:h.setAttribute("method",f.method);b._originalTarget=C?C.value:null;C?C.value=r._iframeName:h.setAttribute("target",r._iframeName);h.target=r._iframeName;j&&j.emit("send",c,b.promise.cancel);r._notifyStart(c);h.submit()}else{f="";if(c.options.data)f=c.options.data,"string"!==typeof f&&(f=d.objectToQuery(f));o=c.url+(-1<c.url.indexOf("?")?"&":"?")+f;j&&j.emit("send",c,b.promise.cancel);r._notifyStart(c);r.setSrc(r._frame,o,!0)}}}}catch(H){b.reject(H)}};
i.addCommonMethods(r,["GET","POST"]);return r})},"dojox/form/uploader/plugins/HTML5":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo"],function(h,j,g,i){h=h("dojox.form.uploader.plugins.HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(f){this.upload(f[0])})},_drop:function(f){i.stopEvent(f);this._files=
f.dataTransfer.files;this.onChange(this.getFileList())},upload:function(f){this.onBegin(this.getFileList());this.supports("FormData")?this.uploadWithFormData(f):this.supports("sendAsBinary")&&this.sendAsBinary(f)},addDropTarget:function(f,e){e||(this.connect(f,"dragenter",i.stopEvent),this.connect(f,"dragover",i.stopEvent),this.connect(f,"dragleave",i.stopEvent));this.connect(f,"drop","_drop")},sendAsBinary:function(f){if(this.getUrl()){var e="---------------------------"+(new Date).getTime(),d=this.createXhr();
d.setRequestHeader("Content-Type","multipart/form-data; boundary="+e);if(f=this._buildRequestBody(f,e))d.sendAsBinary(f);else this.onError(this.errMsg)}else console.error("No upload url found.",this)},uploadWithFormData:function(f){if(this.getUrl()){var e=new FormData,d=this._getFileFieldName();g.forEach(this._files,function(b){e.append(d,b)},this);if(f)for(var c in f)e.append(c,f[c]);this.createXhr().send(e)}else console.error("No upload url found.",this)},_xhrProgress:function(f){if(f.lengthComputable){var e=
{bytesLoaded:f.loaded,bytesTotal:f.total,type:f.type,timeStamp:f.timeStamp};"load"==f.type?(e.percent="100%",e.decimal=1):(e.decimal=f.loaded/f.total,e.percent=Math.ceil(100*(f.loaded/f.total))+"%");this.onProgress(e)}},createXhr:function(){var f=new XMLHttpRequest,e;f.upload.addEventListener("progress",j.hitch(this,"_xhrProgress"),!1);f.addEventListener("load",j.hitch(this,"_xhrProgress"),!1);f.addEventListener("error",j.hitch(this,function(d){this.onError(d);clearInterval(e)}),!1);f.addEventListener("abort",
j.hitch(this,function(d){this.onAbort(d);clearInterval(e)}),!1);f.onreadystatechange=j.hitch(this,function(){if(4===f.readyState){clearInterval(e);try{this.onComplete(JSON.parse(f.responseText.replace(/^\{\}&&/,"")))}catch(d){console.error("Error parsing server result:",d),console.error(f.responseText),this.onError("Error parsing server result:",d)}}});f.open("POST",this.getUrl());e=setInterval(j.hitch(this,function(){}),250);return f},_buildRequestBody:function(f,e){var d="",e="--"+e,c=[],b=this._files,
a=this._getFileFieldName();g.forEach(b,function(b,f){var g=b.fileName,k;try{k=b.getAsBinary()+"\r\n",d+=e+"\r\n",d+="Content-Disposition: form-data; ",d+='name="'+a+'"; ',d+='filename="'+g+'"\r\n',d+="Content-Type: "+this.getMimeType()+"\r\n\r\n",d+=k}catch(i){c.push({index:f,name:g})}},this);c.length&&c.length>=b.length&&(this.onError({message:this.errMsg,filesInError:c}),d=!1);if(!d)return!1;if(f)for(var k in f)d+=e+"\r\n",d+="Content-Disposition: form-data; ",d+='name="'+k+'"\r\n\r\n',d+=f[k]+
"\r\n";return d+=e+"--\r\n"}});dojox.form.addUploaderPlugin(h);return h})},"dojo/main":function(){define("./_base/kernel,./has,require,./sniff,./_base/lang,./_base/array,./_base/config,./ready,./_base/declare,./_base/connect,./_base/Deferred,./_base/json,./_base/Color,./has!dojo-firebug?./_firebug/firebug,./_base/browser,require".split(","),function(h,j,g,i,f,e,d,c){d.isDebug&&g(["./_firebug/firebug"]);var b=d.require;b&&(b=e.map(f.isArray(b)?b:[b],function(a){return a.replace(/\./g,"/")}),h.isAsync?
g(b):c(1,function(){g(b)}));return h})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready,./kernel,./connect,./unload,./window,./event,./html,./NodeList,../query,./xhr,./fx".split(","),function(h){return h})},"JBrowse/View/FileDialog/TrackList/BAMDriver":function(){define(["dojo/_base/declare","./_IndexedFileDriver"],function(h,j){return h(j,{name:"BAM",storeType:"JBrowse/Store/SeqFeature/BAM",fileExtension:"bam",fileConfKey:"bam",fileUrlConfKey:"urlTemplate",
indexExtension:"bai",indexConfKey:"bai",indexUrlConfKey:"baiUrlTemplate"})})},"JBrowse/View/FileDialog/TrackList/_IndexedFileDriver":function(){define(["dojo/_base/declare","JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(h,j,g,i){var f=0;return h(null,{tryResource:function(e,d){if(d.type==this.fileExtension){var c=j.basename(d.file?d.file.name:d.url?d.url:"");if(!c)return!1;for(var b in e){var a=e[b];if(j.basename(a[this.indexConfKey]?a[this.indexConfKey].url||a[this.indexConfKey].blob.name:
a[this.indexUrlConfKey],"."+this.indexExtension)==c)return a[this.fileConfKey]=this._makeBlob(d),!0}c=j.basename(c,"."+this.fileExtension);for(b in e)if(a=e[b],j.basename(a[this.indexConfKey]?a[this.indexConfKey].url||a[this.indexConfKey].blob.name:a[this.indexUrlConfKey],"."+this.indexExtension)==c)return a[this.fileConfKey]=this._makeBlob(d),!0;b=this.name+"_"+c+"_"+f++;e[b]={type:this.storeType,name:b,fileBasename:c};e[b][this.fileConfKey]=this._makeBlob(d);return!0}if(d.type==this.indexExtension){c=
j.basename(d.file?d.file.name:d.url?d.url:"","."+this.indexExtension);if(!c)return!1;for(b in e)if(a=e[b],j.basename(a[this.fileConfKey]?a[this.fileConfKey].url||a[this.fileConfKey].blob.name:a[this.fileUrlConfKey])==c)return a[this.indexConfKey]=this._makeBlob(d),!0;for(b in e)if(a=e[b],j.basename(a[this.fileConfKey]?a[this.fileConfKey].url||a[this.fileConfKey].blob.name:a[this.fileUrlConfKey],"."+this.fileExtension)==c)return a[this.indexConfKey]=this._makeBlob(d),!0;b=this.name+"_"+j.basename(c,
"."+this.fileExtension)+"_"+f++;e[b]={name:b,type:this.storeType};e[b][this.indexConfKey]=this._makeBlob(d);return!0}return!1},finalizeConfiguration:function(e){var d={},c=0,b={},a=0,f;for(f in e){var g=e[f];if((g.bai||g[this.indexUrlConfKey])&&!g.bam&&!g[this.fileUrlConfKey])c++,d[f]=g;else if((g.bam||g[this.fileUrlConfKey])&&!g.bai&&!g[this.indexUrlConfKey])a++,b[f]=g}if(1==a&&1==c)for(var i in d)for(var h in b){d[i][this.indexUrlConfKey]&&(b[h][this.indexUrlConfKey]=d[i][this.indexUrlConfKey]);
if(d[i].bai)b[h].bai=d[i].bai;delete e[i]}for(i in d)delete e[i];for(h in b)e[h][this.fileUrlConfKey]||delete e[h]},_makeBlob:function(e){e=e.file?new g(e.file):e.url?new i(e.url):null;if(!e)throw"unknown resource type";return e},confIsValid:function(e){return(e[this.fileConfKey]||e[this.fileUrlConfKey])&&(e[this.indexConfKey]||e[this.indexUrlConfKey]||e[this.fileUrlConfKey])}})})},"JBrowse/Model/FileBlob":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","JBrowse/Util/TextIterator"],
function(h,j,g,i){var f=h(null,{constructor:function(e){this.blob=e;this.totalSize=this.size=e.size},slice:function(e,d){var c=this.blob.mozSlice||this.blob.slice||this.blob.webkitSlice;return new f(d?c.call(this.blob,e,e+d):c.call(this.blob,e))},fetchLines:function(e,d,c){this.fetch(function(b){for(var b=new Uint8Array(b),b=new i.FromBytes({bytes:b,returnPartialRecord:!this.end}),a;a=b.getline();)e(a);d()},c)},readLines:function(e,d,c,b,a){var f=0!=e;this.slice(e,d).fetchLines(function(){f||c();
f=!1},b,a)},read:function(e,d,c,b){this.slice(e,d).fetch(c,b)},fetch:function(e){var d=this,c=new FileReader;c.onloadend=function(){e(d._stringToBuffer(c.result))};c.readAsBinaryString(this.blob)},_stringToBuffer:function(e){if(!e||!g("typed-arrays"))return null;for(var d=new Uint8Array(e.length),c=0;c<d.length;c++)d[c]=e.charCodeAt(c);return d.buffer}});return f})},"JBrowse/Util/TextIterator":function(){define([],function(){var h=function(h){this.bytes=h.bytes;this.offset=h.offset||0;this.length=
h.length||this.bytes.length;this._recordSeparator=(h.inputRecordSeparator||"\n").charCodeAt(0);this.returnPartialRecord=h.returnPartialRecord};h.prototype.getOffset=function(){return this.offset};h.prototype.getline=function(){for(var h=this.bytes,g=this.offset,i=[];g<this.length;){var f=h[g],e,d;if(128>f){if(i.push(String.fromCharCode(f)),g++,f==this._recordSeparator)return this.offset=g,i.join("")}else 191<f&&224>f?(e=h[g+1],i.push(String.fromCharCode((f&31)<<6|e&63)),g+=2):(e=h[g+1],d=h[g+2],i.push(String.fromCharCode((f&
15)<<12|(e&63)<<6|d&63)),g+=3)}this.offset=g;return this.returnPartialRecord?i.join(""):null};return{FromBytes:h}})},"JBrowse/Model/XHRBlob":function(){define(["dojo/_base/declare","JBrowse/Model/FileBlob","JBrowse/Store/RemoteBinaryFile"],function(h,j,g){var i=new g({name:"XHRBlob",maxSize:1E8}),f=h(j,{constructor:function(e,d,c,b){b||("object"===typeof d?(b=d,d=void 0):b={});this.url=e;this.start=d||0;if(c)this.end=c;this.opts=b},slice:function(e,d){var c=this.start,b=this.end,c=c&&e?c+e:e||c;return new f(this.url,
c,d&&c?c+d-1:b||d-1,this.opts)},fetch:function(e,d){i.get({url:this.url,start:this.start,end:this.end,success:e,failure:d})},read:function(e,d,c,b){e=this.start+e;i.get({url:this.url,start:e,end:e+d,success:c,failure:b})}});return f})},"JBrowse/Store/RemoteBinaryFile":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,JBrowse/has,JBrowse/Util,JBrowse/Store/LRUCache,jszlib/arrayCopy".split(","),function(h,j,g,i,f,e,d){var c=f.fastDeclare({constructor:function(b){j.mixin(this,b)},
toString:function(){return this.url+" (bytes "+this.start+".."+this.end+")"},toUniqueString:function(){return this.url+" (bytes "+this.start+".."+this.end+")"}});return h(null,{constructor:function(b){this.name=b.name;this._arrayCopyCount=this._fetchCount=0;this.minChunkSize="minChunkSize"in b?b.minChunkSize:32768;this.chunkCache=new e({name:b.name+" chunk cache",fillCallback:dojo.hitch(this,"_fetch"),maxSize:b.maxSize||1E7});this.totalSizes={}},_escapeRegExp:function(b){return b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")},_relevantExistingChunks:function(b,a,c){if(!c)return[];a=a||0;b=this.chunkCache.query(RegExp("^"+this._escapeRegExp(b+" (bytes")));g.forEach(b,function(a){if(a.size){if(!a.key.start)a.key.start=0;if(!a.key.end)a.key.end=a.key.start+(a.size||a.value.byteLength)}});b=b.sort(function(a,b){return a.key.start-b.key.start||b.key.end-b.key.start-(a.key.end-a.key.start)});return g.filter(b,function(b){return!(b.key.start>c||b.key.end<a)},this)},_fetchChunks:function(b,a,d,e,f){a=a||0;"number"!=typeof d&&
this.totalSizes[b]?d=this.totalSizes[b]-1:d>=this.totalSizes[b]&&(d=this.totalSizes[b]-1);var i=this._relevantExistingChunks(b,a,d);this._log("existing",i);var h=[];if("number"!=typeof d)h.push({key:new c({url:b,start:0,end:void 0})});else for(;a<=d;a=h[h.length-1].key.end+1)i[0]&&i[0].key.start<=a?h.push(i.shift()):h.push({key:new c({url:b,start:a,end:i[0]?i[0].key.start-1:d})});g.forEach(h,function(a){if(!a.value&&(a=a.key,a.start=Math.floor(a.start/this.minChunkSize)*this.minChunkSize,a.end))a.end=
Math.ceil((a.end+1)/this.minChunkSize)*this.minChunkSize-1},this);var h=this._optimizeGoldenPath(h),j=g.filter(h,function(a){return!a.value});this._log("needed",j);if(j.length){var r=0;g.forEach(j,function(a){this.chunkCache.get(a.key,function(b,c){a.value=b;c?f(c):++r==j.length&&e(h)})},this)}else e(h)},_optimizeGoldenPath:function(b){for(var a=[b[0]],c=1;c<b.length;c++){var d=b[c],e=a[a.length-1];d.value?d.key.end>e.key.end&&a.push(d):e.value?a.push(d):e.key.end=d.key.end}return a},_fetch:function(b,
a,c,d){this._log("fetch",b.url,b.start,b.end);this._fetchCount++;var c=c||1,e=new XMLHttpRequest,g,h=b.url;i("safari")&&b.end&&(h=h+(-1<h.indexOf("?")?"&":"?")+"safari_range="+b.start+"-"+b.end);e.open("GET",h,!0);e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined");b.end&&(e.setRequestHeader("Range","bytes="+b.start+"-"+b.end),g=b.end-b.start+1);e.responseType="arraybuffer";var j=function(c){if(c){if(!b.start)b.start=0;if(!b.end)b.end=b.start+c.byteLength}var d=/no-cache/.test(e.getResponseHeader("Cache-Control"))||
/no-cache/.test(e.getResponseHeader("Pragma"));a(c,null,{nocache:d})};e.onreadystatechange=dojo.hitch(this,function(){if(4==e.readyState)if(f.isElectron()||200==e.status||206==e.status){this.totalSizes[b.url]=function(){var a=e.getResponseHeader("Content-Range");if(a)return(a=a.match(/\/(\d+)$/))?parseInt(a[1]):void 0}();var i=e.response||e.mozResponseArrayBuffer||function(){try{var f=e.responseText;g&&g!=f.length&&(!d||f.length!=d)?3==c?a(null,this._errorString(e,h)):this._fetch(b,a,c+1,f.length):
j(this._stringToBuffer(e.responseText))}catch(i){console.error(""+i,i.stack,i),j(new ArrayBuffer)}}.call(this);i&&j(i)}else if(3==c)a(null,this._errorString(e,h));else return this._fetch(b,a,c+1);return null});e.send("")},_errorString:function(b,a){return b.status?b.status+" ("+b.statusText+") when attempting to fetch "+a:"Unable to fetch "+a},get:function(b){if(i("typed-arrays")){this._log("get",b.url,b.start,b.end);var a=b.start||0,c=b.end;if(a&&!c)throw"cannot specify a fetch start without a fetch end";
if(0>a)throw"start cannot be negative!";if(0>c)throw"end cannot be negative!";if(!b.success)throw Error("success callback required");if(!b.failure)throw Error("failure callback required");this._fetchChunks(b.url,a,c,dojo.hitch(this,function(d){var e=this.totalSizes[b.url];this._assembleChunks(a,c,function(a){if("number"==typeof e)a.fileSize=e;try{b.success.call(this,a)}catch(c){console.error(""+c,c.stack,c),b.failure&&b.failure(c)}},b.failure,d)}),b.failure)}else(b.failure||function(a){console.error(a)})("This web browser lacks support for JavaScript typed arrays.")},
_assembleChunks:function(b,a,c,e,f){this._log("golden path",f);var h;if(i("typed-arrays")){if(1==f.length&&f[0].key.start==b&&(!a||f[0].key.end==a))h=f[0].value;else{e=Math.max.apply(Math,g.map(f,function(a){return a.key.start+((a.value||{}).byteLength||0)-1}));a&&(e=Math.min(e,a));var j=e-b+1;h=new Uint8Array(j);var m=0;g.forEach(f,function(a){if(a.value&&a.value.byteLength){var c=new Uint8Array(a.value),a=b+m-a.key.start;0>a&&this._error("chunking error");var e=Math.min(c.byteLength-a,j-m);this._log("arrayCopy",
c,a,h,m,e);d(c,a,h,m,e);this._arrayCopyCount++;m+=e}},this);h=h.buffer}c(h)}else e("Web browser does not support typed arrays")},_stringToBuffer:function(b){if(!b||"function"!=typeof Uint8Array)return null;for(var a=new Uint8Array(b.length),c=0;c<a.length;c++)a[c]=b.charCodeAt(c);return a.buffer},_log:function(){},_warn:function(){console.warn.apply(console,arguments)},_error:function(){console.error.apply(console,arguments);throw"file error";}})})},"JBrowse/Store/LRUCache":function(){define(["dojo/_base/declare",
"dojo/_base/array","JBrowse/Util","JBrowse/Digest/Crc32"],function(h,j,g,i){return h(null,{constructor:function(f){this.fill=f.fillCallback;this.maxSize=f.maxSize||1E6;this.verbose=f.verbose;this.name=f.name||"LRUcache";this._size=f.sizeFunction||this._size;this._keyString=f.keyFunction||this._keyString;this.size=this.itemCount=0;this._cacheByKey={};this._cacheNewest=this._cacheOldest=null;this._inProgressFills={}},get:function(f,e){var d=this._keyString(f),c=this._cacheByKey[d];c?(this._log("hit",
d),this.touchRecord(c),window.setTimeout(function(){e(c.value)},1)):(this._log("miss",d),this._attemptFill(f,d,e))},query:function(f){var e=[],d=this._cacheByKey,c;for(c in d)f.test(c)&&d.hasOwnProperty(c)&&e.push(d[c]);return e},forEach:function(f,e){e||(e=this);for(var d=0,c=this._cacheNewest;c;c=c.next)f.call(e,c,d++)},some:function(f,e){e||(e=this);for(var d=0,c=this._cacheNewest;c;c=c.next)if(f.call(e,c,d++))return!0;return!1},touch:function(f){this.touchRecord(this._cacheByKey[this._keyString(f)])},
touchRecord:function(f){f&&this._cacheNewest!==f&&(this._llRemove(f),this._llPush(f))},_llRemove:function(f){if(f.prev)f.prev.next=f.next;if(f.next)f.next.prev=f.prev;if(this._cacheNewest===f)this._cacheNewest=f.prev;if(this._cacheOldest===f)this._cacheOldest=f.next;f.prev=null;f.next=null},_llPush:function(f){if(this._cacheNewest)this._cacheNewest.next=f,f.prev=this._cacheNewest;this._cacheNewest=f;if(!this._cacheOldest)this._cacheOldest=f},_attemptFill:function(f,e,d){if(this.fill){var c=this._inProgressFills[e]=
this._inProgressFills[e]||{callbacks:[],running:!1};c.callbacks.push(d);if(!c.running)c.running=!0,this.fill(f,dojo.hitch(this,function(a,b,c,d,e,f){delete this._inProgressFills[a];c.running=!1;if(d&&(!f||!f.nocache))this._log("fill",a),this.set(b,d);j.forEach(c.callbacks,function(a){try{a.call(this,d,e)}catch(b){console.error(""+b,b.stack,b)}},this)},e,f,c))}else try{d(void 0)}catch(b){console.error(b)}},set:function(f,e){var d=this._keyString(f);if(!this._cacheByKey[d]){var c={value:e,key:f,keyString:d,
size:this._size(e)};c.size>this.maxSize?this._warn("cannot fit",d,"("+g.addCommas(c.size)+" > "+g.addCommas(this.maxSize)+")"):(this._log("set",d,c,this.size),this._prune(c.size),this._cacheByKey[d]=c,this._llPush(c),this.size+=c.size,this.itemCount++)}},_keyString:function(f){return"object"==typeof f&&"function"==typeof f.toUniqueString?f.toUniqueString():i.objectFingerprint(f)},_size:function(f){var e=typeof f,d=0;if("object"==e&&null!==e){e=typeof f.size;if("number"==e)return e;if("function"==
e)return f.size();if(f.byteLength)return f.byteLength;for(var c in f)f.hasOwnProperty(c)&&(d+=this._size(f[c]));return d}return"string"==e?f.length:1},_prune:function(f){for(;this.size+(f||0)>this.maxSize;){var e=this._cacheOldest;if(e)this._log("evict",e),this._llRemove(e),delete this._cacheByKey[e.keyString],delete e.next,delete e.prev,this.itemCount--,this.size-=e.size;else{this._error("eviction error",this.size,f,this);break}}},_log:function(){this.verbose&&console.log.apply(console,arguments)},
_warn:function(){console.warn.apply(console,arguments)},_error:function(){console.error.apply(console,arguments)}})})},"JBrowse/Digest/Crc32":function(){define([],function(){var h={crc32Table:"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",
stringToBytes:function(h){for(var g,i,f=[],e=0;e<h.length;e++){g=h.charCodeAt(e);i=[];do i.push(g&255),g>>=8;while(g);f=f.concat(i.reverse())}return f},crc32:function(j,g){var i=h.stringToBytes(j);g==window.undefined&&(g=0);for(var f=0,f=0,e=h.crc32Table,g=g^-1,d=0,c=i.length;d<c;d++)f=(g^i[d])&255,f="0x"+e.substr(9*f,8),g=g>>>8^f;g^=-1;0>g&&(g+=4294967296);return g},objectFingerprint:function(j){var g=0;if("object"==typeof j)for(var i in j)g=h.crc32(""+h.objectFingerprint(i),g),g=h.crc32(""+h.objectFingerprint(j[i]),
g);else g=h.crc32(""+j,g);return g}};return h})},"jszlib/arrayCopy":function(){define([],function(){try{new Uint8Array(1)}catch(h){}return function(h,g,i,f,e){if(0!=e){if(h){if(!i)throw"Undef dest";}else throw"Undef src";if(0==g&&e==h.length)i.set(h,f);else if(h.subarray)h=h.subarray(g,g+e),i.set(h,f);else if(1==h.BYTES_PER_ELEMENT&&100<e)h=new Uint8Array(h.buffer,h.byteOffset+g,e),i.set(h,f);else for(var d=0;d<e;++d)i[f+d]=h[g+d]}}})},"JBrowse/View/FileDialog/TrackList/BigWigDriver":function(){define(["dojo/_base/declare",
"JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(h,j,g,i){var f=0;return h(null,{storeType:"JBrowse/Store/SeqFeature/BigWig",tryResource:function(e,d){if("bigwig"==d.type){var c=j.basename(d.file?d.file.name:d.url?d.url:"",[".bw",".bigwig"]);if(!c)return!1;var b="BigWig_"+c+"_"+f++;e[b]={fileBasename:c,type:this.storeType,blob:this._makeBlob(d),name:b};return!0}return!1},finalizeConfiguration:function(){},_makeBlob:function(e){e=e.file?new g(e.file):e.url?new i(e.url):null;
if(!e)throw"unknown resource type";return e},confIsValid:function(e){return e.blob||e.urlTemplate}})})},"JBrowse/View/FileDialog/TrackList/GFF3Driver":function(){define(["dojo/_base/declare","JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(h,j,g,i){var f=0;return h(null,{storeType:"JBrowse/Store/SeqFeature/GFF3",tryResource:function(e,d){if("gff3"==d.type){var c=j.basename(d.file?d.file.name:d.url?d.url:"",[".gff3",".gff"]);if(!c)return!1;var b="GFF3_"+c+"_"+f++;e[b]={type:this.storeType,
fileBasename:c,blob:this._makeBlob(d),name:b};return!0}return!1},finalizeConfiguration:function(){},_makeBlob:function(e){e=e.file?new g(e.file):e.url?new i(e.url):null;if(!e)throw"unknown resource type";return e},confIsValid:function(e){return e.blob||e.urlTemplate}})})},"JBrowse/View/FileDialog/TrackList/GTFDriver":function(){define(["dojo/_base/declare","JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(h,j,g,i){var f=0;return h(null,{storeType:"JBrowse/Store/SeqFeature/GTF",
tryResource:function(e,d){if("gtf"==d.type){var c=j.basename(d.file?d.file.name:d.url?d.url:"");if(!c)return!1;c="GTF_"+c+"_"+f++;e[c]={type:this.storeType,blob:this._makeBlob(d),name:c};return!0}return!1},finalizeConfiguration:function(){},_makeBlob:function(e){e=e.file?new g(e.file):e.url?new i(e.url):null;if(!e)throw"unknown resource type";return e},confIsValid:function(e){return e.blob||e.urlTemplate}})})},"JBrowse/View/FileDialog/TrackList/VCFTabixDriver":function(){define(["dojo/_base/declare",
"./_IndexedFileDriver"],function(h,j){return h(j,{name:"VCF+Tabix",storeType:"JBrowse/Store/SeqFeature/VCFTabix",fileExtension:"vcf.gz",fileConfKey:"file",fileUrlConfKey:"urlTemplate",indexExtension:"tbi",indexConfKey:"tbi",indexUrlConfKey:"tbiUrlTemplate"})})},"JBrowse/View/FileDialog/ResourceList":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/dom-construct","dijit/form/Select"],function(h,j,g,i){return h(null,{constructor:function(f){this.dialog=f.dialog;this.domNode=g.create("div",
{className:"resourceList"});this._updateView()},clearLocalFiles:function(){this._resources=j.filter(this._resources||[],function(f){return!f.file});this._notifyChange()},_notifyChange:function(){this.onChange(j.map(this._resources||[],function(f){var e={};if(f.file)e.file=f.file;if(f.url)e.url=f.url;e.type=f.type.get("value");return e}))},_addResources:function(f){var e={},f=(this._resources||[]).concat(f);this._resources=j.filter(f.reverse(),function(d){d=d.file&&d.file.name||d.url;return e[d]?!1:
e[d]=!0}).reverse();this._updateView();this._notifyChange()},addLocalFiles:function(f){this._addResources(j.map(f,function(e){return{file:e}}))},clearURLs:function(){this._resources=j.filter(this._resources||[],function(f){return!f.url});this._notifyChange()},addURLs:function(f){this._addResources(j.map(f,function(e){return{url:e}}))},onChange:function(){},_updateView:function(){var f=this.domNode;g.empty(f);g.create("h3",{innerHTML:"Files and URLs"},f);if((this._resources||[]).length){var e=g.create("table",
{},f);j.forEach(this._resources,function(d){var c=this,b=g.create("tr",{},e),a=d.url||d.file.name,f=new i({options:[{label:'<span class="ghosted">file type?</span>',value:null},{label:"GFF3",value:"gff3"},{label:"GTF",value:"gtf"},{label:"BigWig",value:"bigwig"},{label:"BAM",value:"bam"},{label:"BAM index",value:"bai"},{label:"FASTA",value:"fasta"},{label:"FASTA index",value:"fai"},{label:"VCF+bgzip",value:"vcf.gz"},{label:"Tabix index",value:"tbi"}],value:this.guessType(a),onChange:function(){c._rememberedTypes=
c._rememberedTypes||{};c._rememberedTypes[a]=this.get("value");c._notifyChange()}});f.placeAt(dojo.create("td",{width:"4%"},b));d.type=f;dojo.create("td",{width:"1%",innerHTML:'<div class="'+(d.file?"dijitIconFile":"jbrowseIconLink")+'"></div>'},b);dojo.create("td",{innerHTML:a},b);dojo.create("td",{width:"1%",innerHTML:'<div class="dijitIconDelete"></div>',onclick:function(a){a.preventDefault&&a.preventDefault();c.deleteResource(d)}},b)},this)}else g.create("div",{className:"emptyMessage",innerHTML:"Add files and URLs using the controls above."},
f);g.create("div",{className:"connector",innerHTML:"&nbsp;"},f)},deleteResource:function(f){this._resources=j.filter(this._resources||[],function(e){return e!==f});this._updateView();this._notifyChange()},guessType:function(f){return(this._rememberedTypes||{})[f]||(/\.bam$/i.test(f)?"bam":/\.bai$/i.test(f)?"bai":/\.gff3?$/i.test(f)?"gff3":/\.gtf?$/i.test(f)?"gtf":/\.(bw|bigwig)$/i.test(f)?"bigwig":/\.(fa|fasta)$/i.test(f)?"fasta":/\.fai$/i.test(f)?"fai":/\.vcf\.gz$/i.test(f)?"vcf.gz":/\.tbi$/i.test(f)?
"tbi":null)}})})},"JBrowse/View/FileDialog/TrackList":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,JBrowse/Util,dijit/form/TextBox,dijit/form/Select,dijit/form/Button,JBrowse/View/TrackConfigEditor".split(","),function(h,j,g,i,f,e,d,c){return h(null,{constructor:function(b){this.browser=b.browser;this.fileDialog=b.fileDialog;this.domNode=g.create("div",{className:"trackList",innerHTML:"track list!"});this._updateDisplay()},getTrackConfigurations:function(){return i.dojof.values(this.trackConfs||
{})},update:function(b){this.storeConfs={};this.trackConfs={};this._makeStoreConfs(b);this._makeTrackConfs();this._updateDisplay()},_makeStoreConfs:function(b){this.storeConfs=this.storeConfs||{};for(var a=this.fileDialog.getFileTypeDrivers(),c=0;b.length&&b.length!=c;)b=j.filter(b,function(b){return!j.some(a,function(a){return a.tryResource(this.storeConfs,b)},this)},this),c=b.length;j.forEach(a,function(a){a.finalizeConfiguration(this.storeConfs)},this);b.length&&console.warn("Not all resources could be assigned to tracks.  Unused resources:",
b)},_makeTrackConfs:function(){var b=this.browser.getTrackTypes().trackTypeDefaults,a={},c;for(c in this.storeConfs)if(this.storeConfs[c].fileBasename){var d=this.storeConfs[c].fileBasename.replace(/\.(coverage|density|histograms?)$/,"");d!=this.storeConfs[c].fileBasename&&(a[d]={store:this.storeConfs[c],name:c,used:!1})}for(c in this.storeConfs){var d=this.storeConfs[c],e=b[d.type]||"JBrowse/View/Track/CanvasFeatures";this.trackConfs=this.trackConfs||{};this.trackConfs[c]={store:this.storeConfs[c],
label:c,key:c.replace(/_\d+$/,"").replace(/_/g," "),type:e,category:"Local tracks",autoscale:"local"};if(d=a[d.fileBasename])this.trackConfs[c].histograms={store:d.store,description:d.store.fileBasename},d.used=!0}for(c in a)a[c].used&&delete this.trackConfs[a[c].name]},_delete:function(b){delete (this.trackConfs||{})[b];this._updateDisplay()},_updateDisplay:function(){var b=this;g.empty(this.domNode);g.create("h3",{innerHTML:"New Tracks"},this.domNode);if(i.dojof.keys(this.trackConfs||{}).length){var a=
g.create("table",{innerHTML:'<tr class="head"><th>Name</th><th>Display</th><th></th></tr>'},this.domNode),k=this.browser.getTrackTypes(),h;for(h in this.trackConfs){var q=this.trackConfs[h],o=g.create("tr",{},a);(new f({value:q.key,onChange:function(){q.key=this.get("value")}})).placeAt(g.create("td",{className:"name"},o));(new e({options:j.map(k.knownTrackTypes,function(a){return{label:k.trackTypeLabels[a]||a.replace("JBrowse/View/Track/","").replace(/\//g," "),value:a}}),value:q.type,onChange:function(){q.type=
this.get("value")}})).placeAt(g.create("td",{className:"type"},o));(new d({className:"edit",title:"edit configuration",innerHTML:"Edit Configuration",onClick:function(){(new c(q)).show(function(a){dojo.mixin(q,a.conf);b._updateDisplay()})}})).placeAt(g.create("td",{className:"edit"},o));dojo.create("td",{width:"1%",innerHTML:'<div class="dijitIconDelete"></div>',onclick:function(a){a.preventDefault&&a.preventDefault();b._delete(h)}},o);g.create("td",{className:"type"},o)}}else g.create("div",{className:"emptyMessage",
innerHTML:"None"},this.domNode)}})})},"JBrowse/View/FastaFileDialog":function(){define("dojo/_base/declare,dijit/form/Button,dijit/form/RadioButton,dojo/dom-construct,dojo/query,JBrowse/View/FileDialog,./FileDialog/TrackList/FASTADriver,./FileDialog/TrackList/IndexedFASTADriver".split(","),function(h,j,g,i,f,e,d,c){return h(e,{constructor:function(b){this.inherited(arguments);this._fileTypeDrivers=[new d,new c];return this},show:function(b){b.introMsg="Select a FASTA file (.fa) or indexed FASTA (.fa and .fai) to open";
this.inherited(arguments);this.dialog.set("title","Open sequence file")},_makeActionBar:function(b,a){var c=i.create("div",{className:"dijitDialogPaneActionBar"}),d=this.refSeqOrderChoice=[new g({id:"sortAlpha",value:"sortAlpha",checked:!0}),new g({id:"sortLength",value:"sortLength"}),new g({id:"noSort",value:"noSort"})],e=i.create("div",{className:"aux"},c);d[0].placeAt(e);i.create("label",{"for":"sortAlpha",innerHTML:"Sort refseqs by name"},e);d[1].placeAt(e);i.create("label",{"for":"sortLength",
innerHTML:"Sort refseqs by length"},e);d[2].placeAt(e);i.create("label",{"for":"noSort",innerHTML:"Use order from file"},e);(new j({iconClass:"dijitIconDelete",label:"Cancel",onClick:dojo.hitch(this,function(){a&&a();this.dialog.hide()})})).placeAt(c);(new j({iconClass:"dijitIconFolderOpen",label:"Open",onClick:dojo.hitch(this,function(){b&&b({trackConfs:this.trackList.getTrackConfigurations(),refSeqOrder:this.refSeqOrderChoice[0].checked?"alphabetic descending":this.refSeqOrderChoice[1].checked?
"length descending":void 0});this.dialog.hide()})})).placeAt(c);return{domNode:c}}})})},"JBrowse/View/FileDialog/TrackList/FASTADriver":function(){define(["dojo/_base/declare","JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(h,j,g,i){var f=0;return h(null,{name:"FASTA",storeType:"JBrowse/Store/SeqFeature/UnindexedFasta",fileExtension:"fasta",fileConfKey:"fasta",fileUrlConfKey:"urlTemplate",tryResource:function(e,d){if("fasta"==d.type){var c=j.basename(d.file?d.file.name:d.url?
d.url:"",[".fasta",".fa"]);if(!c)return!1;var b="FASTA_"+c+"_"+f++;e[b]={fileBasename:c,type:this.storeType,blob:this._makeBlob(d),name:b};return!0}return!1},finalizeConfiguration:function(e){var d=!1,c;for(c in e)e[c].fai&&(d=!0);var b;for(c in e)if(d&&"JBrowse/Store/SeqFeature/UnindexedFasta"==e[c].type)b=e[c].blob,delete e[c];for(c in e)if(d&&"JBrowse/Store/SeqFeature/IndexedFasta"==e[c].type)e[c].fasta=b},_makeBlob:function(e){e=e.file?new g(e.file):e.url?new i(e.url):null;if(!e)throw"unknown resource type";
return e},confIsValid:function(e){return e.blob||e.urlTemplate}})})},"JBrowse/View/FileDialog/TrackList/IndexedFASTADriver":function(){define(["dojo/_base/declare","./_IndexedFileDriver"],function(h,j){return h(j,{name:"FASTA",storeType:"JBrowse/Store/SeqFeature/IndexedFasta",fileExtension:"fasta",fileConfKey:"fasta",fileUrlConfKey:"urlTemplate",indexExtension:"fai",indexConfKey:"fai",indexUrlConfKey:"faiUrlTemplate"})})},"JBrowse/Store/SeqFeature/IndexedFasta":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/request,dojo/promise/all,dojo/Deferred,JBrowse/Store/SeqFeature,JBrowse/Util,JBrowse/Digest/Crc32,JBrowse/Model/XHRBlob,JBrowse/Store/DeferredFeaturesMixin,./IndexedFasta/File".split(","),
function(h,j,g,i,f,e,d,c,b,a,k){return h([e,a],{constructor:function(a){var c=a.fasta||new b(this.resolveUrl(a.urlTemplate||"data.fasta")),a=a.fai||new b(this.resolveUrl(a.faiUrlTemplate||(a.urlTemplate?a.urlTemplate+".fai":"data.fasta.fai")));this.index={};this.fasta=new k({store:this,data:c,fai:a});this.fasta.init({success:j.hitch(this,function(){this._deferred.features.resolve({success:!0})}),failure:j.hitch(this,"_failAllDeferred")})},_getFeatures:function(a,b,c,d){this.fasta.fetch(this.refSeq.name,
a.start,a.end,b,c,d)},getRefSeqs:function(a,b){var c=this;this._deferred.features.then(function(){var b=Object.keys(c.fasta.store.index).map(function(a){return c.fasta.store.index[a]});a(b)},b)},saveStore:function(){return{urlTemplate:(this.config.file||this.config.blob).url}}})})},"JBrowse/Store/SeqFeature":function(){define(["dojo/_base/declare","dojo/_base/lang","JBrowse/Store","JBrowse/Store/LRUCache"],function(h,j,g,i){return h(g,{constructor:function(){this.globalStats={}},_evalConf:function(f){return"function"==
typeof f?f.call(this,this):f},getGlobalStats:function(f){f(this.globalStats||{})},getRegionStats:function(f,e,d){return this._getRegionStats.apply(this,arguments)},_getRegionStats:function(f,e,d){var c=this;(c._regionStatsCache=c._regionStatsCache||new i({name:"regionStatsCache",maxSize:1E3,sizeFunction:function(){return 1},fillCallback:function(b,a){var d={scoreMax:-Infinity,scoreMin:Infinity,scoreSum:0,scoreSumSquares:0,basesCovered:b.end-b.start,featureCount:0};c.getFeatures(b,function(a){a=a.get("score")||
0;d.scoreMax=Math.max(a,d.scoreMax);d.scoreMin=Math.min(a,d.scoreMin);d.scoreSum+=a;d.scoreSumSquares+=a*a;d.featureCount++},function(){d.scoreMean=d.featureCount?d.scoreSum/d.featureCount:0;d.scoreStdDev=c._calcStdFromSums(d.scoreSum,d.scoreSumSquares,d.featureCount);d.featureDensity=d.featureCount/d.basesCovered;a(d)},function(b){a(null,b)})}})).get(f,function(b,a){a?d(a):e(b)})},_calcStdFromSums:function(f,e,d){if(0==d)return 0;f=e-f*f/d;1<d&&(f/=d-1);return 0>f?0:Math.sqrt(f)},getFeatures:function(f,
e,d){d()},getReferenceSequence:function(f,e,d){for(var c=f.end-f.start,b="";b.length<c;)b+=" ";this.getFeatures(j.mixin({reference_sequences_only:!0},f),function(a){var c=a.get("residues")||a.get("seq");if(c){var d=b,a=a.get("start")-f.start,e=0;0>a&&(e=-a,a=0);var g=Math.min(d.length-a,c.length-e);b=d.substr(0,a)+c.substr(e,g)+d.substr(a+g)}},function(){e(b)},d)},saveStore:function(){}})})},"JBrowse/Store":function(){define(["dojo/_base/declare","JBrowse/Component"],function(h,j){var g=0;return h(j,
{namePrefix:"store-",constructor:function(i){this.refSeq=dojo.clone(i.refSeq);this.name=i.name||this.namePrefix+ ++g;this.changeCallback=i.changeCallback||function(){}},notifyChanged:function(g){this.changeCallback&&this.changeCallback(g)},_failAllDeferred:function(g){var f=this._deferred||{},e;for(e in f)f.hasOwnProperty(e)&&f[e].reject(g)}})})},"JBrowse/Store/DeferredFeaturesMixin":function(){define(["dojo/_base/declare","dojo/Deferred"],function(h,j){return h(null,{constructor:function(){this._deferFeatures()},
_deferFeatures:function(){if(!this._deferred)this._deferred={};this._deferred.features=new j},getFeatures:function(g,i,f,e){this._deferred.features.then(dojo.hitch(this,"_getFeatures",g,i,f,e),e)}})})},"JBrowse/Store/SeqFeature/IndexedFasta/File":function(){define("dojo/_base/declare,dojo/_base/array,JBrowse/has,JBrowse/Util,JBrowse/Errors,JBrowse/Model/SimpleFeature".split(","),function(h,j,g,i,f,e){return h(null,{constructor:function(d){this.store=d.store;this.data=d.data;this.fai=d.fai;this.chunkSizeLimit=
d.chunkSizeLimit||5E5},init:function(d){var c=d.success||function(){},d=d.failure||function(b){console.error(b,b.stack)};this._readFAI(dojo.hitch(this,function(){c()}),d)},_readFAI:function(d,c){this.fai.fetch(dojo.hitch(this,function(b){if(b){for(var a="",b=new Uint8Array(b),e=b.length,f=0;f<e;f++)a+=String.fromCharCode(b[f]);a.split(/\r?\n/).forEach(dojo.hitch(this,function(a){a=a.split("\t");""!=a[0]&&(this.store.index[a[0]]={name:a[0],length:+a[1],start:0,end:+a[1],offset:+a[2],linelen:+a[3],
linebytelen:+a[4]})}));d()}else c("No data read from FASTA index (FAI) file")}),c)},fetch:function(d,c,b,a,f,g){var g=g||function(a){console.error(a)},i=d;this.store.browser.compareReferenceNames(d,i)||(i=d);var d=this.store.index[i],h=Math.max(0,c),c=this._fai_offset(d,h),d=this._fai_offset(d,b)-c;this.data.read(c,d,function(c){for(var d="",c=new Uint8Array(c),g=c.length,j=0;j<g;j++)d+=String.fromCharCode(c[j]);d=d.replace(/\s+/g,"");a(new e({data:{start:h,end:b,residues:d,seq_id:i,name:i}}));f()},
function(a){g(a)})},_fai_offset:function(d,c){return d.offset+d.linebytelen*Math.floor(c/d.linelen)+c%d.linelen}})})},"JBrowse/Model/SimpleFeature":function(){define(["JBrowse/Util"],function(h){var j=0,g=h.fastDeclare({constructor:function(i){i=i||{};this.data=i.data||{};this._parent=i.parent;this._uniqueID=i.id||this.data.uniqueID||(this._parent?this._parent.id()+"_"+j++:"SimpleFeature_"+j++);if(i=this.data.subfeatures)for(var f=0;f<i.length;f++)"function"!=typeof i[f].get&&(i[f]=new g({data:i[f],
parent:this}))},get:function(g){return this.data[g]},set:function(g,f){this.data[g]=f},tags:function(){var g=[],f=this.data,e;for(e in f)f.hasOwnProperty(e)&&g.push(e);return g},id:function(g){if(g)this._uniqueID=g;return this._uniqueID},parent:function(){return this._parent},children:function(){return this.get("subfeatures")}});return g})},"JBrowse/Store/SeqFeature/UnindexedFasta":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/request,dojo/promise/all,dojo/Deferred,JBrowse/Store/SeqFeature,JBrowse/Util,JBrowse/Digest/Crc32,JBrowse/Model/XHRBlob,JBrowse/Store/DeferredFeaturesMixin,./UnindexedFasta/File".split(","),
function(h,j,g,i,f,e,d,c,b,a,k){return h([e,a],{constructor:function(a){a=a.fasta||a.blob||new b(this.resolveUrl(a.urlTemplate||"data.fasta"));this.index={};this.fasta=new k({store:this,data:a});this.fasta.init({success:j.hitch(this,function(){this._deferred.features.resolve({success:!0})}),failure:j.hitch(this,"_failAllDeferred")})},_getFeatures:function(a,b,c,d){this.fasta.fetch(this.refSeq.name,a.start,a.end,b,c,d)},getRefSeqs:function(a,b){var c=this;this._deferred.features.then(function(){a(c.fasta.refseqs)},
b)},saveStore:function(){return{urlTemplate:(this.config.file||this.config.blob).url}}})})},"JBrowse/Store/SeqFeature/UnindexedFasta/File":function(){define("dojo/_base/declare,dojo/_base/array,dojo/Deferred,JBrowse/has,JBrowse/Util,JBrowse/Errors,JBrowse/Model/SimpleFeature".split(","),function(h,j,g,i,f,e,d){return h(null,{constructor:function(c){this.store=c.store;this.data=c.data;this.features={};this.refseqs=[]},init:function(c){var b=this,a=c.success||function(){};this.parseFile(this.data,function(c){j.forEach(c,
function(a){b.features[a.name]={seq_id:a.name,name:a.name,start:0,end:a.seq.length,seq:a.seq};b.refseqs.push({name:a.name,start:0,end:a.seq.length,length:a.seq.length})});a()},c.failure||function(a){console.error(a,a.stack)})},fetch:function(c,b,a,e,f){b=c;this.store.browser.compareReferenceNames(c,b)||(b=c);e(new d({data:{start:this.features[b].start,end:this.features[b].end,residues:this.features[b].seq,seq_id:b,name:b}}));f()},parseFile:function(c,b,a){this.data.fetch(dojo.hitch(this,function(d){for(var e=
"",d=new Uint8Array(d),f=d.length,g=0;g<f;g++)e+=String.fromCharCode(d[g]);!e||!e.length?a("Could not read file: "+c.name):(e=this.parseString(e),e.length?b(e):a("File contained no (FASTA) sequences"))}),a)},parseString:function(c){var b=[],a=function(a){"name"in a&&a.seq.length&&b.push(a)},d={seq:""},c=c.match(/^.*((\r\n|\n|\r)|$)/gm),e=0;for(;e<c.length;e++){var f;if(f=/^>(\S*)/.exec(c[e])){if(a(d),d={seq:""},f[1].length)d.name=f[1]}else if(f=/^\s*(\S+)\s*$/.exec(c[e]))d.seq+=f[1]}a(d);return b}})})},
"JBrowse/View/LocationChoiceDialog":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/aspect,dijit/Dialog,dijit/form/Button,dijit/focus,JBrowse/View/LocationList".split(","),function(h,j,g,i,f,e,d){return h(null,{constructor:function(c){this.browser=c.browser;this.config=dojo.clone(c.config||{});this.locationChoices=c.locationChoices||[];this.title=c.title||"Choose location";this.prompt=c.prompt;this.goCallback=c.goCallback;this.showCallback=c.showCallback},show:function(){var c=this.dialog=
new i({title:this.title,className:"locationChoiceDialog",style:{width:"70%"}}),b=j.create("div",{});this.prompt&&j.create("div",{className:"prompt",innerHTML:this.prompt},b);var a=this.browser;this.locationListView=new d({browser:a,locations:this.locationChoices,buttons:[{className:"show",innerHTML:"Show",onClick:this.showCallback||function(b){a.showRegionAfterSearch(b)}},{className:"go",innerHTML:"Go",onClick:this.goCallback||function(b){c.hide();a.showRegionAfterSearch(b)}}]},j.create("div",{className:"locationList",
style:{maxHeight:0.5*this.browser.container.offsetHeight+"px"}},b));this.actionBar=dojo.create("div",{className:"infoDialogActionBar dijitDialogPaneActionBar"});(new f({iconClass:"dijitIconDelete",label:"Cancel",onClick:dojo.hitch(c,"hide")})).placeAt(this.actionBar);c.set("content",[b,this.actionBar]);c.show();g.after(c,"hide",dojo.hitch(this,function(){e.curNode&&e.curNode.blur();setTimeout(function(){c.destroyRecursive()},500)}))}})})},"JBrowse/View/LocationList":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dijit/form/Button,JBrowse/Util,dojo/store/Memory,dgrid/OnDemandGrid,dgrid/extensions/DijitRegistry".split(","),
function(h,j,g,i,f,e,d,c){var b=h([d,c]);return h(null,{constructor:function(a,c){this.browser=a.browser;var d=j.map(a.locations||[],function(a){return{locstring:f.assembleLocString(a),location:a,label:a.label||a.objectName,description:a.description,score:a.score,tracks:j.map(j.filter(a.tracks||[],function(a){return a}),function(a){return a.key||a.name||a.label||a}).join(", ")}}),h=[];j.some(d,function(a){return a.label})&&h.unshift({label:"Name",field:"label"});j.some(d,function(a){return a.description})&&
h.unshift({label:"Description",field:"description"});j.some(d,function(a){return a.score})&&h.unshift({label:"Score",field:"score"});h.push({label:"Location",field:"locstring"});d.length&&d[0].tracks&&h.push({label:"Track",field:"tracks"});a.buttons&&h.push({label:"",className:"goButtonColumn",renderCell:function(b,c,d,e){var f=g.create("div");j.forEach(a.buttons,function(a){var g=dojo.mixin({},a);g.onClick=function(){a.onClick(b.location,c,d,e)};(new i(g)).placeAt(f)});return f}});this.grid=new b({columns:h,
store:new e({data:d})},c)}})})},"JBrowse/View/Dialog/SetHighlight":function(){define("dojo/_base/declare,dojo/dom-construct,dijit/focus,dijit/form/TextBox,JBrowse/View/Dialog/WithActionBar,dojo/on,dijit/form/Button,JBrowse/Model/Location".split(","),function(h,j,g,i,f,e,d,c){return h(f,{autofocus:!1,title:"Set highlight",constructor:function(b){this.browser=b.browser;this.setCallback=b.setCallback||function(){};this.cancelCallback=b.cancelCallback||function(){}},_fillActionBar:function(b){var a=this;
(new d({iconClass:"dijitIconDelete",label:"Cancel",onClick:function(){a.cancelCallback&&a.cancelCallback();a.hide()}})).placeAt(b);(new d({iconClass:"dijitIconFilter",label:"Highlight",onClick:function(){a.setCallback&&a.setCallback(a.getLocation());a.hide()}})).placeAt(b)},show:function(b){dojo.addClass(this.domNode,"setHighlightDialog");var a=this.browser.view.visibleRegionLocString();a&&(a+=" (current view)");this.highlightInput=new i({id:"newhighlight_locstring",value:(this.browser.getHighlight()||
"").toString()||a||"",placeHolder:a||"ctgA:1234..5678"});this.set("content",[j.create("label",{"for":"newhighlight_locstring",innerHTML:"Location"}),this.highlightInput.domNode]);this.inherited(arguments)},getLocation:function(){return new c(this.highlightInput.get("value"))},hide:function(){this.inherited(arguments);window.setTimeout(dojo.hitch(this,"destroyRecursive"),500)}})})},"JBrowse/View/Dialog/Preferences":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dijit/focus,dijit/form/TextBox,JBrowse/View/Dialog/WithActionBar,dojo/on,dijit/form/Button,JBrowse/Model/Location,JBrowse/Util".split(","),
function(h,j,g,i,f,e,d,c,b,a){return h(e,{autofocus:!1,title:"Open plugin",constructor:function(a){this.browser=a.browser;this.setCallback=a.setCallback||function(){};this.cancelCallback=a.cancelCallback||function(){};this.plugins=[]},_fillActionBar:function(a){var b=this;(new c({iconClass:"dijitIconDelete",label:"Cancel",onClick:function(){b.cancelCallback&&b.cancelCallback();b.hide()}})).placeAt(a);(new c({iconClass:"dijitIconFolderOpen",label:"Open",onClick:function(){b.setCallback&&b.setCallback(b.plugins);
b.hide()}})).placeAt(a)},show:function(b){dojo.addClass(this.domNode,"fileDialog");var c=g.create("div",{className:"localFilesControl",style:{width:"100%"}}),e=g.create("div",{className:"dragArea"},c),f;a.isElectron()?f=g.create("input",{type:"button",value:"Select files...",id:"openFile"},e):(f=new dojox.form.Uploader({multiple:!0}),f.placeAt(e),this.browserSupports.dnd&&(f.addDropTarget(this.domNode),g.create("div",{className:"dragMessage",innerHTML:"Select or drag files here."},e)));var i=this;
d(f,"click",function(){var b=electronRequire("remote");b.require("app");if(b=b.require("dialog").showOpenDialog({properties:["openDirectory"]}))b=j.map(b,function(b){return a.replacePath(b)}),i.plugins.push(b[0]),dojo.byId("plugins_list").innerHTML+=b+"<br/>"});this.set("content",[g.create("div",{className:"intro",innerHTML:"Select plugin directories to load. Note: The name of the directory will also be used as the name of the plugin, which is sometimes important for the plugin loader"}),function(a,
b){var c=g.create("div",a);j.forEach(b,dojo.hitch(c,"appendChild"));return c}({className:"resourceControls",style:{width:"100%"}},[c]),g.create("div",{className:"files",id:"plugins_list",innerHTML:"Plugins:<br/>"})]);this.inherited(arguments)},hide:function(){this.inherited(arguments);window.setTimeout(dojo.hitch(this,"destroyRecursive"),500)}})})},"JBrowse/View/Dialog/OpenDirectory":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dijit/focus,dijit/form/TextBox,JBrowse/View/Dialog/WithActionBar,dojo/on,dijit/form/Button,JBrowse/Model/Location,JBrowse/Util".split(","),
function(h,j,g,i,f,e,d,c,b,a){return h(e,{autofocus:!1,title:"Open directory",constructor:function(a){this.browser=a.browser;this.setCallback=a.setCallback||function(){};this.cancelCallback=a.cancelCallback||function(){};this.datadir=""},_fillActionBar:function(a){var b=this;(new c({iconClass:"dijitIconDelete",label:"Cancel",onClick:function(){b.cancelCallback&&b.cancelCallback();b.hide()}})).placeAt(a);(new c({iconClass:"dijitIconFolderOpen",label:"Open",onClick:function(){b.setCallback&&b.setCallback(b.datadir);
b.hide()}})).placeAt(a)},show:function(a){dojo.addClass(this.domNode,"fileDialog");var b=this._makeRemoteURLsControl(),c=this._makeLocalFileControl();this.set("content",[g.create("div",{className:"intro",innerHTML:'Select a data directory to load, either from a "track hub" on the web, or from a local folder on your filesystem'}),function(a,b){var c=g.create("div",a);j.forEach(b,dojo.hitch(c,"appendChild"));return c}({className:"resourceControls"},[c.domNode,b.domNode]),g.create("div",{className:"files",
id:"data_dir",innerHTML:'<b>Result</b>:<br/><div id="data_dir_list"></div>'})]);this.inherited(arguments)},_makeRemoteURLsControl:function(){var a=g.create("div",{className:"remoteURLsControl"}),b=this;g.create("h3",{innerHTML:"Remote URLs - <smaller>one per line</smaller>"},a);var c={domNode:a,onChange:function(){}};c.input=g.create("textarea",{className:"urlInput",placeHolder:"http://jbrowse.org/data_hub",cols:25,rows:5,spellcheck:!1},a);d(c.input,"change",function(){dojo.byId("data_dir_list").innerHTML=
c.input.value;b.datadir=c.input.value});var e=function(){if(c.input.value!=b.datadir&&!b.localopened)dojo.byId("data_dir_list").innerHTML=c.input.value,b.datadir=c.input.value;window.setTimeout(e,900)};window.setTimeout(e,900);return c},_makeLocalFileControl:function(){var b=g.create("div",{className:"localFilesControl",style:{width:"50%"}});g.create("h3",{innerHTML:"Local data directories"},b);var c=g.create("div",{className:"dragArea"},b),e;a.isElectron()?e=g.create("input",{type:"button",value:"Select directory...",
id:"openFile"},c):(e=new dojox.form.Uploader({multiple:!0}),e.placeAt(c),this.browserSupports.dnd&&(e.addDropTarget(this.domNode),g.create("div",{className:"dragMessage",innerHTML:"Select or drag files here."},c)));var f=this;d(e,"click",function(){var b=electronRequire("remote");b.require("app");if(b=b.require("dialog").showOpenDialog({properties:["openDirectory"]}))b=j.map(b,function(b){return a.replacePath(b)}),f.datadir=b[0],f.localopened=!0,dojo.byId("data_dir_list").innerHTML=b[0]});return{domNode:b}},
hide:function(){this.inherited(arguments);window.setTimeout(dojo.hitch(this,"destroyRecursive"),500)}})})},"JBrowse/View/Dialog/SetTrackHeight":function(){define("dojo/_base/declare,dojo/dom-construct,dijit/focus,dijit/form/NumberSpinner,JBrowse/View/Dialog/WithActionBar,dojo/on,dijit/form/Button,JBrowse/Model/Location".split(","),function(h,j,g,i,f,e,d){return h(f,{title:"Set new track height",constructor:function(c){this.height=c.height||100;this.browser=c.browser;this.setCallback=c.setCallback||
function(){};this.cancelCallback=c.cancelCallback||function(){};this.heightConstraints={min:10,max:750}},_fillActionBar:function(c){(new d({label:"OK",onClick:dojo.hitch(this,function(){var b=parseInt(this.heightSpinner.getValue());if(!isNaN(b)&&!(b<this.heightConstraints.min||b>this.heightConstraints.max))this.setCallback&&this.setCallback(b),this.hide()})})).placeAt(c);(new d({label:"Cancel",onClick:dojo.hitch(this,function(){this.cancelCallback&&this.cancelCallback();this.hide()})})).placeAt(c)},
show:function(c){dojo.addClass(this.domNode,"setTrackHeightDialog");this.heightSpinner=new i({value:this.height,smallDelta:10,constraints:this.heightConstraints});this.set("content",[j.create("label",{"for":"newhighlight_locstring",innerHTML:""}),this.heightSpinner.domNode,j.create("span",{innerHTML:" pixels"})]);this.inherited(arguments)},hide:function(){this.inherited(arguments);window.setTimeout(dojo.hitch(this,"destroyRecursive"),500)}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare",
"dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(h,j,g,i,f){return h("dijit.form.NumberSpinner",[i,f.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(e,d){var c=this.constraints,b=isNaN(e),a=!isNaN(c.max),f=!isNaN(c.min);b&&0!=d&&(e=0<d?f?c.min:a?c.max:0:a?this.constraints.max:f?c.min:0);var g=e+d;if(b||isNaN(g))return e;if(a&&g>c.max)g=c.max;if(f&&g<c.min)g=c.min;return g},_onKeyPress:function(e){if(!this.disabled&&!this.readOnly&&(e.charOrCode==
g.HOME||e.charOrCode==g.END)&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&"undefined"!=typeof this.get("value")){var d=this.constraints[e.charOrCode==g.HOME?"min":"max"];"number"==typeof d&&this._setValueAttr(d,!1);j.stop(e)}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/mouse,../typematic,./RangeBoundTextBox,dojo/text!./templates/Spinner.html,./_TextBoxMixin".split(","),function(h,j,g,i,f,e,d,c,b,a){return h("dijit.form._Spinner",
c,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:b,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(a){return a},_arrowPressed:function(b,c,d){!this.disabled&&!this.readOnly&&(this._setValueAttr(this.adjust(this.get("value"),c*d),!1),a.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,
b,c){var d=this.smallDelta;if(b==this.textbox)b=c.charOrCode,d=b==g.PAGE_UP||b==g.PAGE_DOWN?this.largeDelta:this.smallDelta,b=b==g.UP_ARROW||b==g.PAGE_UP?this.upArrowNode:this.downArrowNode;-1==a?this._arrowReleased(b):this._arrowPressed(b,b==this.upArrowNode?1:-1,d)},_wheelTimer:null,_mouseWheeled:function(a){j.stop(a);var b=a.wheelDelta/120;Math.floor(b)!=b&&(b=0<a.wheelDelta?1:-1);a=a.detail?-1*a.detail:b;if(0!==a){var c=this[0<a?"upArrowNode":"downArrowNode"];this._arrowPressed(c,a,this.smallDelta);
this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(c)},50)}},_setConstraintsAttr:function(a){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(a,
b){this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,e.wheel,"_mouseWheeled");this.own(d.addListener(this.upArrowNode,this.textbox,{charOrCode:g.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),d.addListener(this.downArrowNode,this.textbox,{charOrCode:g.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},
this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),d.addListener(this.upArrowNode,this.textbox,{charOrCode:g.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),d.addListener(this.downArrowNode,this.textbox,{charOrCode:g.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},
"dijit/typematic":function(){define("dojo/_base/array,dojo/_base/connect,dojo/_base/event,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/sniff,./main".split(","),function(h,j,g,i,f,e,d,c){var b=c.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=
setTimeout(f.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,b,c,d,e,g,i,h){if(e!=this._obj){this.stop();this._initialDelay=i||500;this._subsequentDelay=g||0.9;this._minDelay=h||10;this._obj=e;this._node=c;this._count=this._currentTimeout=-1;this._callback=f.hitch(b,d);this._evt={faux:!0};for(var j in a)"layerX"!=j&&"layerY"!=j&&(b=a[j],"function"!=typeof b&&"undefined"!=typeof b&&(this._evt[j]=b));this._fireEventAndReload()}},stop:function(){if(this._timer)clearTimeout(this._timer),
this._timer=null;if(this._obj)this._callback(-1,this._node,this._evt),this._obj=null},addKeyListener:function(a,c,d,q,o,l,m){if(c.keyCode)c.charOrCode=c.keyCode,i.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");else if(c.charCode)c.charOrCode=String.fromCharCode(c.charCode),i.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");var r=[e(a,j._keypress,
f.hitch(this,function(e){e.charOrCode==c.charOrCode&&(void 0===c.ctrlKey||c.ctrlKey==e.ctrlKey)&&(void 0===c.altKey||c.altKey==e.altKey)&&(void 0===c.metaKey||c.metaKey==(e.metaKey||!1))&&(void 0===c.shiftKey||c.shiftKey==e.shiftKey)?(g.stop(e),b.trigger(e,d,a,q,c,o,l,m)):b._obj==c&&b.stop()})),e(a,"keyup",f.hitch(this,function(){b._obj==c&&b.stop()}))];return{remove:function(){h.forEach(r,function(a){a.remove()})}}},addMouseListener:function(a,c,g,i,j,l){var m=[e(a,"mousedown",f.hitch(this,function(d){d.preventDefault();
b.trigger(d,c,a,g,a,i,j,l)})),e(a,"mouseup",f.hitch(this,function(a){this._obj&&a.preventDefault();b.stop()})),e(a,"mouseout",f.hitch(this,function(a){this._obj&&a.preventDefault();b.stop()})),e(a,"dblclick",f.hitch(this,function(e){e.preventDefault();9>d("ie")&&(b.trigger(e,c,a,g,a,i,j,l),setTimeout(f.hitch(this,b.stop),50))}))];return{remove:function(){h.forEach(m,function(a){a.remove()})}}},addListener:function(a,b,c,d,e,f,g,i){var j=[this.addKeyListener(b,c,d,e,f,g,i),this.addMouseListener(a,
d,e,f,g,i)];return{remove:function(){h.forEach(j,function(a){a.remove()})}}}};return b})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(h,j,g){return h("dijit.form.RangeBoundTextBox",g,{rangeMessage:"",rangeCheck:function(g,f){return("min"in f?0<=this.compare(g,f.min):!0)&&("max"in f?0>=this.compare(g,f.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var g=
this.get("value");if(null==g)return!1;var f=!1;if("min"in this.constraints)f=this.constraints.min,f=0>this.compare(g,"number"==typeof f&&0<=f&&0!=g?0:f);if(!f&&"max"in this.constraints)f=this.constraints.max,f=0<this.compare(g,"number"!=typeof f||0<f?f:0);return f},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(g){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(g))},getErrorMessage:function(g){var f=
this.get("value");return null!=f&&""!==f&&("number"!=typeof f||!isNaN(f))&&!this.isInRange(g)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage)this.messages=j.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage},applyTextDir:function(){}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(h,j,g){return h("dijit.form.MappedTextBox",
g,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:null,serialize:function(g){return g.toString?g.toString():""},toString:function(){var g=this.filter(this.get("value"));return null!=g?"string"==typeof g?g:this.serialize(g,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=j.place("<input type='hidden'"+(this.name?' name="'+
this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"url:dijit/form/templates/Spinner.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point="upArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point="downArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' data-dojo-attach-point="textbox,focusNode" type="${type}" data-dojo-attach-event="onkeypress:_onKeyPress"\n\t\t\trole="spinbutton" autocomplete="off" ${!nameAttrSetting}\n\t/></div\n></div>\n',
"dijit/form/NumberTextBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(h,j,g,i){var f=h("dijit.form.NumberTextBoxMixin",null,{pattern:g.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:g.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(e){var d="number"==typeof e.places?e.places:0;d&&d++;if("number"!=typeof e.max)e.max=9*Math.pow(10,15-d);if("number"!=typeof e.min)e.min=
-9*Math.pow(10,15-d);this.inherited(arguments,[e]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var e=this.get("value");if("number"==typeof e&&!isNaN(e)&&(e=this.format(e,this.constraints),void 0!==e))this.textbox.value=e;this.inherited(arguments)}},format:function(e,d){var c=""+e;if("number"!=typeof e)return c;if(isNaN(e))return"";if(!("rangeCheck"in this&&this.rangeCheck(e,d))&&!1!==d.exponent&&/\de[-+]?\d/i.test(c))return c;
this.editOptions&&this.focused&&(d=j.mixin({},d,this.editOptions));return this._formatter(e,d)},_parser:g.parse,parse:function(e,d){var c=this._parser(e,j.mixin({},d,this.editOptions&&this.focused?this.editOptions:{}));this.editOptions&&this.focused&&isNaN(c)&&(c=this._parser(e,d));return c},_getDisplayedValueAttr:function(){var e=this.inherited(arguments);return isNaN(e)?this.textbox.value:e},filter:function(e){return null==e||""===e?NaN:this.inherited(arguments)},serialize:function(e,d){return"number"!=
typeof e||isNaN(e)?"":this.inherited(arguments)},_setBlurValue:function(){this._setValueAttr(j.hitch(j.mixin({},this,{focused:!0}),"get")("value"),!0)},_setValueAttr:function(e,d,c){if(void 0!==e&&void 0===c)if(c=""+e,"number"==typeof e)if(isNaN(e))c="";else{if("rangeCheck"in this&&this.rangeCheck(e,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))c=void 0}else e?e=void 0:(c="",e=NaN);this.inherited(arguments,[e,d,c])},_getValueAttr:function(){var e=this.inherited(arguments);
if(isNaN(e)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+g._realNumberRegexp(j.mixin({},this.constraints))+"$").test(this.textbox.value))return e=Number(this.textbox.value),isNaN(e)?void 0:e}else return e},isValid:function(e){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var d=this.get("value");return!isNaN(d)&&this.rangeCheck(d,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?
!0:this.inherited(arguments):!1}}),h=h("dijit.form.NumberTextBox",[i,f],{baseClass:"dijitTextBox dijitNumberTextBox"});h.Mixin=f;return h})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(h,j,g,i,f){var e={};h.setObject("dojo.number",e);e.format=function(c,b){var b=h.mixin({},b||{}),a=j.normalizeLocale(b.locale),a=j.getLocalization("dojo.cldr","number",a);b.customs=a;a=b.pattern||a[(b.type||"decimal")+"Format"];return isNaN(c)||
Infinity==Math.abs(c)?null:e._applyPattern(c,a,b)};e._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;e._applyPattern=function(c,b,a){var a=a||{},d=a.customs.group,f=a.customs.decimal,b=b.split(";"),g=b[0],b=b[0>c?1:0]||"-"+g;if(-1!=b.indexOf("%"))c*=100;else if(-1!=b.indexOf("\u2030"))c*=1E3;else if(-1!=b.indexOf("\u00a4"))d=a.customs.currencyGroup||d,f=a.customs.currencyDecimal||f,b=b.replace(/\u00a4{1,3}/,function(b){return a[["symbol","currency","displayName"][b.length-1]]||a.currency||""});else if(-1!=
b.indexOf("E"))throw Error("exponential notation not supported");var i=e._numberPatternRE,g=g.match(i);if(!g)throw Error("unable to find a number expression in pattern: "+b);if(!1===a.fractional)a.places=0;return b.replace(i,e._formatAbsolute(c,g[0],{decimal:f,group:d,places:a.places,round:a.round}))};e.round=function(c,b,a){a=10/(a||10);return(a*+c).toFixed(b)/a};if(0==(0.9).toFixed()){var d=e.round;e.round=function(c,b,a){var e=Math.pow(10,-b||0),f=Math.abs(c);if(!c||f>=e)e=0;else if(f/=e,0.5>f||
0.95<=f)e=0;return d(c,b,a)+(0<c?e:-e)}}e._formatAbsolute=function(c,b,a){a=a||{};if(!0===a.places)a.places=0;if(Infinity===a.places)a.places=6;var b=b.split("."),d="string"==typeof a.places&&a.places.indexOf(","),f=a.places;if(d)f=a.places.substring(d+1);else if(!(0<=f))f=(b[1]||[]).length;0>a.round||(c=e.round(c,f,a.round));var c=(""+Math.abs(c)).split("."),g=c[1]||"";if(b[1]||a.places){if(d)a.places=a.places.substring(0,d);d=void 0!==a.places?a.places:b[1]&&b[1].lastIndexOf("0")+1;d>g.length&&
(c[1]=i.pad(g,d,"0",!0));f<g.length&&(c[1]=g.substr(0,f))}else c[1]&&c.pop();f=b[0].replace(",","");d=f.indexOf("0");-1!=d&&(d=f.length-d,d>c[0].length&&(c[0]=i.pad(c[0],d)),-1==f.indexOf("#")&&(c[0]=c[0].substr(c[0].length-d)));var f=b[0].lastIndexOf(","),h,j;-1!=f&&(h=b[0].length-f-1,b=b[0].substr(0,f),f=b.lastIndexOf(","),-1!=f&&(j=b.length-f-1));b=[];for(f=c[0];f;)d=f.length-h,b.push(0<d?f.substr(d):f),f=0<d?f.slice(0,d):"",j&&(h=j,delete j);c[0]=b.reverse().join(a.group||",");return c.join(a.decimal||
".")};e.regexp=function(c){return e._parseInfo(c).regexp};e._parseInfo=function(c){var c=c||{},b=j.normalizeLocale(c.locale),b=j.getLocalization("dojo.cldr","number",b),a=c.pattern||b[(c.type||"decimal")+"Format"],d=b.group,g=b.decimal,i=1;if(-1!=a.indexOf("%"))i/=100;else if(-1!=a.indexOf("\u2030"))i/=1E3;else{var h=-1!=a.indexOf("\u00a4");h&&(d=b.currencyGroup||d,g=b.currencyDecimal||g)}b=a.split(";");1==b.length&&b.push("-"+b[0]);b=f.buildGroupRE(b,function(a){a="(?:"+f.escapeString(a,".")+")";
return a.replace(e._numberPatternRE,function(a){var b={signed:!1,separator:c.strict?d:[d,""],fractional:c.fractional,decimal:g,exponent:!1},a=a.split("."),f=c.places;1==a.length&&1!=i&&(a[1]="###");if(1==a.length||0===f)b.fractional=!1;else{void 0===f&&(f=c.pattern?a[1].lastIndexOf("0")+1:Infinity);if(f&&void 0==c.fractional)b.fractional=!0;!c.places&&f<a[1].length&&(f+=","+a[1].length);b.places=f}a=a[0].split(",");if(1<a.length&&(b.groupSize=a.pop().length,1<a.length))b.groupSize2=a.pop().length;
return"("+e._realNumberRegexp(b)+")"})},!0);h&&(b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,b,d,e){a=f.escapeString(c[["symbol","currency","displayName"][d.length-1]]||c.currency||"");b=b?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return!c.strict?(b&&(b+="*"),e&&(e+="*"),"(?:"+b+a+e+")?"):b+a+e}));return{regexp:b.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:d,decimal:g,factor:i}};e.parse=function(c,b){var a=e._parseInfo(b),d=RegExp("^"+a.regexp+"$").exec(c);if(!d)return NaN;var f=d[1];if(!d[1]){if(!d[2])return NaN;
f=d[2];a.factor*=-1}f=f.replace(RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return f*a.factor};e._realNumberRegexp=function(c){c=c||{};if(!("places"in c))c.places=Infinity;if("string"!=typeof c.decimal)c.decimal=".";if(!("fractional"in c)||/^0/.test(c.places))c.fractional=[!0,!1];if(!("exponent"in c))c.exponent=[!0,!1];if(!("eSigned"in c))c.eSigned=[!0,!1];var b=e._integerRegexp(c),a=f.buildGroupRE(c.fractional,function(a){var b="";a&&0!==c.places&&(b="\\"+c.decimal,b=Infinity==
c.places?"(?:"+b+"\\d+)?":b+("\\d{"+c.places+"}"));return b},!0),d=f.buildGroupRE(c.exponent,function(a){return a?"([eE]"+e._integerRegexp({signed:c.eSigned})+")":""}),b=b+a;a&&(b="(?:(?:"+b+")|(?:"+a+"))");return b+d};e._integerRegexp=function(c){c=c||{};if(!("signed"in c))c.signed=[!0,!1];if("separator"in c){if(!("groupSize"in c))c.groupSize=3}else c.separator="";var b=f.buildGroupRE(c.signed,function(a){return a?"[-+]":""},!0),a=f.buildGroupRE(c.separator,function(a){if(!a)return"(?:\\d+)";a=f.escapeString(a);
" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var b=c.groupSize,d=c.groupSize2;return d?(a="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+a+"]\\d{"+d+"})*["+a+"]\\d{"+b+"})",0<b-d?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(b-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+a+"]\\d{"+b+"})*)"},!0);return b+a};return e})},"JBrowse/View/Dialog/QuickHelp":function(){define(["dojo/_base/declare","JBrowse/View/InfoDialog"],function(h,j){return h(j,{title:"JBrowse Help",constructor:function(g){this.browser=g.browser;this.defaultContent=this._makeDefaultContent();
if(!g.content&&!g.href)this.content=this.defaultContent},_makeDefaultContent:function(){return'<div class="help_dialog"><div class="main" style="float: left; width: 49%;"><dl><dt>Moving</dt><dd><ul>    <li>Move the view by clicking and dragging in the track area, or by clicking <img class="icon nav" id="moveLeftSmall" src="'+this.browser.resolveUrl("img/Empty.png")+'">  or <img class="icon nav" id="moveRightSmall" src="'+this.browser.resolveUrl("img/Empty.png")+'"> in the navigation bar, or by pressing the left and right arrow keys.</li>    <li>Center the view at a point by clicking on either the track scale bar or overview bar, or by shift-clicking in the track area.</li></ul></dd><dt>Zooming</dt><dd><ul>    <li>Zoom in and out by clicking <img class="icon nav" id="zoomInSmall" src="'+
this.browser.resolveUrl("img/Empty.png")+'"> or <img class="icon nav" id="zoomOutSmall" src="'+this.browser.resolveUrl("img/Empty.png")+'"> in the navigation bar, or by pressing the up and down arrow keys while holding down "shift".</li>    <li>Select a region and zoom to it ("rubber-band" zoom) by clicking and dragging in the overview or track scale bar, or shift-clicking and dragging in the track area.</li>    </ul></dd><dt>Showing Tracks</dt><dd><ul><li>Turn a track on by dragging its track label from the "Available Tracks" area into the genome area, or double-clicking it.</li>        <li>Turn a track off by dragging its track label from the genome area back into the "Available Tracks" area.</li>    </ul></dd></dl></div><div class="main" style="float: right; width: 49%;"><dl><dt>Searching</dt><dd><ul>    <li>Jump to a feature or reference sequence by typing its name in the location box and pressing Enter.</li>    <li>Jump to a specific region by typing the region into the location box as: <span class="example">ref:start..end</span>.</li>    </ul></dd><dt>Example Searches</dt><dd>    <dl class="searchexample">        <dt>uc0031k.2</dt><dd>searches for the feature named <span class="example">uc0031k.2</span>.</dd>        <dt>chr4</dt><dd>jumps to chromosome 4</dd>        <dt>chr4:79,500,000..80,000,000</dt><dd>jumps the region on chromosome 4 between 79.5Mb and 80Mb.</dd>        <dt>5678</dt><dd>centers the display at base 5,678 on the current sequence</dd>    </dl></dd><dt>JBrowse Documentation</dt><dd><ul><li><a target="_blank" href="docs/tutorial/">Quick-start tutorial</a></li>        <li><a target="_blank" href="http://gmod.org/wiki/JBrowse">JBrowse Configuration Guide</a></li>        <li><a target="_blank" href="docs/config.html"><tt>biodb-to-json.pl</tt> reference</a></li>        <li><a target="_blank" href="docs/featureglyphs.html">HTMLFeatures class reference</a></li>    </ul></dd></dl></div></div>'}})})},
"JBrowse/View/StandaloneDatasetList":function(){define(["dojo/_base/declare","dijit/_WidgetBase"],function(h,j){return h(j,{baseClass:"jbrowseStandaloneDatasetSelector",buildRendering:function(){this.inherited(arguments);var g=this.domNode;g.appendChild(document.createElement("h2")).innerHTML="Available Datasets";this.containerNode=g.appendChild(document.createElement("ul"));var i=this.get("datasets"),g=g.appendChild(document.createElement("ul")),f;for(f in i)if(!/^_/.test(f)){var e=i[f],d=document.createElement("li"),
c=document.createElement("a");c.setAttribute("href",e.url);c.innerHTML=e.name;d.appendChild(c);g.appendChild(d)}}})})},"lazyload/lazyload":function(){define([],function(){return function(h){function j(a,b){var c=h.createElement(a),d;for(d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}function g(b){var c=a[b],d,e;if(c)d=c.callback,e=c.urls,e.shift(),k=0,e.length||(d&&d.call(c.context,c.obj),a[b]=null,n[b].length&&f(b))}function i(){var a=navigator.userAgent;c={async:!0===h.createElement("script").async};
(c.webkit=/AppleWebKit\//.test(a))||(c.ie=/MSIE/.test(a))||(c.opera=/Opera/.test(a))||(c.gecko=/Gecko\//.test(a))||(c.unknown=!0)}function f(f,k,m,r,p){var q=function(){g(f)},s="css"===f,t=[],v,w,x,E;c||i();if(k)if(k="string"===typeof k?[k]:k.concat(),s||c.async||c.gecko||c.opera)n[f].push({urls:k,callback:m,obj:r,context:p});else for(v=0,w=k.length;v<w;++v)n[f].push({urls:[k[v]],callback:v===w-1?m:null,obj:r,context:p});if(!a[f]&&(E=a[f]=n[f].shift())){b||(b=h.head||h.getElementsByTagName("head")[0]);
k=E.urls;for(v=0,w=k.length;v<w;++v)m=k[v],s?x=c.gecko?j("style"):j("link",{href:m,rel:"stylesheet"}):(x=j("script",{src:m}),x.async=!1),x.className="lazyload",x.setAttribute("charset","utf-8"),c.ie&&!s?x.onreadystatechange=function(){if(/loaded|complete/.test(x.readyState))x.onreadystatechange=null,q()}:s&&(c.gecko||c.webkit)?c.webkit?(E.urls[v]=x.href,d()):(x.innerHTML='@import "'+m+'";',e(x)):x.onload=x.onerror=q,t.push(x);for(v=0,w=t.length;v<w;++v)b.appendChild(t[v])}}function e(a){var b;try{b=
!!a.sheet.cssRules}catch(c){k+=1;200>k?setTimeout(function(){e(a)},50):b&&g("css");return}g("css")}function d(){var b=a.css,c;if(b){for(c=q.length;0<=--c;)if(q[c].href===b.urls[0]){g("css");break}k+=1;b&&(200>k?setTimeout(d,50):g("css"))}}var c,b,a={},k=0,n={css:[],js:[]},q=h.styleSheets;return{css:function(a,b,c,d){f("css",a,b,c,d)},js:function(a,b,c,d){f("js",a,b,c,d)}}}(this.document)})},"JBrowse/ConfigAdaptor/JB_json_v1":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/json,dojo/request,JBrowse/Util,JBrowse/Digest/Crc32".split(","),
function(h,j,g,i,f,e,d){var c=e.dojof;return h("JBrowse.ConfigAdaptor.JB_json_v1",null,{constructor:function(){},load:function(b){var a=this;if(b.config.url){var c=e.resolveUrl(b.baseUrl||window.location.href,b.config.url);return f(c,{handleAs:"text"}).then(function(d){d=a.parse_conf(d,b)||{};d.sourceUrl=c;return d=a.regularize_conf(d,b)})}if(b.config.data)return e.resolved(this.regularize_conf(b.config.data,b))},parse_conf:function(b,a){try{return i.fromJson(b)}catch(c){throw c+" when parsing "+
(a.config.url||"configuration")+".";}},regularize_conf:function(b,a){if(b.tracks&&!j.isArray(b.tracks))if(b.tracks.label)b.tracks=[b.tracks];else{var d=[],f;for(f in b.tracks){if(!("label"in b.tracks[f]))b.tracks[f].label=f;d.push(b.tracks[f])}b.tracks=d}var i=b.trackMetadata;if(i&&i.sources){if(i.sources.url||"string"==typeof i.sources)i.sources=[i.sources];if(!j.isArray(i.sources)){var d=[],h;for(h in i.sources){if(!("name"in i.sources))i.sources[h].name=h;d.push(i.sources[h])}i.sources=d}g.forEach(i.sources,
function(a,b){if("string"==typeof a){i.sources[b]={url:a};var c=a.match(/\.(\w+)$/);if(c)i.sources[b].type=c[1].toLowerCase()}})}b.sourceUrl=b.sourceUrl||a.config.url;b.baseUrl=b.baseUrl||e.resolveUrl(b.sourceUrl,".");b.baseUrl.length&&!/\/$/.test(b.baseUrl)&&(b.baseUrl+="/");if(b.sourceUrl){h=[].concat(b.tracks||[]).concat(c.values(b.stores||{}));b.names&&h.push(b.names);g.forEach(h,function(a){if(!a.baseUrl)a.baseUrl=b.baseUrl||"/"},this);if(b.refSeqs&&"string"==typeof b.refSeqs)b.refSeqs=e.resolveUrl(b.sourceUrl,
b.refSeqs);if(b.nameUrl)b.nameUrl=e.resolveUrl(b.sourceUrl,b.nameUrl)}return b=this.regularizeTrackConfigs(b)},regularizeTrackConfigs:function(b){b.stores=b.stores||{};g.forEach(b.tracks||[],function(a){if(a.config){var c=a.config;delete a.config;for(var d in c)!(d in a)&&c.hasOwnProperty(d)&&(a[d]=c[d])}if(!a.store&&(c=this._regularizeClass("JBrowse/View/Track",{FeatureTrack:"JBrowse/View/Track/HTMLFeatures",ImageTrack:"JBrowse/View/Track/FixedImage","ImageTrack.Wiggle":"JBrowse/View/Track/FixedImage/Wiggle",
SequenceTrack:"JBrowse/View/Track/Sequence"}[a.type]||a.type),a.type=c,this._synthesizeTrackStoreConfig(b,a),a.histograms)){if(!a.histograms.baseUrl)a.histograms.baseUrl=a.baseUrl;this._synthesizeTrackStoreConfig(b,a.histograms)}},this);return b},_synthesizeTrackStoreConfig:function(b,a){var c=a.urlTemplate;if(c=this._regularizeClass("JBrowse/Store",a.storeClass?a.storeClass:/\/FixedImage/.test(a.type)?"JBrowse/Store/TiledImage/Fixed"+(0==a.backendVersion?"_v0":""):/\.jsonz?$/i.test(c)?"JBrowse/Store/SeqFeature/NCList"+
(0==a.backendVersion?"_v0":""):/\.bam$/i.test(c)?"JBrowse/Store/SeqFeature/BAM":/\.(bw|bigwig)$/i.test(c)?"JBrowse/Store/SeqFeature/BigWig":/\/Sequence$/.test(a.type)?"JBrowse/Store/Sequence/StaticChunked":null)){var e=j.mixin({},a);j.mixin(e,{type:c});e.name=("JBrowse/Store/Sequence/StaticChunked"==c||a.useAsRefSeqStore)&&!b.stores.refseqs?"refseqs":"store"+d.objectFingerprint(e);b.stores[e.name]=e;a.store=e.name}else console.warn("Unable to determine an appropriate data store to use with track '"+
a.label+"', please explicitly specify a storeClass in the configuration.")},_regularizeClass:function(b,a){if(!a)return null;/\//.test(a)||(a=b+"/"+a);return a=a.replace(/^\//)}})})},"JBrowse/View/TrackList/Hierarchical":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/dom-construct,dojo/query,dojo/on,dojo/json,dijit/TitlePane,dijit/layout/ContentPane,JBrowse/Util,./_TextFilterMixin".split(","),function(h,j,g,i,f,e,d,c,b,a,k){return h("JBrowse.View.TrackList.Hierarchical",
[b,k],{region:"left",splitter:!0,style:"width: 25%",id:"hierarchicalTrackPane",baseClass:"jbrowseHierarchicalTrackSelector",categoryFacet:"category",constructor:function(a){this.categories={};this.config=g.mixin({sortHierarchical:!0},a);this._loadState()},postCreate:function(){this.placeAt(this.browser.container);this.browser.subscribe("/jbrowse/v1/c/tracks/show",g.hitch(this,"setTracksActive"));this.browser.subscribe("/jbrowse/v1/c/tracks/hide",g.hitch(this,"setTracksInactive"));this.browser.subscribe("/jbrowse/v1/c/tracks/new",
g.hitch(this,"addTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/replace",g.hitch(this,"replaceTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/delete",g.hitch(this,"deleteTracks"))},buildRendering:function(){this.inherited(arguments);var a=new b({className:"header"});this.addChild(a);i.create("h2",{className:"title",innerHTML:"Available Tracks"},a.containerNode);this._makeTextFilterNodes(i.create("div",{className:"textfilterContainer"},a.containerNode));this._updateTextFilterControl()},
startup:function(){this.inherited(arguments);var a=[],c=this,d=this.get("categoryFacet"),e;this.config.sortHierarchical&&(e=[{attribute:d.toLowerCase()},{attribute:"key"},{attribute:"label"}]);for(var d=(this.get("collapsedCategories")||"").split(","),f=0;f<d.length;f++)g.setObject("collapsed."+d[f],!0,this.state);this._saveState();this.get("trackMetaData").fetch({onItem:function(b){b.conf&&a.push(b)},onComplete:function(){c.categories.Uncategorized={pane:(new b({className:"uncategorized"})).placeAt(c.containerNode),
tracks:{},categories:{}};c.addTracks(a,!0);if(!c.categories.Uncategorized.pane.containerNode.children.length)c.categories.Uncategorized.pane.domNode.style.display="none"},sort:e})},addTracks:function(b,d){this.pane=this;var f=this;j.forEach(b,function(b){function h(a,b,e){var i=b.shift(),e=e.concat(i),k=e.join("/"),j=a.categories[i]||(a.categories[i]=function(){var b=g.getObject("collapsed."+k,!1,f.state),b=new c({title:'<span class="categoryName">'+i+'</span> <span class="trackCount">0</span>',open:!b});
b.watch("open",function(a,b,c){g.setObject("collapsed."+k,!c,f.state);f._saveState()});a.pane.addChild(b,d?void 0:1);return{parent:a,pane:b,categories:{},tracks:{}}}.call(f));return b.length?h(j,b,e):j}var k=b.conf||b,j=this.get("categoryFacet"),j=(k.metadata&&k.metadata[j]||k[j]||b[j]||"Uncategorized").split(/\s*\/\s*/),j=h(this,j,[]);j.pane.domNode.style.display="block";var b=i.create("label",{className:"tracklist-label shown",title:a.escapeHTML(k.shortDescription||b.shortDescription||(1===k.description?
void 0:k.description)||b.description||k.Description||b.Description||k.metadata&&(k.metadata.shortDescription||k.metadata.description||k.metadata.Description)||b.key||k.key||k.label)},j.pane.containerNode),n=i.create("input",{type:"checkbox",className:"check"},b),s=k.label,t;this.own(t=e(n,"click",function(){f.browser.publish("/jbrowse/v1/v/tracks/"+(this.checked?"show":"hide"),[k])}));i.create("span",{className:"key",innerHTML:k.key||k.label},b);j.tracks[s]={checkbox:n,checkListener:t,labelNode:b};
this._updateTitles(j)},this)},_loadState:function(){this.state={};try{this.state=d.parse(localStorage.getItem("JBrowse-Hierarchical-Track-Selector")||"{}")}catch(a){}return this.state},_saveState:function(){try{localStorage.setItem("JBrowse-Hierarchical-Track-Selector",d.stringify(this.state))}catch(a){}},_updateAllTitles:function(a){var a=a||this,b;for(b in a.categories)this._updateTitle(a.categories[b]),this._updateAllTitles(a.categories[b])},_updateTitle:function(a){a.pane.set("title",a.pane.get("title").replace(/>\s*\d+\s*</,
">"+f("label.shown",a.pane.containerNode).length+"<"))},_updateTitles:function(a){this._updateTitle(a);a.parent&&this._updateTitles(a.parent)},_findTrack:function(a,b,c){var c=c||this,d;for(d in c.categories){var e=c.categories[d];if(e.tracks[a])return b(e.tracks[a],e),!0;if(this._findTrack(a,b,e))return!0}return!1},replaceTracks:function(){},setTracksActive:function(a){j.forEach(a,function(a){this._findTrack(a.label,function(a){a.checkbox.checked=!0})},this)},deleteTracks:function(a){j.forEach(a,
function(a){this._findTrack(a.label,function(b,c){b.labelNode.parentNode.removeChild(b.labelNode);b.checkListener.remove();delete c.tracks[a.label]})},this)},setTracksInactive:function(a){j.forEach(a,function(a){this._findTrack(a.label,function(a){a.checkbox.checked=!1})},this)},_textFilter:function(){this.inherited(arguments);this._updateAllTitles()},show:function(){},hide:function(){},toggle:function(){}})})},"dijit/TitlePane":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/_base/event,dojo/fx,dojo/_base/kernel,dojo/keys,./_CssStateMixin,./_TemplatedMixin,./layout/ContentPane,dojo/text!./templates/TitlePane.html,./_base/manager".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l){return j("dijit.TitlePane",[q,n,k],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:l.defaultDuration,baseClass:"dijitTitlePane",templateString:o,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);g.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,
"dijitTitlePaneTitle");var a=this.hideNode,b=this.wipeNode;this._wipeIn=c.wipeIn({node:b,duration:this.duration,beforeBegin:function(){a.style.display=""}});this._wipeOut=c.wipeOut({node:b,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,b){h.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});b?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();
else this.onHide();this.containerNode.setAttribute("aria-hidden",a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");this._set("open",a);this._setCss()},_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading");a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(i.remove(this.focusNode,"aria-controls"),i.remove(this.focusNode,
"tabIndex"),i.remove(this.focusNode,"aria-pressed"));this._set("toggleable",a);this._setCss()},_setContentAttr:function(a){!this.open||!this._wipeOut||"playing"==this._wipeOut.status()?this.inherited(arguments):(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),e.setMarginBox(this.wipeNode,{h:e.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display="")},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=
this.titleBarNode||this.focusNode,b=this._titleBarClass;this._titleBarClass="dijit"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");f.replace(a,this._titleBarClass,b||"");this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(b){b.keyCode==a.ENTER||b.keyCode==a.SPACE?this.toggleable&&(this.toggle(),d.stop(b)):b.keyCode==a.DOWN_ARROW&&this.open&&(this.containerNode.focus(),b.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(a){b.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.",
"","2.0");this.set("title",a)}})})},"dojo/fx":function(){define("./_base/lang,./Evented,./_base/kernel,./_base/array,./_base/connect,./_base/fx,./dom,./dom-style,./dom-geometry,./ready,require".split(","),function(h,j,g,i,f,e,d,c,b,a,k){g.isAsync||a(0,function(){k(["./fx/Toggler"])});var g=g.fx={},a={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}},n=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;i.forEach(this._animations,
function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};n.prototype=new j;h.extend(n,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){f.disconnect(this._onAnimateCtx);f.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=f.connect(this._current,"onAnimate",this,"_onAnimate"),this._onEndCtx=f.connect(this._current,
"onEnd",this,"_onEnd"),this._current.play(0,!0))},play:function(a,b){if(!this._current)this._current=this._animations[this._index=0];if(!b&&"playing"==this._current.status())return this;var c=f.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin")}),d=f.connect(this._current,"onBegin",this,function(a){this._fire("onBegin",arguments)}),e=f.connect(this._current,"onPlay",this,function(a){this._fire("onPlay",arguments);f.disconnect(c);f.disconnect(d);f.disconnect(e)});this._onAnimateCtx&&
f.disconnect(this._onAnimateCtx);this._onAnimateCtx=f.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx&&f.disconnect(this._onEndCtx);this._onEndCtx=f.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=f.connect(this._current,"onPause",this,function(b){this._fire("onPause",arguments);f.disconnect(a)});this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*
a;this._current=null;i.some(this._animations,function(a){if(a.duration<=c)return this._current=a,!0;c-=a.duration;return!1});this._current&&this._current.gotoPercent(c/this._current.duration,b);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=f.connect(this._current,"onStop",this,function(a){this._fire("onStop",arguments);f.disconnect(b)});this._current.stop()}return this},
status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&f.disconnect(this._onAnimateCtx);this._onEndCtx&&f.disconnect(this._onEndCtx)}});h.extend(n,a);g.chain=function(a){return new n(a)};var q=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;i.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);if(this.duration<b)this.duration=b;this._connects.push(f.connect(a,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=
new e.Animation({curve:[0,1],duration:this.duration});var b=this;i.forEach("beforeBegin,onBegin,onPlay,onAnimate,onPause,onStop,onEnd".split(","),function(a){b._connects.push(f.connect(b._pseudoAnimation,a,function(){b._fire(a,arguments)}))})};h.extend(q,{_doAction:function(a,b){i.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,
b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;i.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},
destroy:function(){i.forEach(this._connects,f.disconnect)}});h.extend(q,a);g.combine=function(a){return new q(a)};g.wipeIn=function(a){var b=a.node=d.byId(a.node),g=b.style,i,a=e.animateProperty(h.mixin({properties:{height:{start:function(){i=g.overflow;g.overflow="hidden";if("hidden"==g.visibility||"none"==g.display)return g.height="1px",g.display="",g.visibility="",1;var a=c.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},a)),k=function(){g.height="auto";g.overflow=
i};f.connect(a,"onStop",k);f.connect(a,"onEnd",k);return a};g.wipeOut=function(a){var b=(a.node=d.byId(a.node)).style,c,a=e.animateProperty(h.mixin({properties:{height:{end:1}}},a));f.connect(a,"beforeBegin",function(){c=b.overflow;b.overflow="hidden";b.display=""});var g=function(){b.overflow=c;b.height="auto";b.display="none"};f.connect(a,"onStop",g);f.connect(a,"onEnd",g);return a};g.slideTo=function(a){var g=null,i=null,k=function(a){return function(){var d=c.getComputedStyle(a),e=d.position;
g="absolute"==e?a.offsetTop:parseInt(d.top)||0;i="absolute"==e?a.offsetLeft:parseInt(d.left)||0;if("absolute"!=e&&"relative"!=e)d=b.position(a,!0),g=d.y,i=d.x,a.style.position="absolute",a.style.top=g+"px",a.style.left=i+"px"}}(a.node=d.byId(a.node));k();a=e.animateProperty(h.mixin({properties:{top:a.top||0,left:a.left||0}},a));f.connect(a,"beforeBegin",a,k);return a};return g})},"url:dijit/templates/TitlePane.html":'<div>\n\t<div data-dojo-attach-event="onclick:_onTitleClick, onkeydown:_onTitleKey"\n\t\t\tclass="dijitTitlePaneTitle" data-dojo-attach-point="titleBarNode" id="${id}_titleBarNode">\n\t\t<div class="dijitTitlePaneTitleFocus" data-dojo-attach-point="focusNode">\n\t\t\t<img src="${_blankGif}" alt="" data-dojo-attach-point="arrowNode" class="dijitArrowNode" role="presentation"\n\t\t\t/><span data-dojo-attach-point="arrowNodeInner" class="dijitArrowNodeInner"></span\n\t\t\t><span data-dojo-attach-point="titleNode" class="dijitTitlePaneTextNode"></span>\n\t\t</div>\n\t</div>\n\t<div class="dijitTitlePaneContentOuter" data-dojo-attach-point="hideNode" role="presentation">\n\t\t<div class="dijitReset" data-dojo-attach-point="wipeNode" role="presentation">\n\t\t\t<div class="dijitTitlePaneContentInner" data-dojo-attach-point="containerNode" role="region" id="${id}_pane" aria-labelledby="${id}_titleBarNode">\n\t\t\t\t<\!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n',
"JBrowse/View/TrackList/_TextFilterMixin":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/dom-construct,dojo/dom-class,dojo/keys,dojo/query".split(","),function(h,j,g,i,f,e){return h(null,{_makeTextFilterNodes:function(d){this.textFilterDiv=g.create("div",{className:"textfilter",style:{position:"relative",overflow:"hidden"}},d);this.textFilterInput=g.create("input",{type:"text",placeholder:"filter tracks",onkeypress:j.hitch(this,function(c){if(c.keyCode==f.ESCAPE)this.textFilterInput.value=
"";this.textFilterTimeout&&window.clearTimeout(this.textFilterTimeout);this.textFilterTimeout=window.setTimeout(j.hitch(this,function(){this._updateTextFilterControl();this._textFilter(this.textFilterInput.value)}),500);this._updateTextFilterControl();c.stopPropagation()})},this.textFilterDiv);this.textFilterClearButton=g.create("div",{className:"jbrowseIconCancel",onclick:j.hitch(this,function(){this._clearTextFilterControl();this._textFilter(this.textFilterInput.value)})},this.textFilterDiv)},_clearTextFilterControl:function(){this.textFilterInput.value=
"";this._updateTextFilterControl()},_updateTextFilterControl:function(){this.textFilterInput.value.length?i.remove(this.textFilterDiv,"dijitDisabled"):i.add(this.textFilterDiv,"dijitDisabled")},_textFilter:function(d){d&&/\S/.test(d)?(d=d.toLowerCase(),e(".tracklist-label",this.containerNode).forEach(function(c){-1!=c.innerHTML.toLowerCase().indexOf(d)?(i.remove(c,"collapsed"),i.add(c,"shown")):(i.add(c,"collapsed"),i.remove(c,"shown"))})):e(".tracklist-label",this.containerNode).removeClass("collapsed").addClass("shown")}})})},
"JBrowse/Store/Sequence/StaticChunked":function(){define(["JBrowse/Store/SeqFeature/SequenceChunks"],function(h){return h})},"JBrowse/Store/SeqFeature/SequenceChunks":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/request,dojo/promise/all,dojo/Deferred,JBrowse/Store/SeqFeature,JBrowse/Util,JBrowse/Model/SimpleFeature,JBrowse/Digest/Crc32".split(","),function(h,j,g,i,f,e,d,c,b){return h(e,{constructor:function(a){this.chunkCache={};this.compress=a.compress;this.urlTemplate=a.urlTemplate;
if(!this.urlTemplate)throw"no urlTemplate provided, cannot open sequence store";this.baseUrl=a.baseUrl;this.seqChunkSize=a.seqChunkSize},getFeatures:function(a,c,d,e){var e=e||function(a){console.error(a)},g=a.ref;if(!this.browser.compareReferenceNames(this.refSeq.name,g))g=this.refSeq.name;for(var h=g==this.refSeq.name&&this.refSeq.seqChunkSize||this.seqChunkSize||(this.compress?8E4:2E4),m=this.resolveUrl(this.urlTemplate,{refseq:g,refseq_dirpath:function(){for(var a=b.crc32(g).toString(16).toLowerCase().replace("-",
"n");8>a.length;)a="0"+a;for(var c=[],d=0;d<a.length;d+=3)c.push(a.substring(d,d+3));return c.join("/")}}),r=Math.floor(Math.max(0,a.start)/h),a=Math.floor((a.end-1)/h),p,u=[];r<=a;r++)(function(a){var b=this,d=new f;this._fetchChunk(m,a).then(j.hitch(d,"resolve"),function(a){404==a.response.status?d.resolve(""):d.reject(a)});d.then(function(d){p||c(b._makeFeature(g,a,h,d))},function(a){p||e(p=a)});u.push(d)}).call(this,r);i(u).then(d)},_fetchChunk:function(a,b){return g.get(a+b+".txt"+(this.compress?
"z":""),{handleAs:"text"})},_makeFeature:function(a,b,d,e){return new c({data:{start:b*d,end:b*d+e.length,residues:e,seq_id:a,name:a}})}})})},"JBrowse/Store/SeqFeature/NCList":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/Deferred,dojo/request/xhr,JBrowse/Store/SeqFeature,JBrowse/Store/DeferredFeaturesMixin,JBrowse/Store/DeferredStatsMixin,JBrowse/Util,JBrowse/Model/ArrayRepr,JBrowse/Store/NCList,JBrowse/Store/LazyArray".split(","),function(h,j,g,i,f,e,d,c,b,a,k){var n=function(){return this._uniqueID},
q=function(){return this._parent},o=function(){return this.get("subfeatures")};return h(f,{constructor:function(a){this.args=a;this.baseUrl=a.baseUrl;this.urlTemplates={root:a.urlTemplate};this._deferred={}},makeNCList:function(){return new a},loadNCList:function(a,b,c){a.nclist.importExisting(b.intervals.nclist,a.attrs,c,b.intervals.urlTemplate,b.intervals.lazyClass)},getDataRoot:function(a){if(!this._deferred.root||this.curRefName!=a){this._deferred.root=new g;this.curRefName=a;var b={nclist:this.makeNCList()},
d=this.resolveUrl(this._evalConf(this.urlTemplates.root),{refseq:a}),e=this;i.get(d,{handleAs:"json",failOk:!0}).then(function(a){e._handleTrackInfo(b,a,d)},function(a){c.isElectron()||404==a.response.status?e._handleTrackInfo(b,{},d):200!=a.response.status?e._failAllDeferred("Server returned an HTTP "+a.response.status+" error"):e._failAllDeferred(a)})}return this._deferred.root},_handleTrackInfo:function(a,c,d){a.stats={featureCount:c.featureCount||0,featureDensity:(c.featureCount||0)/this.refSeq.length};
this.empty=!c.featureCount;if(c.intervals)a.attrs=new b(c.intervals.classes),this.loadNCList(a,c,d);if((c=c.histograms)&&c.meta){for(var e=0;e<c.meta.length;e++)c.meta[e].lazyArray=new k(c.meta[e].arrayParams,d);a._histograms=c}this._deferred.root.resolve(a)},getGlobalStats:function(a,b){return(this._deferred.root||this.getDataRoot(this.browser.refSeq.name)).then(function(b){a(b.stats)},b)},getRegionStats:function(a,b,c){this.getDataRoot(a.ref).then(function(a){b(a.stats)},c)},getRegionFeatureDensities:function(a,
b,c){this.getDataRoot(a.ref).then(function(c){var d,e;if(a.numBins)d=a.numBins,e=(a.end-a.start)/d;else if(a.basesPerBin)e=a.basesPerBin,d=Math.ceil((a.end-a.start)/e);else throw Error("numBins or basesPerBin arg required for getRegionFeatureDensities");for(var f=function(a,b){for(var c=0;c<b.length;c++)if(b[c].basesPerBin>=a)return b[c]}(e,c._histograms.stats||[]),g=c._histograms.meta[0],i=0;i<c._histograms.meta.length;i++)e>=c._histograms.meta[i].basesPerBin&&(g=c._histograms.meta[i]);var h=e/g.basesPerBin;
if(0.9<h&&1.0E-4>Math.abs(h-Math.round(h))){for(var k=Math.floor(a.start/g.basesPerBin),h=Math.round(h),j=[],c=0;c<d;c++)j[c]=0;g.lazyArray.range(k,k+h*d,function(a,b){j[Math.floor((a-k)/h)]+=b},function(){b({bins:j,stats:f})})}else c.nclist.histogram.call(c.nclist,a.start,a.end,d,function(a){b({bins:a,stats:f})})},c)},getFeatures:function(a,b,c,d){if(this.empty)c();else{var e=this;this.getDataRoot(a.ref).then(function(f){e._getFeatures(f,a,b,c,d)},d)}},_getFeatures:function(a,b,c,d,e){var f=this,
g=b.start,b=b.end,i=a.attrs.accessors();a.nclist.iterate.call(a.nclist,g,b,function(a,b){if(!a.decorated){var d=b.join(",");f._decorate_feature(i,a,d)}return c(a)},d,e)},_decorate_feature:function(a,b,c,d){b.get=a.get;b.tags=a.tags;b._uniqueID=c;b.id=n;b._parent=d;b.parent=q;b.children=o;dojo.forEach(b.get("subfeatures"),function(d,e){this._decorate_feature(a,d,c+"-"+e,b)},this);b.decorated=!0}})})},"JBrowse/Store/DeferredStatsMixin":function(){define(["dojo/_base/declare","dojo/Deferred","JBrowse/Util"],
function(h,j){return h(null,{constructor:function(){this._deferGlobalStats()},_deferGlobalStats:function(){if(!this._deferred)this._deferred={};this._deferred.stats=new j},getGlobalStats:function(g,i){this._deferred.stats.then(dojo.hitch(this,"_getGlobalStats",g,i),i)},_getGlobalStats:function(g){g(this.globalStats||{})},getRegionStats:function(g,i,f){this._deferred.stats.then(dojo.hitch(this,"_getRegionStats",g,i,f),f)}})})},"JBrowse/Model/ArrayRepr":function(){define([],function(){function h(h){this.classes=
h;this.fields=[];for(var g=0;g<h.length;g++){this.fields[g]={};for(var i=0;i<h[g].attributes.length;i++)this.fields[g][h[g].attributes[i]]=i+1;if(void 0===h[g].proto)h[g].proto={};if(void 0===h[g].isArrayAttr)h[g].isArrayAttr={}}}h.prototype.attrIndices=function(h){return this.classes.map(function(g){return g.attributes.indexOf(h)+1||g.attributes.indexOf(h.toLowerCase())+1||void 0})};h.prototype.get=function(h,g){if(g in this.fields[h[0]])return h[this.fields[h[0]][g]];var i=g.toLowerCase();if(i in
this.fields[h[0]])return h[this.fields[h[0]][i]];i=this.classes[h[0]].attributes.length+1;if(i>=h.length||!(g in h[i])){if(g in this.classes[h[0]].proto)return this.classes[h[0]].proto[g]}else return h[i][g]};h.prototype.set=function(h,g,i){if(g in this.fields[h[0]])h[this.fields[h[0]][g]]=i;else{var f=g.toLowerCase();f in this.fields[h[0]]?h[this.fields[h[0]][f]]=i:(f=this.classes[h[0]].attributes.length+1,f>=h.length&&(h[f]={}),h[f][g]=i)}};h.prototype.makeSetter=function(h){var g=this;return function(i,
f){g.set(i,h,f)}};h.prototype.makeGetter=function(h){var g=this;return function(i){return g.get(i,h)}};h.prototype.makeFastSetter=function(h){var g=this.attrIndices(h);return function(h,f){void 0!==g[h[0]]&&(h[g[h[0]]]=f)}};h.prototype.makeFastGetter=function(h){var g=this.attrIndices(h);return function(h){if(void 0!==g[h[0]])return h[g[h[0]]]}};h.prototype.construct=function(h,g,i){var h=Array(h.classes[i].length),f;for(f in g)this.set(h,f,g[f]);return h};h.prototype.accessors=function(){return this._accessors=
this._accessors||this._makeAccessors()};h.prototype._makeAccessors=function(){var h={},g,i={get:function(e){if(e=this.get.field_accessors[e])return e.call(this)},set:function(e,d){var c=this.set.field_accessors[e];if(c)return c.call(this,d)},tags:function(){return g[this[0]]||[]}};i.get.field_accessors={};i.set.field_accessors={};dojo.forEach(this.classes,function(e,d){dojo.forEach(e.attributes||[],function(c,b){h[c]=h[c]||[];h[c][d]=b+1;c=c.toLowerCase();h[c]=h[c]||[];h[c][d]=b+1})});g=dojo.map(this.classes,
function(e){return e.attributes});for(var f in h)h.hasOwnProperty(f)&&(i.get.field_accessors[f]=function(){var e=h[f];return!e?function(){}:function(){return this[e[this[0]]]}}(),i.set.field_accessors[f]=function(){var e=h[f];return!e?function(){}:function(d){return this[e[this[0]]]=d}}());return i};return h})},"JBrowse/Store/NCList":function(){define(["dojo/request","dojo/promise/all","dojo/Deferred","JBrowse/Util"],function(h,j,g,i){function f(){this.topList=[]}f.prototype.importExisting=function(e,
d,c,b,a){this.topList=e;this.attrs=d;this.start=d.makeFastGetter("Start");this.end=d.makeFastGetter("End");this.lazyClass=a;this.baseURL=c;this.lazyUrlTemplate=b;this.lazyChunks={}};f.prototype.fill=function(e,d){if(0==e.length)this.topList=[];else{this.attrs=d;this.start=d.makeFastGetter("Start");this.end=d.makeFastGetter("End");var c=d.makeSetter("Sublist"),b=this.start,a=this.end;e.sort(function(c,d){return b(c)!=b(d)?b(c)-b(d):a(d)-a(c)});var f=[],g=[];this.topList=g;g.push(e[0]);if(1!=e.length)for(var h,
i,j=1,m=e.length;j<m;j++)if(h=e[j],a(h)<a(e[j-1]))f.push(g),g=Array(h),c(e[j-1],g);else for(;;)if(0==f.length){g.push(h);break}else if(i=f[f.length-1],a(i[i.length-1])>a(h)){g.push(h);break}else g=f.pop()}};f.prototype.binarySearch=function(e,d,c){for(var b=-1,a=e.length,f;1<a-b;)f=b+a>>>1,c(e[f])>=d?a=f:b=f;return c===this.end?a:b};f.prototype.iterHelper=function(e,d,c,b,a,f,n,q){for(var o=e.length,l=this.binarySearch(e,d,f),m=this.attrs.makeGetter("Chunk"),r=this.attrs.makeGetter("Sublist"),p=[];l<
o&&0<=l&&a*n(e[l])<a*c;){e[l][0]==this.lazyClass?function(){var j=this,o=m(e[l]);o in this.lazyChunks||(this.lazyChunks[o]={});var v=new g;p.push(v.promise);h.get(i.resolveUrl(this.baseURL,this.lazyUrlTemplate.replace(/\{Chunk\}/ig,o)),{handleAs:"json"}).then(function(e){return j.iterHelper(e,d,c,b,a,f,n,[o]).then(function(){v.resolve()})},function(a){if(404!=a.response.status)throw Error(a);v.resolve()})}.call(this):b(e[l],q.concat(l));var u=r(e[l]);u&&p.push(this.iterHelper(u,d,c,b,a,f,n,q.concat(l)));
l+=a}return j(p)};f.prototype.iterate=function(e,d,c,b){var a=e>d?this.start:this.end,f=e>d?this.end:this.start;0<this.topList.length&&this.iterHelper(this.topList,e,d,c,e>d?-1:1,a,f,[0]).then(b)};f.prototype.histogram=function(e,d,c,b){for(var a=Array(c),f=(d-e)/c,g=this.start,h=this.end,i=0;i<c;i++)a[i]=0;this.iterate(e,d,function(b){for(var d=Math.max(0,(g(b)-e)/f|0),b=Math.min(c,(h(b)-e)/f|0);d<=b;d++)a[d]++},function(){b(a)})};return f})},"JBrowse/Store/LazyArray":function(){define(["JBrowse/Util",
"JBrowse/Finisher","dojo/_base/xhr"],function(h,j){var g=function(g,f){this.urlTemplate=g.urlTemplate;this.chunkSize=g.chunkSize;this.length=g.length;this.baseUrl=void 0===f?"":f;this.chunks=[];this.toProcess={}};g.prototype.index=function(g,f,e){this.range(g,g,f,void 0,e)};g.prototype.range=function(g,f,e,d,c){var g=Math.max(0,g),f=Math.min(f,this.length-1),b=Math.floor(g/this.chunkSize),a=Math.floor(f/this.chunkSize);void 0===d&&(d=function(){});for(var k=new j(d),d=b;d<=a;d++)this.chunks[d]?this._processChunk(g,
f,d,e,c):(b={start:g,end:f,callback:e,param:c,finish:k},k.inc(),this.toProcess[d]?this.toProcess[d].push(b):(this.toProcess[d]=[b],b=this.urlTemplate.replace(/\{Chunk\}/gi,d),dojo.xhrGet({url:this.baseUrl?h.resolveUrl(this.baseUrl,b):b,handleAs:"json",load:this._makeLoadFun(d),error:function(){k.dec()}})));k.finish()};g.prototype._makeLoadFun=function(g){var f=this;return function(e){f.chunks[g]=e;e=f.toProcess[g];delete f.toProcess[g];for(var d=0;d<e.length;d++)f._processChunk(e[d].start,e[d].end,
g,e[d].callback,e[d].param),e[d].finish.dec()}};g.prototype._processChunk=function(g,f,e,d,c){for(var b=e*this.chunkSize,f=f-b,g=Math.max(0,g-b),f=Math.min(f,this.chunkSize-1);g<=f;g++)d(g+b,this.chunks[e][g],c)};return g})},"JBrowse/Finisher":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(h){this.fun=h;this.count=0;this.finished=!1},inc:function(){this.count++},dec:function(){this.count--;this.finish()},finish:function(){if(0>=this.count&&!this.finished)this.fun(),
this.finished=!0}})})},"JBrowse/Store/TiledImage/Fixed":function(){define(["dojo/_base/declare","dojo/_base/Deferred","JBrowse/Store","JBrowse/Store/DeferredStatsMixin","JBrowse/Util"],function(h,j,g,i,f){return h([g,i],{constructor:function(e){this.tileToImage={};this.zoomCache={};this.baseUrl=e.baseUrl;this.url=this.resolveUrl(e.urlTemplate);this._deferred.images=new j;dojo.xhrGet({url:this.url,handleAs:"json",failOk:!0,load:dojo.hitch(this,function(d){this.loadSuccess(d)}),error:dojo.hitch(this,
"_failAllDeferred")})},loadSuccess:function(e){this.globalStats=e.stats||{};if(!("scoreMin"in this.globalStats))this.globalStats.scoreMin=this.globalStats.global_min;if(!("scoreMax"in this.globalStats))this.globalStats.scoreMax=this.globalStats.global_max;this.tileWidth=e.tileWidth;this.align=e.align;this.zoomLevels=e.zoomLevels;this._deferred.stats.resolve({success:!0});this._deferred.images.resolve({success:!0})},_getZoom:function(e){var d=this.zoomCache[e];if(d)return d;for(var d=this.zoomLevels[0],
c=this.tileWidth/e,b=1;b<this.zoomLevels.length;b++)Math.abs(this.zoomLevels[b].basesPerTile-c)<Math.abs(d.basesPerTile-c)&&(d=this.zoomLevels[b]);return this.zoomCache[e]=d},getImages:function(e,d,c){var b=this;this._deferred.images.then(function(a){a.success?b._getImages(e,d,c):(b.error=a.error,c(a.error||a))},c)},_getImages:function(e,d){for(var c=e.start,b=e.end,a=this._getZoom(e.scale||1),f=Math.max(c/a.basesPerTile,0)|0,b=b/a.basesPerTile|0,c=[],g=f;g<=b;g++)f=document.createElement("img"),
dojo.connect(f,"onerror",this.handleImageError),f.src=this._imageSource(a,g),f.startBase=g*a.basesPerTile,f.baseWidth=a.basesPerTile,f.tileNum=g,c.push(f);d(c)},_imageSource:function(e,d){return f.resolveUrl(this.url,e.urlPrefix+d+".png")}})})},"JBrowse/Store/Names/Hash":function(){define("dojo/_base/declare,dojo/_base/array,dojo/store/util/QueryResults,JBrowse/Util,JBrowse/Store/Hash,JBrowse/Model/Location".split(","),function(h,j,g,i,f,e){return h(f,{constructor:function(d){this.tooManyMatchesMessage=
d.tooManyMatchesMessage||"(too many matches to display)";var c=this.stopPrefixes={};d.stopPrefixes&&dojo.forEach("string"==typeof d.stopPrefixes?[d.stopPrefixes]:d.stopPrefixes,function(b){for(;b.length;)c[b]=!0,b=b.substr(0,b.length-1)})},_nameRecordToItem:function(d){if(d.hitLimit)return{name:this.tooManyMatchesMessage,hitLimit:!0};var c={};if("object"==typeof d){c.name=d[0];var b=this._findTrackConfig(((this.meta||{}).track_names||{})[d[1]]);c.location=new e({ref:d[3],start:parseInt(d[4]),end:parseInt(d[5]),
tracks:[b],objectName:d[0]})}else c.name=d;return c},_findTrackConfig:function(d){if(!d)return null;var c=null;j.some(this.browser.config.tracks,function(b){return b.label==d?(c=b,!0):!1});return c},_makeResults:function(d){var d=j.map(d,dojo.hitch(this,"_nameRecordToItem")).sort(function(a,b){return a.name.localeCompare(b.name)||a.location.localeCompare(b.location)}),c,b,d=j.filter(d,function(a){if(a.hitLimit){b=a;if(!b.label)b.label=b.name||"too many matches";return!1}if(c&&c.name==a.name)return c.label=
c.name+' <span class="multipleLocations">multiple locations</span>',c.multipleLocations?c.multipleLocations.push(a.location):(c.multipleLocations=[c.location,a.location],delete c.location),!1;c=a;c.label=c.name+(c.location?' <span class="locString">'+c.location+"</span>":"");return!0});b&&d.push(b);return g(d)},query:function(d){var c=this,d=(d.name||"").toString();this.meta.lowercase_keys&&(d=d.toLowerCase());var b=/\*$/;return b.test(d)?(d=d.replace(b,""),this._getEntry(d).then(function(a){a=a||
{};return c._makeResults((a.exact||[]).concat(a.prefix||[]))})):this._getEntry(d).then(function(a){return c._makeResults((a||{}).exact||[])})},get:function(d){this.meta.lowercase_keys&&(d=d.toLowerCase());return this._getEntry(d).then(function(c){return(c=(c.exact||[])[0])?this._nameRecordToItem(c):null})},_getEntry:function(d){return this._getBucket(d).then(function(c){return c[d]})}})})},"JBrowse/Store/Hash":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/store/JsonRest","dojo/store/util/QueryResults",
"JBrowse/Digest/Crc32"],function(h,j,g,i,f){return h(null,{constructor:function(e){var d=/\/$/.test(e.url)?e.url:e.url+"/";this.bucketStore=new g({target:d});this.meta={};this.browser=e.browser;this.ready=this._readMeta()},_readMeta:function(){var e=this;return this.bucketStore.get("meta.json").then(function(d){dojo.mixin(e.meta,d||{});e.meta.hash_hex_characters=Math.ceil(e.meta.hash_bits/4)})},query:function(e){return this.get((e.name||"").toString()).then(function(d){return i((d||{}).exact||[])})},
get:function(e){return this._getBucket(e).then(function(d){return d[e]})},_getBucket:function(e){var d=this;return this.ready.then(function(){var c=d._hash(e);return d.bucketStore.get(d._hexToDirPath(c))})},_hexToDirPath:function(e){for(;8>e.length;)e="0"+e;for(var e=e.substr(8-this.meta.hash_hex_characters),d=[],c=0;c<e.length;c+=3)d.push(e.substring(c,c+3));return d.join("/")+".json"+(this.meta.compress?"z":"")},_hash:function(e){return f.objectFingerprint(e).toString(16).toLowerCase().replace("-",
"n")},getIdentity:function(e){return e.id}})})},"dojo/store/JsonRest":function(){define(["../_base/xhr","../_base/lang","../json","../_base/declare","./util/QueryResults"],function(h,j,g,i,f){return i("dojo.store.JsonRest",null,{constructor:function(e){this.headers={};i.safeMixin(this,e)},headers:{},target:"",idProperty:"id",get:function(e,d){var d=d||{},c=j.mixin({Accept:this.accepts},this.headers,d.headers||d);return h("GET",{url:this.target+e,handleAs:"json",headers:c})},accepts:"application/javascript, application/json",
getIdentity:function(e){return e[this.idProperty]},put:function(e,d){var d=d||{},c="id"in d?d.id:this.getIdentity(e),b="undefined"!=typeof c;return h(b&&!d.incremental?"PUT":"POST",{url:b?this.target+c:this.target,postData:g.stringify(e),handleAs:"json",headers:j.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===d.overwrite?"*":null,"If-None-Match":!1===d.overwrite?"*":null},this.headers,d.headers)})},add:function(e,d){d=d||{};d.overwrite=!1;return this.put(e,d)},remove:function(e,
d){d=d||{};return h("DELETE",{url:this.target+e,headers:j.mixin({},this.headers,d.headers)})},query:function(e,d){var d=d||{},c=j.mixin({Accept:this.accepts},this.headers,d.headers);if(0<=d.start||0<=d.count)c.Range=c["X-Range"]="items="+(d.start||"0")+"-"+("count"in d&&Infinity!=d.count?d.count+(d.start||0)-1:"");var b=-1<this.target.indexOf("?");e&&"object"==typeof e&&(e=(e=h.objectToQuery(e))?(b?"&":"?")+e:"");if(d&&d.sort){for(var a=this.sortParam,e=e+((e||b?"&":"?")+(a?a+"=":"sort(")),b=0;b<
d.sort.length;b++)var g=d.sort[b],e=e+((0<b?",":"")+(g.descending?"-":"+")+encodeURIComponent(g.attribute));a||(e+=")")}var i=h("GET",{url:this.target+(e||""),handleAs:"json",headers:c});i.total=i.then(function(){var a=i.ioArgs.xhr.getResponseHeader("Content-Range");return a&&(a=a.match(/\/(.*)/))&&+a[1]});return f(i)}})})},"JBrowse/Store/Names/REST":function(){define("dojo/_base/declare,dojo/_base/array,dojo/store/util/QueryResults,dojo/request/xhr,dojo/io-query,JBrowse/Store/Hash".split(","),function(h,
j,g,i,f){return h(null,{constructor:function(e){this.url=e.url},query:function(e){var d="equals",e=""+e.name;/\*$/.test(e)&&(e=e.replace(/\*$/,""),d="startswith");var c={};c[d]=e;return i(this.url+"?"+f.objectToQuery(c),{handleAs:"json"}).then(function(b){for(var a=0;a<b.length;a++){var c=b[a];c.label=c.name+(c.location?'<span class="locString">'+c.location.ref+":"+c.location.start+".."+c.location.end+" ("+c.name+")</span>":"")}return g(b)},function(){return g([])})},get:function(e){return this.query(e,
void 0)},getIdentity:function(e){return e.id}})})},"JBrowse/View/Track/Sequence":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/dom-construct,dojo/dom-class,dojo/query,JBrowse/View/Track/BlockBased,JBrowse/View/Track/_ExportMixin,JBrowse/CodonTable,JBrowse/Util".split(","),function(h,j,g,i,f,e,d,c,b,a){return h([d,c,b],{constructor:function(){this._charMeasurements={};this._codonTable=this.generateCodonTable(g.mixin(this.defaultCodonTable,this.config.codonTable));this._codonStarts=
this.config.codonStarts||this.defaultStarts;this._codonStops=this.config.codonStops||this.defaultStops},_defaultConfig:function(){return{maxExportSpan:5E5,showForwardStrand:!0,showReverseStrand:!0,showTranslation:!0}},_exportFormats:function(){return[{name:"FASTA",label:"FASTA",fileExt:"fasta"}]},endZoom:function(){this.clear()},setViewInfo:function(a,b,c,d,e,f,g){this.inherited(arguments);this.show()},nbsp:String.fromCharCode(160),fillBlock:function(a){var b=a.blockIndex,c=a.block,d=a.scale,e=a.leftBase-
2,f=a.rightBase+2,g=this,h=dojo.create("div",{className:"sequence_blur",innerHTML:'<span class="loading">Loading</span>'},c.domNode);this.heightUpdate(h.offsetHeight+2*h.offsetTop,b);1.3<=d?this.store.getReferenceSequence({ref:this.refSeq.name,start:e,end:f},function(e){""==e.trim()?h.innerHTML='<span class="zoom">No sequence available</span>':(i.empty(c.domNode),g._fillSequenceBlock(c,b,d,e));a.finishCallback()},function(){a.finishCallback()}):(h.innerHTML='<span class="zoom">Zoom in to see sequence</span>',
a.finishCallback())},_fillSequenceBlock:function(b,c,d,e){var e=e.replace(/\s/g,this.nbsp),g=b.startBase,h=b.endBase,r=e.substring(2,e.length-2),p=r.length,u=e.substring(0,e.length-2-(e.length-2)%3),e=e.substring(2);if(this.config.showForwardStrand&&this.config.showTranslation){for(var s=[],t=0;3>t;t++){var v=g+t,v=(v%3+3)%3,w=this._renderTranslation(e,t,g,h,p,d);s[v]=w;f.add(w,"frame"+v)}for(t=2;0<=t;t--)b.domNode.appendChild(s[t])}var e=this.getCharacterMeasurements("sequence"),e=d>e.w+4,x;if(this.config.showReverseStrand||
this.config.showForwardStrand)x=i.create("table",{className:"sequence"+(e?" big":""),style:{width:"100%"}},b.domNode);this.config.showForwardStrand&&x.appendChild(this._renderSeqTr(g,h,r,d));if(this.config.showReverseStrand&&(r=this._renderSeqTr(g,h,a.complement(r),d),r.className="revcom",x.appendChild(r),this.config.showTranslation)){s=[];for(t=0;3>t;t++)v=g+1-t,v=(v%3+3)%3,w=this._renderTranslation(u,t,g,h,p,d,!0),s[v]=w,f.add(w,"frame"+v);for(t=0;3>t;t++)b.domNode.appendChild(s[t])}var E=0;j.forEach(b.domNode.childNodes,
function(a){E+=a.clientHeight||a.offsetHeight});this.heightUpdate(E,c)},_renderTranslation:function(b,c,d,e,f,g,h){b=h?a.revcom(b):b;d=b.slice(c,b.length-(b.length-c)%3);b="";for(e=0;e<d.length;e+=3)var j=this._codonTable[d.slice(e,e+3)]||this.nbsp,b=b+j;var b=h?b.split("").reverse().join(""):b,d=h?d.split("").reverse().join(""):d,e=this.getCharacterMeasurements("aminoAcid"),u=g>e.w+4,f=100/(f/3),j=i.create("div",{className:"translatedSequence"}),s=i.create("table",{className:"translatedSequence offset"+
c+(u?" big":""),style:{width:f*b.length+"%"}},j),u=i.create("tr",{},s);s.style.left=(h?100-f*(b.length+c/3):f*c/3)+"%";f=100/b.length+"%";if(c=g>=e.w)s.className+=" big";for(e=0;e<b.length;e++){g=document.createElement("td");s=d.slice(3*e,3*e+3);s=h?s.split("").reverse().join(""):s;g.className="aminoAcid aminoAcid_"+b.charAt(e).toLowerCase();if(-1!=this._codonStarts.indexOf(s.toUpperCase()))g.className="aminoAcid aminoAcid_start";if(-1!=this._codonStops.indexOf(s.toUpperCase()))g.className="aminoAcid aminoAcid_stop";
g.style.width=f;if(c)g.innerHTML=b.charAt(e);u.appendChild(g)}return j},_renderSeqTr:function(a,b,c,d){for(var e=this.getCharacterMeasurements("sequence"),f=document.createElement("tr"),a=100/(b-a)+"%",d=d>=e.w,e=0;e<c.length;e++){b=document.createElement("td");b.className="base base_"+c.charAt(e).toLowerCase();b.style.width=a;if(d)b.innerHTML=c.charAt(e);f.appendChild(b)}return f},startZoom:function(){e(".base",this.div).empty()},getCharacterMeasurements:function(a){return this._charMeasurements[a]||
(this._charMeasurements[a]=this._measureSequenceCharacterSize(this.div,a))},_measureSequenceCharacterSize:function(a,b){var c=document.createElement("td");c.className=b;c.style.visibility="hidden";c.appendChild(document.createTextNode("12345678901234567890123456789012345678901234567890"));a.appendChild(c);var d={w:c.clientWidth/50+1,h:c.clientHeight};a.removeChild(c);return d},_trackMenuOptions:function(){var a=this,b=this.inherited(arguments);b.push({type:"dijit/MenuSeparator"});b.push.apply(b,[{label:"Show forward strand",
type:"dijit/CheckedMenuItem",checked:!!this.config.showForwardStrand,onClick:function(){a.config.showForwardStrand=this.checked;a.changed()}},{label:"Show reverse strand",type:"dijit/CheckedMenuItem",checked:!!this.config.showReverseStrand,onClick:function(){a.config.showReverseStrand=this.checked;a.changed()}},{label:"Show translation",type:"dijit/CheckedMenuItem",checked:!!this.config.showTranslation,onClick:function(){a.config.showTranslation=this.checked;a.changed()}}]);return b}})})},"JBrowse/View/Track/_ExportMixin":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/aspect,dojo/on,JBrowse/has,dojo/window,dojo/dom-construct,JBrowse/Util,dijit/form/TextBox,dijit/form/Button,dijit/form/RadioButton,dijit/Dialog,FileSaver/FileSaver".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o){return h(null,{_canSaveFiles:function(){return e("save-generated-files")&&!this.config.noExportFiles},_canExport:function(){if(this.config.noExport)return!1;var a=this.browser.getHighlight(),b=this.browser.view.visibleRegion(),c={ref:this.refSeq.name,start:this.refSeq.start,end:this.refSeq.end};this._canExportRegion(b);this._canExportRegion(c);return a&&this._canExportRegion(a)||this._canExportRegion(b)||this._canExportRegion(c)},_possibleExportRegions:function(){var a=
dojo.clone(this.browser.view.visibleRegion());a.description="Visible region";a.name="visible";var a=[a,{ref:this.refSeq.name,start:this.refSeq.start,end:this.refSeq.end,description:"Whole reference sequence",name:"wholeref"}],b=this.browser.getHighlight();b&&a.unshift(g.mixin(g.clone(b),{description:"Highlighted region",name:"highlight"}));return a},_exportDialogContent:function(){var a=this.track._possibleExportRegions();j.forEach(a,function(a){a.length=Math.round(a.end-a.start+1);a.canExport=this._canExportRegion(a)},
this.track);var d=dojo.hitch(this.track,function(){var a=this._readRadio(e.elements.region),b=t[this._readRadio(e.elements.format)];e.elements.filename.value=((this.key||this.label)+"-"+a).replace(/[^ .a-zA-Z0-9_-]/g,"-")+"."+b}),e=c.create("form",{onSubmit:function(){return!1}}),h=c.create("fieldset",{className:"region"},e);c.create("legend",{innerHTML:"Region to save"},h);var i=0;j.forEach(a,function(a){var e=b.assembleLocString(a),g=new n({name:"region",id:"region_"+a.name,value:e,checked:a.canExport&&
!i++?"checked":""});h.appendChild(g.domNode);e=c.create("label",{"for":g.id,innerHTML:a.description+' - <span class="locString">'+e+"</span> ("+b.humanReadableNumber(a.length)+(a.canExport?"b":"b, too large")+")"},h);if(!a.canExport)g.domNode.disabled="disabled",e.className="ghosted";f(g,"click",d);c.create("br",{},h)});var o=c.create("fieldset",{className:"format"},e);c.create("legend",{innerHTML:"Format"},o);var i=0,t={};j.forEach(this.track._exportFormats(),function(a){a.name||(a={name:a,label:a});
if(!a.fileExt)a.fileExt=a.name||a;t[a.name]=a.fileExt;var b=new n({name:"format",id:"format"+a.name,value:a.name,checked:i++?"":"checked"});o.appendChild(b.domNode);c.create("label",{"for":b.id,innerHTML:a.label},o);f(b,"click",d);c.create("br",{},o)},this);var v=c.create("fieldset",{className:"filename"},e);c.create("legend",{innerHTML:"Filename"},v);c.create("input",{type:"text",name:"filename",style:{width:"100%"}},v);d();var v=c.create("div",{className:"dijitDialogPaneActionBar"}),w=this.dialog;
(new k({iconClass:"dijitIconDelete",onClick:dojo.hitch(w,"hide"),label:"Cancel"})).placeAt(v);(new k({iconClass:"dijitIconTask",label:"View",disabled:!j.some(a,function(a){return a.canExport}),onClick:g.partial(this.track._exportViewButtonClicked,this.track,e,w)})).placeAt(v);if(this.track._canSaveFiles())var q=(new k({iconClass:"dijitIconSave",label:"Save",disabled:!j.some(a,function(a){return a.canExport}),onClick:dojo.hitch(this.track,function(){var a=this._readRadio(e.elements.format),b=this._readRadio(e.elements.region),
c=e.elements.filename.value.replace(/[^ .a-zA-Z0-9_-]/g,"-");q.set("disabled",!0);q.set("iconClass","jbrowseIconBusy");this.exportRegion(b,a,dojo.hitch(this,function(b){w.hide();this._fileDownload({format:a,data:b,filename:c})}))})})).placeAt(v);return[e,v]},_exportViewButtonClicked:function(e,f,g){this.set("disabled",!0);this.set("iconClass","jbrowseIconBusy");var h=e._readRadio(f.elements.region),j=e._readRadio(f.elements.format),n=f.elements.filename.value.replace(/[^ .a-zA-Z0-9_-]/g,"-");e.exportRegion(h,
j,function(f){g.hide();var m=c.create("textarea",{rows:Math.round(0.5*(d.getBox().h/12)),wrap:"off",cols:80,style:"maxWidth: 90em; overflow: scroll; overflow-y: scroll; overflow-x: scroll; overflow:-moz-scrollbars-vertical;",readonly:!0});m.value=f;var w=c.create("div",{className:"dijitDialogPaneActionBar"}),o=new q({className:"export-view-dialog",title:j+' export - <span class="locString">'+h+"</span> ("+b.humanReadableNumber(f.length)+"bytes)",content:[m,w]});(new k({iconClass:"dijitIconDelete",
label:"Close",onClick:dojo.hitch(o,"hide")})).placeAt(w);if(e._canSaveFiles()){w=c.create("div",{className:"save"},w);(new k({iconClass:"dijitIconSave",label:"Save",onClick:function(){var a=E.get("value").replace(/[^ .a-zA-Z0-9_-]/g,"-");o.hide();e._fileDownload({format:j,data:f,filename:a})}})).placeAt(w);var E=(new a({value:n,style:"width: 24em"})).placeAt(w)}i.after(o,"hide",function(){m.parentNode.removeChild(m);m=null;setTimeout(function(){o.destroyRecursive()},500)});o.show()})},_fileDownload:function(a){o(new Blob([a.data],
{type:a.format?"application/x-"+a.format.toLowerCase():"text/plain"}),a.filename)},_readRadio:function(a){if(a.length)for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value;return a.value},exportRegion:function(a,c,d){"string"==typeof a&&(a=b.parseLocString(a));a.ref!=this.refSeq.name?console.error("cannot export data for ref seq "+a.ref+", exporting is currently only supported for the currently-visible reference sequence"):require(["JBrowse/View/Export/"+c],dojo.hitch(this,function(b){(new b({refSeq:this.refSeq,
track:this,store:this.store})).exportRegion(a,d)}))},_trackMenuOptions:function(){var a=this.inherited(arguments);this.config.noExport||a.push({label:"Save track data",iconClass:"dijitIconSave",disabled:!this._canExport(),action:"bareDialog",content:this._exportDialogContent,dialog:{id:"exportDialog",className:"export-dialog"}});return a},_canExportRegion:function(a){if(!a)return!1;if("number"==typeof this.config.maxExportSpan||"string"==typeof this.config.maxExportSpan)return a.end-a.start+1<=this.config.maxExportSpan;
var b={};this.store.getGlobalStats(function(a){b=a},function(){});return b.featureDensity?b.featureDensity*(a.end-a.start)<=(this.config.maxExportFeatures||5E4):!0}})})},"FileSaver/FileSaver":function(){define([],function(){var h=h||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(h){var g=h.document,i=h.URL||h.webkitURL||h,f;try{f=g.createElementNS("http://www.w3.org/1999/xhtml","a")}catch(e){f=g.createElement("a")}var d="download"in f,c=function(a){var b=g.createEvent("MouseEvents");
b.initMouseEvent("click",!0,!1,h,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)},b=h.webkitRequestFileSystem,a=h.requestFileSystem||b||h.mozRequestFileSystem,k=function(a){(h.setImmediate||h.setTimeout)(function(){throw a;},0)},n=0,q=[],o,l=function(a,b,c){for(var b=[].concat(b),d=b.length;d--;){var e=a["on"+b[d]];if("function"===typeof e)try{e.call(a,c||a)}catch(f){k(f)}}},m=function(e,g){var i=this,k=e.type,m=!1,w,o,r=function(){var a=(h.URL||h.webkitURL||h).createObjectURL(e);q.push(a);return a},
A=function(){l(i,"writestart progress write writeend".split(" "))},y=function(){if(m||!w)w=r(e);o?o.location.href=w:window.open(w,"_blank");i.readyState=i.DONE;A()},D=function(a){return function(){if(i.readyState!==i.DONE)return a.apply(this,arguments)}},F={create:!0,exclusive:!1},L;i.readyState=i.INIT;g||(g="download");if(d)w=r(e),f.href=w,f.download=g,c(f),i.readyState=i.DONE,A();else{h.chrome&&k&&"application/octet-stream"!==k&&(L=e.slice||e.webkitSlice,e=L.call(e,0,e.size,"application/octet-stream"),
m=!0);b&&"download"!==g&&(g+=".download");if("application/octet-stream"===k||b)o=h;a?(n+=e.size,a(h.TEMPORARY,n,D(function(a){a.root.getDirectory("saved",F,D(function(a){var b=function(){a.getFile(g,F,D(function(a){a.createWriter(D(function(b){b.onwriteend=function(b){o.location.href=a.toURL();q.push(a);i.readyState=i.DONE;l(i,"writeend",b)};b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&y()};"writestart progress write abort".split(" ").forEach(function(a){b["on"+a]=i["on"+a]});b.write(e);
i.abort=function(){b.abort();i.readyState=i.DONE};i.readyState=i.WRITING}),y)}),y)};a.getFile(g,{create:!1},D(function(a){a.remove();b()}),D(function(a){a.code===a.NOT_FOUND_ERR?b():y()}))}),y)}),y)):y()}};o=m.prototype;o.abort=function(){this.readyState=this.DONE;l(this,"abort")};o.readyState=o.INIT=0;o.WRITING=1;o.DONE=2;o.error=o.onwritestart=o.onprogress=o.onwrite=o.onabort=o.onerror=o.onwriteend=null;try{h.addEventListener("unload",function(){for(var a=q.length;a--;){var b=q[a];"string"===typeof b?
i.revokeObjectURL(b):b.remove()}q.length=0},!1)}catch(r){console.warn("FileSaver.js probably will not work")}return function(a,b){return new m(a,b)}}(self);return h})},"JBrowse/CodonTable":function(){define(["dojo/_base/declare"],function(h){return h(null,{defaultStarts:["ATG","CTG","GTG"],defaultStops:["TAA","TAG","TGA"],defaultCodonTable:{TCA:"S",TCC:"S",TCG:"S",TCT:"S",TTC:"F",TTT:"F",TTA:"L",TTG:"L",TAC:"Y",TAT:"Y",TAA:"*",TAG:"*",TGC:"C",TGT:"C",TGA:"*",TGG:"W",CTA:"L",CTC:"L",CTG:"L",CTT:"L",
CCA:"P",CCC:"P",CCG:"P",CCT:"P",CAC:"H",CAT:"H",CAA:"Q",CAG:"Q",CGA:"R",CGC:"R",CGG:"R",CGT:"R",ATA:"I",ATC:"I",ATT:"I",ATG:"M",ACA:"T",ACC:"T",ACG:"T",ACT:"T",AAC:"N",AAT:"N",AAA:"K",AAG:"K",AGC:"S",AGT:"S",AGA:"R",AGG:"R",GTA:"V",GTC:"V",GTG:"V",GTT:"V",GCA:"A",GCC:"A",GCG:"A",GCT:"A",GAC:"D",GAT:"D",GAA:"E",GAG:"E",GGA:"G",GGC:"G",GGG:"G",GGT:"G"},generateCodonTable:function(h){var g={},i;for(i in h)if(h.hasOwnProperty(i)){for(var f=h[i],e=[],d=0;3>d;d++){var c=i.charAt(d);e[d]=[];e[d][0]=c.toUpperCase();
e[d][1]=c.toLowerCase()}for(d=0;2>d;d++)for(var c=e[0][d],b=0;2>b;b++)for(var a=e[1][b],k=0;2>k;k++)g[c+a+e[2][k]]=f}return g}})})},"JBrowse/View/Track/HTMLFeatures":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-construct,dojo/dom-geometry,dojo/on,dojo/query,JBrowse/has,dijit/Dialog,dijit/form/Select,dijit/form/RadioButton,dijit/form/Button,JBrowse/View/Track/BlockBased,JBrowse/View/Track/_YScaleMixin,JBrowse/View/Track/_ExportMixin,JBrowse/View/Track/_FeatureDetailMixin,JBrowse/View/Track/_TrackDetailsStatsMixin,JBrowse/Util,JBrowse/View/GranularRectLayout,JBrowse/Model/Location".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r,p,u,s){return h([q,o,l,m,r],{constructor:function(a){this.numBins=j.getObject("histogram.binsPerBlock",!1,this.config)||25;this.padding=this.defaultPadding=5;this.glyphHeightPad=1;this.levelHeightPad=2;this.minFeatWidth=this.labelPad=1;this.trackPadding=a.trackPadding;this.heightCache={};this.showLabels=this.config.style.showLabels;this._setupEventHandlers()},_defaultConfig:function(){return p.deepUpdate(j.clone(this.inherited(arguments)),{maxFeatureScreenDensity:0.5,
maxHeight:1E3,style:{arrowheadClass:"arrowhead",className:"feature2",_defaultHistScale:4,_defaultLabelScale:30,_defaultDescriptionScale:120,minSubfeatureWidth:6,maxDescriptionLength:70,showLabels:!0,label:"name,id",description:"note, description",centerChildrenVertically:!0},hooks:{create:function(){return document.createElement("div")}},events:{},menuTemplate:[{label:"View details",title:"{type} {name}",action:"contentDialog",iconClass:"dijitIconTask",content:dojo.hitch(this,"defaultFeatureDetail")},
{label:function(){return"Highlight this "+(this.feature&&this.feature.get("type")?this.feature.get("type"):"feature")},action:function(){this.track.browser.setHighlightAndRedraw(new s({feature:this.feature,tracks:[this.track]}))},iconClass:"dijitIconFilter"}]})},wrapHandler:function(a){var b=this;return function(c){c=c||window.event;if(!c.shiftKey){var d=c.currentTarget||c.srcElement;if(!d.feature)d=d.parentElement;d.feature&&a(b,d,d.feature,c)}}},fillHistograms:function(a){var b=a.blockIndex,c=a.block,
d=a.stripeWidth,e=Math.abs(a.rightBase-a.leftBase),f=e/this.numBins,g=this;this.store.getRegionFeatureDensities({ref:this.refSeq.name,start:a.leftBase,end:a.rightBase,basesPerBin:f},function(a){if("histograms"==g._fillType){for(var h=a.bins,i=0,k=0;k<g.numBins;k++)"number"==typeof h[k]&&isFinite(h[k])&&(i=Math.max(i,h[k]));for(var k=a.stats?0.01>a.stats.mean/a.stats.max:!1,j=a.stats?100/(k?Math.log(a.stats.max):a.stats.max):2,j={basesPerBin:f,pxPerCount:j,logScale:k,stats:a.stats},m,k=0;k<g.numBins;k++)if("number"==
typeof h[k]&&isFinite(h[k]))m=document.createElement("div"),m.className="hist feature-hist "+g.config.style.className+"-hist",m.style.cssText="left: "+100*(k/g.numBins)+"%; height: "+j.pxPerCount*(j.logScale?Math.log(h[k]):h[k])+"px;bottom: "+g.trackPadding+"px;width: "+(100/g.numBins-100/d)+"%;"+(g.config.style.histCss?g.config.style.histCss:""),m.setAttribute("value",h[k]),p.is_ie6&&m.appendChild(document.createComment()),c.domNode.appendChild(m);g.heightUpdate(j.pxPerCount*(j.logScale?Math.log(i):
i),b);g.makeHistogramYScale(e,j,a)}},dojo.hitch(this,"fillBlockError",b,c));a.finishCallback()},endZoom:function(){this.clear()},updateStaticElements:function(a){this.inherited(arguments);this.updateYScaleFromViewDimensions(a);this.updateFeatureLabelPositions(a);this.updateFeatureArrowPositions(a)},updateFeatureArrowPositions:function(a){if("x"in a)for(var a=this.browser.view.minVisible(),b=this.browser.view.maxVisible(),c=this.blocks,d=0;d<c.length;d++){var e=c[d];if(e)for(var f=e.domNode.childNodes,
g=0;g<f.length;g++){var h=f[g];if(h.feature){var i=h.feature,k=h._containerStart,j=h._containerEnd,m=i.get("strand");if(m){var l=i.get("start"),i=i.get("end"),k=Math.max(l,k),j=Math.min(i,j);if(0>m&&i>a)for(var i="minus-"+this.config.style.arrowheadClass,m=h.childNodes,n=0;n<m.length;n++){if(h=m[n],"string"===typeof h.className&&h&&h.className&&0<=h.className.indexOf(i))h.style.left=(l<a?e.bpToX(a)-e.bpToX(k):-this.minusArrowWidth)+"px"}else if(0<m&&l<b){l="plus-"+this.config.style.arrowheadClass;
m=h.childNodes;for(n=0;n<m.length;n++)if(h=m[n],"string"===typeof h.className&&h&&h.className&&0<=h.className.indexOf(l))h.style.right=(i>b?e.bpToX(j)-e.bpToX(b-2):-this.plusArrowWidth)+"px"}}}}}},updateFeatureLabelPositions:function(a){var b=this.browser._showLabels;"x"in a&&g.forEach(this.blocks,function(a){if(a&&this.label){var c=100*(this.label.offsetLeft+(b?this.label.offsetWidth:0)-a.domNode.offsetLeft)/a.domNode.offsetWidth+2;if(c){var d=a.endBase-a.startBase;g.forEach(a.domNode.childNodes,
function(b){if(b.label){var e=b.label,f=b.feature,b=parseInt(f.get("start")),b=100*(b-a.startBase)/d,f=parseInt(f.get("end")),f=100*((f-a.startBase)/d-e.offsetWidth/a.domNode.offsetWidth);e.style.left=Math.max(b,Math.min(c,f))+"%"}},this)}}},this)},fillBlock:function(a){var b=a.blockIndex,c=a.block,d=a.leftBase,e=a.rightBase,f=a.scale;this.store.getGlobalStats(dojo.hitch(this,function(g){var h=g.featureDensity,i=this.config.style.histScale||h*this.config.style._defaultHistScale,h=this.config.style.featureScale||
h/this.config.maxFeatureScreenDensity,k=Math.abs(d-e);if(this._updatedLabelForBlockSize!=k)this.store.getRegionFeatureDensities&&f<i?this.setLabel(this.key+' <span class="feature-density">per '+p.addCommas(Math.round(k/this.numBins))+" bp</span>"):this.setLabel(this.key),this._updatedLabelForBlockSize=k;this.store.getRegionFeatureDensities&&f<i?(this._fillType="histograms",this.fillHistograms(a)):f<h?(this.fillTooManyFeaturesMessage(b,c,f),a.finishCallback()):(this.removeYScale(),this._fillType="features",
this.fillFeatures(dojo.mixin({stats:g},a)))}),dojo.hitch(this,"fillBlockError",b,c))},makeHistogramYScale:function(a,b){if(b.logScale)console.error("Log histogram scale axis labels not yet implemented.");else{var c=this.height/b.pxPerCount,c=b.logScale?Math.log(c):c;if(!this.yscale||!this.yscale_params||!(this.yscale_params.maxval==c&&this.yscale_params.height==this.height&&this.yscale_params.blockbp==a))this.removeYScale(),this.makeYScale({min:0,max:c}),this.yscale_params={height:this.height,blockbp:a,
maxval:c}}},destroy:function(){this._clearLayout();this.inherited(arguments)},cleanupBlock:function(a){if(a&&(this.layout&&this.layout.discardRange(a.startBase,a.endBase),a.featureNodes))for(var b in a.featureNodes){var c=a.featureNodes[b];g.forEach("track,feature,callbackArgs,_labelScale,_descriptionScale".split(","),function(a){p.removeAttribute(c,a)});"label"in c&&(g.forEach("track,feature,callbackArgs".split(","),function(a){p.removeAttribute(c.label,a)}),p.removeAttribute(c,"label"))}this.inherited(arguments)},
transfer:function(a,b,c,d,e){if(a&&b)for(var f=b.startBase,g=b.endBase,h,i=a.startBase<b.startBase?a.rightOverlaps:a.leftOverlaps,i=i||[],k=0;k<i.length;k++)if((h=a.featureNodes[i[k]])&&h.label&&h.label.parentNode&&h.label.parentNode.removeChild(h.label),h&&h.feature&&h.layoutEnd>f&&h.feature.get("start")<g){h.parentNode.removeChild(h);delete a.featureNodes[i[k]];var j=this.addFeatureToBlock(h.feature,i[k],b,c,h._labelScale,h._descriptionScale,d,e);h.booleanCovs&&this._maskTransfer(j,h,d,e)}},_maskTransfer:function(a,
b,c,e){for(var f=[];a.firstChild;)f.push(a.firstChild),a.removeChild(a.firstChild);var g=a.featureEdges.s,h=a.featureEdges.e,i;for(i in b.booleanCovs)if(b.booleanCovs.hasOwnProperty(i)){var f=b.booleanCovs[i].span.s,k=b.booleanCovs[i].span.e;if(!(k<c||f>e))b.booleanCovs[i].style.left=100*(f-g)/(h-g)+"%",b.booleanCovs[i].style.width=100*(k-f)/(h-g)+"%",a.appendChild(b.booleanCovs[i])}d(".basicSubfeature",b).forEach(function(b){var d=b.subfeatureEdges.s,f=b.subfeatureEdges.e;if(!(f<c||d>e))b.style.left=
100*(d-g)/(h-g)+"%",b.style.width=100*(f-d)/(h-g)+"%",a.appendChild(b)});if(this.config.style.arrowheadClass)i=this.config.style.arrowheadClass,d(".minus-"+i+", .plus-"+i,b).forEach(function(b){a.appendChild(b)});a.className="basic";a.oldClassName=b.oldClassName;a.booleanCovs=b.booleanCovs},fillFeatures:function(a){var b=a.blockIndex,c=a.block,d=a.leftBase,e=a.rightBase,f=a.scale,g=a.stats,h=a.containerStart,i=a.containerEnd,k=a.finishCallback;this.scale=f;c.featureNodes={};if(!this.haveMeasurements)this.measureStyles(),
this.haveMeasurements=!0;var j=this.config.style.labelScale||g.featureDensity*this.config.style._defaultLabelScale,m=this.config.style.descriptionScale||g.featureDensity*this.config.style._defaultDescriptionScale,l=this,a=dojo.hitch(this,function(a){var b=a.id();this._featureIsRendered(b)||this.filterFeature(a)&&this.addFeatureToBlock(a,b,c,f,j,m,h,i)});this.store.getFeatures({ref:this.refSeq.name,start:d,end:e},a,function(a){l.heightUpdate(l._getLayout(f).getTotalHeight(),b);if(a&&a.maskingSpans){var c=
[];c[0]={start:d};var g=0,h;for(h in a.maskingSpans)if(a.maskingSpans.hasOwnProperty(h))h=a.maskingSpans[h],c[g].end=h.start,g++,c[g]={start:h.end};c[g].end=e;c[g].end<=c[g].start&&c.splice(g,1);c[0].end<=c[0].start&&c.splice(0,1);l.maskBySpans(c,a.maskingSpans)}k()},function(a){console.error(a,a.stack);l.fillBlockError(b,c,a);k()})},addFeatureToBlock:function(a,b,c,d,e,f,g,h){a=this.renderFeature(a,b,c,d,e,f,g,h);if(!a)return null;c.domNode.appendChild(a);this.config.style.centerChildrenVertically&&
this._centerChildrenVertically(a);return a},fillBlockTimeout:function(a,b){this.inherited(arguments);b.featureNodes={}},_featureIsRendered:function(a){for(var b=this.blocks,c=0;c<b.length;c++)if(b[c]&&b[c].featureNodes&&b[c].featureNodes[a])return!0;return!1},maskBySpans:function(a,b){var c=this.blocks,d;for(d in c)if(c.hasOwnProperty(d)&&c[d]){var e=c[d],f=function(a,b,c,d){a=Math.max(a,c);b=Math.min(b,d);return a<b?{s:a,e:b}:!1},g=function(a,b,c,d,e){var f=dojo.create("div"),g=c.featureEdges?c.featureEdges.s:
c.subfeatureEdges.s,c=c.featureEdges?c.featureEdges.e:c.subfeatureEdges.e;f.span={s:a,e:b};f.className=d?j.className==e?j.oldClassName+" Boolean-transparent":j.className+" Boolean-transparent":j.className==e?j.oldClassName:j.className;f.booleanDiv=!0;f.style.left=100*(a-g)/(c-g)+"%";f.style.top="0px";f.style.width=100*(b-a)/(c-g)+"%";return f},h=function(a,b,c,d,e,i){var i=i||!1,k;for(k in c.childNodes)if(c.childNodes[k]&&c.childNodes[k].booleanDiv){var j=c.childNodes[k].span.s,m=c.childNodes[k].span.e;
if(j<=a&&m>=b){i=!0;break}if(j=f(a,b,j,m)?{s:Math.min(a,j),e:Math.max(b,m)}:!1){i=g(j.s,j.e,c,d,e);m=c.booleanCovs.indexOf(c.childNodes[k]);c.removeChild(c.childNodes[k]);c.booleanCovs.splice(m,1);c.appendChild(i);c.booleanCovs.push(i);i=!0;h(j.s,j.e,c,d,e,!0);break}}i||(i=g(a,b,c,d,e),c.appendChild(i),c.booleanCovs.push(i))},i=function(a,b,c,d,e,g){if(!c.booleanCovs)c.booleanCovs=[];for(var i in e)if(e.hasOwnProperty(i)){var k=f(a,b,e[i].start,e[i].end);k&&h(k.s,k.e,c,!1,g)}for(i in d)d.hasOwnProperty(i)&&
(k=f(a,b,d[i].start,d[i].end))&&h(k.s,k.e,c,!0,g);c.oldClassName=c.className==g?c.oldClassName:c.className;c.className=g},k;for(k in e.featureNodes)if(e.featureNodes.hasOwnProperty(k)){var j=e.featureNodes[k];if(j.feature)m=j.feature.get("start"),l=j.feature.get("end"),i(m,l,j,b,a,"basic");else{var m=j.subfeatureEdges.s,l=j.subfeatureEdges.e;i(m,l,j,b,a,"basicSubfeature")}}}},measureStyles:function(){var a=document.createElement("div");a.className="feature-label";a.style.height="auto";a.style.visibility=
"hidden";a.appendChild(document.createTextNode("1234567890"));document.body.appendChild(a);this.labelHeight=a.clientHeight;this.labelWidth=a.clientWidth/10;document.body.removeChild(a);var b,a=document.createElement("div");a.className="feature "+this.config.style.className+" plus-"+this.config.style.className+" plus-"+this.config.style.className+"1";if(this.config.style.featureCss)a.style.cssText=this.config.style.featureCss;a.style.visibility="hidden";p.is_ie6&&a.appendChild(document.createComment("foo"));
document.body.appendChild(a);b=f.getMarginBox(a);this.glyphHeight=Math.round(b.h);this.padding=this.defaultPadding+b.w;document.body.removeChild(a);if(this.config.style.arrowheadClass)a=document.createElement("div"),a.className="plus-"+this.config.style.arrowheadClass,p.is_ie6&&a.appendChild(document.createComment("foo")),document.body.appendChild(a),b=f.position(a),this.plusArrowWidth=b.w,this.plusArrowHeight=b.h,a.className="minus-"+this.config.style.arrowheadClass,b=f.position(a),this.minusArrowWidth=
b.w,this.minusArrowHeight=b.h,document.body.removeChild(a)},hideAll:function(){this._clearLayout();return this.inherited(arguments)},getFeatDiv:function(a){a=this.getId(a);if(!a)return null;for(var b=0;b<this.blocks.length;b++){var c=this.blocks[b];if(c&&c.featureNodes&&(c=c.featureNodes[a]))return c}return null},getId:function(a){return a.id()},renderFeature:function(a,b,c,d,e,f,g,h){var i=a.get("end"),k=a.get("start");"string"==typeof i&&(i=parseInt(i));"string"==typeof k&&(k=parseInt(k));var m=
k,l=i;if(this.config.style.arrowheadClass)switch(a.get("strand")){case 1:case "+":l+=this.plusArrowWidth/d;break;case -1:case "-":m-=this.minusArrowWidth/d}var n=this.glyphHeight+this.glyphHeightPad,o=this.getFeatureLabel(a),r=d>f&&this.getFeatureDescription(a);r&&r.length>this.config.style.maxDescriptionLength&&(r=r.substr(0,this.config.style.maxDescriptionLength+1).replace(/(\s+\S+|\s*)$/,"")+String.fromCharCode(8230));this.showLabels&&d>=e&&o&&(l=Math.max(l,m+(""+o).length*this.labelWidth/d),n+=
this.labelHeight+this.labelPad);this.showLabels&&r&&(l=Math.max(l,m+(""+r).length*this.labelWidth/d),n+=this.labelHeight+this.labelPad);var l=l+Math.max(1,this.padding/d),p=this._getLayout(d).addRect(b,m,l,n);if(null===p)return this.markBlockHeightOverflow(c),null;n=this.config.hooks.create(this,a);this._connectFeatDivHandlers(n);n.track=this;n.feature=a;n.layoutEnd=l;n.featureEdges={s:Math.max(n.feature.get("start"),g),e:Math.min(n.feature.get("end"),h)};n.callbackArgs=[this,n.feature,n];n._labelScale=
e;n._descriptionScale=f;c.featureNodes[b]=n;if(m<c.startBase){if(!c.leftOverlaps)c.leftOverlaps=[];c.leftOverlaps.push(b)}if(l>c.endBase){if(!c.rightOverlaps)c.rightOverlaps=[];c.rightOverlaps.push(b)}dojo.addClass(n,"feature");f=this.config.style.className;"{type}"==f&&(f=a.get("type"));b=a.get("strand");switch(b){case 1:case "+":dojo.addClass(n,"plus-"+f);break;case -1:case "-":dojo.addClass(n,"minus-"+f);break;default:dojo.addClass(n,f)}l=a.get("phase");null!==l&&void 0!==l&&dojo.addClass(n,f+
"_phase"+l);(f=this.isFeatureHighlighted(a,o))&&dojo.addClass(n,"highlighted");var k=Math.max(k,g),i=Math.min(i,h),q=c.endBase-c.startBase,l=Math.max(this.minFeatWidth,100*((i-k)/q));n.style.cssText="left:"+100*(k-c.startBase)/q+"%;top:"+p+"px; width:"+l+"%;"+(this.config.style.featureCss?this.config.style.featureCss:"");n._containerStart=g;n._containerEnd=h;if(this.config.style.arrowheadClass)switch(g=document.createElement("div"),b){case 1:case "+":g.className="plus-"+this.config.style.arrowheadClass;
g.style.cssText="right: "+-this.plusArrowWidth+"px";n.appendChild(g);break;case -1:case "-":g.className="minus-"+this.config.style.arrowheadClass,g.style.cssText="left: "+-this.minusArrowWidth+"px",n.appendChild(g)}g=j.mixin({track:this,feature:a,callbackArgs:[this,a]});if(n.title)n.title=this.template(a,this._evalConf(g,n.title,"label"));if((o||r)&&this.showLabels&&d>=e){d=dojo.create("div",{className:"feature-label"+(f?" highlighted":""),innerHTML:(o?'<div class="feature-name">'+o+"</div>":"")+
(r?' <div class="feature-description">'+r+"</div>":""),style:{top:p+this.glyphHeight+2+"px",left:100*(m-c.startBase)/q+"%"}},c.domNode);this._connectFeatDivHandlers(d);if(n.title)d.title=n.title;n.label=d;d.feature=a;d.track=this;d.callbackArgs=[this,n.feature,n]}l>this.config.style.minSubfeatureWidth&&this.handleSubFeatures(a,n,k,i,c);this.config.menuTemplate&&window.setTimeout(dojo.hitch(this,"_connectMenus",n),50+150*Math.random());"function"==typeof this.config.hooks.modify&&this.config.hooks.modify(this,
a,n);return n},handleSubFeatures:function(a,b,c,d,e){var f=a.get("subfeatures");if(f)for(var g=0;g<f.length;g++)this.renderSubfeature(a,b,f[g],c,d,e)},_getHeight:function(a){if(this.config.disableHeightCache)return a.offsetHeight||0;var b=this.heightCache[a.className];if(b)return b;b=a.offsetHeight||0;return this.heightCache[a.className]=b},_centerChildrenVertically:function(a){if(0<a.childNodes.length)for(var b=this._getHeight(a),c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(d.style){var e=
this._getHeight(d);dojo.style(d,{marginTop:"0",top:(b-e)/2+"px"});0<d.childNodes.length&&this._centerChildrenVertically(d)}}},_connectFeatDivHandlers:function(a){for(var b in this.eventHandlers)this.own(e(a,b,this.eventHandlers[b]));this.eventHandlers.click&&this.eventHandlers.click.label&&a.setAttribute("title",this.eventHandlers.click.label)},_connectMenus:function(a){var b=j.hitch(this,"_refreshMenu",a);this.own(e(a,"mouseover",b));a.label&&this.own(e(a.label,"mouseover",b))},_refreshMenu:function(a){if(!a.contextMenu)a.contextMenu=
this._makeFeatureContextMenu(a,this.config.menuTemplate);a.contextMenuTimeout&&window.clearTimeout(a.contextMenuTimeout);a.contextMenuTimeout=window.setTimeout(function(){a.contextMenu&&(a.contextMenu.destroyRecursive(),p.removeAttribute(a,"contextMenu"));p.removeAttribute(a,"contextMenuTimeout")},3E4)},_makeFeatureContextMenu:function(a,b){var b=this._processMenuSpec(dojo.clone(b),a),c=this._renderContextMenu(b,a);c.startup();c.bindDomNode(a);a.label&&c.bindDomNode(a.label);return c},renderSubfeature:function(a,
b,c,d,e,f){var a=c.get("start"),g=c.get("end"),h=e-d,i=c.get("type"),k;if(this.config.style.subfeatureClasses)if(k=this.config.style.subfeatureClasses[i],void 0===k)k=i;else{if(null===k)return null}else k=i;if("hidden"==k)return null;i=document.createElement("div");i.subfeatureEdges={s:a,e:g};dojo.addClass(i,"subfeature");if(k)switch(c.get("strand")){case 1:case "+":dojo.addClass(i,"plus-"+k);break;case -1:case "-":dojo.addClass(i,"minus-"+k);break;default:dojo.addClass(i,k)}if(g<=d||a>=e)return null;
p.is_ie6&&i.appendChild(document.createComment());i.style.cssText="left: "+100*((a-d)/h)+"%;width: "+100*((g-a)/h)+"%;";b.appendChild(i);return f.featureNodes[c.id()]=i},_getLayout:function(a){if(!this.haveMeasurements)this.measureStyles(),this.haveMeasurements=!0;if((!this.layout||this.layout.pitchX!=4/a)&&a)this.layout=new u({pitchX:4/a,pitchY:this.config.layoutPitchY||this.glyphHeight+this.glyphHeightPad,maxHeight:this.getConf("maxHeight")});return this.layout},_clearLayout:function(){delete this.layout},
clear:function(){delete this.layout;this.inherited(arguments)},changed:function(){this._clearLayout();this.inherited(arguments)},_exportFormats:function(){return[{name:"GFF3",label:"GFF3",fileExt:"gff3"},{name:"BED",label:"BED",fileExt:"bed"},{name:"SequinTable",label:"Sequin Table",fileExt:"sqn"}]},_trackMenuOptions:function(){var a=this.inherited(arguments),b=this;a.push.apply(a,[{type:"dijit/MenuSeparator"},{label:"Show labels",type:"dijit/CheckedMenuItem",checked:!!("showLabels"in this?this.showLabels:
this.config.style.showLabels),onClick:function(){b.showLabels=this.checked;b.changed()}}]);return a}})})},"JBrowse/View/Track/_YScaleMixin":function(){define(["dojo/_base/declare","dojo/query","JBrowse/View/Ruler"],function(h,j,g){return h(null,{makeYScale:function(h){var h=h||{},f="number"==typeof h.min?h.min:this.minDisplayed,e="number"==typeof h.max?h.max:this.maxDisplayed;this.yscale&&this.yscale.parentNode.removeChild(this.yscale);var d=dojo.create("div",{className:"ruler vertical_ruler",style:{height:this.height+
"px",width:"10px",position:"absolute",zIndex:17}},this.div);this.yscale=d;if(this.window_info&&"x"in this.window_info)if("yScalePosition"in this.config)if("right"==this.config.yScalePosition)this.yscale.style.left=this.window_info.x+(this.window_info.width-1||0)+"px";else if("left"==this.config.yScalePosition)this.yscale.style.left=this.window_info.x+10+1+"px";else{if("center"==this.config.yScalePosition)this.yscale.style.left=this.window_info.x+(this.window_info.width||0)/2+"px"}else this.yscale.style.left=
this.window_info.x+(this.window_info.width||0)/2+"px";dojo.style(d,"top"==this.config.align?{bottom:0}:{top:0});h=new g({min:f,max:e,direction:"up",leftBottom:!("yScalePosition"in this.config&&"left"==this.config.yScalePosition),fixBounds:h.fixBounds||!1});h.render_to(d);this.ruler=h},removeYScale:function(){this.yscale?(this.yscale&&(this.yscale.parentNode.removeChild(this.yscale),delete this.yscale),delete this.yscale_params):j(".ruler",this.div).orphan()},updateYScaleFromViewDimensions:function(g){if(("number"==
typeof g.x||"number"==typeof g.width)&&this.yscale)if("yScalePosition"in this.config)if("right"==this.config.yScalePosition)this.yscale.style.left=this.window_info.x+(this.window_info.width-1||0)+"px";else if("left"==this.config.yScalePosition)this.yscale.style.left=this.window_info.x+10+"px";else{if("center"==this.config.yScalePosition)this.yscale.style.left=this.window_info.x+(this.window_info.width||0)/2+"px"}else this.yscale.style.left=this.window_info.x+(this.window_info.width||0)/2+"px"}})})},
"JBrowse/View/Ruler":function(){define("dojo/query,dojox/charting/Chart,dojox/charting/axis2d/Default,dojox/charting/plot2d/Bubble,dojo/NodeList-dom,dojo/number".split(","),function(h,j){function g(g){dojo.mixin(this,g)}g.prototype.render_to=function(g){"string"==typeof g&&(g=dojo.byId(g));var f=dojo.position(g);Math.log(this.max+1);Math.log(10);f=dojo.create("div",{style:{position:"absolute",left:"-9px",bottom:"-9px",width:"10px",height:f.h+18+"px"}},g);try{var e=new j(f,{fill:"transparent"});e.addAxis("y",
{vertical:!0,fill:"transparent",min:this.min,max:this.max,fixLower:this.fixBounds?"major":"none",fixUpper:this.fixBounds?"major":"none",leftBottom:this.leftBottom});e.addPlot("default",{type:"Bubble",fill:"transparent"});e.render();h("svg rect",e.domNode).orphan();this.scaler=e.axes.y.scaler}catch(d){console.error(d+""),console.error("Failed to draw Ruler with SVG, your browser may not support the necessary technology."),g.removeChild(f)}};return g})},"dojox/charting/Chart":function(){define("../main,dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/dom-style,dojo/dom,dojo/dom-geometry,dojo/dom-construct,dojo/_base/Color,dojo/_base/sniff,./Element,./SimpleTheme,./Series,./axis2d/common,dojox/gfx/shape,dojox/gfx,dojox/lang/functional,dojox/lang/functional/fold,dojox/lang/functional/reversed".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r){function p(a,b){if(a&&b)a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max);return a||b}function u(a,b){var c={},d={};g.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(d[a.hAxis]=p(d[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(d[a.vAxis]=p(d[a.vAxis],{min:b.vmin,max:b.vmax}))});g.forEach(a,function(a){var e=c[a.name];if(a.hAxis){var f=d[a.hAxis];e.hmin=f.min;e.hmax=f.max}if(a.vAxis)f=d[a.vAxis],e.vmin=f.min,e.vmax=f.max;a.initializeScalers(b,
e)})}var s=j.getObject("charting",!0,h),t=r.lambda("item.clear()"),v=r.lambda("item.purgeGroup()"),w=r.lambda("item.destroy()"),x=r.lambda("item.dirty = false"),E=r.lambda("item.dirty = true"),A=r.lambda("item.name");return i("dojox.charting.Chart",null,{constructor:function(a,b){b||(b={});this.margins=b.margins?b.margins:{l:10,t:10,r:10,b:10};this.stroke=b.stroke;this.fill=b.fill;this.delayInMs=b.delayInMs||200;this.title=b.title;this.titleGap=b.titleGap;this.titlePos=b.titlePos;this.titleFont=b.titleFont;
this.titleFontColor=b.titleFontColor;this.theme=this.chartTitle=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=e.byId(a);var c=d.getMarginBox(a);this.surface=m.createSurface(this.node,c.w||400,c.h||300);if(-1==this.surface.declaredClass.indexOf("vml"))this.plotGroup=this.surface.createGroup()},destroy:function(){g.forEach(this.series,w);g.forEach(this.stack,w);r.forIn(this.axes,w);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&c.destroy(this.chartTitle)},
getCoords:function(){var a=this.node,b=f.getComputedStyle(a),b=d.getMarginBox(a,b),a=d.position(a,!0);b.x=a.x;b.y=a.y;return b},setTheme:function(a){this.theme=a.clone();this.dirty=!0;return this},addAxis:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!s.axis2d||!s.axis2d[c])throw Error("Can't find axis: "+c+" - Check require() dependencies.");c=new s.axis2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=c;this.dirty=!0;
return this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){if(a in this.axes)this.axes[a].destroy(),delete this.axes[a],this.dirty=!0;return this},addPlot:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!s.plot2d||!s.plot2d[c])throw Error("Can't find plot: "+c+" - didn't you forget to dojo.require() it?");c=new s.plot2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=c):(this.plots[a]=
this.stack.length,this.stack.push(c));this.dirty=!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();this.stack.splice(b,1);r.forIn(this.plots,function(a,c,d){a>b&&(d[c]=a-1)});var c=g.filter(this.series,function(b){return b.plot!=a});if(c.length<this.series.length)g.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},g.forEach(c,function(a,b){this.runs[a.plot]=
b},this),this.series=c;this.dirty=!0}return this},getPlotOrder:function(){return r.map(this.stack,A)},setPlotOrder:function(a){var b={},c=r.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&r.forEach(this.stack,function(a){a=a.name;a in b||c.push(a)});a=r.map(c,function(a){return this.stack[this.plots[a]]},this);r.forEach(a,function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in
this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},addSeries:function(a,b,c){b=new q(this,b,c);b.name=a;a in this.runs?(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));
this.dirty=!0;if(!("ymin"in b)&&"min"in b)b.ymin=b.min;if(!("ymax"in b)&&"max"in b)b.ymax=b.max;return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);r.forIn(this.runs,function(a,c,d){a>b&&(d[c]=a-1)});this.dirty=!0}return this},updateSeries:function(a,b,c){if(a in this.runs)a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,
!1),this._invalidateDependentPlots(a.plot,!0));return this},getSeriesOrder:function(a){return r.map(r.filter(this.series,function(b){return b.plot==a}),A)},setSeriesOrder:function(a){var b,c={},d=r.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var d=this.series[this.runs[a]];if(b){if(d.plot!=b)return!1}else b=d.plot;c[a]=1;return!0},this);r.forEach(this.series,function(a){var e=a.name;!(e in c)&&a.plot==b&&d.push(e)});this.series=r.map(d,function(a){return this.series[this.runs[a]]},
this).concat(r.filter(this.series,function(a){return a.plot!=b}));r.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),
this.setSeriesOrder(c)}return this},resize:function(a,b){var c;switch(arguments.length){case 1:c=j.mixin({},a);d.setMarginBox(this.node,c);break;case 2:c={w:a,h:b},d.setMarginBox(this.node,c)}c=d.getMarginBox(this.node);var e=this.surface.getDimensions();return e.width!=c.w||e.height!=c.h?(this.surface.setDimensions(c.w,c.h),this.dirty=!0,this.render()):this},getGeometry:function(){var a={};r.forIn(this.axes,function(b){b.initialized()&&(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,
ticks:b.ticks})});return a},setAxisWindow:function(a,b,c,d){var e=this.axes[a];e&&(e.setWindow(b,c),g.forEach(this.stack,function(b){if(b.hAxis==a||b.vAxis==a)b.zoom=d}));return this},setWindow:function(a,b,c,d,e){"plotArea"in this||this.calculateGeometry();r.forIn(this.axes,function(e){var f,g;f=e.getScaler().bounds;g=f.span/(f.upper-f.lower);e.vertical?(f=b,g=d/g/f):(f=a,g=c/g/f);e.setWindow(f,g)});g.forEach(this.stack,function(a){a.zoom=e});return this},zoomIn:function(a,b,c){var d=this.axes[a];
if(d){var d=d.getScaler().bounds,e=Math.min(b[0],b[1]),f=Math.max(b[0],b[1]),e=b[0]<d.lower?d.lower:e,f=b[1]>d.upper?d.upper:f;this.setAxisWindow(a,(d.upper-d.lower)/(f-e),e-d.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var a=g.filter(this.stack,function(a){return a.dirty||a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);u(a,this.plotArea);return this},fullGeometry:function(){this._makeDirty();g.forEach(this.stack,
t);this.theme||this.setTheme(new n);g.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!s.plot2d||!s.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new s.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},this);g.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},this);var a=this.dim=this.surface.getDimensions();a.width=m.normalizedLength(a.width);
a.height=m.normalizedLength(a.height);r.forIn(this.axes,t);u(this.stack,a);var b=this.offsets={l:0,r:0,t:0,b:0};r.forIn(this.axes,function(a){r.forIn(a.getOffsets(),function(a,c){b[c]=Math.max(a,b[c])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var c=
m.normalizedLength(m.splitFontString(this.titleFont).size);b["top"==this.titlePos?"t":"b"]+=c+this.titleGap}r.forIn(this.margins,function(a,c){b[c]+=a});this.plotArea={width:a.width-b.l-b.r,height:a.height-b.t-b.b};r.forIn(this.axes,t);u(this.stack,this.plotArea);return this},render:function(){if(this._delayedRenderHandle)clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null;this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();r.forEachRev(this.stack,
function(a){a.render(this.dim,this.offsets)},this);r.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();var b=this.offsets,d=this.dim,e=Math.max(0,d.width-b.l-b.r),f=Math.max(0,d.height-b.t-b.b);g.forEach(this.series,v);r.forIn(this.axes,v);g.forEach(this.stack,v);for(var h=this.surface.children,i=0;i<h.length;++i)l.dispose(h[i]);this.chartTitle&&this.chartTitle.tagName&&c.destroy(this.chartTitle);this.plotGroup&&
this.plotGroup.clear();this.surface.clear();this.chartTitle=null;this.plotGroup?(this._renderChartBackground(d,b),this._renderPlotBackground(d,b,e,f),this.surface.add(this.plotGroup),this.plotGroup.setClip({x:b.l,y:b.t,width:e,height:f})):this._renderPlotBackground(d,b,e,f);r.foldr(this.stack,function(a,c){return c.render(d,b),0},0);this.plotGroup||this._renderChartBackground(d,b);if(this.title)e="canvas"==m.renderer||!a("ie")&&!a("opera")?"html":"gfx",f=m.normalizedLength(m.splitFontString(this.titleFont).size),
this.chartTitle=o.createText[e](this,this.surface,d.width/2,"top"==this.titlePos?f+this.margins.t:d.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);r.forIn(this.axes,function(a){a.render(d,b)});this._makeClean();return this},_renderChartBackground:function(a,c){var d=this.theme,e,g=void 0!==this.fill?this.fill:d.chart&&d.chart.fill,d=void 0!==this.stroke?this.stroke:d.chart&&d.chart.stroke;if("inherit"==g){e=this.node;for(g=new b(f.get(e,"backgroundColor"));0==g.a&&e!=
document.documentElement;)g=new b(f.get(e,"backgroundColor")),e=e.parentNode}g&&(this.plotGroup?(g=k.prototype._shapeFill(k.prototype._plotFill(g,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(g)):(g=k.prototype._plotFill(g,a,c),c.l&&(e={x:0,y:0,width:c.l,height:a.height+1},this.surface.createRect(e).setFill(k.prototype._shapeFill(g,e))),c.r&&(e={x:a.width-c.r,y:0,width:c.r+1,height:a.height+2},this.surface.createRect(e).setFill(k.prototype._shapeFill(g,
e))),c.t&&(e={x:0,y:0,width:a.width+1,height:c.t},this.surface.createRect(e).setFill(k.prototype._shapeFill(g,e))),c.b&&(e={x:0,y:a.height-c.b,width:a.width+1,height:c.b+2},this.surface.createRect(e).setFill(k.prototype._shapeFill(g,e)))));d&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(d)},_renderPlotBackground:function(a,b,c,d){var e=this.theme,f=e.plotarea&&e.plotarea.fill,e=e.plotarea&&e.plotarea.stroke,g={x:b.l-1,y:b.t-1,width:c+2,height:d+2};f&&(f=k.prototype._shapeFill(k.prototype._plotFill(f,
a,b),g),this.surface.createRect(g).setFill(f));e&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:d+1}).setStroke(e)},delayedRender:function(){if(!this._delayedRenderHandle)this._delayedRenderHandle=setTimeout(j.hitch(this,function(){this.render()}),this.delayInMs);return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var d=this.series[this.runs[a]].plot;d in this.plots&&(d=this.stack[this.plots[d]])&&
d.fireEvent(a,b,c)}return this},_makeClean:function(){g.forEach(this.axes,x);g.forEach(this.stack,x);g.forEach(this.series,x);this.dirty=!1},_makeDirty:function(){g.forEach(this.axes,E);g.forEach(this.stack,E);g.forEach(this.series,E);this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var c=this.stack[this.plots[a]],d,e=b?"vAxis":"hAxis";if(c[e]){if((d=this.axes[c[e]])&&d.dependOnData())d.dirty=!0,g.forEach(this.stack,function(a){if(a[e]&&a[e]==c[e])a.dirty=!0})}else c.dirty=
!0}}})})},"dojox/charting/Element":function(){define("dojo/_base/lang,dojo/_base/array,dojo/dom-construct,dojo/_base/declare,dojox/gfx,dojox/gfx/shape".split(","),function(h,j,g,i,f,e){return i("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,constructor:function(d){this.chart=d;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol="...";this._events=[]},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.group.removeShape();for(var d=
this.group.children,c=0;c<d.length;++c)e.dispose(d[c],!0);this.group.rawNode&&g.empty(this.group.rawNode);this.group.clear();e.dispose(this.group,!0);this.group=null}this.dirty=!0;if(this._events.length)j.forEach(this._events,function(b){b.shape.disconnect(b.handle)}),this._events=[];return this},cleanGroup:function(d){this.destroyHtmlElements();if(!d)d=this.chart.surface;if(this.group){for(var c,d=this.group.children,b=0;b<d.length;++b)e.dispose(d[b],!0);if(this.group.rawNode)c=this.group.bgNode,
g.empty(this.group.rawNode);this.group.clear();c&&this.group.rawNode.appendChild(c)}else this.group=d.createGroup();this.dirty=!0;return this},destroyHtmlElements:function(){if(this.htmlElements.length)j.forEach(this.htmlElements,g.destroy),this.htmlElements=[]},destroy:function(){this.purgeGroup()},getTextWidth:function(d,c){return f._base._getTextBox(d,{font:c}).w||0},getTextWithLimitLength:function(d,c,b,a){if(!d||0>=d.length)return{text:"",truncated:a||!1};if(!b||0>=b)return{text:d,truncated:a||
!1};var e=d.substring(0,1)+this.trailingSymbol,f=this.getTextWidth(e,c);if(b<=f)return{text:e,truncated:!0};if(this.getTextWidth(d,c)<=b)return{text:d,truncated:a||!1};a=0;for(e=d.length;a<e;){if(2>=e-a){for(;this.getTextWidth(d.substring(0,a)+this.trailingSymbol,c)>b;)a-=1;return{text:d.substring(0,a)+this.trailingSymbol,truncated:!0}}f=a+Math.round(0.618*(e-a));this.getTextWidth(d.substring(0,f),c)<b?a=f:e=f}},getTextWithLimitCharCount:function(d,c,b,a){return!d||0>=d.length?{text:"",truncated:a||
!1}:!b||0>=b||d.length<=b?{text:d,truncated:a||!1}:{text:d.substring(0,b)+this.trailingSymbol,truncated:!0}},_plotFill:function(d,c,b){if(!d||!d.type||!d.space)return d;var a=d.space,e;switch(d.type){case "linear":if("plot"===a||"shapeX"===a||"shapeY"===a){d=f.makeParameters(f.defaultLinearGradient,d);d.space=a;if("plot"===a||"shapeX"===a)e=c.height-b.t-b.b,d.y1=b.t+e*d.y1/100,d.y2=b.t+e*d.y2/100;if("plot"===a||"shapeY"===a)e=c.width-b.l-b.r,d.x1=b.l+e*d.x1/100,d.x2=b.l+e*d.x2/100}break;case "radial":if("plot"===
a)d=f.makeParameters(f.defaultRadialGradient,d),d.space=a,a=c.width-b.l-b.r,c=c.height-b.t-b.b,d.cx=b.l+a*d.cx/100,d.cy=b.t+c*d.cy/100,d.r=d.r*Math.sqrt(a*a+c*c)/200;break;case "pattern":if("plot"===a||"shapeX"===a||"shapeY"===a){d=f.makeParameters(f.defaultPattern,d);d.space=a;if("plot"===a||"shapeX"===a)e=c.height-b.t-b.b,d.y=b.t+e*d.y/100,d.height=e*d.height/100;if("plot"===a||"shapeY"===a)e=c.width-b.l-b.r,d.x=b.l+e*d.x/100,d.width=e*d.width/100}}return d},_shapeFill:function(d,c){if(!d||!d.space)return d;
var b=d.space,a;switch(d.type){case "linear":if("shape"===b||"shapeX"===b||"shapeY"===b){d=f.makeParameters(f.defaultLinearGradient,d);d.space=b;if("shape"===b||"shapeX"===b)a=c.width,d.x1=c.x+a*d.x1/100,d.x2=c.x+a*d.x2/100;if("shape"===b||"shapeY"===b)a=c.height,d.y1=c.y+a*d.y1/100,d.y2=c.y+a*d.y2/100}break;case "radial":if("shape"===b)d=f.makeParameters(f.defaultRadialGradient,d),d.space=b,d.cx=c.x+c.width/2,d.cy=c.y+c.height/2,d.r=d.r*c.width/200;break;case "pattern":if("shape"===b||"shapeX"===
b||"shapeY"===b){d=f.makeParameters(f.defaultPattern,d);d.space=b;if("shape"===b||"shapeX"===b)a=c.width,d.x=c.x+a*d.x/100,d.width=a*d.width/100;if("shape"===b||"shapeY"===b)a=c.height,d.y=c.y+a*d.y/100,d.height=a*d.height/100}}return d},_pseudoRadialFill:function(d,c,b,a,e){if(!d||"radial"!==d.type||"shape"!==d.space)return d;var g=d.space,d=f.makeParameters(f.defaultRadialGradient,d);d.space=g;if(4>arguments.length)return d.cx=c.x,d.cy=c.y,d.r=d.r*b/100,d;g=5>arguments.length?a:(e+a)/2;return{type:"linear",
x1:c.x,y1:c.y,x2:c.x+d.r*b*Math.cos(g)/100,y2:c.y+d.r*b*Math.sin(g)/100,colors:d.colors}}})})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(h,j,g){j.switchTo(g);return j})},"dojox/gfx/_base":function(){define("dojo/_base/kernel,dojo/_base/lang,dojo/_base/Color,dojo/_base/sniff,dojo/_base/window,dojo/_base/array,dojo/dom,dojo/dom-construct,dojo/dom-geometry".split(","),function(h,j,g,i,f,e,d,c,b){var a=j.getObject("dojox.gfx",!0),k=a._base={};a._hasClass=
function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};a._addClass=function(a,b){var c=a.getAttribute("className")||"";if(!c||0>(" "+c+" ").indexOf(" "+b+" "))a.setAttribute("className",c+(c?" ":"")+b)};a._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};k._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,
medium:0,large:0,"x-large":0,"xx-large":0},b,d;if(i("ie")&&(d=f.doc.documentElement.style.fontSize||"",!d))f.doc.documentElement.style.fontSize="100%";var e=c.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},f.body());for(b in a)e.style.fontSize=b,a[b]=16*Math.round(12*e.offsetHeight/16)/12/1E3;if(i("ie"))f.doc.documentElement.style.fontSize=d;f.body().removeChild(e);
return a};var n=null;k._getCachedFontMeasurements=function(a){if(a||!n)n=k._getFontMeasurements();return n};var q=null,o={};k._getTextBox=function(a,d,e){var g,h,i=arguments.length,k;q||(q=c.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},f.body()));g=q;g.className="";h=g.style;h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";if(1<i&&d)for(k in d)k in o||(h[k]=d[k]);if(2<i&&e)g.className=e;g.innerHTML=a;return g.getBoundingClientRect?(g=g.getBoundingClientRect(),{l:g.left,
t:g.top,w:g.width||g.right-g.left,h:g.height||g.bottom-g.top}):b.getMarginBox(g)};var l=0;k._getUniqueId=function(){var a;do a=h._scopeName+"xUnique"+ ++l;while(d.byId(a));return a};j.mixin(a,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",
x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,
color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var b={};return function(c){var d=b[c];if(d)return new d;d=b[c]=new Function;d.prototype=a["default"+c];return new d}}(),normalizeColor:function(a){return a instanceof g?a:new g(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=
b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return j.delegate(a);var d={};for(c in a)c in d||(d[c]=j.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(b){var c=a.getDefault("Font"),b=b.split(/\s+/);if(!(5>b.length)){c.style=
b[0];c.variant=b[1];c.weight=b[2];var d=b[3].indexOf("/");c.size=0>d?b[3]:b[3].substring(0,d);var e=4;0>d&&("/"==b[4]?e=6:"/"==b[4].charAt(0)&&(e=5));if(e<b.length)c.family=b.slice(e).join(" ")}return c},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return a._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(b){return b*a.px_in_pt()},px2pt:function(b){return b/a.px_in_pt()},normalizedLength:function(b){if(0===b.length)return 0;if(2<b.length){var c=a.px_in_pt(),d=parseFloat(b);
switch(b.slice(-2)){case "px":return d;case "pt":return d*c;case "in":return 72*d*c;case "pc":return 12*d*c;case "mm":return d*a.mm_in_pt*c;case "cm":return d*a.cm_in_pt*c}}return parseFloat(b)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(b){var c="string"==typeof b?a[b]:b;c&&e.forEach("Group,Rect,Ellipse,Circle,Line,Polyline,Image,Text,Path,TextPath,Surface,createSurface,fixTarget".split(","),
function(b){a[b]=c[b]})}});return a})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(h,j,g,i,f){var e=null;g.add("vml",function(d,c,b){b.innerHTML='<v:shape adj="1"/>';d="adj"in b.firstChild;b.innerHTML="";return d});return{load:function(d,c,b){function a(){c(["dojox/gfx/"+k],function(a){h.renderer=k;e=a;b(a)})}if(e&&"force"!=d)b(e);else{for(var k=f.forceGfxRenderer,d=!k&&(j.isString(f.gfxRenderer)?f.gfxRenderer:
"svg,vml,canvas,silverlight").split(","),n,q;!k&&d.length;)switch(d.shift()){case "svg":"SVGAngle"in i.global&&(k="svg");break;case "vml":g("vml")&&(k="vml");break;case "silverlight":try{g("ie")?(n=new ActiveXObject("AgControl.AgControl"))&&n.IsVersionSupported("1.0")&&(q=!0):navigator.plugins["Silverlight Plug-In"]&&(q=!0)}catch(o){q=!1}finally{n=null}q&&(k="silverlight");break;case "canvas":i.global.CanvasRenderingContext2D&&(k="canvas")}"canvas"===k&&!1!==f.canvasEvents&&(k="canvasWithEvents");
"svg"==k&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(a):a()}}}})},"dojox/gfx/shape":function(){define("./_base,dojo/_base/lang,dojo/_base/declare,dojo/_base/kernel,dojo/_base/sniff,dojo/_base/connect,dojo/_base/array,dojo/dom-construct,dojo/_base/Color,./matrix".split(","),function(h,j,g,i,f,e,d,c,b,a){var k=h.shape={},n={},q={},o=0,l=9>f("ie");k.register=function(a){var b=a.declaredClass.split(".").pop(),c=b in n?++n[b]:n[b]=0,b=b+c;q[b]=a;return b};k.byId=function(a){return q[a]};
k.dispose=function(a,b){if(b&&a.children)for(var c=0;c<a.children.length;++c)k.dispose(a.children[c],!0);delete q[a.getUID()];++o;if(l&&1E4<o){var c=q,d={},e;for(e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);q=d;o=0}};k.Shape=g("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;var a=k.register(this);this.getUID=function(){return a}},destroy:function(){k.dispose(this)},getNode:function(){return this.rawNode},
getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b)return null;var c=this._getRealMatrix();return[a.multiplyPoint(c,b.x,b.y),a.multiplyPoint(c,b.x+b.width,b.y),a.multiplyPoint(c,b.x+b.width,b.y+b.height),a.multiplyPoint(c,b.x,
b.y+b.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=h.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var b=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":b=h.makeParameters(h.defaultLinearGradient,a);break;case "radial":b=h.makeParameters(h.defaultRadialGradient,a);break;case "pattern":b=h.makeParameters(h.defaultPattern,
a)}else b=h.normalizeColor(a);this.fillStyle=b;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if("string"==typeof a||j.isArray(a)||a instanceof b)a={color:a};a=this.strokeStyle=h.makeParameters(h.defaultStroke,a);a.color=h.normalizeColor(a.color);return this},setTransform:function(b){this.matrix=a.clone(b?a.normalize(b):a.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),
this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},
_setParent:function(a,b){this.parent=a;return this._updateParentMatrix(b)},_updateParentMatrix:function(b){this.parentMatrix=b?a.clone(b):null;return this._applyTransform()},_getRealMatrix:function(){for(var b=this.matrix,c=this.parent;c;)c.matrix&&(b=a.multiply(c.matrix,b)),c=c.parent;return b}});k._eventsProcessing={connect:function(a,b,c){return e.connect(this.getEventSource(),a,k.fixCallback(this,h.fixTarget,b,c))},disconnect:function(a){e.disconnect(a)}};k.fixCallback=function(a,b,c,d){d||(d=
c,c=null);if(j.isString(d)){c=c||i.global;if(!c[d])throw['dojox.gfx.shape.fixCallback: scope["',d,'"] is null (scope="',c,'")'].join("");return function(e){return b(e,a)?c[d].apply(c,arguments||[]):void 0}}return!c?function(e){return b(e,a)?d.apply(c,arguments):void 0}:function(e){return b(e,a)?d.apply(c,arguments||[]):void 0}};j.extend(k.Shape,k._eventsProcessing);k.Container={_init:function(){this.children=[]},openBatch:function(){},closeBatch:function(){},add:function(a){var b=a.getParent();b&&
b.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){if(!b)a.parent=null,a.parentMatrix=null;this.children.splice(c,1);break}return this},clear:function(a){for(var b,c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var b=null;d.forEach(this.children,function(c){var d=
c.getBoundingBox();if(d)(c=c.getTransform())&&(d=a.multiplyRectangle(c,d)),b?(b.x=Math.min(b.x,d.x),b.y=Math.min(b.y,d.y),b.endX=Math.max(b.endX,d.x+d.width),b.endY=Math.max(b.endY,d.y+d.height)):b={x:d.x,y:d.y,endX:d.x+d.width,endY:d.y+d.height}});if(b)b.width=b.endX-b.x,b.height=b.endY-b.y;return b}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=
0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1);this.children.unshift(a);break}return this}};k.Surface=g("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){d.forEach(this._nodes,c.destroy);this._nodes=[];d.forEach(this._events,e.disconnect);this._events=[];this.rawNode=null;if(f("ie"))for(;this._parent.lastChild;)c.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=
null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(){},whenLoaded:function(a,b){var c=j.hitch(a,b);if(this.isLoaded)c(this);else var d=e.connect(this,"onLoad",function(a){e.disconnect(d);c(a)})}});j.extend(k.Surface,k._eventsProcessing);k.Rect=g("dojox.gfx.shape.Rect",k.Shape,{constructor:function(a){this.shape=h.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});k.Ellipse=g("dojox.gfx.shape.Ellipse",
k.Shape,{constructor:function(a){this.shape=h.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});k.Circle=g("dojox.gfx.shape.Circle",k.Shape,{constructor:function(a){this.shape=h.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});k.Line=g("dojox.gfx.shape.Line",
k.Shape,{constructor:function(a){this.shape=h.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});k.Polyline=g("dojox.gfx.shape.Polyline",k.Shape,{constructor:function(a){this.shape=h.getDefault("Polyline");this.rawNode=a},setShape:function(a,b){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],d=0;d<b;d+=2)c.push({x:a[d],y:a[d+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,b=a.length,c=a[0],d=c.x,e=c.y,f=c.x,g=c.y,h=1;h<b;++h){c=a[h];if(d>c.x)d=c.x;if(f<c.x)f=c.x;if(e>c.y)e=c.y;if(g<c.y)g=c.y}this.bbox={x:d,y:e,width:f-
d,height:g-e}}return this.bbox}});k.Image=g("dojox.gfx.shape.Image",k.Shape,{constructor:function(a){this.shape=h.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});k.Text=g(k.Shape,{constructor:function(a){this.fontStyle=null;this.shape=h.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?h.splitFontString(a):h.makeParameters(h.defaultFont,
a);this._setFont();return this}});k.Creator={createShape:function(a){switch(a.type){case h.defaultPath.type:return this.createPath(a);case h.defaultRect.type:return this.createRect(a);case h.defaultCircle.type:return this.createCircle(a);case h.defaultEllipse.type:return this.createEllipse(a);case h.defaultLine.type:return this.createLine(a);case h.defaultPolyline.type:return this.createPolyline(a);case h.defaultImage.type:return this.createImage(a);case h.defaultText.type:return this.createText(a);
case h.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(h.Group)},createRect:function(a){return this.createObject(h.Rect,a)},createEllipse:function(a){return this.createObject(h.Ellipse,a)},createCircle:function(a){return this.createObject(h.Circle,a)},createLine:function(a){return this.createObject(h.Line,a)},createPolyline:function(a){return this.createObject(h.Polyline,a)},createImage:function(a){return this.createObject(h.Image,a)},
createText:function(a){return this.createObject(h.Text,a)},createPath:function(a){return this.createObject(h.Path,a)},createTextPath:function(a){return this.createObject(h.TextPath,{}).setText(a)},createObject:function(){return null}};return k})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(h,j){var g=h.matrix={},i={};g._degToRad=function(f){return i[f]||(i[f]=Math.PI*f/180)};g._radToDeg=function(f){return 180*(f/Math.PI)};g.Matrix2D=function(f){if(f)if("number"==typeof f)this.xx=
this.yy=f;else if(f instanceof Array){if(0<f.length){for(var e=g.normalize(f[0]),d=1;d<f.length;++d){var c=e,b=g.normalize(f[d]),e=new g.Matrix2D;e.xx=c.xx*b.xx+c.xy*b.yx;e.xy=c.xx*b.xy+c.xy*b.yy;e.yx=c.yx*b.xx+c.yy*b.yx;e.yy=c.yx*b.xy+c.yy*b.yy;e.dx=c.xx*b.dx+c.xy*b.dy+c.dx;e.dy=c.yx*b.dx+c.yy*b.dy+c.dy}j.mixin(this,e)}}else j.mixin(this,f)};j.extend(g.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});j.mixin(g,{identity:new g.Matrix2D,flipX:new g.Matrix2D({xx:-1}),flipY:new g.Matrix2D({yy:-1}),flipXY:new g.Matrix2D({xx:-1,
yy:-1}),translate:function(f,e){return 1<arguments.length?new g.Matrix2D({dx:f,dy:e}):new g.Matrix2D({dx:f.x,dy:f.y})},scale:function(f,e){return 1<arguments.length?new g.Matrix2D({xx:f,yy:e}):"number"==typeof f?new g.Matrix2D({xx:f,yy:f}):new g.Matrix2D({xx:f.x,yy:f.y})},rotate:function(f){var e=Math.cos(f),f=Math.sin(f);return new g.Matrix2D({xx:e,xy:-f,yx:f,yy:e})},rotateg:function(f){return g.rotate(g._degToRad(f))},skewX:function(f){return new g.Matrix2D({xy:Math.tan(f)})},skewXg:function(f){return g.skewX(g._degToRad(f))},
skewY:function(f){return new g.Matrix2D({yx:Math.tan(f)})},skewYg:function(f){return g.skewY(g._degToRad(f))},reflect:function(f,e){if(1==arguments.length)e=f.y,f=f.x;var d=f*f,c=e*e,b=d+c,a=2*f*e/b;return new g.Matrix2D({xx:2*d/b-1,xy:a,yx:a,yy:2*c/b-1})},project:function(f,e){if(1==arguments.length)e=f.y,f=f.x;var d=f*f,c=e*e,b=d+c,a=f*e/b;return new g.Matrix2D({xx:d/b,xy:a,yx:a,yy:c/b})},normalize:function(f){return f instanceof g.Matrix2D?f:new g.Matrix2D(f)},isIdentity:function(f){return 1==
f.xx&&0==f.xy&&0==f.yx&&1==f.yy&&0==f.dx&&0==f.dy},clone:function(f){var e=new g.Matrix2D,d;for(d in f)"number"==typeof f[d]&&"number"==typeof e[d]&&e[d]!=f[d]&&(e[d]=f[d]);return e},invert:function(f){var f=g.normalize(f),e=f.xx*f.yy-f.xy*f.yx;return f=new g.Matrix2D({xx:f.yy/e,xy:-f.xy/e,yx:-f.yx/e,yy:f.xx/e,dx:(f.xy*f.dy-f.yy*f.dx)/e,dy:(f.yx*f.dx-f.xx*f.dy)/e})},_multiplyPoint:function(f,e,d){return{x:f.xx*e+f.xy*d+f.dx,y:f.yx*e+f.yy*d+f.dy}},multiplyPoint:function(f,e,d){f=g.normalize(f);return"number"==
typeof e&&"number"==typeof d?g._multiplyPoint(f,e,d):g._multiplyPoint(f,e.x,e.y)},multiplyRectangle:function(f,e){var d=g.normalize(f),e=e||{x:0,y:0,width:0,height:0};if(g.isIdentity(d))return{x:e.x,y:e.y,width:e.width,height:e.height};var c=g.multiplyPoint(d,e.x,e.y),b=g.multiplyPoint(d,e.x,e.y+e.height),a=g.multiplyPoint(d,e.x+e.width,e.y),h=g.multiplyPoint(d,e.x+e.width,e.y+e.height),d=Math.min(c.x,b.x,a.x,h.x),i=Math.min(c.y,b.y,a.y,h.y),j=Math.max(c.x,b.x,a.x,h.x),c=Math.max(c.y,b.y,a.y,h.y);
return{x:d,y:i,width:j-d,height:c-i}},multiply:function(f){for(var e=g.normalize(f),d=1;d<arguments.length;++d){var c=e,b=g.normalize(arguments[d]),e=new g.Matrix2D;e.xx=c.xx*b.xx+c.xy*b.yx;e.xy=c.xx*b.xy+c.xy*b.yy;e.yx=c.yx*b.xx+c.yy*b.yx;e.yy=c.yx*b.xy+c.yy*b.yy;e.dx=c.xx*b.dx+c.xy*b.dy+c.dx;e.dy=c.yx*b.dx+c.yy*b.dy+c.dy}return e},_sandwich:function(f,e,d){return g.multiply(g.translate(e,d),f,g.translate(-e,-d))},scaleAt:function(f,e,d,c){switch(arguments.length){case 4:return g._sandwich(g.scale(f,
e),d,c);case 3:return"number"==typeof d?g._sandwich(g.scale(f),e,d):g._sandwich(g.scale(f,e),d.x,d.y)}return g._sandwich(g.scale(f),e.x,e.y)},rotateAt:function(f,e,d){return 2<arguments.length?g._sandwich(g.rotate(f),e,d):g._sandwich(g.rotate(f),e.x,e.y)},rotategAt:function(f,e,d){return 2<arguments.length?g._sandwich(g.rotateg(f),e,d):g._sandwich(g.rotateg(f),e.x,e.y)},skewXAt:function(f,e,d){return 2<arguments.length?g._sandwich(g.skewX(f),e,d):g._sandwich(g.skewX(f),e.x,e.y)},skewXgAt:function(f,
e,d){return 2<arguments.length?g._sandwich(g.skewXg(f),e,d):g._sandwich(g.skewXg(f),e.x,e.y)},skewYAt:function(f,e,d){return 2<arguments.length?g._sandwich(g.skewY(f),e,d):g._sandwich(g.skewY(f),e.x,e.y)},skewYgAt:function(f,e,d){return 2<arguments.length?g._sandwich(g.skewYg(f),e,d):g._sandwich(g.skewYg(f),e.x,e.y)}});h.Matrix2D=g.Matrix2D;return g})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/_base/Color,dojox/lang/utils,dojox/gfx/gradutils".split(","),
function(h,j,g,i,f,e){var d=g("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(c){var c=c||{},b=d.defaultTheme;j.forEach("chart,plotarea,axis,grid,series,marker,indicator".split(","),function(a){this[a]=h.delegate(b[a],c[a])},this);c.seriesThemes&&c.seriesThemes.length?(this.colors=null,this.seriesThemes=c.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(c.colors||d.defaultColors).slice(0));this.markerThemes=null;if(c.markerThemes&&c.markerThemes.length)this.markerThemes=
c.markerThemes.slice(0);this.markers=c.markers?h.clone(c.markers):h.delegate(d.defaultMarkers);this.noGradConv=c.noGradConv;this.noRadialConv=c.noRadialConv;c.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var c=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,
noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});j.forEach("clone,clear,next,skip,addMixin,post,getTick".split(","),function(b){this.hasOwnProperty(b)&&(c[b]=this[b])},this);return c},clear:function(){this._current=0},next:function(c,b,a){var d=f.merge,e;if(this.colors){e=h.delegate(this.series);var d=h.delegate(this.marker),g=new i(this.colors[this._current%this.colors.length]),j;e.stroke&&e.stroke.color?(e.stroke=h.delegate(e.stroke),j=new i(e.stroke.color),e.stroke.color=new i(g),e.stroke.color.a=
j.a):e.stroke={color:g};d.stroke&&d.stroke.color?(d.stroke=h.delegate(d.stroke),j=new i(d.stroke.color),d.stroke.color=new i(g),d.stroke.color.a=j.a):d.stroke={color:g};!e.fill||e.fill.type?e.fill=g:(j=new i(e.fill),e.fill=new i(g),e.fill.a=j.a);!d.fill||d.fill.type?d.fill=g:(j=new i(d.fill),d.fill=new i(g),d.fill.a=j.a)}else e=this.seriesThemes?d(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,d=this.markerThemes?d(this.marker,this.markerThemes[this._current%this.markerThemes.length]):
e;e={series:e,marker:d,symbol:d&&d.symbol||this._markers[this._current%this._markers.length]};++this._current;b&&(e=this.addMixin(e,c,b));a&&(e=this.post(e,c));return e},skip:function(){++this._current},addMixin:function(c,b,a,d){if(h.isArray(a))j.forEach(a,function(a){c=this.addMixin(c,b,a)},this);else{var e={};"color"in a&&("line"==b||"area"==b?(h.setObject("series.stroke.color",a.color,e),h.setObject("marker.stroke.color",a.color,e)):h.setObject("series.fill",a.color,e));j.forEach("stroke,outline,shadow,fill,font,fontColor,labelWiring".split(","),
function(b){var c="marker"+b.charAt(0).toUpperCase()+b.substr(1),d=c in a;b in a&&(h.setObject("series."+b,a[b],e),d||h.setObject("marker."+b,a[b],e));d&&h.setObject("marker."+b,a[c],e)});if("marker"in a)e.symbol=a.marker,e.symbol=a.marker;c=f.merge(c,e)}d&&(c=this.post(c,b));return c},post:function(c,b){var a=c.series.fill,d;if(!this.noGradConv&&this.shapeSpaces[a.space]&&"linear"==a.type){if("bar"==b)d={x1:a.y1,y1:a.x1,x2:a.y2,y2:a.x2};else if(!this.noRadialConv&&"shape"==a.space&&("slice"==b||
"circle"==b))d={type:"radial",cx:0,cy:0,r:100};if(d)return f.merge(c,{series:{fill:d}})}return c},getTick:function(c,b){var a=this.axis.tick,d=c+"Tick",e=f.merge;a?this.axis[d]&&(a=e(a,this.axis[d])):a=this.axis[d];b&&(a?b[d]&&(a=e(a,b[d])):a=b[d]);return a},inspectObjects:function(c){j.forEach("chart,plotarea,axis,grid,series,marker,indicator".split(","),function(b){c(this[b])},this);this.seriesThemes&&j.forEach(this.seriesThemes,c);this.markerThemes&&j.forEach(this.markerThemes,c)},reverseFills:function(){this.inspectObjects(function(c){if(c&&
c.fill)c.fill=e.reverse(c.fill)})},addMarker:function(c,b){this.markers[c]=b;this._buildMarkerArray()},setMarkers:function(c){this.markers=c;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var c in this.markers)this._markers.push(this.markers[c])}});h.mixin(d,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",
TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,
length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,
color:"#ccc"},lineShadow:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}}});return d})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(h,j){var g=j.getObject("lang.utils",!0,h),i={},f=Object.prototype.toString,
e=function(d){if(d)switch(f.call(d)){case "[object Array]":return d.slice(0);case "[object Object]":return j.delegate(d)}return d};j.mixin(g,{coerceType:function(d,c){switch(typeof d){case "number":return Number(eval("("+c+")"));case "string":return""+c;case "boolean":return Boolean(eval("("+c+")"))}return eval("("+c+")")},updateWithObject:function(d,c,b){if(!c)return d;for(var a in d)if(a in c&&!(a in i)){var f=d[a];f&&"object"==typeof f?g.updateWithObject(f,c[a],b):d[a]=b?g.coerceType(f,c[a]):e(c[a])}return d},
updateWithPattern:function(d,c,b,a){if(!c||!b)return d;for(var f in b)f in c&&!(f in i)&&(d[f]=a?g.coerceType(b[f],c[f]):e(c[f]));return d},merge:function(d,c){if(c){var b=f.call(d),a=f.call(c),e,h;switch(a){case "[object Array]":if(a==b){b=Array(Math.max(d.length,c.length));for(e=0,a=b.length;e<a;++e)b[e]=g.merge(d[e],c[e]);return b}return c.slice(0);case "[object Object]":if(a==b&&d){b=j.delegate(d);for(e in c)e in d?(a=d[e],h=c[e],h!==a&&(b[e]=g.merge(a,h))):b[e]=j.clone(c[e]);return b}return j.clone(c)}}return c}});
return g})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(h,j,g,i){function f(e,d){if(0>=e)return d[0].color;var c=d.length;if(1<=e)return d[c-1].color;for(var b=0;b<c;++b){var a=d[b];if(a.offset>=e)return b?(c=d[b-1],i.blendColors(new i(c.color),new i(a.color),(e-c.offset)/(a.offset-c.offset))):a.color}return d[c-1].color}h=h.gradutils={};h.getColor=function(e,d){var c;if(e){switch(e.type){case "linear":c=Math.atan2(e.y2-e.y1,e.x2-e.x1);
c=g.rotate(-c);var b=g.project(e.x2-e.x1,e.y2-e.y1),a=g.multiplyPoint(b,d),h=g.multiplyPoint(b,e.x1,e.y1),b=g.multiplyPoint(b,e.x2,e.y2),b=g.multiplyPoint(c,b.x-h.x,b.y-h.y).x;c=g.multiplyPoint(c,a.x-h.x,a.y-h.y).x/b;break;case "radial":c=d.x-e.cx,a=d.y-e.cy,c=Math.sqrt(c*c+a*a)/e.r}return f(c,e.colors)}return new i(e||[0,0,0,0])};h.reverse=function(e){if(e)switch(e.type){case "linear":case "radial":if(e=j.delegate(e),e.colors){for(var d=e.colors,c=d.length,b=0,a,f=e.colors=Array(d.length);b<c;++b)a=
d[b],f[b]={offset:1-a.offset,color:a.color};f.sort(function(a,b){return a.offset-b.offset})}}return e};return h})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(h,j,g){return j("dojox.charting.Series",g,{constructor:function(g,f,e){h.mixin(this,e);if("string"!=typeof this.plot)this.plot="default";this.update(f)},clear:function(){this.dyn={}},update:function(g){h.isArray(g)?this.data=g:(this.source=g,this.data=this.source.data,this.source.setSeriesObject&&
this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx"],function(h,j,g,i){var f=h.getObject("dojox.charting.axis2d.common",!0),e=function(d){d.marginLeft="0px";d.marginTop="0px";d.marginRight="0px";d.marginBottom="0px";d.paddingLeft="0px";d.paddingTop="0px";d.paddingRight="0px";d.paddingBottom="0px";d.borderLeftWidth="0px";d.borderTopWidth="0px";d.borderRightWidth="0px";
d.borderBottomWidth="0px"};return h.mixin(f,{createText:{gfx:function(d,c,b,a,e,f,g,h){return c.createText({x:b,y:a,text:f,align:e}).setFont(g).setFill(h)},html:function(d,c,b,a,f,h,q,o,l){var c=j.doc.createElement("div"),m=c.style,r;if(d.getTextDir)c.dir=d.getTextDir(h);e(m);m.font=q;c.innerHTML=(""+h).replace(/\s/g,"&nbsp;");m.color=o;m.position="absolute";m.left="-10000px";j.body().appendChild(c);h=i.normalizedLength(i.splitFontString(q).size);if(!l)c.getBoundingClientRect?(r=c.getBoundingClientRect(),
r=r.width||r.right-r.left):r=g.getMarginBox(c).w;"rtl"==c.dir&&(b+=l?l:r);j.body().removeChild(c);m.position="relative";if(l)switch(m.width=l+"px",f){case "middle":m.textAlign="center";m.left=b-l/2+"px";break;case "end":m.textAlign="right";m.left=b-l+"px";break;default:m.left=b+"px",m.textAlign="left"}else switch(f){case "middle":m.left=Math.floor(b-r/2)+"px";break;case "end":m.left=Math.floor(b-r)+"px";break;default:m.left=Math.floor(b)+"px"}m.top=Math.floor(a-h)+"px";m.whiteSpace="nowrap";b=j.doc.createElement("div");
a=b.style;e(a);a.width="0px";a.height="0px";b.appendChild(c);d.node.insertBefore(b,d.node.firstChild);return b}}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(h){return h})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(h,j,g,i){var f={};j.mixin(i,{filter:function(e,d,c){"string"==typeof e&&(e=e.split(""));var c=c||h.global,d=i.lambda(d),b=[],
a,g,n;if(j.isArray(e))for(g=0,n=e.length;g<n;++g)a=e[g],d.call(c,a,g,e)&&b.push(a);else if("function"==typeof e.hasNext&&"function"==typeof e.next)for(g=0;e.hasNext();)a=e.next(),d.call(c,a,g++,e)&&b.push(a);else for(g in e)g in f||(a=e[g],d.call(c,a,g,e)&&b.push(a));return b},forEach:function(e,d,c){"string"==typeof e&&(e=e.split(""));var c=c||h.global,d=i.lambda(d),b,a;if(j.isArray(e))for(b=0,a=e.length;b<a;d.call(c,e[b],b,e),++b);else if("function"==typeof e.hasNext&&"function"==typeof e.next)for(b=
0;e.hasNext();d.call(c,e.next(),b++,e));else for(b in e)b in f||d.call(c,e[b],b,e);return c},map:function(e,d,c){"string"==typeof e&&(e=e.split(""));var c=c||h.global,d=i.lambda(d),b,a,g;if(j.isArray(e)){b=Array(a=e.length);for(g=0;g<a;b[g]=d.call(c,e[g],g,e),++g);}else if("function"==typeof e.hasNext&&"function"==typeof e.next){b=[];for(g=0;e.hasNext();b.push(d.call(c,e.next(),g++,e)));}else for(g in b=[],e)g in f||b.push(d.call(c,e[g],g,e));return b},every:function(e,d,c){"string"==typeof e&&(e=
e.split(""));var c=c||h.global,d=i.lambda(d),b,a;if(j.isArray(e))for(b=0,a=e.length;b<a;++b){if(!d.call(c,e[b],b,e))return!1}else if("function"==typeof e.hasNext&&"function"==typeof e.next)for(b=0;e.hasNext();){if(!d.call(c,e.next(),b++,e))return!1}else for(b in e)if(!(b in f)&&!d.call(c,e[b],b,e))return!1;return!0},some:function(e,d,c){"string"==typeof e&&(e=e.split(""));var c=c||h.global,d=i.lambda(d),b,a;if(j.isArray(e))for(b=0,a=e.length;b<a;++b){if(d.call(c,e[b],b,e))return!0}else if("function"==
typeof e.hasNext&&"function"==typeof e.next)for(b=0;e.hasNext();){if(d.call(c,e.next(),b++,e))return!0}else for(b in e)if(!(b in f)&&d.call(c,e[b],b,e))return!0;return!1}});return i})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(h,j,g){h.mixin(g,{filterRev:function(h,f,e){"string"==typeof h&&(h=h.split(""));for(var e=e||j.global,f=g.lambda(f),d=[],c,b=h.length-1;0<=b;--b)c=h[b],f.call(e,c,b,h)&&d.push(c);return d},forEachRev:function(h,
f,e){"string"==typeof h&&(h=h.split(""));for(var e=e||j.global,f=g.lambda(f),d=h.length-1;0<=d;f.call(e,h[d],d,h),--d);},mapRev:function(h,f,e){"string"==typeof h&&(h=h.split(""));for(var e=e||j.global,f=g.lambda(f),d=h.length,c=Array(d),d=d-1,b=0;0<=d;c[b++]=f.call(e,h[d],d,h),--d);return c},everyRev:function(h,f,e){"string"==typeof h&&(h=h.split(""));for(var e=e||j.global,f=g.lambda(f),d=h.length-1;0<=d;--d)if(!f.call(e,h[d],d,h))return!1;return!0},someRev:function(h,f,e){"string"==typeof h&&(h=
h.split(""));for(var e=e||j.global,f=g.lambda(f),d=h.length-1;0<=d;--d)if(f.call(e,h[d],d,h))return!0;return!1}});return g})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/sniff,dojo/_base/declare,dojo/_base/connect,dojo/dom-geometry,./Invisible,../scaler/common,../scaler/linear,./common,dojox/gfx,dojox/lang/utils,dojox/lang/functional".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q){return i("dojox.charting.axis2d.Default",d,{defaultParams:{vertical:!1,
fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",
titleOrientation:""},constructor:function(a,b){this.opt=h.clone(this.defaultParams);n.updateWithObject(this.opt,b);n.updateWithPattern(this.opt,b,this.optionalParams);if(this.opt.enableCache)this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[];this._invalidMaxLabelSize=!0},setWindow:function(a,b){if(a!=this.scale)this._invalidMaxLabelSize=!0;return this.inherited(arguments)},_groupLabelWidth:function(a,b,c){if(!a.length)return 0;if(50<a.length)a.length=50;h.isObject(a[0])&&
(a=q.map(a,function(a){return a.text}));c&&(a=q.map(a,function(a){return 0==h.trim(a).length?"":a.substring(0,c)+this.trailingSymbol},this));a=a.join("<br>");return k._base._getTextBox(a,{font:b}).w||0},_getMaxLabelSize:function(a,c,d,e,f,g){if(null==this._maxLabelSize&&6==arguments.length){var i=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var k=h.clone(i);delete k.to;delete k.from;var v=b.buildScaler(a,c,d,k,i.to-i.from);v.minMinorStep=0;this._majorStart=v.major.start;i=b.buildTicks(v,
i);if(g&&i){var n=v=0,q=function(a){a.label&&this.push(a.label)},E=[];this.opt.majorLabels&&(j.forEach(i.major,q,E),v=this._groupLabelWidth(E,f,k.maxLabelCharCount),k.maxLabelSize&&(v=Math.min(k.maxLabelSize,v)));E=[];this.opt.dropLabels&&this.opt.minorLabels&&(j.forEach(i.minor,q,E),n=this._groupLabelWidth(E,f,k.maxLabelCharCount),k.maxLabelSize&&(n=Math.min(k.maxLabelSize,n)));this._maxLabelSize={majLabelW:v,minLabelW:n,majLabelH:g,minLabelH:g}}else this._maxLabelSize=null}return this._maxLabelSize},
calculate:function(a,c,d){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||d!=this._oldSpan)&&Infinity!=a&&-Infinity!=c){this._invalidMaxLabelSize=!1;if(this.opt.labelSizeChange)this._maxLabelSize=null;this._oldSpan=d;var e=this.opt,f=this.chart.theme.axis,g=e.rotation%360,h=this.chart.theme.axis.tick.labelGap,i=e.font||f.majorTick&&f.majorTick.font||f.tick&&f.tick.font,f=i?k.normalizedLength(k.splitFontString(i).size):0,i=this._getMaxLabelSize(a,
c,d,g,i,f);"number"!=typeof h&&(h=4);if(i&&e.dropLabels){var e=Math.abs(Math.cos(g*Math.PI/180)),j=Math.abs(Math.sin(g*Math.PI/180));0>g&&(g+=360);switch(g){case 0:case 180:this.vertical?g=f:(g=i.majLabelW,f=i.minLabelW);break;case 90:case 270:this.vertical?(g=i.majLabelW,f=i.minLabelW):g=f;break;default:var g=this.vertical?Math.min(i.majLabelW,f/e):Math.min(i.majLabelW,f/j),n=Math.sqrt(i.minLabelW*i.minLabelW+f*f),f=Math.min(n,this.vertical?f*e+i.minLabelW*j:i.minLabelW*e+f*j)}this.scaler.minMinorStep=
this._prevMinMinorStep=Math.max(g,f)+h;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((g+h)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=b.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var a={l:0,r:0,t:0,b:0};if(!this.scaler)return a;var b=this.opt,c=this.chart.theme.axis,d=this.chart.theme.axis.tick.labelGap,e=b.titleFont||c.title&&c.title.font,c=0==b.titleGap?0:b.titleGap||
c.title&&c.title.gap,f=this.chart.theme.getTick("major",b),g=this.chart.theme.getTick("minor",b),e=e?k.normalizedLength(k.splitFontString(e).size):0,h=b.rotation%360,i=b.leftBottom,j=Math.abs(Math.cos(h*Math.PI/180)),n=Math.abs(Math.sin(h*Math.PI/180));this.trailingSymbol=void 0===b.trailingSymbol||null===b.trailingSymbol?this.trailingSymbol:b.trailingSymbol;"number"!=typeof d&&(d=4);0>h&&(h+=360);var q=this._getMaxLabelSize();if(q){var A=Math.ceil(Math.max(q.majLabelW,q.minLabelW))+1,y=Math.ceil(Math.max(q.majLabelH,
q.minLabelH))+1;if(this.vertical)switch(q=i?"l":"r",h){case 0:case 180:a[q]=A;a.t=a.b=y/2;break;case 90:case 270:a[q]=y;a.t=a.b=A/2;break;default:45>=h||180<h&&225>=h?(a[q]=y*n/2+A*j,a[i?"t":"b"]=y*j/2+A*n,a[i?"b":"t"]=y*j/2):315<h||180>h&&135<h?(a[q]=y*n/2+A*j,a[i?"b":"t"]=y*j/2+A*n,a[i?"t":"b"]=y*j/2):90>h||180<h&&270>h?(a[q]=y*n+A*j,a[i?"t":"b"]=y*j+A*n):(a[q]=y*n+A*j,a[i?"b":"t"]=y*j+A*n)}else switch(q=i?"b":"t",h){case 0:case 180:a[q]=y;a.l=a.r=A/2;break;case 90:case 270:a[q]=A;a.l=a.r=y/2;break;
default:45<=h&&90>=h||225<=h&&270>=h?(a[q]=y*j/2+A*n,a[i?"r":"l"]=y*n/2+A*j,a[i?"l":"r"]=y*n/2):90<=h&&135>=h||270<=h&&315>=h?(a[q]=y*j/2+A*n,a[i?"l":"r"]=y*n/2+A*j,a[i?"r":"l"]=y*n/2):45>h||180<h&&225>h?(a[q]=y*j+A*n,a[i?"r":"l"]=y*n+A*j):(a[q]=y*j+A*n,a[i?"l":"r"]=y*n+A*j)}a[q]+=d+Math.max(f.length,g.length)+(b.title?e+c:0)}return a},cleanGroup:function(a){if(this.opt.enableCache&&this.group)this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=
this._textFreePool.concat(this._textUsePool),this._textUsePool=[];this.inherited(arguments)},createText:function(b,c,d,e,f,g,h,i,k){if(!this.opt.enableCache||"html"==b)return a.createText[b](this.chart,c,d,e,f,g,h,i,k);0<this._textFreePool.length?(b=this._textFreePool.pop(),b.setShape({x:d,y:e,text:g,align:f}),c.add(b)):b=a.createText[b](this.chart,c,d,e,f,g,h,i);this._textUsePool.push(b);return b},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?(c=this._lineFreePool.pop(),
c.setShape(b),a.add(c)):c=a.createLine(b);this.opt.enableCache&&this._lineUsePool.push(c);return c},render:function(c,d){var e,f,h,i,n,q,v,w,x,E,A,y,D,F;if(!this.dirty||!this.scaler)return this;var L=this.opt;x=this.chart.theme.axis;var I=L.leftBottom,B=L.rotation%360,z=0,C,H,z=this.chart.theme.axis.tick.labelGap,M=L.font||x.majorTick&&x.majorTick.font||x.tick&&x.tick.font,K=L.titleFont||x.title&&x.title.font,P=L.fontColor||x.majorTick&&x.majorTick.fontColor||x.tick&&x.tick.fontColor||"black",U=L.titleFontColor||
x.title&&x.title.fontColor||"black";n=0==L.titleGap?0:L.titleGap||x.title&&x.title.gap||15;var J=L.titleOrientation||x.title&&x.title.orientation||"axis",G=this.chart.theme.getTick("major",L),V=this.chart.theme.getTick("minor",L),O=this.chart.theme.getTick("micro",L);Math.max(G.length,V.length,O.length);var N="stroke"in L?L.stroke:x.stroke,Q=M?k.normalizedLength(k.splitFontString(M).size):0;q=Math.abs(Math.cos(B*Math.PI/180));C=Math.abs(Math.sin(B*Math.PI/180));var S=K?k.normalizedLength(k.splitFontString(K).size):
0;"number"!=typeof z&&(z=4);0>B&&(B+=360);var Y=this._getMaxLabelSize(),Y=Y&&Y.majLabelW;if(this.vertical){D=c.height-d.b;F=void 0;A=d.t;y=void 0;x=(c.height-d.b+d.t)/2;E=void 0;C=Q*C+(Y||0)*q+z+Math.max(G.length,V.length)+S+n;v=0;w=-1;e=0;f=0;n=1;q=0;h=z;i=0;switch(B){case 0:H="end";f=0.4*Q;break;case 90:H="middle";e=-Q;break;case 180:H="start";f=0.4*-Q;break;case 270:H="middle";break;default:45>B?(H="end",f=0.4*Q):90>B?(H="end",f=0.4*Q):135>B?H="start":225>B?(H="start",f=0.4*-Q):270>B?(H="start",
e=I?0:0.4*Q):315>B?(H="end",e=I?0:0.4*Q):(H="end",f=0.4*Q)}if(I)F=y=d.l,z=J&&"away"==J?90:270,E=d.l-C+(270==z?S:0),n=-1,h=-h;else switch(F=y=c.width-d.r,z=J&&"axis"==J?90:270,E=c.width-d.r+C-(270==z?0:S),H){case "start":H="end";break;case "end":H="start";break;case "middle":e+=Q}}else{F=d.l;D=void 0;y=c.width-d.r;A=void 0;E=(c.width-d.r+d.l)/2;x=void 0;C=Q*q+(Y||0)*C+z+Math.max(G.length,V.length)+S+n;v=1;w=0;e=0;f=0;n=0;q=1;h=0;i=z;switch(B){case 0:H="middle";f=Q;break;case 90:H="start";e=0.4*-Q;
break;case 180:H="middle";break;case 270:H="end";e=0.4*Q;break;default:45>B?(H="start",f=I?Q:0):135>B?(H="start",e=0.4*-Q):180>B?(H="start",f=I?0:-Q):225>B?(H="end",f=I?0:-Q):315>B?(H="end",f=I?0.4*Q:0):(H="end",f=I?Q:0)}if(I)D=A=c.height-d.b,z=J&&"axis"==J?180:0,x=c.height-d.b+C-(z?S:0);else switch(D=A=d.t,z=J&&"away"==J?180:0,x=d.t-C+(z?0:S),q=-1,i=-i,H){case "start":H="end";break;case "end":H="start";break;case "middle":f-=Q}}this.cleanGroup();var W=this.group,I=this.scaler,J=this.ticks,Z=b.getTransformerFromModel(this.scaler),
T=(!L.title||!z)&&!B&&this.opt.htmlLabels&&!g("ie")&&!g("opera")?"html":"gfx",X=n*G.length,R=q*G.length,da=this._skipInterval;W.createLine({x1:F,y1:D,x2:y,y2:A}).setStroke(N);L.title&&(K=a.createText[T](this.chart,W,E,x,"middle",L.title,K,U),"html"==T?this.htmlElements.push(K):K.setTransform(k.matrix.rotategAt(z,E,x)));if(null==J)return this.dirty=!1,this;var aa=0<J.major.length?(J.major[0].value-this._majorStart)/I.major.tick:0,ia=this.opt.majorLabels;j.forEach(J.major,function(a,b){var c=Z(a.value),
d=F+v*c,g=D+w*c,b=b+aa;this.createLine(W,{x1:d,y1:g,x2:d+X,y2:g+R}).setStroke(G);if(a.label&&(!da||0==(b-(1+da))%(1+da))){var j=L.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,M,L.maxLabelCharCount):{text:a.label,truncated:!1},j=L.maxLabelSize?this.getTextWithLimitLength(j.text,M,L.maxLabelSize,j.truncated):j,c=this.createText(T,W,d+X+h+(B?0:e),g+R+i+(B?0:f),H,j.text,M,P);this.chart.truncateBidi&&j.truncated&&this.chart.truncateBidi(c,a.label,T);j.truncated&&this.labelTooltip(c,this.chart,
a.label,j.text,M,T);"html"==T?this.htmlElements.push(c):B&&c.setTransform([{dx:e,dy:f},k.matrix.rotategAt(B,d+X+h,g+R+i)])}},this);X=n*V.length;R=q*V.length;ia=this.opt.minorLabels&&I.minMinorStep<=I.minor.tick*I.bounds.scale;j.forEach(J.minor,function(a){var b=Z(a.value),c=F+v*b,d=D+w*b;this.createLine(W,{x1:c,y1:d,x2:c+X,y2:d+R}).setStroke(V);if(ia&&a.label){var g=L.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,M,L.maxLabelCharCount):{text:a.label,truncated:!1},g=L.maxLabelSize?this.getTextWithLimitLength(g.text,
M,L.maxLabelSize,g.truncated):g,b=this.createText(T,W,c+X+h+(B?0:e),d+R+i+(B?0:f),H,g.text,M,P);this.chart.getTextDir&&g.truncated&&this.chart.truncateBidi(b,a.label,T);g.truncated&&this.labelTooltip(b,this.chart,a.label,g.text,M,T);"html"==T?this.htmlElements.push(b):B&&b.setTransform([{dx:e,dy:f},k.matrix.rotategAt(B,c+X+h,d+R+i)])}},this);X=n*O.length;R=q*O.length;j.forEach(J.micro,function(a){var b=Z(a.value),a=F+v*b,b=D+w*b;this.createLine(W,{x1:a,y1:b,x2:a+X,y2:b+R}).setStroke(O)},this);this.dirty=
!1;return this},labelTooltip:function(a,b,c,d,g,i){var j=["dijit/Tooltip"],n={type:"rect"},v=["above","below"],d=k._base._getTextBox(d,{font:g}).w||0,g=g?k.normalizedLength(k.splitFontString(g).size):0;"html"==i?(h.mixin(n,e.position(a.firstChild,!0)),n.width=Math.ceil(d),n.height=Math.ceil(g),this._events.push({shape:dojo,handle:f.connect(a.firstChild,"onmouseover",this,function(){require(j,function(a){a.show(c,n,v)})})}),this._events.push({shape:dojo,handle:f.connect(a.firstChild,"onmouseout",this,
function(){require(j,function(a){a.hide(n)})})})):(i=a.getShape(),b=b.getCoords(),n=h.mixin(n,{x:i.x-d/2,y:i.y}),n.x+=b.x,n.y+=b.y,n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=Math.ceil(d),n.height=Math.ceil(g),this._events.push({shape:a,handle:a.connect("onmouseenter",this,function(){require(j,function(a){a.show(c,n,v)})})}),this._events.push({shape:a,handle:a.connect("onmouseleave",this,function(){require(j,function(a){a.hide(n)})})}))}})})},"dojox/charting/axis2d/Invisible":function(){define("dojo/_base/lang,dojo/_base/declare,./Base,../scaler/linear,dojox/gfx,dojox/lang/utils".split(","),
function(h,j,g,i,f,e){return j("dojox.charting.axis2d.Invisible",g,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(d,c){this.opt=h.clone(this.defaultParams);e.updateWithObject(this.opt,c);e.updateWithPattern(this.opt,c,this.optionalParams)},dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;
delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(d,c){this.scale=d;this.offset=c;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(d,c,b){if(this.initialized())return this;var a=this.opt;this.labels=a.labels;this.scaler=i.buildScaler(d,c,b,a);var e=this.scaler.bounds;if("scale"in this){a.from=
e.lower+this.offset;a.to=(e.upper-e.lower)/this.scale+a.from;if(!isFinite(a.from)||isNaN(a.from)||!isFinite(a.to)||isNaN(a.to)||a.to-a.from>=e.upper-e.lower)delete a.from,delete a.to,delete this.scale,delete this.offset;else{if(a.from<e.lower)a.to+=e.lower-a.from,a.from=e.lower;else if(a.to>e.upper)a.from+=e.upper-a.to,a.to=e.upper;this.offset=a.from-e.lower}this.scaler=i.buildScaler(d,c,b,a);1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset)}return this},getScaler:function(){return this.scaler},
getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(h,j){return h("dojox.charting.axis2d.Base",j,{constructor:function(g,h){this.vertical=h&&h.vertical;this.opt={};this.opt.min=h&&h.min;this.opt.max=h&&h.max},clear:function(){return this},initialized:function(){return!1},calculate:function(){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},
render:function(){this.dirty=!1;return this}})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(h,j){function g(d,c){for(var d=d.toLowerCase(),b=c.length-1;0<=b;--b)if(d===c[b])return!0;return!1}var i=h.getObject("dojox.charting.scaler.linear",!0),f=j.getNumericLabel,e=function(d,c,b,a,e,f,j){b=h.delegate(b);if(!a){if("major"==b.fixUpper)b.fixUpper="minor";if("major"==b.fixLower)b.fixLower="minor"}if(!e){if("minor"==b.fixUpper)b.fixUpper="micro";if("minor"==
b.fixLower)b.fixLower="micro"}if(!f){if("micro"==b.fixUpper)b.fixUpper="none";if("micro"==b.fixLower)b.fixLower="none"}var o=g(b.fixLower,["major"])?Math.floor(b.min/a)*a:g(b.fixLower,["minor"])?Math.floor(b.min/e)*e:g(b.fixLower,["micro"])?Math.floor(b.min/f)*f:b.min,l=g(b.fixUpper,["major"])?Math.ceil(b.max/a)*a:g(b.fixUpper,["minor"])?Math.ceil(b.max/e)*e:g(b.fixUpper,["micro"])?Math.ceil(b.max/f)*f:b.max;b.useMin&&(d=o);b.useMax&&(c=l);var m=!a||b.useMin&&g(b.fixLower,["major"])?d:Math.ceil(d/
a)*a,r=!e||b.useMin&&g(b.fixLower,["major","minor"])?d:Math.ceil(d/e)*e,p=!f||b.useMin&&g(b.fixLower,["major","minor","micro"])?d:Math.ceil(d/f)*f,u=!a?0:(b.useMax&&g(b.fixUpper,["major"])?Math.round((c-m)/a):Math.floor((c-m)/a))+1,s=!e?0:(b.useMax&&g(b.fixUpper,["major","minor"])?Math.round((c-r)/e):Math.floor((c-r)/e))+1,b=!f?0:(b.useMax&&g(b.fixUpper,["major","minor","micro"])?Math.round((c-p)/f):Math.floor((c-p)/f))+1,t=e?Math.round(a/e):0,v=f?Math.round(e/f):0,w=a?Math.floor(Math.log(a)/Math.LN10):
0,x=e?Math.floor(Math.log(e)/Math.LN10):0,E=j/(c-d);isFinite(E)||(E=1);return{bounds:{lower:o,upper:l,from:d,to:c,scale:E,span:j},major:{tick:a,start:m,count:u,prec:w},minor:{tick:e,start:r,count:s,prec:x},micro:{tick:f,start:p,count:b,prec:0},minorPerMajor:t,microPerMinor:v,scaler:i}};return h.mixin(i,{buildScaler:function(d,c,b,a,f,g){var h={fixUpper:"none",fixLower:"none",natural:!1};if(a){if("fixUpper"in a)h.fixUpper=""+a.fixUpper;if("fixLower"in a)h.fixLower=""+a.fixLower;if("natural"in a)h.natural=
Boolean(a.natural)}g=!g||3>g?3:g;if("min"in a)d=a.min;if("max"in a)c=a.max;a.includeZero&&(0<d&&(d=0),0>c&&(c=0));h.min=d;h.useMin=!0;h.max=c;h.useMax=!0;if("from"in a)d=a.from,h.useMin=!1;if("to"in a)c=a.to,h.useMax=!1;if(c<=d)return e(d,c,h,0,0,0,b);f||(f=c-d);var f=Math.floor(Math.log(f)/Math.LN10),f=a&&"majorTickStep"in a?a.majorTickStep:Math.pow(10,f),i=0,j=0,m;if(a&&"minorTickStep"in a)i=a.minorTickStep;else{do{i=f/10;if(!h.natural||0.9<i)if(m=e(d,c,h,f,i,0,b),m.bounds.scale*m.minor.tick>g)break;
i=f/5;if(!h.natural||0.9<i)if(m=e(d,c,h,f,i,0,b),m.bounds.scale*m.minor.tick>g)break;i=f/2;if(!h.natural||0.9<i)if(m=e(d,c,h,f,i,0,b),m.bounds.scale*m.minor.tick>g)break;return e(d,c,h,f,0,0,b)}while(0)}if(a&&"microTickStep"in a)j=a.microTickStep,m=e(d,c,h,f,i,j,b);else{do{j=i/10;if(!h.natural||0.9<j)if(m=e(d,c,h,f,i,j,b),3<m.bounds.scale*m.micro.tick)break;j=i/5;if(!h.natural||0.9<j)if(m=e(d,c,h,f,i,j,b),3<m.bounds.scale*m.micro.tick)break;j=i/2;if(!h.natural||0.9<j)if(m=e(d,c,h,f,i,j,b),3<m.bounds.scale*
m.micro.tick)break;j=0}while(0)}return j?m:e(d,c,h,f,i,0,b)},buildTicks:function(d,c){var b,a,e,g=d.major.start,h=d.minor.start,i=d.micro.start;if(c.microTicks&&d.micro.tick)b=d.micro.tick,a=i;else if(c.minorTicks&&d.minor.tick)b=d.minor.tick,a=h;else if(d.major.tick)b=d.major.tick,a=g;else return null;var j=1/d.bounds.scale;if(d.bounds.to<=d.bounds.from||isNaN(j)||!isFinite(j)||0>=b||isNaN(b)||!isFinite(b))return null;for(var m=[],r=[],p=[];a<=d.bounds.to+j;){if(Math.abs(g-a)<b/2){e={value:g};if(c.majorLabels)e.label=
f(g,d.major.prec,c);m.push(e);g+=d.major.tick;h+=d.minor.tick}else if(Math.abs(h-a)<b/2){if(c.minorTicks){e={value:h};if(c.minorLabels&&d.minMinorStep<=d.minor.tick*d.bounds.scale)e.label=f(h,d.minor.prec,c);r.push(e)}h+=d.minor.tick}else c.microTicks&&p.push({value:i});i+=d.micro.tick;a+=b}return{major:m,minor:r,micro:p}},getTransformerFromModel:function(d){var c=d.bounds.from,b=d.bounds.scale;return function(a){return(a-c)*b}},getTransformerFromPlot:function(d){var c=d.bounds.from,b=d.bounds.scale;
return function(a){return a/b+c}}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(h){var j=function(f,e){return Math.abs(f-e)<=1.0E-6*(Math.abs(f)+Math.abs(e))},g=h.getObject("dojox.charting.scaler.common",!0),i={};return h.mixin(g,{doIfLoaded:function(f,e,d){if(void 0==i[f])try{i[f]=require(f)}catch(c){i[f]=null}return i[f]?e(i[f]):d()},getNumericLabel:function(f,e,d){var c="";g.doIfLoaded("dojo/number",function(a){c=(d.fixed?a.format(f,{places:0>e?-e:0}):a.format(f))||
""},function(){c=d.fixed?f.toFixed(0>e?-e:0):f.toString()});if(d.labelFunc){var b=d.labelFunc(c,f,e);if(b)return b}if(d.labels){for(var b=d.labels,a=0,h=b.length;a<h;){var i=Math.floor((a+h)/2);b[i].value<f?a=i+1:h=i}if(a<b.length&&j(b[a].value,f))return b[a].text;--a;if(0<=a&&a<b.length&&j(b[a].value,f))return b[a].text;a+=2;if(a<b.length&&j(b[a].value,f))return b[a].text}return c}})})},"dojox/charting/plot2d/Bubble":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/array,./CartesianBase,./_PlotEvents,./common,dojox/lang/functional,dojox/lang/functional/reversed,dojox/lang/utils,dojox/gfx/fx".split(","),
function(h,j,g,i,f,e,d,c,b,a){var k=c.lambda("item.purgeGroup()");return j("dojox.charting.plot2d.Bubble",[i,f],{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,font:"",fontColor:""},constructor:function(a,c){this.opt=h.clone(this.defaultParams);b.updateWithObject(this.opt,c);b.updateWithPattern(this.opt,c,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate},render:function(a,
b){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,b);this.resetEvents();if(this.dirty=this.isDirty()){g.forEach(this.series,k);this._eventSeries={};this.cleanGroup();var c=this.group;d.forEachRev(this.series,function(a){a.cleanGroup(c)})}for(var f=this.chart.theme,h=this._hScaler.scaler.getTransformerFromModel(this._hScaler),i=this._vScaler.scaler.getTransformerFromModel(this._vScaler),j=this.events(),u=this.series.length-1;0<=u;--u){var s=this.series[u];if(!this.dirty&&!s.dirty)f.skip(),
this._reconnectEvents(s.name);else if(s.cleanGroup(),s.data.length)if("number"==typeof s.data[0])console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",s);else{var t=f.next("circle",[this.opt,s]),c=s.group,v=g.map(s.data,function(c){return c?{x:h(c.x)+b.l,y:a.height-b.b-i(c.y),radius:this._vScaler.bounds.scale*(c.size/2)}:null},this),w=null,x=null,E=null,A=this.opt.styleFunc,y=function(a){return A?f.addMixin(t,"circle",[a,A(a)],!0):f.addMixin(t,
"circle",a,!0)};if(t.series.shadow&&(E=g.map(v,function(d,e){if(null!==d){var f=y(s.data[e]).series.shadow,f=c.createCircle({cx:d.x+f.dx,cy:d.y+f.dy,r:d.radius}).setStroke(f).setFill(f.color);this.animate&&this._animateBubble(f,a.height-b.b,d.radius);return f}return null},this),E.length))s.dyn.shadow=E[E.length-1].getStroke();if(t.series.outline&&(x=g.map(v,function(d,f){if(null!==d){var g=y(s.data[f]),g=e.makeStroke(g.series.outline);g.width=2*g.width+t.series.stroke.width;g=c.createCircle({cx:d.x,
cy:d.y,r:d.radius}).setStroke(g);this.animate&&this._animateBubble(g,a.height-b.b,d.radius);return g}return null},this),x.length))s.dyn.outline=x[x.length-1].getStroke();w=g.map(v,function(d,e){if(null!==d){var f=y(s.data[e]),g={x:d.x-d.radius,y:d.y-d.radius,width:2*d.radius,height:2*d.radius},h=this._plotFill(f.series.fill,a,b),h=this._shapeFill(h,g),f=c.createCircle({cx:d.x,cy:d.y,r:d.radius}).setFill(h).setStroke(f.series.stroke);this.animate&&this._animateBubble(f,a.height-b.b,d.radius);return f}return null},
this);if(w.length)s.dyn.fill=w[w.length-1].getFill(),s.dyn.stroke=w[w.length-1].getStroke();if(j){var D=Array(w.length);g.forEach(w,function(a,b){if(null!==a){var c={element:"circle",index:b,run:s,shape:a,outline:x&&x[b]||null,shadow:E&&E[b]||null,x:s.data[b].x,y:s.data[b].y,r:s.data[b].size/2,cx:v[b].x,cy:v[b].y,cr:v[b].radius};this._connectEvents(c);D[b]=c}},this);this._eventSeries[s.name]=D}else delete this._eventSeries[s.name];s.dirty=!1}else s.dirty=!1,f.skip()}this.dirty=!1;return this},_animateBubble:function(b,
c,d){a.animateTransform(h.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,c],end:[0,0]},{name:"scale",start:[0,1/d],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/connect,./Base,../scaler/primitive,dojox/gfx/fx".split(","),function(h,j,g,i,f,e){return j("dojox.charting.plot2d.CartesianBase",i,{constructor:function(){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=
[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0}},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(d){this.inherited(arguments,[d||this.chart.plotGroup])},setAxis:function(d){d&&(this[d.vertical?"_vAxis":"_hAxis"]=d);return this},toPage:function(d){var c=this._hAxis,b=this._vAxis,a=c.getScaler(),e=b.getScaler(),f=a.scaler.getTransformerFromModel(a),g=e.scaler.getTransformerFromModel(e),h=this.chart.getCoords(),i=this.chart.offsets,
j=this.chart.dim,a=function(a){var d={};d.x=f(a[c.name])+h.x+i.l;d.y=h.y+j.height-i.b-g(a[b.name]);return d};return d?a(d):a},toData:function(d){var c=this._hAxis,b=this._vAxis,a=c.getScaler(),e=b.getScaler(),f=a.scaler.getTransformerFromPlot(a),g=e.scaler.getTransformerFromPlot(e),h=this.chart.getCoords(),i=this.chart.offsets,j=this.chart.dim,a=function(a){var d={};d[c.name]=f(a.x-h.x-i.l);d[b.name]=g(h.y+j.height-a.y-i.b);return d};return d?a(d):a},isDirty:function(){return this.dirty||this._hAxis&&
this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},performZoom:function(d,c){var b=this._vAxis.scale||1,a=this._hAxis.scale||1,f=this._hScaler.bounds,f=(f.from-f.lower)*f.scale,i=this._vScaler.bounds,i=(i.from-i.lower)*i.scale,j=b/this.lastWindow.vscale,o=a/this.lastWindow.hscale,j=e.animateTransform(h.delegate({shape:this.group,duration:1200,transform:[{name:"translate",start:[0,0],end:[c.l*(1-o),(d.height-c.b)*(1-j)]},{name:"scale",start:[1,1],end:[o,j]},{name:"original"},{name:"translate",start:[0,
0],end:[(this.lastWindow.xoffset-f)/(1==this.lastWindow.hscale?a:this.lastWindow.hscale),(i-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?b:this.lastWindow.vscale)]}]},this.zoom));h.mixin(this.lastWindow,{vscale:b,hscale:a,xoffset:f,yoffset:i});this.zoomQueue.push(j);g.connect(j,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(d,c){this._hAxis?
(this._hAxis.initialized()||this._hAxis.calculate(c.hmin,c.hmax,d.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=f.buildScaler(c.hmin,c.hmax,d.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(c.vmin,c.vmax,d.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=f.buildScaler(c.vmin,c.vmax,d.height);return this}})})},"dojox/charting/plot2d/Base":function(){define(["dojo/_base/declare","../Element","dojo/_base/array","./common"],function(h,j,g,i){return h("dojox.charting.plot2d.Base",
j,{constructor:function(){},clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(){return this},assignAxes:function(f){g.forEach(this.axes,function(e){this[e]&&this.setAxis(f[this[e]])},this)},addSeries:function(f){this.series.push(f);return this},getSeriesStats:function(){return i.collectSimpleStats(this.series)},calculateAxes:function(f){this.initializeScalers(f,this.getSeriesStats());return this},initializeScalers:function(){return this},isDataDirty:function(){return g.some(this.series,
function(f){return f.dirty})},render:function(){return this},getRequiredColors:function(){return this.series.length}})})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/Color,dojox/gfx,dojox/lang/functional,../scaler/common".split(","),function(h,j,g,i,f,e){var d=h.getObject("dojox.charting.plot2d.common",!0);return h.mixin(d,{doIfLoaded:e.doIfLoaded,makeStroke:function(c){if(!c)return c;if("string"==typeof c||c instanceof g)c={color:c};return i.makeParameters(i.defaultStroke,
c)},augmentColor:function(c,b){var a=new g(c),d=new g(b);d.a=a.a;return d},augmentStroke:function(c,b){var a=d.makeStroke(c);if(a)a.color=d.augmentColor(a.color,b);return a},augmentFill:function(c,b){new g(b);return"string"==typeof c||c instanceof g?d.augmentColor(c,b):c},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(c){for(var b=h.delegate(d.defaultStats),a=0;a<c.length;++a)for(var e=
c[a],f=0;f<e.data.length;f++)if(null!==e.data[f]){if("number"==typeof e.data[f]){var f=b.vmin,g=b.vmax;(!("ymin"in e)||!("ymax"in e))&&j.forEach(e.data,function(a,c){if(null!==a){var d=c+1,e=a;isNaN(e)&&(e=0);b.hmin=Math.min(b.hmin,d);b.hmax=Math.max(b.hmax,d);b.vmin=Math.min(b.vmin,e);b.vmax=Math.max(b.vmax,e)}})}else{var i=b.hmin,l=b.hmax,f=b.vmin,g=b.vmax;(!("xmin"in e)||!("xmax"in e)||!("ymin"in e)||!("ymax"in e))&&j.forEach(e.data,function(a,c){if(null!==a){var d="x"in a?a.x:c+1,e=a.y;isNaN(d)&&
(d=0);isNaN(e)&&(e=0);b.hmin=Math.min(b.hmin,d);b.hmax=Math.max(b.hmax,d);b.vmin=Math.min(b.vmin,e);b.vmax=Math.max(b.vmax,e)}});if("xmin"in e)b.hmin=Math.min(i,e.xmin);if("xmax"in e)b.hmax=Math.max(l,e.xmax)}if("ymin"in e)b.vmin=Math.min(f,e.ymin);if("ymax"in e)b.vmax=Math.max(g,e.ymax);break}return b},calculateBarSize:function(c,b,a){a||(a=1);var d=b.gap,d=(c-2*d)/a;"minBarSize"in b&&(d=Math.max(d,b.minBarSize));"maxBarSize"in b&&(d=Math.min(d,b.maxBarSize));d=Math.max(d,1);return{size:d,gap:(c-
d*a)/2}},collectStackedStats:function(c){var b=h.clone(d.defaultStats);if(c.length){b.hmin=Math.min(b.hmin,1);b.hmax=f.foldl(c,"seed, run -> Math.max(seed, run.data.length)",b.hmax);for(var a=0;a<b.hmax;++a){var e=c[0].data[a],e=e&&("number"==typeof e?e:e.y);isNaN(e)&&(e=0);b.vmin=Math.min(b.vmin,e);for(var g=1;g<c.length;++g){var i=c[g].data[a],i=i&&("number"==typeof i?i:i.y);isNaN(i)&&(i=0);e+=i}b.vmax=Math.max(b.vmax,e)}}return b},curve:function(c,b){var a=c.slice(0);"x"==b&&(a[a.length]=a[0]);
return j.map(a,function(c,d){if(0==d)return"M"+c.x+","+c.y;if(isNaN(b)){if("X"==b||"x"==b||"S"==b){var e,f=a[d-1],g=a[d],h,i,j,u=1/6;1==d?(e="x"==b?a[a.length-2]:f,u=1/3):e=a[d-2];d==a.length-1?(h="x"==b?a[1]:g,u=1/3):h=a[d+1];i=Math.sqrt((g.x-f.x)*(g.x-f.x)+(g.y-f.y)*(g.y-f.y));j=Math.sqrt((g.x-e.x)*(g.x-e.x)+(g.y-e.y)*(g.y-e.y));var s=Math.sqrt((h.x-f.x)*(h.x-f.x)+(h.y-f.y)*(h.y-f.y)),t=j*u,u=s*u;t>i/2&&u>i/2?(t=i/2,u=i/2):t>i/2?(t=i/2,u=i/2*s/j):u>i/2&&(u=i/2,t=i/2*j/s);"S"==b&&(e==f&&(t=0),g==
h&&(u=0));i=f.x+t*(g.x-e.x)/j;e=f.y+t*(g.y-e.y)/j;j=g.x-u*(h.x-f.x)/s;f=g.y-u*(h.y-f.y)/s}}else return g=c.x-a[d-1].x,"C"+(c.x-(b-1)*(g/b))+","+a[d-1].y+" "+(c.x-g/b)+","+c.y+" "+c.x+","+c.y;return"C"+(i+","+e+" "+j+","+f+" "+g.x+","+g.y)}).join(" ")},getLabel:function(c,b,a){return e.doIfLoaded("dojo/number",function(d){return(b?d.format(c,{places:a}):d.format(c))||""},function(){return b?c.toFixed(a):c.toString()})}})})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],function(h){var j=
h.getObject("dojox.charting.scaler.primitive",!0);return h.mixin(j,{buildScaler:function(g,h,f){g==h&&(g-=0.5,h+=0.5);return{bounds:{lower:g,upper:h,from:g,to:h,scale:f/(h-g),span:f},scaler:j}},buildTicks:function(){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(g){var h=g.bounds.from,f=g.bounds.scale;return function(e){return(e-h)*f}},getTransformerFromPlot:function(g){var h=g.bounds.from,f=g.bounds.scale;return function(e){return e/f+h}}})})},"dojox/gfx/fx":function(){define("dojo/_base/lang,./_base,./matrix,dojo/_base/Color,dojo/_base/array,dojo/_base/fx,dojo/_base/connect".split(","),
function(h,j,g,i,f,e,d){function c(a,b){this.start=a;this.end=b}function b(a,b,c){this.start=a;this.end=b;this.units=c}function a(a,b){this.start=a;this.end=b;this.temp=new i}function k(a){this.values=a;this.length=a.length}function n(a,b){this.values=a;this.def=b?b:{}}function q(a,b){this.stack=a;this.original=b}function o(b,c,d,e){if(b.values)return new k(b.values);var f,g;g=b.start?j.normalizeColor(b.start):f=c?d?c[d]:c:e;b.end?b=j.normalizeColor(b.end):(f||(f=c?d?c[d]:c:e),b=f);return new a(g,
b)}var l=j.fx={};c.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};b.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};a.prototype.getValue=function(a){return i.blendColors(this.start,this.end,a,this.temp)};k.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};n.prototype.getValue=function(a){var b=h.clone(this.def),c;for(c in this.values)b[c]=this.values[c].getValue(a);return b};q.prototype.getValue=
function(a){var b=[];f.forEach(this.stack,function(c){if(c instanceof g.Matrix2D)b.push(c);else if("original"==c.name&&this.original)b.push(this.original);else if("matrix"==c.name){if(c.start instanceof g.Matrix2D&&c.end instanceof g.Matrix2D){var d=new g.Matrix2D,e;for(e in c.start)d[e]=(c.end[e]-c.start[e])*a+c.start[e];b.push(d)}}else c.name in g&&(d=g[c.name],"function"!=typeof d?b.push(d):(e=f.map(c.start,function(b,d){return(c.end[d]-b)*a+b}),d=d.apply(g,e),d instanceof g.Matrix2D&&b.push(d)))},
this);return b};var m=new i(0,0,0,0);l.animateStroke=function(a){if(!a.easing)a.easing=e._defaultEasing;var b=new e.Animation(a),f=a.shape,g;d.connect(b,"beforeBegin",b,function(){g=f.getStroke();var b=a.color,d={},e;if(b)d.color=o(b,g,"color",m);if((b=a.style)&&b.values)d.style=new k(b.values);if(b=a.width){var h=b;h.values?e=new k(h.values):(b=h.start?h.start:e=g?g.width:1,h.end?e=h.end:"number"!=typeof e&&(e=g?g.width:1),e=new c(b,e));d.width=e}if((b=a.cap)&&b.values)d.cap=new k(b.values);if(b=
a.join)if(b.values)d.join=new k(b.values);else if(e=b.start?b.start:g&&g.join||0,b=b.end?b.end:g&&g.join||0,"number"==typeof e&&"number"==typeof b)d.join=new c(e,b);this.curve=new n(d,g)});d.connect(b,"onAnimate",f,"setStroke");return b};l.animateFill=function(a){if(!a.easing)a.easing=e._defaultEasing;var b=new e.Animation(a),c=a.shape,f;d.connect(b,"beforeBegin",b,function(){f=c.getFill();var b=a.color;if(b)this.curve=o(b,f,"",m)});d.connect(b,"onAnimate",c,"setFill");return b};l.animateFont=function(a){if(!a.easing)a.easing=
e._defaultEasing;var c=new e.Animation(a),f=a.shape,g;d.connect(c,"beforeBegin",c,function(){g=f.getFont();var c=a.style,d={},e,h;if(c&&c.values)d.style=new k(c.values);if((c=a.variant)&&c.values)d.variant=new k(c.values);if((c=a.weight)&&c.values)d.weight=new k(c.values);if((c=a.family)&&c.values)d.family=new k(c.values);if((c=a.size)&&c.units)e=parseFloat(c.start?c.start:f.font&&f.font.size||"0"),h=parseFloat(c.end?c.end:f.font&&f.font.size||"0"),d.size=new b(e,h,c.units);this.curve=new n(d,g)});
d.connect(c,"onAnimate",f,"setFont");return c};l.animateTransform=function(a){if(!a.easing)a.easing=e._defaultEasing;var b=new e.Animation(a),c=a.shape,f;d.connect(b,"beforeBegin",b,function(){f=c.getTransform();this.curve=new q(a.transform,f)});d.connect(b,"onAnimate",c,"setTransform");return b};return l})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(h,j,g,i){return g("dojox.charting.plot2d._PlotEvents",
null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(){},raiseEvent:function(f){this.plotEvent(f);var e=h.delegate(f);e.originalEvent=f.type;e.originalPlot=f.plot;e.type="onindirect";j.forEach(this.chart.stack,function(d){if(d!==this&&d.plotEvent)e.plot=d,d.plotEvent(e)},this)},connect:function(f,e){this.dirty=!0;return i.connect(this,"plotEvent",f,e)},events:function(){return!!this.plotEvent.after},
resetEvents:function(){if(this._shapeEvents.length)j.forEach(this._shapeEvents,function(f){f.shape.disconnect(f.handle)}),this._shapeEvents=[];this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(f,e){this._shapeEvents.push({shape:f.eventMask,handle:f.eventMask.connect(e,this,function(d){f.type=e;f.event=d;this.raiseEvent(f);f.event=null})})},_connectEvents:function(f){if(f)f.chart=this.chart,f.plot=this,f.hAxis=this.hAxis||null,f.vAxis=this.vAxis||null,f.eventMask=f.eventMask||
f.shape,this._connectSingleEvent(f,"onmouseover"),this._connectSingleEvent(f,"onmouseout"),this._connectSingleEvent(f,"onclick")},_reconnectEvents:function(f){(f=this._eventSeries[f])&&j.forEach(f,this._connectEvents,this)},fireEvent:function(f,e,d,c){if((f=this._eventSeries[f])&&f.length&&d<f.length)d=f[d],d.type=e,d.event=c||null,this.raiseEvent(d),d.event=null}})})},"JBrowse/View/Track/_FeatureDetailMixin":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/aspect,dojo/dom-construct,JBrowse/Util,JBrowse/View/FASTA,JBrowse/View/_FeatureDescriptionMixin".split(","),
function(h,j,g,i,f,e,d,c){return h(c,{constructor:function(){"function"==typeof this.destroy&&i.before(this,"destroy",function(){delete this.eventHandlers})},_setupEventHandlers:function(){var b=dojo.clone(this.config.events||{});if(!b.click)b.click=(this.config.style||{}).linkTemplate?{action:"newWindow",url:this.config.style.linkTemplate}:{action:"contentDialog",title:"{type} {name}",content:dojo.hitch(this,"defaultFeatureDetail")};var b=dojo.clone(b),a;for(a in this.config){var c=a.replace(/^on(?=[A-Z])/,
"");c!=a&&(b[c.toLowerCase()]=this.config[a])}for(a in b)"string"==typeof b[a]&&(b[a]={url:b[a]});this.eventHandlers=b;this.eventHandlers.click=this._makeClickHandler(this.eventHandlers.click)},defaultFeatureDetail:function(b,a,c,d){d=d||dojo.create("div",{className:"detail feature-detail feature-detail-"+b.name.replace(/\s+/g,"_").toLowerCase(),innerHTML:""});this._renderCoreDetails(b,a,c,d);this._renderAdditionalTagsDetail(b,a,c,d);this._renderUnderlyingReferenceSequence(b,a,c,d);this._renderSubfeaturesDetail(b,
a,c,d);return d},_renderCoreDetails:function(b,a,c,d){b=dojo.create("div",{className:"core"},d);c=dojo.hitch(this,"renderDetailField",b);b.innerHTML+='<h2 class="sectiontitle">Primary Data</h2>';c("Name",this.getFeatureLabel(a),a);c("Type",a.get("type"),a);c("Score",a.get("score"),a);c("Description",this.getFeatureDescription(a),a);c("Position",e.assembleLocString({start:a.get("start"),end:a.get("end"),ref:this.refSeq.name,strand:a.get("strand")}),a);c("Length",e.addCommas(a.get("end")-a.get("start"))+
" bp",a)},_renderSubfeaturesDetail:function(b,a,c,d){(c=a.get("subfeatures"))&&c.length&&this._subfeaturesDetail(b,c,d,a)},_isReservedTag:function(b){return{name:1,start:1,end:1,strand:1,note:1,subfeatures:1,type:1,score:1}[b.toLowerCase()]},_renderAdditionalTagsDetail:function(b,a,c,d){b=j.filter(a.tags(),function(a){return!this._isReservedTag(a)},this);b.length&&(f.create("div",{className:"additional",innerHTML:'<h2 class="sectiontitle">Attributes</h2>'},d),j.forEach(b.sort(),function(b){this.renderDetailField(d,
b,a.get(b),a)},this))},_renderUnderlyingReferenceSequence:function(b,a,c,f){c=dojo.create("div",{className:"field_container feature_sequence"},f);dojo.create("h2",{className:"field feature_sequence",innerHTML:"Region sequence",title:"reference sequence underlying this "+(a.get("type")||"feature")},c);var g="feature_sequence"+this._uniqID(),h=dojo.create("div",{id:g,innerHTML:'<div style="height: 12em">Loading...</div>',className:"value feature_sequence"},c),c=this.config.maxFeatureSizeForUnderlyingRefSeq;
c<a.get("end")-a.get("start")?h.innerHTML="Not displaying underlying reference sequence, feature is longer than maximum of "+e.humanReadableNumber(c)+"bp":b.browser.getStore("refseqs",dojo.hitch(this,function(b){h=dojo.byId(g)||h;b?b.getReferenceSequence({ref:this.refSeq.name,start:a.get("start"),end:a.get("end")},dojo.hitch(this,function(b){h=dojo.byId(g)||h;h.innerHTML="";(new d({track:this,width:62,htmlMaxRows:10})).renderHTML({ref:this.refSeq.name,start:a.get("start"),end:a.get("end"),strand:a.get("strand"),
type:a.get("type")},-1==a.get("strand")?e.revcom(b):b,h)}),function(){},dojo.hitch(this,function(){h=dojo.byId(g)||h;h.innerHTML='<span class="ghosted">reference sequence not available</span>'})):h.innerHTML='<span class="ghosted">reference sequence not available</span>'}))},_uniqID:function(){this._idCounter=this._idCounter||0;return this._idCounter++},_subfeaturesDetail:function(b,a,c){c=dojo.create("div",{className:"field_container subfeatures"},c);dojo.create("h2",{className:"field subfeatures",
innerHTML:"Subfeatures"},c);var d=dojo.create("div",{className:"value subfeatures"},c);j.forEach(a||[],function(a){this.defaultFeatureDetail(b,a,null,dojo.create("div",{className:"detail feature-detail subfeature-detail feature-detail-"+b.name+" subfeature-detail-"+b.name,innerHTML:""},d))},this)}})})},"JBrowse/View/FASTA":function(){define("dojo/_base/declare,dojo/dom-construct,dijit/Toolbar,dijit/form/Button,JBrowse/Util,JBrowse/has".split(","),function(h,j,g,i,f,e){return h(null,{constructor:function(d){this.width=
d.width||78;this.htmlMaxRows=d.htmlMaxRows||15;this.canSaveFiles=(this.track=d.track)&&d.track._canSaveFiles&&d.track._canSaveFiles()},renderHTML:function(d,c,b){var a=this.renderText(d,c),c=a.match(/\n/g).length+1,b=j.create("div",{className:"fastaView"},b);if(this.canSaveFiles){var h=this;(new g).placeAt(b).addChild(new i({iconClass:"dijitIconSave",label:"FASTA",title:"save as FASTA",disabled:!e("save-generated-files"),onClick:function(){h.track._fileDownload({format:"FASTA",filename:f.assembleLocString(d)+
".fasta",data:a})}}))}var n=0;j.create("textarea",{className:"fasta",cols:this.width,rows:Math.min(c,this.htmlMaxRows),readonly:!0},b).innerHTML=a.replace(/\n/g,function(){return n++?"":"\n"});return b},renderText:function(d,c){return">"+d.ref+" "+f.assembleLocString(d)+(d.type?" class="+d.type:"")+" length="+(d.end-d.start)+"\n"+this._wrap(c,this.width)},_wrap:function(d,c){c=c||this.width;return d.replace(RegExp("(.{"+c+"})","g"),"$1\n")}})})},"dijit/Toolbar":function(){define("require,dojo/_base/declare,dojo/has,dojo/keys,dojo/ready,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),
function(h,j,g,i,f,e,d,c){g("dijit-legacy-requires")&&f(0,function(){h(["dijit/ToolbarSeparator"])});return j("dijit.Toolbar",[e,c,d],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[i.LEFT_ARROW]:[i.RIGHT_ARROW],this.isLeftToRight()?[i.RIGHT_ARROW]:[i.LEFT_ARROW])}})})},"JBrowse/View/_FeatureDescriptionMixin":function(){define(["dojo/_base/declare",
"dojo/_base/lang"],function(h,j){return h(null,{getFeatureLabel:function(g){return this._getFeatureDescriptiveThing("label","name,id",g)},getFeatureDescription:function(g){return this._getFeatureDescriptiveThing("description","note,description",g)},_getFeatureDescriptiveThing:function(g,h,f){var e=this.config.style[g]||this.config[g];if(!e)return null;if("function"==typeof e)return e.call(this,f);if(!this.descriptionFields)this.descriptionFields={};var d;if(!(d=this.descriptionFields[g]))e?(j.isArray(e)?
e=e.join(","):"string"!=typeof e&&(console.warn("invalid `description` setting ("+e+') for "'+(this.name||this.track.name)+'" track, falling back to "note,description"'),e=h),e=e.toLowerCase().split(/\s*\,\s*/)):e=[],d=this.descriptionFields[g]=e;g=d;for(h=0;h<g.length;h++)if(e=f.get(g[h]))return e;return null}})})},"JBrowse/View/Track/_TrackDetailsStatsMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred"],function(h,j,g){return h(null,{_trackDetailsContent:function(){var h=
this,f=new g,e=arguments;this.store.getGlobalStats(function(d){f.resolve(h.inherited(e,[{"Stats (current reference sequence)":d}]))},j.hitch(f,"reject"));return f}})})},"JBrowse/View/GranularRectLayout":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(h){this.pitchX=h.pitchX||10;this.pitchY=h.pitchY||10;this.displayMode=h.displayMode;if("compact"==this.displayMode)this.pitchY=Math.round(this.pitchY/4)||1,this.pitchX=Math.round(this.pitchX/4)||1;this.bitmap=
[];this.rectangles={};this.maxHeight=Math.ceil((h.maxHeight||Infinity)/this.pitchY);this.pTotalHeight=0},addRect:function(h,g,i,f,e){if(h in this.rectangles){h=this.rectangles[h];if(null===h.top)return null;this._addRectToBitmap(h,e);return h.top*this.pitchY}g=Math.floor(g/this.pitchX);i=Math.floor(i/this.pitchX);f=Math.ceil(f/this.pitchY);g={id:h,l:g,r:i,mX:Math.floor((g+i)/2),h:f};if(e)g.data=e;for(var i=this.maxHeight-f,d=0;d<=i&&this._collides(g,d);d++);if(d>i)return g.top=d=null,this.rectangles[h]=
g,this.pTotalHeight=Math.max(this.pTotalHeight||0,d+f),null;g.top=d;this._addRectToBitmap(g,e);this.rectangles[h]=g;this.pTotalHeight=Math.max(this.pTotalHeight||0,d+f);return d*this.pitchY},_collides:function(h,g){if("collapsed"==this.displayMode)return!1;var i=this.bitmap,f=i[g];if(f&&(f[h.l]||f[h.r]||f[h.mX]))return!0;for(var f=g+h.h,e=g;e<f;e++){var d=i[e];if(d){if(d.allFilled)return!0;if(d.length>h.l)for(var c=h.l;c<=h.r;c++)if(d[c])return!0}}return!1},_autovivify:function(h,g){var i;if(!(i=
h[g]))i=[],h[g]=i;return i},_addRectToBitmap:function(h,g){if(null!==h.top){var g=g||!0,i=this.bitmap,f=this._autovivify,e=h.top+h.h;if(2E4<h.r-h.l)for(var d=h.top;d<e;d++)f(i,d).allFilled=g;else for(d=h.top;d<e;d++)for(var c=f(i,d),b=h.l;b<=h.r;b++)c[b]=g}},discardRange:function(h,g){for(var i=Math.floor(h/this.pitchX),f=Math.floor(g/this.pitchX),e=this.bitmap,d=0;d<e.length;++d){var c=e[d];if(c)for(var b=i;b<=f;++b)delete c[b]}},hasSeen:function(h){return!!this.rectangles[h]},getByCoord:function(h,
g){var i=this.bitmap[Math.floor(g/this.pitchY)];return!i?void 0:i.allFilled||i[Math.floor(h/this.pitchX)]},getByID:function(h){if(h=this.rectangles[h])return h.data||!0},cleanup:function(){},getTotalHeight:function(){return this.pTotalHeight*this.pitchY}})})},"JBrowse/View/Track/FixedImage/Wiggle":function(){define(["dojo/_base/declare","JBrowse/View/Track/FixedImage","JBrowse/View/Track/_YScaleMixin"],function(h,j,g){return h([j,g],{constructor:function(){},updateStaticElements:function(g){this.inherited(arguments);
this.updateYScaleFromViewDimensions(g)},makeImageLoadHandler:function(g,f,e,d){return this.inherited(arguments,[g,f,e,dojo.hitch(this,function(){this.makeWiggleYScale();d&&d()})])},makeWiggleYScale:function(){var g=this;this.store.getGlobalStats(function(f){g.yscale||g.makeYScale({min:f.scoreMin,max:f.scoreMax})})}})})},"JBrowse/View/Track/FixedImage":function(){define(["dojo/_base/declare","JBrowse/has","JBrowse/View/Track/BlockBased"],function(h,j,g){return h(g,{constructor:function(g){this.trackPadding=
g.trackPadding||0},handleImageError:function(g){(g.currentTarget||g.srcElement).style.display="none";dojo.stopEvent(g)},makeImageLoadHandler:function(g,f,e,d){var c=dojo.hitch(this,function(){this.imageHeight=g.height;g.style.height=g.height+"px";g.style.width=100*(g.baseWidth/e)+"%";this.heightUpdate(g.height,f);d&&d();return!0});return j("ie")?function(){window.setTimeout(c,250)}:c},fillBlock:function(g){var f=g.blockIndex,e=g.block,d=g.leftBase,c=g.rightBase,b=g.finishCallback||function(){},a=
c-d;this.store.getImages({scale:g.scale,start:d,end:c},dojo.hitch(this,function(c){dojo.forEach(c,function(b){b.className="image-track";if(!b.parentNode||!b.parentNode.parentNode){b.style.position="absolute";b.style.left=100*((b.startBase-d)/a)+"%";switch(this.config.align){case "top":b.style.top="0px";break;default:b.style.bottom=this.trackPadding+"px"}e.domNode.appendChild(b)}var c=this.makeImageLoadHandler(b,f,a);b.complete?c():b.onload=c},this);b()}),dojo.hitch(this,function(a){404==a.status?
b():this.fillBlockError(f,e,a);b()}))},startZoom:function(){},endZoom:function(){this.clear()},clear:function(){this.inherited(arguments)},transfer:function(g,f){if(g&&f)for(var e=g.domNode.childNodes,d=f.startBase,c=f.endBase,b,a=0;a<e.length;a++)if(b=e[a],"startBase"in b&&b.startBase<c&&b.startBase+b.baseWidth>d)b.style.left=100*((b.startBase-d)/(c-d))+"%",f.domNode.appendChild(b)}})})},"JBrowse/View/Track/Wiggle":function(){define(["JBrowse/View/Track/Wiggle/XYPlot"],function(h){return h})},"JBrowse/View/Track/Wiggle/XYPlot":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/Color,dojo/on,JBrowse/View/Track/WiggleBase,JBrowse/View/Track/_YScaleMixin,JBrowse/Util,./_Scale".split(","),
function(h,j,g,i,f,e,d,c){return h([f,e],{_defaultConfig:function(){return d.deepUpdate(dojo.clone(this.inherited(arguments)),{style:{pos_color:"blue",neg_color:"red",origin_color:"#888",variance_band_color:"rgba(0,0,0,0.3)"}})},_getScaling:function(b,a,d){this._getScalingStats(b,dojo.hitch(this,function(b){if(!this.lastScaling||!this.lastScaling.sameStats(b)||this.trackHeightChanged){b=new c(this.config,b);if(0.005>Math.abs(b.min/b.max))b.min=0;this.makeYScale({fixBounds:!0,min:b.min,max:b.max});
b.min=this.ruler.scaler.bounds.lower;b.max=this.ruler.scaler.bounds.upper;b.range=b.max-b.min;this.lastScaling=b;this.trackHeightChanged=!1}a(this.lastScaling)}),d)},updateStaticElements:function(b){this.inherited(arguments);this.updateYScaleFromViewDimensions(b)},_drawFeatures:function(b,a,c,e,f,g,h){var i=this,j=f.getContext("2d"),p=f.height,u=d.getResolution(j,this.browser.config.highResolutionMode),s=dojo.hitch(this,function(a){return p*(1-h.normalize(a))/u}),t=s(h.origin),v=this.config.disable_clip_markers;
dojo.forEach(g,function(a,b){if(a){var c=s(a.score),d=a.feat;if(0<=c){var e=this.getConfForFeature("style.bg_color",d);if(e)j.fillStyle=e,i._fillRectMod(j,b,0,1,p)}if(c<=p||c>t)if(c<=t){if(j.fillStyle=this.getConfForFeature("style.pos_color",d),i._fillRectMod(j,b,c,1,t-c+1),!v&&0>c)j.fillStyle=this.getConfForFeature("style.clip_marker_color",d)||this.getConfForFeature("style.neg_color",d),i._fillRectMod(j,b,0,1,3)}else if(j.fillStyle=this.getConfForFeature("style.neg_color",d),i._fillRectMod(j,b,
t,1,c-t+1),!v&&c>=p)j.fillStyle=this.getConfForFeature("style.clip_marker_color",d)||this.getConfForFeature("style.pos_color",d),i._fillRectMod(j,b,p-3,1,3)}},this)},_maskBySpans:function(b,a,c,d,e,f,g,h){var i=e.getContext("2d"),j=e.height,u;for(u in h)if(h.hasOwnProperty(u)){var s=Math.ceil((h[u].end-h[u].start)*b),t=Math.round((h[u].start-a)*b);i.clearRect(t,0,s,j)}i.globalAlpha=this.config.style.masked_transparancy||0.2;this.config.style.masked_transparancy=i.globalAlpha;this._drawFeatures(b,
a,c,d,e,f,g)},_postDraw:function(b,a,c,e,f,h,i,m){var r=f.getContext("2d"),p=f.height,u=d.getResolution(r,this.browser.config.highResolutionMode),s=dojo.hitch(this,function(a){return p*(1-m.normalize(a))/u}),t=this;if(this.config.variance_band){var v="object"==typeof this.config.variance_band?j.map(this.config.variance_band,function(a){return parseFloat(a)}).sort().reverse():[2,1];this.getGlobalStats(dojo.hitch(this,function(a){if("scoreMean"in a&&"scoreStdDev"in a){var b=function(b,c,d){r.fillStyle=
c;var c=s(a.scoreMean+b),e=s(a.scoreMean-b)-c,e=Math.max(1,e);t._fillRectMod(r,0,c,f.width,e);r.font="12px sans-serif";0<b?(r.fillText("+"+d,2,c),r.fillText("-"+d,2,c+e)):r.fillText(d,2,c)},c=new g(this.config.style.variance_band_color),d=new g(this.config.style.variance_band_color);d.a/=v.length;j.forEach(v,function(e,f){b(e*a.scoreStdDev,g.blendColors(d,c,(f+1)/v.length).toCss(!0),e+"\u03c3")});b(0,"rgba(255,255,0,0.7)","mean")}}))}b=this.config.style.origin_color;if("string"==typeof b&&!{none:1,
off:1,no:1,zero:1}[b])a=s(m.origin),r.fillStyle=b,r.fillRect(0,a,f.width,1)}})})},"JBrowse/View/Track/WiggleBase":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/_base/event,dojo/dom-construct,dojo/on,dojo/mouse,JBrowse/View/Track/BlockBased,JBrowse/View/Track/_ExportMixin,JBrowse/View/Track/_TrackDetailsStatsMixin,JBrowse/View/Dialog/SetTrackHeight,JBrowse/Util,JBrowse/has,./Wiggle/_Scale".split(","),function(h,j,g,i,f,e,d,c,b,a,k,n,q,o){return h([c,b,a],{constructor:function(a){this.trackPadding=
a.trackPadding||0;if(!("style"in this.config))this.config.style={};this.store=a.store;this._setupEventHandlers()},_defaultConfig:function(){return{maxExportSpan:5E5,autoscale:"global",logScaleOption:!0}},_setupEventHandlers:function(){var a=dojo.clone(this.config.events||{});if(!a.click&&(this.config.style||{}).linkTemplate)a.click={action:"newWindow",url:this.config.style.linkTemplate};var a=dojo.clone(a),b;for(b in this.config){var c=b.replace(/^on(?=[A-Z])/,"");c!=b&&(a[c.toLowerCase()]=this.config[b])}for(b in a)"string"==
typeof a[b]&&(a[b]={url:a[b]});this.eventHandlers=a;if(this.eventHandlers.click)this.eventHandlers.click=this._makeClickHandler(this.eventHandlers.click)},_getScaling:function(a,b,c){this._getScalingStats(a,dojo.hitch(this,function(a){if(!this.lastScaling||!this.lastScaling.sameStats(a))try{this.lastScaling=new o(this.config,a),b(this.lastScaling)}catch(d){c(d)}else b(this.lastScaling)}),c)},_getScalingStats:function(a,b,c){if(o.prototype.needStats(this.config))return"local"==this.config.autoscale?
(a=g.mixin({scale:a.scale},this.browser.view.visibleRegion()),a.start=Math.ceil(a.start),a.end=Math.floor(a.end),this.getRegionStats.call(this,a,b,c)):this.getGlobalStats.call(this,b,c);b(null);return null},getFeatures:function(a,b,c){this.store.getFeatures.apply(this.store,arguments)},getGlobalStats:function(a,b){this.store.getGlobalStats(a,b)},getRegionStats:function(a,b,c){this.store.getRegionStats(a,b,c)},_canvasWidth:function(a){return Math.ceil((a.endBase-a.startBase)*a.scale)},_canvasHeight:function(){return parseInt((this.config.style||
{}).height)||100},_getBlockFeatures:function(a){var b=this,c=a.block,d=a.leftBase,e=a.rightBase,f=a.scale,g=a.finishCallback||function(){},h=this._canvasWidth(a.block),i=[];this.getFeatures({ref:this.refSeq.name,basesPerSpan:1/f,scale:f,start:d,end:e+1},function(a){b.filterFeature(a)&&i.push(a)},dojo.hitch(this,function(a){if(c.domNode&&c.domNode.parentNode){var b=j.map(i,function(a){return this._featureRect(f,d,h,a)},this);c.features=i;c.featureRects=b;c.pixelScores=this._calculatePixelScores(this._canvasWidth(c),
i,b);if(a&&a.maskingSpans)c.maskingSpans=a.maskingSpans;g()}}),dojo.hitch(this,function(b){console.error(b.stack||""+b,b);this._handleError(b,a)}))},renderBlock:function(a){var b=a.block;if(this.scaling.compare(b.scaling)&&b.pixelScores){b.scaling=this.scaling;f.empty(b.domNode);try{dojo.create("canvas").getContext("2d").fillStyle="red"}catch(c){this.fatalError="This browser does not support HTML canvas elements.";this.fillBlockError(a.blockIndex,b,this.fatalError);return}var d=b.features,e=b.featureRects,
g=this.scaling,h=this._canvasHeight(),h=dojo.create("canvas",{height:h,width:this._canvasWidth(b),style:{cursor:"default",height:h+"px",width:q("inaccurate-html-width")?"":"100%","min-width":q("inaccurate-html-width")?"100%":"","max-width":q("inaccurate-html-width")?"102%":""},innerHTML:"Your web browser cannot display this type of track.",className:"canvas-track"},b.domNode),i=h.getContext("2d"),j=n.getResolution(i,this.browser.config.highResolutionMode);if("disabled"!=this.browser.config.highResolutionMode&&
1<=j){var k=h.height;h.width=Math.round(h.width*j);h.height=Math.round(k*j);h.style.height=k+"px";i.scale(j,j)}h.startBase=b.startBase;b.canvas=h;i=this._calculatePixelScores(h.width,d,e);this._draw(b.scale,b.startBase,b.endBase,b,h,d,e,g,i,b.maskingSpans);this.heightUpdate(h.height/j,a.blockIndex);if(!h.parentNode||!h.parentNode.parentNode)switch(a=b.endBase-b.startBase,h.style.position="absolute",h.style.left=100*((h.startBase-b.startBase)/a)+"%",this.config.align){case "top":h.style.top="0px";
break;default:h.style.bottom=this.trackPadding+"px"}}},fillBlock:function(a){var b=this;this.heightUpdate(this._canvasHeight(),a.blockIndex);var c=a.finishCallback||function(){};a.finishCallback=function(){b.updateGraphs(a,c)};this._getBlockFeatures(a)},updateGraphs:function(a,b){var c=this;this._getScaling(a,function(a){c.scaling=a;j.forEach(c.blocks,function(a,b){a&&a.domNode.parentNode&&c.renderBlock({block:a,blockIndex:b})});b()},function(b){c._handleError(b,a)})},_draw:function(a,b,c,d,e,f,g,
h,i,j){this._preDraw(a,b,c,d,e,f,g,h);this._drawFeatures(a,b,c,d,e,i,h);j&&this._maskBySpans(a,b,c,d,e,i,h,j);this._postDraw(a,b,c,d,e,f,g,h)},startZoom:function(){},endZoom:function(){this.clear()},_featureRect:function(a,b,c,d){a={w:Math.ceil((d.get("end")-d.get("start"))*a),l:Math.round((d.get("start")-b)*a)};if(0>a.l)a.w+=a.l,a.l=0;a.w=Math.min(c-a.l,a.w);a.r=a.w+a.l;return a},_preDraw:function(){},_drawFeatures:function(){},_maskBySpans:function(){},_postDraw:function(){},_calculatePixelScores:function(a,
b,c){var d=this.config.scoreType,e=Array(a);if(!d||"maxScore"==d){dojo.forEach(b,function(a,b){for(var f=a.source,g=c[b],h=g.r,i=a.get(d)||a.get("score"),g=Math.round(g.l);g<h;g++)e[g]&&e[g].lastUsedStore==f?e[g].score=Math.max(e[g].score,i):e[g]?(e[g].score+=i,e[g].lastUsedStore=f):e[g]={score:i,lastUsedStore:f,feat:a}},this);for(a=0;a<e.length;a++)e[a]&&delete e[a].lastUsedStore}else if("avgScore"==d){dojo.forEach(b,function(a,b){for(var d=a.source,f=c[b],g=f.r,h=a.get("score"),f=Math.round(f.l);f<
g;f++)e[f]&&d in e[f].scores?e[f].scores[d].push(h):(e[f]||(e[f]={scores:{},feat:a}),e[f].scores[d]=[h])},this);for(a=0;a<e.length;a++)if(e[a]){e[a].score=0;for(var f in e[a].scores){for(var g=0,h=e[a].scores[f].length,b=0;b<h;b++)g+=e[a].scores[f][b];e[a].score+=g/h}delete e[a].scores}}return e},setViewInfo:function(){this.inherited(arguments);this._makeScoreDisplay()},_makeScoreDisplay:function(){var a=this.browser.view,b=this;if(!this._mouseoverEvent)this._mouseoverEvent=this.own(e(this.div,"mousemove",
function(c){var c=i.fix(c),d=a.absXtoBp(c.clientX);b.mouseover(d,c)}))[0];if(!this._mouseoutEvent)this._mouseoutEvent=this.own(e(this.div,d.leave,function(){b.mouseover(void 0)}))[0];if(b.eventHandlers.click&&!this._mouseClickEvent)this._mouseClickEvent=this.own(e(this.div,"click",b.eventHandlers.click))[0];if(!this.scoreDisplay)this.scoreDisplay={flag:dojo.create("div",{className:"wiggleValueDisplay",style:{position:"fixed",display:"none",zIndex:15}},this.div),pole:dojo.create("div",{className:"wigglePositionIndicator",
style:{position:"fixed",display:"none",zIndex:15}},this.div)}},mouseover:function(a,b){if(void 0===a)this.scoreDisplay.flag.style.display="none",this.scoreDisplay.pole.style.display="none";else{var c;j.some(this.blocks,function(b){return b&&b.startBase<=a&&b.endBase>=a?(c=b,!0):!1});if(c&&c.canvas&&c.pixelScores&&b){var d=c.pixelScores,e=dojo.position(c.canvas);if(this._showPixelValue(this.scoreDisplay.flag,d[Math.round(b.pageX-e.x)]))this.scoreDisplay.flag.style.display="block",this.scoreDisplay.pole.style.display=
"block",this.scoreDisplay.flag.style.left=b.clientX+"px",this.scoreDisplay.flag.style.top=e.y+"px",this.scoreDisplay.pole.style.left=b.clientX+"px",this.scoreDisplay.pole.style.height=e.h+"px"}}},_showPixelValue:function(a,b){if("number"==typeof b)return a.innerHTML=parseFloat(b.toPrecision(6)),!0;return b&&"number"==typeof b.score?(a.innerHTML=parseFloat(b.score.toPrecision(6)),!0):!1},_exportFormats:function(){return[{name:"bedGraph",label:"bedGraph",fileExt:"bedgraph"},{name:"Wiggle",label:"Wiggle",
fileExt:"wig"},{name:"GFF3",label:"GFF3",fileExt:"gff3"}]},_trackMenuOptions:function(){var a=this,b=this.inherited(arguments)||[];b.push({label:"Change height",iconClass:"jbrowseIconVerticalResize",action:function(){(new k({height:a._canvasHeight(),setCallback:function(b){a.trackHeightChanged=!0;a.updateUserStyles({height:b})}})).show()}});this.config.logScaleOption&&b.push({label:"Log scale",type:"dijit/CheckedMenuItem",checked:"log"==this.config.scale,onClick:function(){a.config.scale=this.checked?
"log":"linear";a.browser.publish("/jbrowse/v1/v/tracks/replace",[a.config])}});return b},_fillRectMod:function(a,b,c,d,e){var f=window.devicePixelRatio||1,g=d;"disabled"!=this.browser.config.highResolutionMode&&0<f-Math.floor(f)&&(g=d+0.3);a.fillRect(b,c,g,e)}})})},"JBrowse/View/Track/Wiggle/_Scale":function(){define(["dojo/_base/lang","JBrowse/Util","JBrowse/Digest/Crc32"],function(h,j,g){return j.fastDeclare({needStats:function(g){return!("min_score"in g&&"max_score"in g&&"z_score"!=g.bicolor_pivot&&
"mean"!=g.bicolor_pivot&&"z_score"!=g.scale)},constructor:function(i,f){var e=this.needStats(i);if(e&&!f)throw"No stats object provided, cannot calculate scale";if(e&&f.scoreMin==f.scoreMax)f=h.mixin({},f),0>f.scoreMin?f.scoreMax=0:f.scoreMin=0;if("z_score"==i.autoscale&&!i.scale||"z_score"==i.scale&&!i.autoscale)i.scale="z_score",i.autoscale="z_score";var d=parseFloat(i.z_score_bound)||4,c="min_score"in i?parseFloat(i.min_score):function(){switch(i.autoscale){case "z_score":return Math.max(-d,(f.scoreMin-
f.scoreMean)/f.scoreStdDev);case "global":case "local":return f.scoreMin;default:return Math.max(f.scoreMin,f.scoreMean-d*f.scoreStdDev)}}(),b="max_score"in i?parseFloat(i.max_score):function(){switch(i.autoscale){case "z_score":return Math.min(d,(f.scoreMax-f.scoreMean)/f.scoreStdDev);case "global":case "local":return f.scoreMax;default:return Math.min(f.scoreMax,f.scoreMean+d*f.scoreStdDev)}}();if("number"!=typeof c||isNaN(c))c=0;if("number"!=typeof b||isNaN(b))b=c+10;var a=parseFloat(i.data_offset)||
0;"log"==i.scale?(b=this.log(b+a),c=this.log(c+a)):(b+=a,c+=a);var j="bicolor_pivot"in i?"mean"==i.bicolor_pivot?f.scoreMean||0:"zero"==i.bicolor_pivot?0:parseFloat(i.bicolor_pivot):"z_score"==i.scale?f.scoreMean||0:"log"==i.scale?1:0;h.mixin(this,{offset:a,min:c,max:b,range:b-c,origin:j,_statsFingerprint:g.objectFingerprint(f)});if(e)this.scoreMean=f.scoreMean,this.scoreStdDev=f.scoreStdDev;this.normalize=function(a){switch(a.scale){case "z_score":return function(a){return(a+this.offset-this.scoreMean)/
this.scoreStdDev-this.min/this.range};case "log":return function(a){return(this.log(a+this.offset)-this.min)/this.range};default:return function(a){return(a+this.offset-this.min)/this.range}}}(i)},log:function(g){return g?Math.log(Math.abs(g))*(0>g?-1:1):0},compare:function(g){return!g?1:this.offset-g.offset||this.min-g.min||this.max-g.max||this.range-g.range||this.origin-g.origin},sameStats:function(h){return this._statsFingerprint==g.objectFingerprint(h)}})})},"JBrowse/View/Track/Wiggle/Density":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/Color","JBrowse/View/Track/WiggleBase","JBrowse/Util"],function(h,j,g,i,f){return h(i,{_defaultConfig:function(){return f.deepUpdate(dojo.clone(this.inherited(arguments)),{maxExportSpan:5E5,style:{height:31,pos_color:"#00f",neg_color:"#f00",bg_color:"rgba(230,230,230,0.6)",clip_marker_color:"black"}})},_drawFeatures:function(e,d,c,b,a,f,h){var i=this,j=a.getContext("2d"),l=a.height,m="function"==typeof this.config.style.color?this.config.style.color:function(){var a=
i.config.disable_clip_markers,b=h.normalize(h.origin);return function(c,d){var e=c.feat;return a||1>=d&&0<=d?g.blendColors(new g(i.getConfForFeature("style.bg_color",e)),new g(i.getConfForFeature(d>=b?"style.pos_color":"style.neg_color",e)),Math.abs(d-b)).toString():1<d?i.getConfForFeature("style.pos_color",e):i.getConfForFeature("style.neg_color",e)}}();dojo.forEach(f,function(a,b){if(a){var c=a.feat,d=h.normalize(a.score);j.fillStyle=""+m(a,d);i._fillRectMod(j,b,0,1,l);if(1<d)j.fillStyle=i.getConfForFeature("style.clip_marker_color",
c)||"red",i._fillRectMod(j,b,0,1,3);else if(0>d)j.fillStyle=i.getConfForFeature("style.clip_marker_color",c)||"red",i._fillRectMod(j,b,l-3,1,3)}})},_maskBySpans:function(e,d,c,b,a,f,g,h){var i=a.getContext("2d"),j=a.height;i.fillStyle=this.config.style.mask_color||"rgba(128,128,128,0.6)";this.config.style.mask_color=i.fillStyle;for(var m in h)h.hasOwnProperty(m)&&(c=Math.ceil((h[m].end-h[m].start)*e),b=Math.round((h[m].start-d)*e),i.fillRect(b,0,c,j),i.clearRect(b,0,c,j/3),i.clearRect(b,2/3*j,c,j/
3));dojo.forEach(f,function(a,b){a||i.clearRect(b,0,1,j)})},_postDraw:function(){}})})},"JBrowse/View/Track/Alignments":function(){define("dojo/_base/declare,dojo/_base/array,dojo/promise/all,JBrowse/Util,JBrowse/View/Track/HTMLFeatures,JBrowse/View/Track/_AlignmentsMixin".split(","),function(h,j,g,i,f,e){return h([f,e],{_defaultConfig:function(){return i.deepUpdate(dojo.clone(this.inherited(arguments)),{maxFeatureScreenDensity:1.5,layoutPitchY:4,hideDuplicateReads:!0,hideQCFailingReads:!0,hideSecondary:!0,
hideSupplementary:!0,hideMissingMatepairs:!1,hideUnmapped:!0,hideForwardStrand:!1,hideReverseStrand:!1,style:{_defaultLabelScale:50,className:"alignment",arrowheadClass:"arrowhead",centerChildrenVertically:!0,showMismatches:!0,showSubfeatures:!1,showLabels:!1}})},renderFeature:function(d,c,b,a,e,f,g,h){var i=this.inherited(arguments);if(!i)return null;var j=Math.max(d.get("start"),g),r=Math.min(d.get("end"),h);this.config.style.showMismatches&&this._drawMismatches(d,i,a,j,r);d.get("multi_segment_template")&&
!d.get("multi_segment_all_aligned")&&(i.className+=" missing_mate");return i},handleSubFeatures:function(d,c,b,a,e){this.config.style.showSubfeatures&&this.inherited(arguments)},_drawMismatches:function(d,c,b,a,e){var f=e-a;if(1<f*b){var g=this._getMismatches(d),h=this.getCharacterMeasurements(),i=b>=h.w;j.forEach(g,function(g){var h=d.get("start")+g.start,j=h+g.length;if(!(j<=a||h>=e)){var o=g.base,q=Math.max(h,a),j=Math.min(j,e),t=j-q,v=dojo.create("span",{className:g.type+" base_"+o.toLowerCase(),
style:{position:"absolute",left:100*(q-a)/f+"%",width:1<b*t?100*t/f+"%":"1px"}},c);if(!i)v.title=o;if(i&&20>=g.length)for(var w=0;w<g.length;w++){var x=h+w;x>=q&&x<=j&&dojo.create("span",{className:"base base_"+o.toLowerCase(),style:{position:"absolute",width:b+"px",left:100*((x-q)/t)+"%"},innerHTML:o},v)}}},this)}},getCharacterMeasurements:function(){if(!this._measurements)this._measurements=this._measureSequenceCharacterSize(this.div);return this._measurements},_measureSequenceCharacterSize:function(d){var c=
dojo.create("div",{innerHTML:'<span class="base mismatch">A</span><span class="base mismatch">C</span><span class="base mismatch">T</span><span class="base mismatch">G</span><span class="base mismatch">N</span>',style:{visibility:"hidden",position:"absolute",left:"0px"}},d),b={w:c.clientWidth/5,h:c.clientHeight};d.removeChild(c);return b},_trackMenuOptions:function(){return g([this.inherited(arguments),this._alignmentsFilterTrackMenuOptions()]).then(function(d){var c=d.shift();d.unshift({type:"dijit/MenuSeparator"});
return c.concat.apply(c,d)})}})})},"JBrowse/View/Track/_AlignmentsMixin":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/when,JBrowse/Util,JBrowse/Store/SeqFeature/_MismatchesMixin,JBrowse/View/Track/_NamedFeatureFiltersMixin".split(","),function(h,j,g,i,f,e,d){return h([e,d],{defaultFeatureDetail:function(c,b){var a=dojo.create("div",{className:"detail feature-detail feature-detail-"+c.name.replace(/\s+/g,"_").toLowerCase(),innerHTML:""}),d=dojo.hitch(this,function(b,
c,d){b=f.ucFirst(b.replace(/_/g," "));return this.renderDetailField(a,b,c,d)});d("Name",b.get("name"),b);d("Type",b.get("type"),b);d("Score",b.get("score"),b);d("Description",b.get("note"),b);d("Position",f.assembleLocString({start:b.get("start"),end:b.get("end"),ref:this.refSeq.name})+({1:" (+)","-1":" (-)","0":" (no strand)"}[b.get("strand")]||""),b);b.get("seq")&&d("Sequence and Quality",this._renderSeqQual(b),b);var e=j.filter(b.tags(),function(a){return!{name:1,score:1,start:1,end:1,strand:1,
note:1,subfeatures:1,type:1}[a.toLowerCase()]}).sort();dojo.forEach(e,function(a){d(a,b.get(a),b)});return a},_renderSeqQual:function(c){var b=c.get("seq"),c=c.get("qual")||"";if(!b)return"";for(var c=c.split(/\s+/),a="",d=0;d<b.length;d++)a+='<div class="basePosition" title="position '+(d+1)+'"><span class="seq">'+b[d]+"</span>",c[d]&&(a+='<span class="qual">'+c[d]+"</span>"),a+="</div>";return'<div class="baseQuality">'+a+"</div>"},_getStyleSheets:function(c){var b=[];j.forEach(c,function(a){b.push(a);
j.forEach(a.cssRules||a.rules,function(a){a.styleSheet&&b.push.apply(b,this._getStyleSheets([a.styleSheet]))},this)},this);return b},colorForBase:function(c){this._baseStyles=this._baseStyles||function(){var b={};try{var a=this._getStyleSheets(document.styleSheets);j.forEach(a,function(a){(a=a.rules||a.cssRules)&&j.forEach(a,function(a){var c=/^\.base_([^\s_]+)$/.exec(a.selectorText);if(c&&c[1]){var d=c[1];if((c=/\#[0-9a-f]{3,6}|(?:rgb|hsl)a?\([^\)]*\)/gi.exec(a.cssText))&&c[0])b[d.toLowerCase()]=
c[0],b[d.toUpperCase()]=c[0]}})})}catch(c){}return b}.call(this);return this._baseStyles[c]||"#999"},_getNamedFeatureFilters:function(){return g.mixin({},this.inherited(arguments),{hideDuplicateReads:{desc:"Hide PCR/Optical duplicate reads",func:function(c){return!c.get("duplicate")}},hideQCFailingReads:{desc:"Hide reads failing vendor QC",func:function(c){return!c.get("qc_failed")}},hideSecondary:{desc:"Hide secondary alignments",func:function(c){return!c.get("secondary_alignment")}},hideSupplementary:{desc:"Hide supplementary alignments",
func:function(c){return!c.get("supplementary_alignment")}},hideMissingMatepairs:{desc:"Hide reads with missing mate pairs",func:function(c){return!(c.get("multi_segment_template")&&!c.get("multi_segment_all_aligned"))}},hideUnmapped:{desc:"Hide unmapped reads",func:function(c){return!c.get("unmapped")}},hideForwardStrand:{desc:"Hide reads aligned to the forward strand",func:function(c){return 1!=c.get("strand")}},hideReverseStrand:{desc:"Hide reads aligned to the reverse strand",func:function(c){return-1!=
c.get("strand")}}})},_alignmentsFilterTrackMenuOptions:function(){var c=this;return i(this._getNamedFeatureFilters()).then(function(b){return c._makeFeatureFilterTrackMenuItems("hideDuplicateReads,hideQCFailingReads,hideMissingMatepairs,hideSecondary,hideSupplementary,hideUnmapped,SEPARATOR,hideForwardStrand,hideReverseStrand".split(","),b)})}})})},"JBrowse/Store/SeqFeature/_MismatchesMixin":function(){define(["dojo/_base/declare","dojo/_base/array"],function(h,j){return h(null,{constructor:function(){this.cigarAttributeName=
(this.config.cigarAttribute||"cigar").toLowerCase();this.mdAttributeName=(this.config.mdAttribute||"md").toLowerCase()},_getSkipsAndDeletions:function(g){var h=g.get(this.cigarAttributeName);return h?this._cigarToSkipsAndDeletions(g,this._parseCigar(h)):[]},_getMismatches:function(g){var h=[],f=g.get(this.cigarAttributeName),e;f&&(e=this._parseCigar(f),h.push.apply(h,this._cigarToMismatches(g,e)));(f=g.get(this.mdAttributeName))&&h.push.apply(h,this._mdToMismatches(g,f,e,h));var d={};return h=j.filter(h,
function(c){var c=c.type+","+c.start+","+c.length,b=d[c];d[c]=!0;return!b})},_parseCigar:function(g){return j.map(g.toUpperCase().match(/\d+\D/g),function(g){return[g.match(/\D/)[0],parseInt(g)]})},_cigarToMismatches:function(g,h){var f=0,e=[];j.forEach(h,function(d){var c=d[0],d=d[1];"I"==c?e.push({start:f,type:"insertion",base:""+d,length:1}):"D"==c?e.push({start:f,type:"deletion",base:"*",length:d}):"N"==c?e.push({start:f,type:"skip",base:"N",length:d}):"X"==c?e.push({start:f,type:"mismatch",base:"X",
length:d}):"H"==c?e.push({start:f,type:"hardclip",base:"H"+d,length:1}):"S"==c&&e.push({start:f,type:"softclip",base:"S"+d,length:1});"I"!=c&&"S"!=c&&"H"!=c&&(f+=d)});return e},_cigarToSkipsAndDeletions:function(g,h){var f=0,e=[];j.forEach(h,function(d){var c=d[0],d=d[1];"D"==c?e.push({start:f,type:"deletion",base:"*",length:d}):"N"==c&&e.push({start:f,type:"skip",base:"N",length:d});"I"!=c&&"S"!=c&&"H"!=c&&(f+=d)});return e},_mdToMismatches:function(g,h,f,e){function d(a,b){for(var c=0,d=0,e=0;e<
b.length&&d<=a;e++){var f=b[e][0],g=b[e][1];"S"==f||"I"==f?c+=g:("D"==f||"P"==f||(c+=g),d+=g)}return c-(d-a)}function c(){j.forEach(e||[],function(b){"skip"==b.type&&a.start>=b.start&&(a.start+=b.length)});b.push(a);a={start:a.start+a.length,length:0,base:"",type:"mismatch"}}var b=[],a={start:0,base:"",length:0,type:"mismatch"},k=g.get("seq");j.forEach(h.match(/(\d+|\^[a-z]+|[a-z])/ig),function(b){if(b.match(/^\d/))a.start+=parseInt(b);else if(b.match(/^\^/))a.length=b.length-1,a.base="*",a.type=
"deletion",c();else if(b.match(/^[a-z]/i))for(var e=0;e<b.length;e++)a.length=1,a.base=k?k.substr(f?d(a.start,f):a.start,1):"X",c()});return b}})})},"JBrowse/View/Track/_NamedFeatureFiltersMixin":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/when"],function(h,j,g){return h(null,{constructor:function(){this._initializeConfiguredFeatureFilters()},_initializeConfiguredFeatureFilters:function(){var h=this;return g(this._getNamedFeatureFilters()).then(function(f){for(var e in f)h.config[e]?
h.addFeatureFilter(f[e].func,e):h.removeFeatureFilter(e)})},_toggleFeatureFilter:function(h,f){void 0===f&&(f=!this.config[h]);if(!!f!==!!this.config[h]){this.config[h]=f;var e=this;g(this._getNamedFeatureFilters(),function(d){f?e.addFeatureFilter(d[h].func,h):e.removeFeatureFilter(h);e.changed()})}},_getNamedFeatureFilters:function(){return{}},_makeFeatureFilterTrackMenuItems:function(h,f){var e=this;return g(f||this._getNamedFeatureFilters()).then(function(d){return j.map(h,function(c){return e._makeFeatureFilterTrackMenuItem(c,
d[c])})})},_makeFeatureFilterTrackMenuItem:function(g,f){var e=this;return"SEPARATOR"==g?{type:"dijit/MenuSeparator"}:{label:f.desc,title:f.title,type:"dijit/CheckedMenuItem",checked:!!e.config[g],onClick:function(){e._toggleFeatureFilter(g,this.checked)}}}})})},"JBrowse/View/Track/Alignments2":function(){define("dojo/_base/declare,dojo/_base/array,dojo/promise/all,JBrowse/Util,JBrowse/View/Track/CanvasFeatures,JBrowse/View/Track/_AlignmentsMixin".split(","),function(h,j,g,i,f,e){return h([f,e],{_defaultConfig:function(){var d=
i.deepUpdate(dojo.clone(this.inherited(arguments)),{glyph:"JBrowse/View/FeatureGlyph/Alignment",maxFeatureGlyphExpansion:0,maxFeatureScreenDensity:6,hideDuplicateReads:!0,hideQCFailingReads:!0,hideSecondary:!0,hideSupplementary:!0,hideUnmapped:!0,hideMissingMatepairs:!1,hideForwardStrand:!1,hideReverseStrand:!1,useXS:!1,useReverseTemplate:!1,useXSOption:!0,useReverseTemplateOption:!0,histograms:{description:"coverage depth",binsPerBlock:200},style:{showLabels:!1}});d.menuTemplate.push({iconClass:"dijitIconUndo",
url:function(c,b){return c.browser.makeCurrentViewURL({loc:c._nextSegmentViewLoc(b,0.8),highlight:b.get("next_segment_position"),tracklist:0})},action:"iframeDialog",title:"Open {next_segment_position} in a popup",disabled:function(c,b){return!b.get("next_segment_position")},label:"Quick-view mate/next location"},{iconClass:"dijitIconUndo",url:function(c,b){return c.browser.makeCurrentViewURL({loc:c._nextSegmentViewLoc(b),highlight:b.get("next_segment_position")})},action:"newWindow",title:"Open {next_segment_position} in a new tab",
disabled:function(c,b){return!b.get("next_segment_position")},label:"Open mate/next location in new tab"});return d},_nextSegmentViewLoc:function(d,c){var b=d.get("next_segment_position");if(b){var a=b.split(":"),b=a[0],a=parseInt(a[1]),e=this.browser.view.visibleRegion(),e=Math.round((e.end-e.start+1)*(c||1));return i.assembleLocString({start:Math.round(a-e/2),end:Math.round(a+e/2),ref:b})}},_trackMenuOptions:function(){var d=this,c=[];this.config.useReverseTemplateOption&&c.push({label:"Use reversed template",
type:"dijit/CheckedMenuItem",checked:this.config.useReverseTemplate,onClick:function(){d.config.useReverseTemplate=this.get("checked");d.browser.publish("/jbrowse/v1/v/tracks/replace",[d.config])}});this.config.useXSOption&&c.push({label:"Use XS",type:"dijit/CheckedMenuItem",checked:this.config.useXS,onClick:function(){d.config.useXS=this.get("checked");d.browser.publish("/jbrowse/v1/v/tracks/replace",[d.config])}});return g([this.inherited(arguments),this._alignmentsFilterTrackMenuOptions(),c]).then(function(b){var a=
b.shift();b.unshift({type:"dijit/MenuSeparator"});return a.concat.apply(a,b)})}})})},"JBrowse/View/Track/CanvasFeatures":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/_base/event,dojo/mouse,dojo/dom-construct,dojo/Deferred,dojo/on,JBrowse/has,JBrowse/Util,JBrowse/View/GranularRectLayout,JBrowse/View/Track/BlockBased,JBrowse/View/Track/_ExportMixin,JBrowse/Errors,JBrowse/View/Track/_FeatureDetailMixin,JBrowse/View/Track/_FeatureContextMenusMixin,JBrowse/View/Track/_YScaleMixin,JBrowse/Model/Location,JBrowse/Model/SimpleFeature".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n,q,o,l,m,r,p,u){var s=h(null,{constructor:function(a){this.dims={h:a.h,w:a.w};this.byID={}},getByID:function(a){return this.byID[a]},addAll:function(a){var b=this.byID;j.forEach(a,function(a){a&&(b[a.f.id()]=a)},this)},getAll:function(){var a=[],b;for(b in this.byID)a.push(this.byID[b]);return a}});return h([n,l,q,m,r],{constructor:function(){this.glyphsLoaded={};this.glyphsBeingLoaded={};this.regionStats={};this.showLabels=this.config.style.showLabels;this.showTooltips=
this.config.style.showTooltips;this.displayMode=this.config.displayMode;var a=this.browser.cookie("track-"+this.name);if(a)this.displayMode=a;this._setupEventHandlers()},_defaultConfig:function(){return a.deepUpdate(g.clone(this.inherited(arguments)),{maxFeatureScreenDensity:0.5,glyph:g.hitch(this,"guessGlyphType"),maxFeatureGlyphExpansion:500,maxHeight:600,histograms:{description:"feature density",min:0,height:100,color:"goldenrod",clip_marker_color:"red"},style:{_defaultHistScale:4,_defaultLabelScale:30,
_defaultDescriptionScale:120,showLabels:!0,showTooltips:!0,label:"name,id",description:"note, description"},displayMode:"normal",events:{contextmenu:function(a,b,c,d,e){e=i.fix(e);b&&b.contextMenu&&b.contextMenu._openMyself({target:c.featureCanvas,coords:{x:e.pageX,y:e.pageY}});i.stop(e)}},menuTemplate:[{label:"View details",title:"{type} {name}",action:"contentDialog",iconClass:"dijitIconTask",content:dojo.hitch(this,"defaultFeatureDetail")},{label:function(){return"Zoom to this "+(this.feature.get("type")||
"feature")},action:function(){var a=this.track.refSeq,b=Math.round(10/this.viewInfo.scale),c=Math.max(a.start,this.feature.get("start")-b),b=Math.min(a.end,this.feature.get("end")+b);this.track.genomeView.setLocation(a,c,b)},iconClass:"dijitIconConnector"},{label:function(){return"Highlight this "+(this.feature.get("type")||"feature")},action:function(){this.track.browser.setHighlightAndRedraw(new p({feature:this.feature,tracks:[this.track]}))},iconClass:"dijitIconFilter"}]})},setViewInfo:function(a,
b,c,d,f,g,h){this.inherited(arguments);this.staticCanvas=e.create("canvas",{style:{height:"100%",cursor:"default",position:"absolute",zIndex:15}},d);this.staticCanvas.height=this.staticCanvas.offsetHeight;this._makeLabelTooltip()},guessGlyphType:function(a){return"JBrowse/View/FeatureGlyph/"+({gene:"Gene",mRNA:"ProcessedTranscript",transcript:"ProcessedTranscript"}[a.get("type")]||"Box")},fillBlock:function(a){var c=a.blockIndex,d=a.block,e=a.scale;b("canvas")?this.store.getGlobalStats(g.hitch(this,
function(b){b=g.mixin({stats:b,displayMode:this.displayMode,showFeatures:e>=(this.config.style.featureScale||(b.featureDensity||0)/this.config.maxFeatureScreenDensity),showLabels:this.showLabels&&"normal"==this.displayMode&&e>=(this.config.style.labelScale||(b.featureDensity||0)*this.config.style._defaultLabelScale),showDescriptions:this.showLabels&&"normal"==this.displayMode&&e>=(this.config.style.descriptionScale||(b.featureDensity||0)*this.config.style._defaultDescriptionScale)},a);b.showFeatures?
(this.setLabel(this.key),this.removeYScale(),this.fillFeatures(b)):this.config.histograms.store||this.store.getRegionFeatureDensities?this.fillHistograms(b):(this.setLabel(this.key),this.fillTooManyFeaturesMessage(c,d,e),a.finishCallback())}),dojo.hitch(this,function(b){this._handleError(b,a);a.finishCallback(b)})):(this.fatalError="This browser does not support HTML canvas elements.",this.fillBlockError(c,d,this.fatalError))},_handleError:function(a,b){"object"==typeof a&&a instanceof o.DataOverflow&&
(this.config.histograms.store||this.store.getRegionFeatureDensities)?this.fillHistograms(b):this.inherited(arguments)},_getLayout:function(a){if(!this.layout||this._layoutpitchX!=4/a){var b=this.getConf("layoutPitchY")||4;this.layout=new k({pitchX:4/a,pitchY:b,maxHeight:this.getConf("maxHeight"),displayMode:this.displayMode});this._layoutpitchX=4/a}return this.layout},_clearLayout:function(){delete this.layout},hideAll:function(){this._clearLayout();return this.inherited(arguments)},getGlyph:function(a,
b,c){var d=this.getConfForFeature("glyph",b),e;if(e=this.glyphsLoaded[d])c(e);else if(a=this.glyphsBeingLoaded[d])a.push(c);else{var f=this;this.glyphsBeingLoaded[d]=[c];require([d],function(a){e=f.glyphsLoaded[d]=new a({track:f,config:f.config,browser:f.browser});j.forEach(f.glyphsBeingLoaded[d],function(a){a(e)});delete f.glyphsBeingLoaded[d]})}},fillHistograms:function(a){this.config.histograms.description?this.setLabel(this.key+' <span class="feature-density">('+this.config.histograms.description+
")</span>"):this.setLabel(this.key);var b=this.config.histograms.binsPerBlock||25,b=Math.abs(a.rightBase-a.leftBase)/b,c={ref:this.refSeq.name,start:a.leftBase,end:a.rightBase,basesPerSpan:b,basesPerBin:b};if(!this.config.histograms.store&&this.store.getRegionFeatureDensities)this.store.getRegionFeatureDensities(c,g.hitch(this,"_drawHistograms",a));else{var d=this,e={features:[],stats:{}},f=g.hitch(this,"_handleError");this.browser.getStore(this.config.histograms.store,function(b){b.getGlobalStats(function(g){e.stats.max=
g.scoreMax;b.getFeatures(c,function(a){e.features.push(a)},function(){d._drawHistograms(a,e);a.finishCallback()},f)},f)})}},_drawHistograms:function(b,c){var d="max"in this.config.histograms?this.config.histograms.max:c.stats.max;if(void 0===d)console.warn("no stats.max in hist data, not drawing histogram for block "+b.blockIndex);else{var f;if((f=c.features)||c.bins&&(f=this._histBinsToFeatures(b,c))){var g=b.block,h=this.config.histograms.height,i=b.scale,j=b.leftBase,k=this.config.histograms.min;
e.empty(g.domNode);var l=g.featureCanvas=e.create("canvas",{height:h,width:g.domNode.offsetWidth+1,style:{cursor:"default",height:h+"px",position:"absolute"},innerHTML:"Your web browser cannot display this type of track.",className:"canvas-track canvas-track-histograms"},g.domNode);this.heightUpdate(h,b.blockIndex);var g=l.getContext("2d"),n=a.getResolution(g,this.browser.config.highResolutionMode);if("disabled"!=this.browser.config.highResolutionMode&&1<=n){var o=l.width,m=l.height;l.width=o*n;l.height=
m*n;l.style.width=o+"px";l.style.height=m+"px";g.scale(n,n)}g.fillStyle=this.config.histograms.color;for(l=0;l<f.length;l++)if(m=f[l],n=m.get("score")/d*h,o=Math.ceil((m.get("end")-m.get("start"))*i),m=Math.round((m.get("start")-j)*i),g.fillRect(m,h-n,o,n),n>h)g.fillStyle=this.config.histograms.clip_marker_color,g.fillRect(m,0,o,3),g.fillStyle=this.config.histograms.color;this.makeHistogramYScale(h,k,d)}}},_histBinsToFeatures:function(a,b){var c=parseFloat(b.stats.basesPerBin),d=a.leftBase;return j.map(b.bins,
function(a,b){return new u({data:{start:d+b*c,end:d+(b+1)*c,score:a}})})},makeHistogramYScale:function(a,b,c){if(!this.yscale_params||!(this.yscale_params.height==a&&this.yscale_params.max==c&&this.yscale_params.min==b))this.yscale_params={height:a,min:b,max:c},this.makeYScale({min:b,max:c})},fillFeatures:function(b){var c=this,f=b.blockIndex,g=b.block,h=g.domNode.offsetWidth,i=b.scale,j=b.leftBase,k=b.rightBase,l=b.finishCallback,n=[],o=0,m=new d,q=!1,p=dojo.hitch(c,function(a){this._handleError(a,
b);l(a)}),r=this._getLayout(i),i=Math.round(this.config.maxFeatureGlyphExpansion/i);this.store.getFeatures({ref:this.refSeq.name,start:Math.max(0,j-i),end:k+i},function(a){if(!c.destroyed&&c.filterFeature(a)){n.push(null);o++;var d=n.length-1;c.getGlyph(b,a,function(c){c=c.layoutFeature(b,r,a);null===c?g.maxHeightExceeded=!0:c.l>=h||0>c.l+c.w||(n[d]=c);!--o&&q&&m.resolve()},p)}},function(){c.destroyed||(q=!0,!o&&!m.isFulfilled()&&m.resolve(),m.then(function(){var d=r.getTotalHeight(),h=g.featureCanvas=
e.create("canvas",{height:d,width:g.domNode.offsetWidth+1,style:{cursor:"default",height:d+"px",position:"absolute"},innerHTML:"Your web browser cannot display this type of track.",className:"canvas-track"},g.domNode),i=h.getContext("2d"),j=a.getResolution(i,c.browser.config.highResolutionMode);if("disabled"!=c.browser.config.highResolutionMode&&1<=j){var k=h.width,o=h.height;h.width=k*j;h.height=o*j;h.style.width=k+"px";h.style.height=o+"px";i.scale(j,j)}g.maxHeightExceeded&&c.markBlockHeightOverflow(g);
c.heightUpdate(d,f);c.renderFeatures(b,n);c.renderClickMap(b,n);l()}))},p)},startZoom:function(){this.inherited(arguments);j.forEach(this.blocks,function(a){try{a.featureCanvas.style.width="100%"}catch(b){}})},endZoom:function(){j.forEach(this.blocks,function(a){try{delete a.featureCanvas.style.width}catch(b){}});this.clear();this.inherited(arguments)},renderClickMap:function(a,b){var c=a.block,d=new s({h:c.featureCanvas.height,w:c.featureCanvas.width});c.fRectIndex=d;d.addAll(b);!c.featureCanvas||
!c.featureCanvas.getContext("2d")?console.warn("No 2d context available from canvas"):(this._attachMouseOverEvents(),this._connectEventHandlers(c),this.updateStaticElements({x:this.browser.view.getX()}))},_attachMouseOverEvents:function(){var a=this.browser.view,b=this;if("collapsed"==this.displayMode)this._mouseoverEvent&&(this._mouseoverEvent.remove(),delete this._mouseoverEvent),this._mouseoutEvent&&(this._mouseoutEvent.remove(),delete this._mouseoutEvent);else{if(!this._mouseoverEvent)this._mouseoverEvent=
this.own(c(this.staticCanvas,"mousemove",function(c){var c=i.fix(c),d=a.absXtoBp(c.clientX),d=b.layout.getByCoord(d,void 0===c.offsetY?c.layerY:c.offsetY);b.mouseoverFeature(d,c)}))[0];if(!this._mouseoutEvent)this._mouseoutEvent=this.own(c(this.staticCanvas,"mouseout",function(){b.mouseoverFeature(void 0)}))[0]}},_makeLabelTooltip:function(){if(this.showTooltips&&!this.labelTooltip){var a=this.labelTooltip=e.create("div",{className:"featureTooltip",style:{position:"fixed",display:"none",zIndex:19}},
document.body);e.create("span",{className:"tooltipLabel",style:{display:"block"}},a);e.create("span",{className:"tooltipDescription",style:{display:"block"}},a)}},_connectEventHandlers:function(a){for(var b in this.eventHandlers)(function(b,d){var e=this;a.own(c(this.staticCanvas,b,function(b){var b=i.fix(b),c=e.browser.view.absXtoBp(b.clientX);if(a.containsBp(c)&&(c=e.layout.getByCoord(c,void 0===b.offsetY?b.layerY:b.offsetY))){var f=a.fRectIndex.getByID(c.id());d.call({track:e,feature:c,fRect:f,
block:a,callbackArgs:[e,c,f]},c,f,a,e,b)}}))}).call(this,b,this.eventHandlers[b])},getRenderingContext:function(a){if(!a.block||!a.block.featureCanvas)return null;try{return a.block.featureCanvas.getContext("2d")}catch(b){return console.error(b,b.stack),null}},renderFeatures:function(a,b){var c=this.getRenderingContext(a);if(c){var d=this;j.forEach(b,function(a){a&&d.renderFeature(c,a)})}},mouseoverFeature:function(a,b){if(this.lastMouseover!=a){if(b)var c=this.browser.view.absXtoBp(b.clientX);if(this.labelTooltip)this.labelTooltip.style.display=
"none";j.forEach(this.blocks,function(d){if(d){var e=this.getRenderingContext({block:d,leftBase:d.startBase,scale:d.scale});if(e){if(this.lastMouseover&&d.fRectIndex){var f=d.fRectIndex.getByID(this.lastMouseover.id());f&&this.renderFeature(e,f)}d.tooltipTimeout&&window.clearTimeout(d.tooltipTimeout);if(a){var h=d.fRectIndex&&d.fRectIndex.getByID(a.id());if(h){if(d.containsBp(c))f=dojo.hitch(this,function(){if(this.labelTooltip){var c=h.label||h.glyph.makeFeatureLabel(a),d=h.description||h.glyph.makeFeatureDescriptionLabel(a);
if(c||d){if(!this.ignoreTooltipTimeout)this.labelTooltip.style.left=b.clientX+"px",this.labelTooltip.style.top=b.clientY+15+"px";this.ignoreTooltipTimeout=!0;this.labelTooltip.style.display="block";var e=this.labelTooltip.childNodes[0],f=this.labelTooltip.childNodes[1];this.config.onClick&&this.config.onClick.label?(d=g.mixin({track:this,feature:a,callbackArgs:[this,a]}),e.style.display="block",e.style.font=c.font,e.style.color=c.fill,e.innerHTML=this.template(a,this._evalConf(d,this.config.onClick.label,
"label"))):(c?(e.style.display="block",e.style.font=c.font,e.style.color=c.fill,e.innerHTML=c.text):(e.style.display="none",e.innerHTML="(no label)"),d?(f.style.display="block",f.style.font=d.font,f.style.color=d.fill,f.innerHTML=d.text):(f.style.display="none",f.innerHTML="(no description)"))}}}),this.ignoreTooltipTimeout?f():d.tooltipTimeout=window.setTimeout(f,600);h.glyph.mouseoverFeature(e,h);this._refreshContextMenu(h)}}else d.tooltipTimeout=window.setTimeout(dojo.hitch(this,function(){this.ignoreTooltipTimeout=
!1}),200)}}},this);this.lastMouseover=a}},cleanupBlock:function(a){this.inherited(arguments);a&&this.layout&&this.layout.discardRange(a.startBase,a.endBase)},renderFeature:function(a,b){b.glyph.renderFeature(a,b)},_trackMenuOptions:function(){var a=this.inherited(arguments),b=this;this.displayModeMenuItems=["normal","compact","collapsed"].map(function(a){return{label:a,type:"dijit/CheckedMenuItem",title:"Render this track in "+a+" mode",checked:b.displayMode==a,onClick:function(){b.displayMode=a;
b._clearLayout();b.hideAll();b.genomeView.showVisibleBlocks(!0);b.makeTrackMenu();b.browser.cookie("track-"+b.name,b.displayMode)}}});dojo.hitch(this,function(){for(var a in this.displayModeMenuItems)this.displayModeMenuItems[a].checked=this.displayMode==this.displayModeMenuItems[a].label});a.push.apply(a,[{type:"dijit/MenuSeparator"},{label:"Display mode",iconClass:"dijitIconPackage",title:"Make features take up more or less space",children:this.displayModeMenuItems},{label:"Show labels",type:"dijit/CheckedMenuItem",
checked:!!("showLabels"in this?this.showLabels:this.config.style.showLabels),onClick:function(){b.showLabels=this.checked;b.changed()}}]);return a},_exportFormats:function(){return[{name:"GFF3",label:"GFF3",fileExt:"gff3"},{name:"BED",label:"BED",fileExt:"bed"},{name:"SequinTable",label:"Sequin Table",fileExt:"sqn"}]},updateStaticElements:function(a){this.inherited(arguments);this.updateYScaleFromViewDimensions(a);if(a.hasOwnProperty("x")){var b=this.staticCanvas.getContext("2d");this.staticCanvas.width=
this.browser.view.elem.clientWidth;this.staticCanvas.style.left=a.x+"px";b.clearRect(0,0,this.staticCanvas.width,this.staticCanvas.height);var c=this.browser.view.minVisible(),d=this.browser.view.maxVisible(),e={minVisible:c,maxVisible:d,bpToPx:dojo.hitch(this.browser.view,"bpToPx"),lWidth:this.label.offsetWidth};j.forEach(this.blocks,function(a){if(a&&a.fRectIndex){var a=a.fRectIndex.byID,c;for(c in a){var d=a[c];d.glyph.updateStaticElements(b,d,e)}}},this)}},heightUpdate:function(a,b){this.inherited(arguments);
if(this.staticCanvas)this.staticCanvas.height=this.staticCanvas.offsetHeight},destroy:function(){this.destroyed=!0;e.destroy(this.staticCanvas);delete this.staticCanvas;delete this.layout;delete this.glyphsLoaded;this.inherited(arguments)}})})},"JBrowse/View/FeatureGlyph":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/aspect","JBrowse/Component"],function(h,j,g,i){return h(i,{constructor:function(f){this.track=f.track;this.booleanAlpha=0.17;g.before(this,"renderFeature",function(e,
d){if(d.m){var c=Math.floor(d.l),b=Math.ceil(d.w+d.l)-c;d.m.sort(function(a,b){return a.l-b.l});var a=d.m[0];if(a.l<=c){var f=d.m[0].l,g;for(g in d.m){a=d.m[g];if(a.l>f)break;f=a.l+a.w}if(f>=c+b)e.globalAlpha=this.booleanAlpha,d.noMask=!0}}},!0);g.after(this,"renderFeature",function(e,d){if(d.m&&!d.noMask)this.maskBySpans(e,d);else if(d.noMask)delete d.noMask,e.globalAlpha=1},!0)},getStyle:function(f,e){return this.getConfForFeature("style."+e,f)},getConfForFeature:function(f,e){return this.getConf(f,
[e,f,this,this.track])},mouseoverFeature:function(f,e){this.renderFeature(f,e);f.fillStyle=this.getStyle(e.f,"mouseovercolor");f.fillRect(e.rect.l,e.t,e.rect.w,e.rect.h)},_getFeatureRectangle:function(f,e){var d=f.block,c={l:d.bpToX(e.get("start")),h:this._getFeatureHeight(f,e),viewInfo:f,f:e,glyph:this};c.w=d.bpToX(e.get("end"))-c.l;this._addMasksToRect(f,e,c)},_addMasksToRect:function(f,e,d){var c=f.block;if(e.masks)d.m=[],j.forEach(e.masks,function(b){var a={l:c.bpToX(b.start)};a.w=c.bpToX(b.end)-
a.l;d.m.push(a)});return d},layoutFeature:function(f,e,d){var c=this._getFeatureRectangle(f,d),b=f.scale,a=f.leftBase,f=c.l/b+a,b=(c.l+c.w)/b+a;c.t=e.addRect(d.id(),f,b,c.h,d);if(null===c.t)return null;c.f=d;return c},renderFeature:function(){},maskBySpans:function(f,e){var d=this,c=dojo.create("canvas",{height:f.canvas.height,width:f.canvas.width}),b=c.getContext("2d"),a=Math.floor(e.l),g=Math.ceil(e.w+e.l)-a;j.forEach(e.m,function(h){try{if(h.l<a)h.w+=h.l-a,h.l=a;if(h.w>g)h.w=g;if(0>h.l)h.w+=h.l,
h.l=0;if(h.l+h.w>a+g)h.w=g+a-h.l;if(h.l+h.w>f.canvas.width)h.w=f.canvas.width-h.l;b.drawImage(f.canvas,h.l,e.t,h.w,e.h,h.l,e.t,h.w,e.h);f.globalAlpha=d.booleanAlpha;f.clearRect(h.l,e.t,h.w,e.h);f.drawImage(c,h.l,e.t,h.w,e.h,h.l,e.t,h.w,e.h);f.globalAlpha=1}catch(i){}})},_getFeatureHeight:function(f,e){return this.getStyle(e,"height")},updateStaticElements:function(){}})})},"JBrowse/View/FeatureGlyph/Box":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,JBrowse/Util/FastPromise,JBrowse/View/FeatureGlyph,./_FeatureLabelMixin".split(","),
function(h,j,g,i,f,e){return h([f,e],{constructor:function(){this._embeddedImagePromises={}},_defaultConfig:function(){return this._mergeConfigs(this.inherited(arguments),{style:{maxDescriptionLength:70,color:"goldenrod",mouseovercolor:"rgba(0,0,0,0.3)",borderColor:null,borderWidth:0.5,height:11,marginBottom:2,strandArrow:!0,label:"name, id",textFont:"normal 12px Univers,Helvetica,Arial,sans-serif",textColor:"black",text2Color:"blue",text2Font:"normal 12px Univers,Helvetica,Arial,sans-serif",description:"note, description"}})},
_getFeatureHeight:function(d,c){var b=this.getStyle(c,"height");"compact"==d.displayMode&&(b=Math.round(0.45*b));if(this.getStyle(c,"strandArrow")){var a=c.get("strand");1==a?b=Math.max(this._embeddedImages.plusArrow.height,b):-1==a&&(b=Math.max(this._embeddedImages.minusArrow.height,b))}return b},_getFeatureRectangle:function(d,c){var b=d.block,a={l:b.bpToX(c.get("start")),h:this._getFeatureHeight(d,c),viewInfo:d,f:c,glyph:this};a.w=b.bpToX(c.get("end"))-a.l;a.rect={l:a.l,h:a.h,w:Math.max(a.w,2),
t:0};a.w=a.rect.w;"compact"!=d.displayMode&&(a.h+=this.getStyle(c,"marginBottom")||0);if(this.getStyle(c,"strandArrow"))-1==(a.strandArrow=c.get("strand"))?(b=this._embeddedImages.minusArrow,a.w+=b.width,a.l-=b.width):(b=this._embeddedImages.plusArrow,a.w+=b.width);if("collapsed"==d.displayMode)return a;this._expandRectangleWithLabels(d,c,a);this._addMasksToRect(d,c,a);return a},layoutFeature:function(d,c,b){var a=this.inherited(arguments);if(!a)return a;a.rect.t=a.t;return a},_expandRectangleWithLabels:function(d,
c,b){if(d.showLabels){var a=this.makeFeatureLabel(c,b);if(a)b.h+=a.h,b.w=Math.max(a.w,b.w),b.label=a,a.yOffset=b.rect.h+a.h}if(d.showDescriptions&&(d=this.makeFeatureDescriptionLabel(c,b)))b.description=d,b.h+=d.h,b.w=Math.max(d.w,b.w),d.yOffset=b.h-(this.getStyle(c,"marginBottom")||0)},_embeddedImages:{plusArrow:{data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAATUlEQVQIW2NkwATGQKFYIG4A4g8gacb///+7AWlBmNq+vj6V4uLiJiD/FRBXA/F8xu7u7kcVFRWyMEVATQz//v0Dcf9CxaYRZxIxbgIARiAhmifVe8UAAAAASUVORK5CYII=",
width:9,height:5},minusArrow:{data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAASklEQVQIW2NkQAABILMBiBcD8VkkcQZGIAeEE4G4FYjFent764qKiu4gKXoPUjAJiLOggsxMTEwMjIwgYQjo6Oh4TLRJME043QQA+W8UD/sdk9IAAAAASUVORK5CYII=",width:9,height:5}},getEmbeddedImage:function(d){return this._embeddedImagePromises[d]||function(){var c=new i,b=this._embeddedImages[d];if(b){var a=new Image;a.onload=function(){c.resolve(this)};a.src=b.data}else c.resolve(null);return this._embeddedImagePromises[d]=
c}.call(this)},renderFeature:function(d,c){"collapsed"!=this.track.displayMode&&d.clearRect(Math.floor(c.l),c.t,Math.ceil(c.w-Math.floor(c.l)+c.l),c.h);this.renderBox(d,c.viewInfo,c.f,c.t,c.rect.h,c.f);this.renderLabel(d,c);this.renderDescription(d,c);this.renderArrowhead(d,c)},renderBox:function(d,c,b,a,e,f,h){var f=c.block.bpToX(b.get("start")),i=c.block.bpToX(b.get("end"))-f,h=h||g.hitch(this,"getStyle");if(c=this._getFeatureHeight(c,b)){c!=e&&(a+=Math.round((e-c)/2));(e=h(b,"color"))?(d.fillStyle=
e,d.fillRect(f,a,Math.max(1,i),c)):d.clearRect(f,a,Math.max(1,i),c);var j;if((e=h(b,"borderColor"))&&(j=h(b,"borderWidth")))3<i?(d.lineWidth=j,d.strokeStyle=e,d.strokeRect(f+j/2,a+j/2,i-j,c-j)):(d.globalAlpha=2*j/i,d.fillStyle=e,d.fillRect(f,a,Math.max(1,i),c),d.globalAlpha=1)}},renderLabel:function(d,c){if(c.label)d.font=c.label.font,d.fillStyle=c.label.fill,d.textBaseline=c.label.baseline,d.fillText(c.label.text,c.l+(c.label.xOffset||0),c.t+(c.label.yOffset||0))},renderDescription:function(d,c){if(c.description)d.font=
c.description.font,d.fillStyle=c.description.fill,d.textBaseline=c.description.baseline,d.fillText(c.description.text,c.l+(c.description.xOffset||0),c.t+(c.description.yOffset||0))},renderArrowhead:function(d,c){c.strandArrow&&(1==c.strandArrow&&c.rect.l+c.rect.w<=d.canvas.width?this.getEmbeddedImage("plusArrow").then(function(b){d.imageSmoothingEnabled=!1;d.drawImage(b,c.rect.l+c.rect.w,c.t+(c.rect.h-b.height)/2)}):-1==c.strandArrow&&0<=c.rect.l&&this.getEmbeddedImage("minusArrow").then(function(b){d.imageSmoothingEnabled=
!1;d.drawImage(b,c.rect.l-9,c.t+(c.rect.h-b.height)/2)}))},updateStaticElements:function(d,c,b){var a=b.minVisible,e=b.maxVisible,f=c.viewInfo.block;if(f.containsBp(a)||f.containsBp(e)){var g=b.bpToPx,f=c.f,b=f.get("start"),f=f.get("end");c.strandArrow&&(1==c.strandArrow&&f>=e&&b<=e?this.getEmbeddedImage("plusArrow").then(function(b){d.imageSmoothingEnabled=!1;d.drawImage(b,g(e)-g(a)-9,c.t+(c.rect.h-b.height)/2)}):-1==c.strandArrow&&b<=a&&f>=a&&this.getEmbeddedImage("minusArrow").then(function(a){d.imageSmoothingEnabled=
!1;d.drawImage(a,0,c.t+(c.rect.h-a.height)/2)}));var h=c.label?c.label.w:0,i=c.description?c.description.w:0;g(f);Math.max(h,i);g(a);g(b);g(a)}}})})},"JBrowse/Util/FastPromise":function(){define([],function(){var h=function(){this.callbacks=[]};h.prototype.then=function(h){"value"in this?h(this.value):this.callbacks.push(h)};h.prototype.resolve=function(h){this.value=h;h=this.callbacks;delete this.callbacks;for(var g=0;g<h.length;g++)h[g](this.value)};return h})},"JBrowse/View/FeatureGlyph/_FeatureLabelMixin":function(){define(["dojo/_base/declare",
"dojo/_base/lang","JBrowse/View/_FeatureDescriptionMixin"],function(h,j,g){var i={};return h(g,{makeFeatureLabel:function(f,e){var d=this.getFeatureLabel(f);if(!d)return null;var c=this.getStyle(f,"textFont"),d=e?this.makeBottomOrTopLabel(d,c,e):this.makePopupLabel(d,c);d.fill=this.getStyle(f,"textColor");return d},makeFeatureDescriptionLabel:function(f,e){var d=this.getFeatureDescription(f);if(!d)return null;var c=this.getStyle(f,"text2Font"),d=e?this.makeBottomOrTopLabel(d,c,e):this.makePopupLabel(d,
c);d.fill=this.getStyle(f,"text2Color");return d},makeSideLabel:function(f,e){if(!f)return null;var d=this.measureFont(e),c=Math.round((f.length*d.w-this.track.getConf("maxFeatureGlyphExpansion"))/d.w);0<c&&(f=f.slice(0,f.length-c-1)+"\u2026");return{text:f,font:e,baseline:"middle",w:d.w*f.length,h:d.h}},makeBottomOrTopLabel:function(f,e,d){if(!f)return null;var c=this.measureFont(e),d=Math.round((f.length*c.w-d.w-this.track.getConf("maxFeatureGlyphExpansion"))/c.w);0<d&&(f=f.slice(0,f.length-d-1)+
"\u2026");return{text:f,font:e,baseline:"bottom",w:c.w*f.length,h:c.h}},makePopupLabel:function(f,e){if(!f)return null;var d=this.measureFont(e);return{text:f,font:e,w:d.w*f.length,h:d.h}},measureFont:function(f){var e;if(!(e=i[f]))e=document.createElement("canvas").getContext("2d"),e.font=f,e=e.measureText("MMMMMMMMMMMMXXXXXXXXXX1234567890-.CGCC12345"),e={h:e.height||parseInt(f.match(/(\d+)px/)[1]),w:e.width/43},e=i[f]=e;return e}})})},"JBrowse/View/FeatureGlyph/Segments":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","JBrowse/View/FeatureGlyph/Box"],function(h,j,g,i){return h(i,{_defaultConfig:function(){return this._mergeConfigs(this.inherited(arguments),{style:{connectorColor:"#333",connectorThickness:1,borderColor:"rgba( 0, 0, 0, 0.3 )"},subParts:function(){return!0}})},renderFeature:function(f,e){"collapsed"!=this.track.displayMode&&f.clearRect(Math.floor(e.l),e.t,Math.ceil(e.w),e.h);this.renderConnector(f,e);this.renderSegments(f,e);this.renderLabel(f,e);this.renderDescription(f,
e);this.renderArrowhead(f,e)},renderConnector:function(f,e){var d=this.getStyle(e.f,"connectorColor");if(d)f.fillStyle=d,d=this.getStyle(e.f,"connectorThickness"),f.fillRect(e.rect.l,Math.round(e.rect.t+(e.rect.h-d)/2),e.rect.w,d)},renderSegments:function(f,e){function d(c,d){return"height"==d?b._getFeatureHeight(e.viewInfo,c):b.getStyle(c,d)||b.getStyle(a,d)}var c=this._getSubparts(e.f);if(c.length)for(var b=this,a=e.f,g=0;g<c.length;++g)this.renderBox(f,e.viewInfo,c[g],e.t,e.rect.h,e.f,d)},_getSubparts:function(f){f=
f.children();if(!f)return[];for(var e=[],d=0;d<f.length;d++)this._filterSubpart(f[d])&&e.push(f[d]);return e},_filterSubpart:function(f){return(this._subpartsFilter||(this._subpartsFilter=this._makeSubpartsFilter()))(f)},_makeSubpartsFilter:function(){var f=this.getConf("subParts");"string"==typeof f&&(f=f.split(/\s*,\s*/));return"object"==typeof f?(f=j.isArray(f)?function(){var e={};g.forEach(f,function(d){e[d.toLowerCase()]=!0});return e}.call(this):function(){var e={},d;for(d in f)e[d.toLowerCase()]=
f[d];return e}.call(this),function(e){return f[(e.get("type")||"").toLowerCase()]}):f=function(){return!0}}})})},"JBrowse/View/FeatureGlyph/Gene":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","JBrowse/View/FeatureGlyph/Box","JBrowse/View/FeatureGlyph/ProcessedTranscript"],function(h,j,g,i,f){return h(i,{_defaultConfig:function(){return this._mergeConfigs(this.inherited(arguments),{transcriptType:"mRNA",style:{transcriptLabelFont:"normal 10px Univers,Helvetica,Arial,sans-serif",
transcriptLabelColor:"black",textFont:"bold 12px Univers,Helvetica,Arial,sans-serif"},labelTranscripts:!0,marginBottom:0})},_boxGlyph:function(){return this.__boxGlyph||(this.__boxGlyph=new i({track:this.track,browser:this.browser,config:this.config}))},_ptGlyph:function(){return this.__ptGlyph||(this.__ptGlyph=new f({track:this.track,browser:this.browser,config:this.config}))},_getFeatureRectangle:function(e,d){var c=j.mixin({},e);c.showDescriptions=c.showLabels=!1;var b=d.children(),a=1,f={l:0,
h:0,r:0,w:0,subRects:[],viewInfo:e,f:d,glyph:this};if(b&&b.length){b.sort(function(a,b){return(a.get("name")||"").localeCompare(b.get("name")||"")});f.l=Infinity;f.r=-Infinity;for(var g=this.getConfForFeature("transcriptType",d),h=0;h<b.length;h++){var i=(b[h].get("type")==g?this._ptGlyph():this._boxGlyph())._getFeatureRectangle(c,b[h]),a=h==b.length-1?0:1;i.t=i.rect.t=f.h&&"collapsed"!=e.displayMode?f.h+a:0;if(e.showLabels&&this.getConfForFeature("labelTranscripts",b[h])){var l=this.makeSideLabel(this.getFeatureLabel(b[h]),
this.getStyle(b[h],"transcriptLabelFont"),i);if(l){l.fill=this.getStyle(b[h],"transcriptLabelColor");i.label=l;i.l-=l.w;i.w+=l.w;if(l.h>i.h)i.h=l.h;l.yOffset=Math.floor(i.h/2);l.xOffset=0}}f.subRects.push(i);f.r=Math.max(f.r,i.l+i.w-1);f.l=Math.min(f.l,i.l);f.h=i.t+i.h+a}}f.w=Math.max(f.r-f.l+1,2);delete f.r;f.rect={l:f.l,h:f.h,w:f.w};"compact"!=e.displayMode&&(f.h+=this.getStyle(d,"marginBottom")||0);if("collapsed"==e.displayMode)return f;this._expandRectangleWithLabels(e,d,f);this._addMasksToRect(e,
d,f);return f},layoutFeature:function(e,d,c){var b=this.inherited(arguments);b&&g.forEach(b.subRects,function(a){a.t+=b.t;a.rect.t+=b.t});return b},renderFeature:function(e,d){"collapsed"!=d.viewInfo.displayMode&&e.clearRect(Math.floor(d.l),d.t,Math.ceil(d.w-Math.floor(d.l)+d.l),d.h);for(var c=d.subRects,b=0;b<c.length;b++)c[b].glyph.renderFeature(e,c[b]);this.renderLabel(e,d);this.renderDescription(e,d)},updateStaticElements:function(e,d,c){this.inherited(arguments);for(var b=d.subRects,a=0;a<b.length;a++)b[a].glyph.updateStaticElements(e,
b[a],c)}})})},"JBrowse/View/FeatureGlyph/ProcessedTranscript":function(){define(["dojo/_base/declare","dojo/_base/array","dojox/color/Palette","JBrowse/Model/SimpleFeature","JBrowse/View/FeatureGlyph/Segments"],function(h,j,g,i,f){return h(f,{_defaultConfig:function(){return this._mergeConfigs(this.inherited(arguments),{style:{utrColor:function(e,d,c){return c._utrColor(c.getStyle(e.parent(),"color")).toString()}},subParts:"CDS, UTR, five_prime_UTR, three_prime_UTR",impliedUTRs:!1})},_getSubparts:function(e){var d=
e.children();if(!d)return[];d&&this.config.impliedUTRs&&(d=this._makeUTRs(e,d));for(var e=[],c=0;c<d.length;c++)this._filterSubpart(d[c])&&e.push(d[c]);return e},_makeUTRs:function(e,d){var c=Infinity,b=-Infinity,a,f,g,h,j=[];for(a=0;a<d.length;a++)h=d[a].get("type"),/^cds/i.test(h)?(c>d[a].get("start")&&(c=d[a].get("start")),b<d[a].get("end")&&(b=d[a].get("end"))):/exon/i.test(h)?j.push(d[a]):this._isUTR(d[a])&&(f=d[a].get("start")==e.get("start"),g=d[a].get("end")==e.get("end"));if(!j.length||!(Infinity>
c&&-Infinity<b))return d;j.sort(function(a,b){return a.get("start")-b.get("start")});h=e.get("strand");var l;if(!f)for(a=0;a<j.length;a++){f=j[a].get("start");if(f>=c)break;l=c>j[a].get("end")?j[a].get("end"):c;d.unshift(new i({parent:e,data:{start:f,end:l,strand:h,type:0<=h?"five_prime_UTR":"three_prime_UTR"}}))}if(!g)for(a=j.length-1;0<=a;a--){l=j[a].get("end");if(l<=b)break;f=b<j[a].get("start")?j[a].get("start"):b;d.push(new i({parent:e,data:{start:f,end:l,strand:h,type:0<=h?"three_prime_UTR":
"five_prime_UTR"}}))}return d},_utrColor:function(e){return(this._palette||(this._palette=g.generate(e,"splitComplementary"))).colors[1]},_isUTR:function(e){return/(\bUTR|_UTR|untranslated[_\s]region)\b/.test(e.get("type")||"")},getStyle:function(e,d){return"color"==d&&this._isUTR(e)?this.getStyle(e,"utrColor"):this.inherited(arguments)},_getFeatureHeight:function(e,d){var c=this.inherited(arguments);return this._isUTR(d)?0.65*c:c}})})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array",
"./_base"],function(h,j,g){function i(b,a,c){var d=new g.Palette;d.colors=[];j.forEach(b.colors,function(b){var e="dg"==a?b.g+c:b.g,f="db"==a?b.b+c:b.b,h="da"==a?b.a+c:b.a;d.colors.push(new g.Color({r:Math.min(255,Math.max(0,"dr"==a?b.r+c:b.r)),g:Math.min(255,Math.max(0,e)),b:Math.min(255,Math.max(0,f)),a:Math.min(1,Math.max(0,h))}))});return d}function f(b,a,c){var d=new g.Palette;d.colors=[];j.forEach(b.colors,function(b){var b=b.toCmy(),e="dm"==a?b.m+c:b.m,f="dy"==a?b.y+c:b.y;d.colors.push(g.fromCmy(Math.min(100,
Math.max(0,"dc"==a?b.c+c:b.c)),Math.min(100,Math.max(0,e)),Math.min(100,Math.max(0,f))))});return d}function e(b,a,c){var d=new g.Palette;d.colors=[];j.forEach(b.colors,function(b){var b=b.toCmyk(),e="dm"==a?b.m+c:b.m,f="dy"==a?b.y+c:b.y,h="dk"==a?b.b+c:b.b;d.colors.push(g.fromCmyk(Math.min(100,Math.max(0,"dc"==a?b.c+c:b.c)),Math.min(100,Math.max(0,e)),Math.min(100,Math.max(0,f)),Math.min(100,Math.max(0,h))))});return d}function d(b,a,c){var d=new g.Palette;d.colors=[];j.forEach(b.colors,function(b){var b=
b.toHsl(),e="dl"==a?b.l+c:b.l;d.colors.push(g.fromHsl(("dh"==a?b.h+c:b.h)%360,Math.min(100,Math.max(0,"ds"==a?b.s+c:b.s)),Math.min(100,Math.max(0,e))))});return d}function c(b,a,c){var d=new g.Palette;d.colors=[];j.forEach(b.colors,function(b){var b=b.toHsv(),e="dv"==a?b.v+c:b.v;d.colors.push(g.fromHsv(("dh"==a?b.h+c:b.h)%360,Math.min(100,Math.max(0,"ds"==a?b.s+c:b.s)),Math.min(100,Math.max(0,e))))});return d}g.Palette=function(b){this.colors=[];if(b instanceof g.Palette)this.colors=b.colors.slice(0);
else if(b instanceof g.Color)this.colors=[null,null,b,null,null];else if(h.isArray(b))this.colors=j.map(b.slice(0),function(a){return h.isString(a)?new g.Color(a):a});else if(h.isString(b))this.colors=[null,null,new g.Color(b),null,null]};h.extend(g.Palette,{transform:function(b){var a=i;if(b.use){var g=b.use.toLowerCase();0==g.indexOf("hs")?a="l"==g.charAt(2)?d:c:0==g.indexOf("cmy")&&(a="k"==g.charAt(3)?e:f)}else if("dc"in b||"dm"in b||"dy"in b)a="dk"in b?e:f;else if("dh"in b||"ds"in b)a="dv"in b?
c:d;var g=this,h;for(h in b)"use"!=h&&(g=a(g,h,b[h]));return g},clone:function(){return new g.Palette(this)}});h.mixin(g.Palette,{generators:{analogous:function(b){var a=b.high||60,c=b.low||18,b=(h.isString(b.base)?new g.Color(b.base):b.base).toHsv(),a=[(b.h+c+360)%360,(b.h+Math.round(c/2)+360)%360,b.h,(b.h-Math.round(a/2)+360)%360,(b.h-a+360)%360],c=Math.max(10,95>=b.s?b.s+5:100-(b.s-95)),d=1<b.s?b.s-1:21-b.s,e=92<=b.v?b.v-9:Math.max(b.v+9,20),f=90>=b.v?Math.max(b.v+5,20):95+Math.ceil((b.v-90)/2),
i=[c,d,b.s,c,c],m=[e,f,b.v,e,f];return new g.Palette(j.map(a,function(a,b){return g.fromHsv(a,i[b],m[b])}))},monochromatic:function(b){var b=h.isString(b.base)?new g.Color(b.base):b.base,a=b.toHsv(),c=9<a.s-30?a.s-30:a.s+30,d=a.s,e=20<a.v-20?a.v-20:a.v+60,f=20<a.v-50?a.v-50:a.v+30;return new g.Palette([g.fromHsv(a.h,c,100-0.8*(100-a.v)),g.fromHsv(a.h,d,f),b,g.fromHsv(a.h,c,f),g.fromHsv(a.h,d,e)])},triadic:function(b){var b=h.isString(b.base)?new g.Color(b.base):b.base,a=b.toHsv(),c=(a.h-157+360)%
360,d=90<a.s?a.s-10:a.s+10,e=95<a.s?a.s-5:a.s+5,f=20<a.v-20?a.v-20:a.v+20,i=20<a.v-30?a.v-30:a.v+30,j=70<a.v-30?a.v-30:a.v+30;return new g.Palette([g.fromHsv((a.h+57+360)%360,20<a.s?a.s-10:a.s+10,a.v),g.fromHsv(a.h,d,i),b,g.fromHsv(c,d,f),g.fromHsv(c,e,j)])},complementary:function(b){var b=h.isString(b.base)?new g.Color(b.base):b.base,a=b.toHsv(),c=360>2*a.h+137?2*a.h+137:Math.floor(a.h/2)-137,d=Math.max(a.s-10,0),e=100-0.9*(100-a.s),f=Math.min(100,a.s+20),i=Math.min(100,a.v+30),j=20<a.v?a.v-30:a.v+
30;return new g.Palette([g.fromHsv(a.h,d,i),g.fromHsv(a.h,e,j),b,g.fromHsv(c,f,j),g.fromHsv(c,a.s,a.v)])},splitComplementary:function(b){var a=h.isString(b.base)?new g.Color(b.base):b.base,c=b.da||30,b=a.toHsv(),d=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,e=(d-c+360)%360,c=(d+c)%360,d=Math.max(b.s-10,0),f=100-0.9*(100-b.s),i=Math.min(100,b.s+20),j=Math.min(100,b.v+30),r=20<b.v?b.v-30:b.v+30;return new g.Palette([g.fromHsv(e,d,j),g.fromHsv(e,f,r),a,g.fromHsv(c,i,r),g.fromHsv(c,b.s,b.v)])},compound:function(b){var b=
h.isString(b.base)?new g.Color(b.base):b.base,a=b.toHsv(),c=360>2*a.h+18?2*a.h+18:Math.floor(a.h/2)-18,d=360>2*a.h+120?2*a.h+120:Math.floor(a.h/2)-120,e=360>2*a.h+99?2*a.h+99:Math.floor(a.h/2)-99,f=10<a.s-40?a.s-40:a.s+40,i=80<a.s-10?a.s-10:a.s+10,j=10<a.s-25?a.s-25:a.s+25,r=10<a.v-40?a.v-40:a.v+40,p=80<a.v-20?a.v-20:a.v+20,a=Math.max(a.v,20);return new g.Palette([g.fromHsv(c,f,r),g.fromHsv(c,i,p),b,g.fromHsv(d,j,a),g.fromHsv(e,i,p)])},shades:function(b){var b=h.isString(b.base)?new g.Color(b.base):
b.base,a=b.toHsv(),c=100==a.s&&0==a.v?0:a.s,d=20<a.v-50?a.v-50:a.v+30,e=20<=a.v-25?a.v-25:a.v+55,f=20<=a.v-75?a.v-75:a.v+5,i=Math.max(a.v-10,20);return new g.Palette([new g.fromHsv(a.h,c,d),new g.fromHsv(a.h,c,e),b,new g.fromHsv(a.h,c,f),new g.fromHsv(a.h,c,i)])}},generate:function(b,a){if(h.isFunction(a))return a({base:b});if(g.Palette.generators[a])return g.Palette.generators[a]({base:b});throw Error("dojox.color.Palette.generate: the specified generator ('"+a+"') does not exist.");}});return g.Palette})},
"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(h,j,g,i){h=j.getObject("color",!0,h);h.Color=g;h.blend=g.blendColors;h.fromRgb=g.fromRgb;h.fromHex=g.fromHex;h.fromArray=g.fromArray;h.fromString=g.fromString;h.greyscale=i.makeGrey;j.mixin(h,{fromCmy:function(f,e,d){if(j.isArray(f))e=f[1],d=f[2],f=f[0];else if(j.isObject(f))e=f.m,d=f.y,f=f.c;f/=100;e/=100;d/=100;e=1-e;d=1-d;return new g({r:Math.round(255*(1-f)),g:Math.round(255*e),b:Math.round(255*
d)})},fromCmyk:function(f,e,d,c){if(j.isArray(f))e=f[1],d=f[2],c=f[3],f=f[0];else if(j.isObject(f))e=f.m,d=f.y,c=f.b,f=f.c;f/=100;e/=100;d/=100;c/=100;f=1-Math.min(1,f*(1-c)+c);e=1-Math.min(1,e*(1-c)+c);d=1-Math.min(1,d*(1-c)+c);return new g({r:Math.round(255*f),g:Math.round(255*e),b:Math.round(255*d)})},fromHsl:function(f,e,d){if(j.isArray(f))e=f[1],d=f[2],f=f[0];else if(j.isObject(f))e=f.s,d=f.l,f=f.h;e/=100;for(d/=100;0>f;)f+=360;for(;360<=f;)f-=360;var c,b,a;120>f?(c=(120-f)/60,b=f/60,a=0):240>
f?(c=0,b=(240-f)/60,a=(f-120)/60):(c=(f-240)/60,b=0,a=(360-f)/60);c=2*e*Math.min(c,1)+(1-e);b=2*e*Math.min(b,1)+(1-e);a=2*e*Math.min(a,1)+(1-e);0.5>d?(c*=d,b*=d,a*=d):(c=(1-d)*c+2*d-1,b=(1-d)*b+2*d-1,a=(1-d)*a+2*d-1);return new g({r:Math.round(255*c),g:Math.round(255*b),b:Math.round(255*a)})}});h.fromHsv=function(f,e,d){if(j.isArray(f))e=f[1],d=f[2],f=f[0];else if(j.isObject(f))e=f.s,d=f.v,f=f.h;360==f&&(f=0);var e=e/100,d=d/100,c,b,a;if(0==e)c=d,a=d,b=d;else{var h=f/60,f=Math.floor(h),i=h-f,h=d*
(1-e),q=d*(1-e*i),e=d*(1-e*(1-i));switch(f){case 0:c=d;b=e;a=h;break;case 1:c=q;b=d;a=h;break;case 2:c=h;b=d;a=e;break;case 3:c=h;b=q;a=d;break;case 4:c=e;b=h;a=d;break;case 5:c=d,b=h,a=q}}return new g({r:Math.round(255*c),g:Math.round(255*b),b:Math.round(255*a)})};j.extend(g,{toCmy:function(){var f=1-this.g/255,e=1-this.b/255;return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*f),y:Math.round(100*e)}},toCmyk:function(){var f,e,d,c=this.r/255;e=this.g/255;d=this.b/255;f=Math.min(1-c,1-e,1-d);
e=(1-e-f)/(1-f);d=(1-d-f)/(1-f);return{c:Math.round(100*((1-c-f)/(1-f))),m:Math.round(100*e),y:Math.round(100*d),b:Math.round(100*f)}},toHsl:function(){var f=this.r/255,e=this.g/255,d=this.b/255,c=Math.min(f,d,e),b=Math.max(f,e,d),a=b-c,g=0,h=0,c=(c+b)/2;0<c&&1>c&&(h=a/(0.5>c?2*c:2-2*c));0<a&&(b==f&&b!=e&&(g+=(e-d)/a),b==e&&b!=d&&(g+=2+(d-f)/a),b==d&&b!=f&&(g+=4+(f-e)/a),g*=60);return{h:g,s:Math.round(100*h),l:Math.round(100*c)}},toHsv:function(){var f=this.r/255,e=this.g/255,d=this.b/255,c=Math.min(f,
d,e),b=Math.max(f,e,d),c=b-c,a=null,g=0==b?0:c/b;0==g?a=0:(a=f==b?60*(e-d)/c:e==b?120+60*(d-f)/c:240+60*(f-e)/c,0>a&&(a+=360));return{h:a,s:Math.round(100*g),v:Math.round(100*b)}}});return h})},"dojo/colors":function(){define("dojo/colors",["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(h,j,g,i){var f={};j.setObject("dojo.colors",f);var e=function(c,b,a){0>a&&++a;1<a&&--a;var d=6*a;return 1>d?c+(b-c)*d:1>2*a?b:2>3*a?c+6*(b-c)*(2/3-a):c};h.colorFromRgb=g.fromRgb=function(c,
b){var a=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(a){var d=a[2].split(/\s*,\s*/),f=d.length,a=a[1];if("rgb"==a&&3==f||"rgba"==a&&4==f){a=d[0];return"%"==a.charAt(a.length-1)?(a=i.map(d,function(a){return 2.56*parseFloat(a)}),4==f&&(a[3]=d[3]),g.fromArray(a,b)):g.fromArray(d,b)}if("hsl"==a&&3==f||"hsla"==a&&4==f){var a=(parseFloat(d[0])%360+360)%360/360,h=parseFloat(d[1])/100,j=parseFloat(d[2])/100,h=0.5>=j?j*(h+1):j+h-j*h,j=2*j-h,a=[256*e(j,h,a+1/3),256*e(j,h,a),256*e(j,h,a-
1/3),1];4==f&&(a[3]=d[3]);return g.fromArray(a,b)}}return null};var d=function(c,b,a){c=Number(c);return isNaN(c)?a:c<b?b:c>a?a:c};g.prototype.sanitize=function(){this.r=Math.round(d(this.r,0,255));this.g=Math.round(d(this.g,0,255));this.b=Math.round(d(this.b,0,255));this.a=d(this.a,0,1);return this};f.makeGrey=g.makeGrey=function(c,b){return g.fromArray([c,c,c,b])};j.mixin(g.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],
bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],
darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,
165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,
122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,
25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,
69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return g})},"JBrowse/View/FeatureGlyph/Alignment":function(){define(["dojo/_base/declare",
"dojo/_base/array","JBrowse/View/FeatureGlyph/Box","JBrowse/Store/SeqFeature/_MismatchesMixin"],function(h,j,g,i){return h([g,i],{constructor:function(){if(!this.config.style.showMismatches)this._drawMismatches=function(){}},_defaultConfig:function(){return this._mergeConfigs(dojo.clone(this.inherited(arguments)),{style:{color:function(f,e,d,c){e=f.get("strand");if(1!=Math.abs(e)&&"+"!=e&&"-"!=e)return c.colorForBase("reference");if(c.config.useXS)return(e={"-":"color_rev_strand","+":"color_fwd_strand"}[f._get("xs")])||
(e="color_nostrand"),d.getStyle(f,e);if(f.get("multi_segment_template")){var b=f.get("multi_segment_first");return f.get("multi_segment_all_correctly_aligned")?b||!c.config.useReverseTemplate?1==e||"+"==e?d.getStyle(f,"color_fwd_strand"):d.getStyle(f,"color_rev_strand"):1==e||"+"==e?d.getStyle(f,"color_rev_strand"):d.getStyle(f,"color_fwd_strand"):f.get("multi_segment_next_segment_unmapped")?b||!c.config.useReverseTemplate?1==e||"+"==e?d.getStyle(f,"color_fwd_missing_mate"):d.getStyle(f,"color_rev_missing_mate"):
1==e||"+"==e?d.getStyle(f,"color_rev_missing_mate"):d.getStyle(f,"color_fwd_missing_mate"):f.get("seq_id")==f.get("next_seq_id")?b||!c.config.useReverseTemplate?1==e||"+"==e?d.getStyle(f,"color_fwd_strand_not_proper"):d.getStyle(f,"color_rev_strand_not_proper"):1==e||"+"==e?d.getStyle(f,"color_rev_strand_not_proper"):d.getStyle(f,"color_fwd_strand_not_proper"):1==e||"+"==e?d.getStyle(f,"color_fwd_diff_chr"):d.getStyle(f,"color_rev_diff_chr")}return 1==e||"+"==e?d.getStyle(f,"color_fwd_strand"):d.getStyle(f,
"color_rev_strand")},color_fwd_strand_not_proper:"#ECC8C8",color_rev_strand_not_proper:"#BEBED8",color_fwd_strand:"#EC8B8B",color_rev_strand:"#8F8FD8",color_fwd_missing_mate:"#D11919",color_rev_missing_mate:"#1919D1",color_fwd_diff_chr:"#000000",color_rev_diff_chr:"#969696",color_nostrand:"#999999",border_color:null,strandArrow:!1,height:7,marginBottom:1,showMismatches:!0,mismatchFont:"bold 10px Courier New,monospace"}})},renderFeature:function(f,e){this.inherited(arguments);2<e.w&&(0.2<e.viewInfo.scale?
this._drawMismatches(f,e,this._getMismatches(e.f)):this._drawMismatches(f,e,this._getSkipsAndDeletions(e.f)))},_drawMismatches:function(f,e,d){var c=e.f,b=e.viewInfo.block,a=this.getCharacterMeasurements(f);f.textBaseline="middle";j.forEach(d,function(d){var g=c.get("start")+d.start,h=g+d.length,i=(e.rect||{}).h||e.h,g=b.bpToX(g),j=e.rect.t,h=Math.max(b.bpToX(h)-g,1);if("mismatch"==d.type||"deletion"==d.type){if(f.fillStyle=this.track.colorForBase("deletion"==d.type?"deletion":d.base),f.fillRect(g,
j,h,i),h>=a.w&&i>=a.h-3)f.font=this.config.style.mismatchFont,f.fillStyle="deletion"==d.type?"white":"black",f.fillText(d.base,g+(h-a.w)/2+1,j+i/2)}else if("insertion"==d.type){if(f.fillStyle="purple",f.fillRect(g-1,j+1,2,i-2),f.fillRect(g-2,j,4,1),f.fillRect(g-2,j+i-1,4,1),h>=a.w&&i>=a.h-3)f.font=this.config.style.mismatchFont,f.fillText("("+d.base+")",g+2,j+i/2)}else if("hardclip"==d.type||"softclip"==d.type){if(f.fillStyle="hardclip"==d.type?"red":"blue",f.fillRect(g-1,j+1,2,i-2),f.fillRect(g-
2,j,4,1),f.fillRect(g-2,j+i-1,4,1),h>=a.w&&i>=a.h-3)f.font=this.config.style.mismatchFont,f.fillText("("+d.base+")",g+2,j+i/2)}else if("skip"==d.type)f.clearRect(g,j,h,i),f.fillStyle="#333",f.fillRect(g,j+(i-2)/2,h,2)},this);f.textBaseline="alphabetic"},getCharacterMeasurements:function(){var f;if(!(f=this.charSize)){var e;try{e=(this.config.style.mismatchFont.match(/(\d+)px/i)||[])[1]}catch(d){}e=e||Infinity;f={w:e,h:e}}return this.charSize=f}})})},"JBrowse/View/Track/FeatureCoverage":function(){define(["dojo/_base/declare",
"dojo/_base/array","JBrowse/View/Track/Wiggle/XYPlot","JBrowse/Util","JBrowse/Store/SeqFeature/Coverage"],function(h,j,g,i,f){return h(g,{constructor:function(){this.store=new f({store:this.store,browser:this.browser})},_defaultConfig:function(){return i.deepUpdate(dojo.clone(this.inherited(arguments)),{autoscale:"local"})}})})},"JBrowse/Store/SeqFeature/Coverage":function(){define(["dojo/_base/declare","JBrowse/Store/SeqFeature","JBrowse/Util","JBrowse/Model/CoverageFeature"],function(h,j,g,i){return h(j,
{constructor:function(f){this.store=f.store},getGlobalStats:function(f){f({})},getFeatures:function(f,e,d,c){var b=f.start,a=f.end-b,g=Math.ceil(1/(f.scale||("basesPerSpan"in f?1/f.basesPerSpan:10))),h=Array(Math.ceil(a/g)),j=function(a,c){var d=(a-b-1)/g,e=Math.floor(d);return{bin:e,overlap:c?1-(d-e):d-e}};this.store.getFeatures(f,function(a){var b=j(a.get("start"),!1),a=j(a.get("end"),!0);b.bin==a.bin?h[b.bin]=(h[b.bin]||0)+a.overlap+b.overlap-1:(h[b.bin]=(h[b.bin]||0)+b.overlap,h[a.bin]=(h[a.bin]||
0)+a.overlap);for(b=b.bin+1;b<=a.bin-1;b++)h[b]=(h[b]||0)+1},function(){for(var a=0;a<h.length;a++){var c=b+g*a;e(new i({start:c,end:c+g,score:h[a]||0}))}d()},c)}})})},"JBrowse/Model/CoverageFeature":function(){define(["JBrowse/Util"],function(h){return h.fastDeclare({get:function(h){return this[h]},tags:function(){return["start","end","score"]},score:0,constructor:function(h){this.start=h.start;this.end=h.end;this.score=h.score}})})},"JBrowse/View/Track/SNPCoverage":function(){define("dojo/_base/declare,dojo/_base/array,dojo/promise/all,JBrowse/View/Track/Wiggle/XYPlot,JBrowse/Util,JBrowse/View/Track/_AlignmentsMixin,JBrowse/Store/SeqFeature/SNPCoverage".split(","),
function(h,j,g,i,f,e,d){return h([i,e],{constructor:function(){delete this.config.bicolor_pivot;delete this.config.scale;delete this.config.align;var c=this;this.store=new d({store:this.store,config:{mismatchScale:this.config.mismatchScale},browser:this.browser,filter:function(b){return c.filterFeature(b)}})},_defaultConfig:function(){return f.deepUpdate(dojo.clone(this.inherited(arguments)),{autoscale:"local",min_score:0,mismatchScale:0.1,hideDuplicateReads:!0,logScaleOption:!1,hideQCFailingReads:!0,
hideSecondary:!0,hideSupplementary:!0,hideMissingMatepairs:!1,hideUnmapped:!0})},_drawFeatures:function(c,b,a,d,e,g,h,i){var j=this,r=e.getContext("2d"),p=e.height,u=f.getResolution(r,this.browser.config.highResolutionMode),s=dojo.hitch(this,function(a){return p*(1-i.normalize(a))/u}),t=s(i.origin),v=dojo.create("canvas",{height:20,width:e.width,style:{cursor:"default",width:"100%",height:"20px"},innerHTML:"Your web browser cannot display this type of track.",className:"SNP-indicator-track"},d.domNode),
w=v.getContext("2d"),u=f.getResolution(w,this.browser.config.highResolutionMode);if("disabled"!=this.browser.config.highResolutionMode&&1!=u)c=v.height,v.width*=u,v.height=c*u,v.style.height=c+"px",w.scale(u,u);var x=this.config.style.neg_color,E=this.config.style.clip_marker_color,A=this.config.style.bg_color,y=this.config.disable_clip_markers,D=function(a,b,c,d){if(b<=p)if(r.fillStyle=j.colorForBase(a),b<=t){if(j._fillRectMod(r,d.l,b,d.w,c),!y&&0>b)r.fillStyle=E||x,j._fillRectMod(r,d.l,0,d.w,2)}else if(j._fillRectMod(r,
d.l,t,d.w,c),!y&&b>=p)r.fillStyle=E||j.colorForBase(a),j._fillRectMod(r,d.l,p-3,d.w,2)};dojo.forEach(g,function(a,b){var c=h[b],d=a.get("score");if(A)r.fillStyle=A,j._fillRectMod(r,c.l,0,c.w,p);D("reference",s(d.total()),t-s(d.get("reference"))+1,c)});dojo.forEach(g,function(a,b){var c=h[b],d=a.get("score"),e=d.total();d.forEach(function(a,b){if(!{reference:!0,skip:!0,deletion:!0}[b]&&a>0.5*e)w.save(),"disabled"!=j.browser.config.highResolutionMode&&w.scale(u,1),w.beginPath(),w.arc(c.l+0.5*c.w,0.4*
v.height/u,0.2*v.height/u,1.75*Math.PI,1.25*Math.PI,!1),w.lineTo(c.l+0.5*c.w,0),w.closePath(),w.fillStyle=j.colorForBase(b),w.fill(),w.lineWidth=1,w.strokeStyle="black",w.stroke(),"disabled"!=j.browser.config.highResolutionMode&&w.restore()});e-=d.get("reference");d.forEach(function(a,b){"reference"!=b&&(D(b,s(e),t-s(a)+1,c),e-=a)})},this)},_draw:function(c,b,a,d,e,f,g,h,i,j){this._preDraw(c,b,a,d,e,f,g,h);this._drawFeatures(c,b,a,d,e,f,g,h);j&&this._maskBySpans(c,b,e,j);this._postDraw(c,b,a,d,e,
f,g,h)},_maskBySpans:function(c,b,a,d){var e=a.getContext("2d"),f=a.height,g=this.config.style.masked_transparancy||0.17;this.config.style.masked_transparancy=g;var h=dojo.create("canvas",{height:f,width:a.width}),i=h.getContext("2d"),j;for(j in d)if(d.hasOwnProperty(j)){var p=Math.round((d[j].end-d[j].start)*c),u=Math.round((d[j].start-b)*c);u+p>=a.width&&(p=a.width-u);if(0!=p)i.drawImage(a,u,0,p,f,u,0,p,f),e.globalAlpha=g,e.clearRect(u,0,p,f),e.drawImage(h,u,0,p,f,u,0,p,f),e.globalAlpha=1}},_showPixelValue:function(c,
b){function a(a){return parseFloat(a).toPrecision(6).replace(/0+$/,"").replace(/\.$/,"")}function d(a){a=Math.round(100*(a/e));return"number"==typeof a&&!isNaN(a)?a+"%":""}if(!b||!b.score)return!1;b=b.score;if(b.snpsCounted){var e=b.total(),f="<table>";b.forEach(function(b,c){var e="";b.forEach&&(e=[],b.forEach(function(b,c){e.push(a(b)+" "+c)}),(e=e.join(", "))&&(e="("+e+")"));c={"*":"del",reference:"Ref",skip:"Skip/intron"}[c]||c;f+="<tr><td>"+c+'</td><td class="count">'+a(b)+'</td><td class="pct">'+
d(b)+'</td><td class="subdist">'+e+"</td></tr>"});f+='<tr class="total"><td>Total</td><td class="count">'+a(e)+'</td><td class="pct">&nbsp;</td><td class="subdist">&nbsp;</td></tr>';c.innerHTML=f+"</table>"}else c.innerHTML='<table><tr><td>Total</td><td class="count">'+a(b)+"</td></tr></table>";return!0},_trackMenuOptions:function(){return g([this.inherited(arguments),this._alignmentsFilterTrackMenuOptions()]).then(function(c){var b=c.shift();c.unshift({type:"dijit/MenuSeparator"});return b.concat.apply(b,
c)})}})})},"JBrowse/Store/SeqFeature/SNPCoverage":function(){define("dojo/_base/declare,dojo/_base/array,JBrowse/Util,JBrowse/Store/SeqFeature,JBrowse/Model/NestedFrequencyTable,JBrowse/Model/CoverageFeature,./_MismatchesMixin".split(","),function(h,j,g,i,f,e,d){return h([i,d],{constructor:function(c){this.store=c.store;this.filter=c.filter||function(){return!0}},getGlobalStats:function(c){c({})},_defaultConfig:function(){return g.deepUpdate(dojo.clone(this.inherited(arguments)),{mismatchScale:0.1})},
getFeatures:function(c,b,a,d){function g(a,b,c){var a=(a-i)/r,b=(b-1-i)/r,d=Math.floor(a),e=Math.floor(b);if(!(d>=p||0>e))if(0>d&&(a=d=0),e>=p&&(e=p-1,b=p),d==e)c(d,b-a);else{c(d,d+1-a);for(a=d+1;a<e;a++)c(a,1);c(e,b-e)}}for(var h=this,i=c.start,j=c.end,m=c.scale||c.basesPerSpan&&1/c.basesPerSpan||10,r=function(){var a=1/m;return a<=1/h.config.mismatchScale?1:Math.ceil(a)}(),p=Math.ceil((j-i)/r),u=Array(p),s=0;s<p;s++)if(u[s]=new f,1==r)u[s].snpsCounted=!0;h.store.getFeatures(c,function(a){if(h.filter(a)){var b=
{"-1":"-",1:"+"}[""+a.get("strand")]||"unstranded";g(a.get("start"),a.get("end"),function(a,c){u[a].getNested("reference").increment(b,c)});if(1==r)for(var c=h._getMismatches(a),d=0;d<c.length;d++){var e=c[d];g(a.get("start")+e.start,a.get("start")+e.start+e.length,function(a,c){var d=u[a];d.getNested("reference").decrement(b,c);var f=e.base;"insertion"==e.type?f="ins "+f:"skip"==e.type&&(f="skip");d.getNested(f).increment(b,c)})}}},function(d){var f=function(){for(var c=0;c<u.length;c++){var f=i+
r*c;b(new e({start:f,end:f+r,score:u[c]}))}a(d)};if(1==r){var g;h.browser.getStore("refseqs",function(a){a?a.getFeatures(c,function(a){g=a.get("seq")},function(){if(g)for(var a=i;a<=j;a++){var b=Math.floor((a-i)/r);u[b].refBase=g[b]}f()},f):f()})}else f()},d)},saveStore:function(){return{urlTemplate:this.config.bam.url,baiUrlTemplate:this.config.bai.url}}})})},"JBrowse/Model/NestedFrequencyTable":function(){define(["JBrowse/Util"],function(h){var j=h.fastDeclare({constructor:function(g){this._categories=
{};g&&dojo.mixin(this._categories,g)},total:function(){var g=0,h;for(h in this._categories)var f=this._categories[h],g=g+(f.total?f.total():f);return g},decrement:function(g,h){h||(h=1);g=g?g.toString():"default";return this._categories[g]?this._categories[g]=Math.max(0,this._categories[g]-h):0},increment:function(g,h){h||(h=1);g=g?g.toString():"default";return this._categories[g]=(this._categories[g]||0)+h},get:function(g){return this._categories[g]||0},getNested:function(g){"string"==typeof g&&
(g=g.split("/"));if(!g.length)return this;var h=g[0].toString(),f=this._categories[h];if(!f||!f._categories)f=this._categories[h]=new j(f?{"default":f+0}:{});return 1<g.length?f.getNested(g.slice(1)):f},categories:function(){return h.dojof.keys(this._categories)},toString:function(){return this.total().toPrecision(6).toString().replace(/\.?0+$/,"")},valueOf:function(){return this.total()},forEach:function(g,h){var f=this._categories;if(h)for(var e in f)g.call(h,f[e],e);else for(e in f)g(f[e],e)}});
return j})},"JBrowse/Store/TrackMetaData":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/data/util/simpleFetch","JBrowse/Util","JBrowse/Digest/Crc32"],function(h,j,g,i,f){var e=i.dojof,h=h(null,{_noDataValue:"(no data)",constructor:function(d){var c=["conf"];this._filterFacet=function(){var a=d.indexFacets||function(){return!0};"string"==typeof a&&(a=[a]);if(dojo.isArray(a))var b=a,a=function(a){return dojo.some(b,function(b){return a==b.toLowerCase()})};var e=this.getIdentityAttributes();
return function(b){return dojo.some(e,function(a){return a==b})||a(b)&&!dojo.some(c,function(a){return a==b})}}.call(this);this.onReadyFuncs=dojo.isArray(d.onReady)?dojo.clone(d.onReady):d.onReady?[d.onReady]:[];this._indexItems({store:this,items:dojo.map(d.trackConfigs,dojo.hitch(this,"_trackConfigToItem"))});var b=0;d.metadataStores=dojo.filter(d.metadataStores,function(a){return a});if(!d.metadataStores||!d.metadataStores.length)this._finishLoad();else{var a=dojo.hitch(this,function(){++b==d.metadataStores.length&&
this._finishLoad()});dojo.forEach(d.metadataStores,function(b){b.fetch({scope:this,onComplete:dojo.hitch(this,function(c){this._indexItems({store:b,items:c,supplementalOnly:!0});a()}),onError:function(b){console.error(b,b.stack);a()}})},this)}d.browser.subscribe("/jbrowse/v1/c/tracks/new",dojo.hitch(this,"addTracks"));d.browser.subscribe("/jbrowse/v1/c/tracks/replace",dojo.hitch(this,function(a){this.deleteTracks(a,"no events");this.addTracks(a,"no events")}));d.browser.subscribe("/jbrowse/v1/c/tracks/delete",
dojo.hitch(this,"deleteTracks"))},_trackConfigToItem:function(d){var c=dojo.clone(d.metadata||{});c.label=d.label;c.key=d.key;c.conf=d;c["track type"]=d.type;if(d.category)c.category=d.category;return c},comparatorMap:{category:function(d,c){for(var b=(d||"Uncategorized").split(/\s*\/\s*/),a=(c||"Uncategorized").split(/\s*\/\s*/),e,f;(e=b.shift())&&(f=a.shift());)if(e=e.localeCompare(f))return e;return 0}},addTracks:function(d,c){d.length&&(delete this.previousQueryFingerprint,delete this.previousResults);
j.forEach(d,function(b){this._indexItems({store:this,items:[this._trackConfigToItem(b)]});var a=b.label,d=this.fetchItemByIdentity(a);if(d){if(!c)this.onNew(d)}else console.error("failed to add "+a+" track to track metadata store",b)},this)},deleteTracks:function(d,c){d.length&&(delete this.previousQueryFingerprint,delete this.previousResults);j.forEach(d,function(b){if(b=this.fetchItemByIdentity(b.label))if(b.DELETED=!0,!c)this.onDelete(b)},this)},_finishLoad:function(){this.facets.sort();dojo.forEach(e.values(this.facetIndexes.byName),
function(c){c.avgBucketSize=c.itemCount/c.bucketCount});this.facetIndexes.facetRank=dojo.clone(this.facets).sort(dojo.hitch(this,function(c,b){return this.facetIndexes.byName[c].avgBucketSize-this.facetIndexes.byName[b].avgBucketSize}));var d=dojo.hitch(this,"_itemSortFunc");dojo.forEach(e.values(this.facetIndexes.byName),function(c){dojo.forEach(e.values(c.byValue),function(b){var a=[],c={};j.forEach(b.items,function(b){var d=this.getIdentity(b);c[d]||(c[d]=!0,a.push(b))},this);b.items=a.sort(d)},
this)},this);this.ready=!0;this._onReady()},_itemSortFunc:function(d,c){var b=this.getIdentity(d),a=this.getIdentity(c);return b==a?0:b>a?1:b<a?-1:0},_indexItems:function(d){var c=d.store,b=d.items,a={},b=dojo.map(b,function(b){var d=c.getAttributes(b),e={};dojo.forEach(d,function(d){if(d){var f=d.toLowerCase();a[f]=!0;e[f]=c.getValue(b,d)}});return e},this);this.identIndex=this.identIndex||{};b=function(){var a={};return dojo.map(b,function(b){var c=this.getIdentity(b),e=this.identIndex[c];e&&e.DELETED&&
delete e.DELETED;if(a[c]||d.supplementalOnly&&!e)return null;a[c]=!0;return this.identIndex[c]=dojo.mixin(e||{},b)},this)}.call(this);b=dojo.filter(b,function(a){return a});e.keys(a);var f=this._addFacets(e.keys(a)),g=j.filter(this.facets,function(b){return b in a});this.facetIndexes=this.facetIndexes||{itemCount:0,bucketCount:0,byName:{}};dojo.forEach(f,function(a){this.facetIndexes.byName[a]||(this.facetIndexes.bucketCount++,this.facetIndexes.byName[a]={itemCount:0,bucketCount:0,byValue:{}})},this);
if(g.length){var h={};dojo.forEach(g,function(a){h[a]={}});dojo.forEach(b,function(a){this.facetIndexes.itemCount++;dojo.forEach(g,function(b){var c=this.getValue(a,b,void 0);"undefined"!=typeof c&&(h[b][this.getIdentity(a)]=1,this._indexItem(b,c,a))},this)},this);dojo.forEach(g,function(a){dojo.forEach(e.values(this.identIndex),function(b){h[a][this.getIdentity(b)]||this._indexItem(a,this._noDataValue,b)},this)},this)}},_indexItem:function(d,c,b){var d=this.facetIndexes.byName[d],a=d.byValue[c];
a||(a=d.byValue[c]={itemCount:0,items:[]},d.bucketCount++);a.itemCount++;d.itemCount++;a.items.push(b)},_addFacets:function(d){var c=this.facets||[],b={};this.facets=dojo.filter(c.concat(d),function(a){var c=this._filterFacet(a)&&!b[a];b[a]=!0;return c},this);return this.facets.slice(c.length)},getCount:function(){return this._fetchCount},getFacetCounts:function(d){var c=this._fetchFacetCounts[d]||this._fetchFacetCounts.__other__;return c?c[d]:void 0},getFacetNames:function(){return this.facets},
getFacetValues:function(d){d=this.facetIndexes.byName[d];return!d?[]:e.keys(d.byValue)},getFacetStats:function(d){var c=this.facetIndexes.byName[d];if(!c)return{};var b={};dojo.forEach(["itemCount","bucketCount","avgBucketSize"],function(a){b[a]=c[a]});return b},getValue:function(d,c,b){d=d[c];return"undefined"==typeof d?b:d},getValues:function(d,c){var b=[d[c]];return"undefined"==typeof b[0]?[]:b},getAttributes:function(d){return e.keys(d)},hasAttribute:function(d,c){return d.hasOwnProperty(c)},
containsValue:function(d,c,b){return d[c]==b},isItem:function(d){return"object"==typeof d&&"string"==typeof d.label},isItemLoaded:function(){return this.ready},loadItem:function(){},getItem:function(d){return this.ready?this.identIndex[d]:null},_fetchItems:function(d,c,b){if(this.ready){var a=dojo.clone(d.query||{});dojo.forEach(e.keys(a),function(b){dojo.isArray(a[b])||(a[b]=[a[b]])},this);b=f.objectFingerprint(a);b==this.previousQueryFingerprint?b=this.previousResults:(this.previousQueryFingerprint=
b,this.previousResults=b=this._doQuery(a));c(b,d);this.onFetchSuccess()}else this.onReady(dojo.hitch(this,"_fetchItems",d,c,b))},_doQuery:function(d){var c=this._compileTextFilter(d.text);delete d.text;var b=[],a=[];if(c)a.push(this._filterDeleted(j.filter(e.values(this.identIndex),c)).sort(dojo.hitch(this,"_itemSortFunc"))),a[0].facetName="Contains text";a.push.apply(a,dojo.map(e.keys(d),function(a){var b=d[a],c=[];if(!this.facetIndexes.byName[a])throw console.error("No facet defined with name '"+
a+"'."),"No facet defined with name '"+a+"', faceted search failed.";dojo.forEach(b,function(b){c.push.apply(c,this._filterDeleted((this.facetIndexes.byName[a].byValue[b]||{}).items||[]))},this);c.facetName=a;c.sort(dojo.hitch(this,"_itemSortFunc"));return c},this));dojo.forEach(a,function(a){a.myOffset=0;a.topItem=function(){return this[this.myOffset]};a.shift=function(){this.myOffset++}});var f={};if(a.length){var g=0;for(dojo.forEach(a,function(a){g+=a.length});g;){var h={},i=[],l,m;dojo.forEach(a,
function(a){l=(m=a.topItem())?this.getIdentity(m):"(at end of set)";h[l]?h[l].push(a):(h[l]=[a],i.push(l))},this);1==i.length?b.push(m):(i.sort(),"(at end of set)"==i[0]?(l=i[1],c=0):(l=i[0],c=1),l="(at end of set)"==i[0]?i[1]:i[0],2==i.length&&h[l].length==a.length-1&&(c=h[i[c]][0],this._countItem(f,h[l][0].topItem(),c.facetName)));dojo.forEach(h[l],function(a){a.shift();g--})}}else b=this._filterDeleted(e.values(this.identIndex));dojo.forEach(e.keys(f).concat(["__other__"]),function(a){dojo.forEach(b,
function(b){this._countItem(f,b,a)},this)},this);1==a.length&&dojo.forEach(e.values(this.identIndex),function(b){this._countItem(f,b,a[0].facetName)},this);this._fetchFacetCounts=f;this._fetchCount=b.length;return b},_countItem:function(d,c,b){var a=d[b];a||(a=d[b]={});dojo.forEach("__other__"==b?this.facets:[b],function(b){var d=this.getValue(c,b,this._noDataValue),e=a[b];e||(e=a[b]={},e[d]=0);e[d]=(e[d]||0)+1},this)},onReady:function(d,c){d=d||dojo.global;c=dojo.hitch(d,c);this.ready?c():this.onReadyFuncs.push(c)},
_onReady:function(){dojo.forEach(this.onReadyFuncs||[],function(d){d.call()})},onFetchSuccess:function(){},onNew:function(){},onDelete:function(){},onSet:function(){},_filterDeleted:function(d){return j.filter(d,function(c){return!c.DELETED})},_compileTextFilter:function(d){if(void 0===d)return null;for(var c=/\s*["']([^"']+)["']\s*/g,b=/(\S+)/g,a=function(){var a=c.exec(d)||b.exec(d);if(a){var a=a[1],e=Math.max(c.lastIndex,b.lastIndex);b.lastIndex=c.lastIndex=e}return a},e=[],f;f=a();)f=dojo.regexp.escapeString(f,
"*?").replace(/\*/g,".+").replace(/ /g,"\\s+").replace(/\?/g,"."),e.push(RegExp(f,"i"));return dojo.hitch(this,function(a){return dojo.some(this.facets,function(b){var c=this.getValue(a,b);return j.every(e,function(a){return a.test(c)})},this)})},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0,"dojo.data.api.Notification":!0}},close:function(){},getLabel:function(d){return this.getValue(d,"key",void 0)},getLabelAttributes:function(){return["key"]},getIdentityAttributes:function(){return["label"]},
getIdentity:function(d){return this.getValue(d,"label",void 0)},fetchItemByIdentity:function(d){return this.identIndex[d]}});dojo.extend(h,g);return h})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(h,j,g){var i={};h.setObject("dojo.data.util.simpleFetch",i);i.errorHandler=function(f,e){e.onError&&e.onError.call(e.scope||j.global,f,e)};i.fetchHandler=function(f,e){var d=e.abort||null,c=!1,b=e.start?e.start:0,a=e.count&&Infinity!==e.count?
b+e.count:f.length;e.abort=function(){c=!0;d&&d.call(e)};var h=e.scope||j.global;if(!e.store)e.store=this;e.onBegin&&e.onBegin.call(h,f.length,e);e.sort&&f.sort(g.createSortFunction(e.sort,this));if(e.onItem)for(var i=b;i<f.length&&i<a;++i){var q=f[i];c||e.onItem.call(h,q,e)}e.onComplete&&!c&&(i=null,e.onItem||(i=f.slice(b,a)),e.onComplete.call(h,i,e))};i.fetch=function(f){f=f||{};if(!f.store)f.store=this;this._fetchItems(f,h.hitch(this,"fetchHandler"),h.hitch(this,"errorHandler"));return f};return i})},
"xstyle/load-css":function(){define([],function(){function h(a,b){var c=a[e]("link");c.rel="stylesheet";c.type="text/css";if(b)c.href=b;return c}function j(a){for(var a=a.split("!"),b,c=1;b=a[c++];)b=b.split("=",2),a[b[0]]=2==b.length?b[1]:!0;return a}function g(b){if(a["dom-create-style-element"])return c=document.createElement("style"),c.setAttribute("type","text/css"),c.appendChild(document.createTextNode(b)),k.insertBefore(c,k.firstChild),c;var c=document.createStyleSheet();c.cssText=b;return c.owningElement}
var i="onreadystatechange",f="onload",e="createElement",d=!1,c=document,b="undefined"==typeof _css_cache?{}:_css_cache,a={"event-link-onload":null===document.createElement("link").onload&&!navigator.userAgent.match(/AppleWebKit/),"dom-create-style-element":!document.createStyleSheet},k=c.head||(c.head=c.getElementsByTagName("head")[0]);if(!a["bundled-css"])var n=function(b,c){function e(a){if(a=a.sheet||a.styleSheet)for(var b=document.styleSheets,c=b.length;0<c;c--)if(b[c-1]==a)return!0}function g(a,
b){e(a.link)?(h(a),b()):d||setTimeout(function(){g(a,b)},a.wait)}function h(a){a=a.link;a[i]=a[f]=null}function j(){k||(k=!0,c())}if(require.onError)require.onError=function(a){return function(){d=!0;a.apply(this,arguments)}}(require.onError);var k;(function(b,c){var d=b.link;d[i]=d[f]=function(){if(!d.readyState||"complete"==d.readyState)a["event-link-onload"]=!0,h(b),c()}})(b,j);a["event-link-onload"]||g(b,j)};return function(a,d,e){for(var f=a.split(","),i=f.length,p=function(){0==--i&&d(t.sheet||
t.styleSheet)},u=0;u<f.length;u++){var a=f[u],s=b[a];if(s)return t=g(s),p();var a=j(a),s=a.shift(),s=s.lastIndexOf(".")<=s.lastIndexOf("/")?s+".css":s,t=h(c),a="nowait"in a?"false"!=a.nowait:!(!e||!e.cssDeferLoad);n({link:t,url:s,wait:e&&e.cssWatchPeriod||25},p);a&&d(t);t.href=s;k.appendChild(t)}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang,dojo/_base/sniff,dojo/_base/window,dojo/dom,dojo/_base/declare,dojo/_base/array,dojo/dom-geometry,dojo/dom-attr,dojo/_base/Color,./_base,./shape,./path".split(","),
function(h,j,g,i,f,e,d,c,b,a,k,n){function q(a,b){return g.doc.createElementNS?g.doc.createElementNS(a,b):g.doc.createElement(b)}function o(a){return l.useSvgWeb?g.doc.createTextNode(a,!0):g.doc.createTextNode(a)}var l=a.svg={};l.useSvgWeb="undefined"!=typeof window.svgweb;var m=navigator.userAgent,r=j("ios"),p=j("android"),u=j("chrome")||p&&4<=p?"auto":"optimizeLegibility";l.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};l.getRef=function(a){return!a||"none"==a?null:
a.match(/^url\(#.+\)$/)?i.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?i.byId(a.slice(1)):null};l.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var s=0;l.Shape=f("dojox.gfx.svg.Shape",k.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=l.getRef(a))&&a.parentNode.removeChild(a)}if(this.clip&&
(a=this.rawNode.getAttribute("clip-path")))(a=i.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);this.rawNode=null;k.Shape.prototype.destroy.apply(this,arguments)},setFill:function(b){if(!b)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var c,d=function(a){this.setAttribute(a,c[a].toFixed(8))};if("object"==typeof b&&"type"in b){switch(b.type){case "linear":c=a.makeParameters(a.defaultLinearGradient,b);b=this._setFillObject(c,
"linearGradient");e.forEach(["x1","y1","x2","y2"],d,b);break;case "radial":c=a.makeParameters(a.defaultRadialGradient,b);b=this._setFillObject(c,"radialGradient");e.forEach(["cx","cy","r"],d,b);break;case "pattern":c=a.makeParameters(a.defaultPattern,b),b=this._setFillObject(c,"pattern"),e.forEach(["x","y","width","height"],d,b)}this.fillStyle=c;return this}this.fillStyle=c=a.normalizeColor(b);this.rawNode.setAttribute("fill",c.toCss());this.rawNode.setAttribute("fill-opacity",c.a);this.rawNode.setAttribute("fill-rule",
"evenodd");return this},setStroke:function(c){var d=this.rawNode;if(!c)return this.strokeStyle=null,d.setAttribute("stroke","none"),d.setAttribute("stroke-opacity",0),this;if("string"==typeof c||h.isArray(c)||c instanceof b)c={color:c};c=this.strokeStyle=a.makeParameters(a.defaultStroke,c);c.color=a.normalizeColor(c.color);if(c){d.setAttribute("stroke",c.color.toCss());d.setAttribute("stroke-opacity",c.color.a);d.setAttribute("stroke-width",c.width);d.setAttribute("stroke-linecap",c.cap);"number"==
typeof c.join?(d.setAttribute("stroke-linejoin","miter"),d.setAttribute("stroke-miterlimit",c.join)):d.setAttribute("stroke-linejoin",c.join);var e=c.style.toLowerCase();e in l.dasharray&&(e=l.dasharray[e]);if(e instanceof Array){for(var e=h._toArray(e),f=0;f<e.length;++f)e[f]*=c.width;if("butt"!=c.cap){for(f=0;f<e.length;f+=2)e[f]-=c.width,1>e[f]&&(e[f]=1);for(f=1;f<e.length;f+=2)e[f]+=c.width}e=e.join(",")}d.setAttribute("stroke-dasharray",e);d.setAttribute("dojoGfxStrokeStyle",c.style)}return this},
_getParentSurface:function(){for(var b=this.parent;b&&!(b instanceof a.Surface);b=b.parent);return b},_setFillObject:function(b,c){var d=l.xmlns.svg;this.fillStyle=b;var e=this._getParentSurface().defNode,f=this.rawNode.getAttribute("fill");if(f=l.getRef(f))if(f.tagName.toLowerCase()!=c.toLowerCase()){var g=f.id;f.parentNode.removeChild(f);f=q(d,c);f.setAttribute("id",g);e.appendChild(f)}else for(;f.childNodes.length;)f.removeChild(f.lastChild);else f=q(d,c),f.setAttribute("id",a._base._getUniqueId()),
e.appendChild(f);if("pattern"==c)f.setAttribute("patternUnits","userSpaceOnUse"),d=q(d,"image"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",b.width.toFixed(8)),d.setAttribute("height",b.height.toFixed(8)),d.setAttributeNS?d.setAttributeNS(l.xmlns.xlink,"xlink:href",b.src):d.setAttribute("xlink:href",b.src),f.appendChild(d);else{f.setAttribute("gradientUnits","userSpaceOnUse");for(e=0;e<b.colors.length;++e){var g=b.colors[e],h=q(d,"stop"),i=g.color=a.normalizeColor(g.color);
h.setAttribute("offset",g.offset.toFixed(8));h.setAttribute("stop-color",i.toCss());h.setAttribute("stop-opacity",i.a);f.appendChild(h)}}this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return f},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+
","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this.getUID()},setShape:function(b){this.shape=a.makeParameters(this.shape,
b);for(var c in this.shape)"type"!=c&&this.rawNode.setAttribute(c,this.shape[c]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;if("polyline"===b)a=h.clone(a),
a.points=a.points.join(",");var d,e=c.get(this.rawNode,"clip-path");e&&(d=i.byId(e.match(/gfx_clip[\d]+/)[0]))&&d.removeChild(d.childNodes[0]);a?(d?(b=q(l.xmlns.svg,b),d.appendChild(b)):(e="gfx_clip"+ ++s,this.rawNode.setAttribute("clip-path","url(#"+e+")"),d=q(l.xmlns.svg,"clipPath"),b=q(l.xmlns.svg,b),d.appendChild(b),this.rawNode.parentNode.appendChild(d),c.set(d,"id",e)),c.set(b,a)):(this.rawNode.removeAttribute("clip-path"),d&&d.parentNode.removeChild(d));return this},_removeClipNode:function(){var a,
b=c.get(this.rawNode,"clip-path");b&&(a=i.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});l.Group=f("dojox.gfx.svg.Group",l.Shape,{constructor:function(){k.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;this.rawNode.__gfxObject__=this.getUID()},destroy:function(){this.clear(!0);l.Shape.prototype.destroy.apply(this,arguments)}});l.Group.nodeType="g";l.Rect=f("dojox.gfx.svg.Rect",[l.Shape,k.Rect],{setShape:function(b){this.shape=a.makeParameters(this.shape,
b);this.bbox=null;for(var c in this.shape)"type"!=c&&"r"!=c&&this.rawNode.setAttribute(c,this.shape[c]);null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});l.Rect.nodeType="rect";l.Ellipse=f("dojox.gfx.svg.Ellipse",[l.Shape,k.Ellipse],{});l.Ellipse.nodeType="ellipse";l.Circle=f("dojox.gfx.svg.Circle",[l.Shape,k.Circle],{});l.Circle.nodeType="circle";l.Line=f("dojox.gfx.svg.Line",[l.Shape,k.Line],{});l.Line.nodeType="line";
l.Polyline=f("dojox.gfx.svg.Polyline",[l.Shape,k.Polyline],{setShape:function(b,c){b&&b instanceof Array?(this.shape=a.makeParameters(this.shape,{points:b}),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=a.makeParameters(this.shape,b);this.bbox=null;this._normalizePoints();for(var d=[],e=this.shape.points,f=0;f<e.length;++f)d.push(e[f].x.toFixed(8),e[f].y.toFixed(8));this.rawNode.setAttribute("points",d.join(" "));return this}});l.Polyline.nodeType="polyline";
l.Image=f("dojox.gfx.svg.Image",[l.Shape,k.Image],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,c;for(c in this.shape)"type"!=c&&"src"!=c&&b.setAttribute(c,this.shape[c]);b.setAttribute("preserveAspectRatio","none");b.setAttributeNS?b.setAttributeNS(l.xmlns.xlink,"xlink:href",this.shape.src):b.setAttribute("xlink:href",this.shape.src);b.__gfxObject__=this.getUID();return this}});l.Image.nodeType="image";l.Text=f("dojox.gfx.svg.Text",[l.Shape,k.Text],
{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,c=this.shape;b.setAttribute("x",c.x);b.setAttribute("y",c.y);b.setAttribute("text-anchor",c.align);b.setAttribute("text-decoration",c.decoration);b.setAttribute("rotate",c.rotated?90:0);b.setAttribute("kerning",c.kerning?"auto":0);b.setAttribute("text-rendering",u);b.firstChild?b.firstChild.nodeValue=c.text:b.appendChild(o(c.text));return this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,
a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;b.appendChild(a);if(""!=d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c}});l.Text.nodeType="text";l.Path=f("dojox.gfx.svg.Path",[l.Shape,n.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):
this.rawNode.removeAttribute("d");return this}});l.Path.nodeType="path";l.TextPath=f("dojox.gfx.svg.TextPath",[l.Shape,n.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var b=this.rawNode;if(!b.firstChild){var c=q(l.xmlns.svg,"textPath"),d=o("");c.appendChild(d);b.appendChild(c)}c=(c=b.firstChild.getAttributeNS(l.xmlns.xlink,
"href"))&&l.getRef(c);if(!c&&(d=this._getParentSurface())){var d=d.defNode,c=q(l.xmlns.svg,"path"),e=a._base._getUniqueId();c.setAttribute("id",e);d.appendChild(c);b.firstChild.setAttributeNS?b.firstChild.setAttributeNS(l.xmlns.xlink,"xlink:href","#"+e):b.firstChild.setAttribute("xlink:href","#"+e)}c&&c.setAttribute("d",this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=q(l.xmlns.svg,"textPath"),c=o("");b.appendChild(c);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline",
"middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex");a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});l.TextPath.nodeType=
"text";var t=534<function(){var a=/WebKit\/(\d*)/.exec(m);return a?a[1]:0}();l.Surface=f("dojox.gfx.svg.Surface",k.Surface,{constructor:function(){k.Container._init.call(this)},destroy:function(){k.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);if(t)this.rawNode.style.width=a,this.rawNode.style.height=b;return this},getDimensions:function(){return this.rawNode?
{width:a.normalizedLength(this.rawNode.getAttribute("width")),height:a.normalizedLength(this.rawNode.getAttribute("height"))}:null}});l.createSurface=function(a,b,c){var d=new l.Surface;d.rawNode=q(l.xmlns.svg,"svg");d.rawNode.setAttribute("overflow","hidden");b&&d.rawNode.setAttribute("width",b);c&&d.rawNode.setAttribute("height",c);b=q(l.xmlns.svg,"defs");d.rawNode.appendChild(b);d.defNode=b;d._parent=i.byId(a);d._parent.appendChild(d.rawNode);return d};var j={_setFont:function(){var a=this.fontStyle;
this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}},v=k.Container,f={openBatch:function(){this.fragment=l.useSvgWeb?g.doc.createDocumentFragment(!0):g.doc.createDocumentFragment()},closeBatch:function(){this.fragment&&(this.rawNode.appendChild(this.fragment),delete this.fragment)},add:function(a){this!=a.getParent()&&
(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),v.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),v.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=
this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return v.clear.apply(this,arguments)},getBoundingBox:v.getBoundingBox,_moveChildToFront:v._moveChildToFront,_moveChildToBack:v._moveChildToBack},n={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=q(l.xmlns.svg,a.nodeType);c.setRawNode(d);c.setShape(b);this.add(c);return c}};h.extend(l.Text,j);h.extend(l.TextPath,j);h.extend(l.Group,f);h.extend(l.Group,k.Creator);h.extend(l.Group,n);h.extend(l.Surface,
f);h.extend(l.Surface,k.Creator);h.extend(l.Surface,n);l.fixTarget=function(a){if(!a.gfxTarget)a.gfxTarget=r&&a.target.wholeText?k.byId(a.target.parentElement.__gfxObject__):k.byId(a.target.__gfxObject__);return!0};if(l.useSvgWeb)l.createSurface=function(b,c,e){var f=new l.Surface;if(!c||!e)var g=d.position(b),c=c||g.w,e=e||g.h;var b=i.byId(b),g=b.id?b.id+"_svgweb":a._base._getUniqueId(),h=q(l.xmlns.svg,"svg");h.id=g;h.setAttribute("width",c);h.setAttribute("height",e);svgweb.appendChild(h,b);h.addEventListener("SVGLoad",
function(){f.rawNode=this;f.isLoaded=!0;var a=q(l.xmlns.svg,"defs");f.rawNode.appendChild(a);f.defNode=a;if(f.onLoad)f.onLoad(f)},!1);f.isLoaded=!1;return f},l.Surface.extend({destroy:function(){var a=this.rawNode;svgweb.removeChild(a,a.parentNode)}}),j={connect:function(a,b,c){"on"===a.substring(0,2)&&(a=a.substring(2));c=2==arguments.length?b:h.hitch(b,c);this.getEventSource().addEventListener(a,c,!1);return[this,a,c]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);
delete a[0]}},h.extend(l.Shape,j),h.extend(l.Surface,j);return l})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(h,j,g,i,f){f=g("dojox.gfx.path.Path",f.Shape,{constructor:function(e){this.shape=j.clone(h.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=e;this.segmented=!1},setAbsoluteMode:function(e){this._confirmSegmented();this.absolute="string"==typeof e?"absolute"==e:e;return this},getAbsoluteMode:function(){this._confirmSegmented();
return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var e=this.bbox,d=this._getRealMatrix();this.bbox=null;for(var c=0,b=this.segments.length;c<b;++c)this._updateWithSegment(this.segments[c],d);d=this.bbox;this.bbox=e;return this.tbbox=d?[{x:d.l,y:d.t},{x:d.r,y:d.t},{x:d.r,
y:d.b},{x:d.l,y:d.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(e,d,c){if(c)d=i.multiplyPoint(c,e,d),e=d.x,d=d.y;if(this.bbox&&"l"in this.bbox){if(this.bbox.l>e)this.bbox.l=e;if(this.bbox.r<e)this.bbox.r=e;if(this.bbox.t>d)this.bbox.t=d;if(this.bbox.b<d)this.bbox.b=d}else this.bbox={l:e,b:d,r:e,t:d}},_updateWithSegment:function(e,d){var c=e.args,b=
c.length,a;switch(e.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(a=0;a<b;a+=2)this._updateBBox(c[a],c[a+1],d);this.last.x=c[b-2];this.last.y=c[b-1];this.absolute=!0;break;case "H":for(a=0;a<b;++a)this._updateBBox(c[a],this.last.y,d);this.last.x=c[b-1];this.absolute=!0;break;case "V":for(a=0;a<b;++a)this._updateBBox(this.last.x,c[a],d);this.last.y=c[b-1];this.absolute=!0;break;case "m":a=0;if(!("x"in this.last))this._updateBBox(this.last.x=c[0],this.last.y=c[1],d),a=2;for(;a<b;a+=
2)this._updateBBox(this.last.x+=c[a],this.last.y+=c[a+1],d);this.absolute=!1;break;case "l":case "t":for(a=0;a<b;a+=2)this._updateBBox(this.last.x+=c[a],this.last.y+=c[a+1],d);this.absolute=!1;break;case "h":for(a=0;a<b;++a)this._updateBBox(this.last.x+=c[a],this.last.y,d);this.absolute=!1;break;case "v":for(a=0;a<b;++a)this._updateBBox(this.last.x,this.last.y+=c[a],d);this.absolute=!1;break;case "c":for(a=0;a<b;a+=6)this._updateBBox(this.last.x+c[a],this.last.y+c[a+1],d),this._updateBBox(this.last.x+
c[a+2],this.last.y+c[a+3],d),this._updateBBox(this.last.x+=c[a+4],this.last.y+=c[a+5],d);this.absolute=!1;break;case "s":case "q":for(a=0;a<b;a+=4)this._updateBBox(this.last.x+c[a],this.last.y+c[a+1],d),this._updateBBox(this.last.x+=c[a+2],this.last.y+=c[a+3],d);this.absolute=!1;break;case "A":for(a=0;a<b;a+=7)this._updateBBox(c[a+5],c[a+6],d);this.last.x=c[b-2];this.last.y=c[b-1];this.absolute=!0;break;case "a":for(a=0;a<b;a+=7)this._updateBBox(this.last.x+=c[a+5],this.last.y+=c[a+6],d);this.absolute=
!1}var f=[e.action];for(a=0;a<b;++a)f.push(h.formatNumber(c[a],!0));if("string"==typeof this.shape.path)this.shape.path+=f.join("");else for(a=0,b=f.length;a<b;++a)this.shape.path.push(f[a])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(e,d){this.tbbox=null;var c=this._validSegments[e.toLowerCase()];"number"==typeof c&&(c?d.length>=c&&(c={action:e,args:d.slice(0,d.length-d.length%c)},this.segments.push(c),this._updateWithSegment(c)):(c={action:e,args:[]},this.segments.push(c),
this._updateWithSegment(c)))},_collectArgs:function(e,d){for(var c=0;c<d.length;++c){var b=d[c];"boolean"==typeof b?e.push(b?1:0):"number"==typeof b?e.push(b):b instanceof Array?this._collectArgs(e,b):"x"in b&&"y"in b&&e.push(b.x,b.y)}},moveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"M":"m",e);return this},lineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"L":"l",e);
return this},hLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"H":"h",e);return this},vLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"V":"v",e);return this},curveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"C":"c",e);return this},smoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,
arguments);this._pushSegment(this.absolute?"S":"s",e);return this},qCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"Q":"q",e);return this},qSmoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"T":"t",e);return this},arcTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"A":"a",e);return this},closePath:function(){this._confirmSegmented();
this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var e=this.shape.path;this.shape.path=[];this._setPath(e);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(e){e=j.isArray(e)?e:e.match(h.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(e){for(var d="",c=[],b=e.length,a=0;a<b;++a){var f=e[a],g=parseFloat(f);isNaN(g)?(d&&this._pushSegment(d,c),c=[],d=f):c.push(g)}this._pushSegment(d,c)}},setShape:function(e){this.inherited(arguments,
["string"==typeof e?{path:e}:e]);this.segmented=!1;this.segments=[];h.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});g=g("dojox.gfx.path.TextPath",f,{constructor:function(){if(!("text"in this))this.text=j.clone(h.defaultTextPath);if(!("fontStyle"in this))this.fontStyle=j.clone(h.defaultFont)},getText:function(){return this.text},setText:function(e){this.text=h.makeParameters(this.text,"string"==typeof e?{text:e}:e);this._setText();return this},getFont:function(){return this.fontStyle},
setFont:function(e){this.fontStyle="string"==typeof e?h.splitFontString(e):h.makeParameters(h.defaultFont,e);this._setFont();return this}});return h.path={Path:f,TextPath:g}})},"dojox/data/CsvStore":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/xhr,dojo/_base/kernel,dojo/data/util/filter,dojo/data/util/simpleFetch".split(","),function(h,j,g,i,f,e){j=j("dojox.data.CsvStore",null,{constructor:function(d){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=
[];this._loadFinished=!1;if(d.url)this.url=d.url;this._csvData=d.data;if(d.label)this.label=d.label;else if(""===this.label)this.label=void 0;this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._loadInProgress=!1;this._queuedFetches=[];this.identifier=d.identifier;""===this.identifier?delete this.identifier:this._idMap={};if("separator"in d)this.separator=d.separator;if("urlPreventCache"in d)this.urlPreventCache=d.urlPreventCache?
!0:!1},url:"",label:"",identifier:"",separator:",",urlPreventCache:!1,_assertIsItem:function(d){if(!this.isItem(d))throw Error(this.declaredClass+": a function was passed an item argument that was not an item");},_getIndex:function(d){d=this.getIdentity(d);this.identifier&&(d=this._idMap[d]);return d},getValue:function(d,c,b){this._assertIsItem(d);var a=b;if("string"===typeof c)c=this._attributeIndexes[c],null!=c&&(a=this._dataArray[this._getIndex(d)][c]||b);else throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");
return a},getValues:function(d,c){var b=this.getValue(d,c);return b?[b]:[]},getAttributes:function(d){this._assertIsItem(d);for(var c=[],d=this._dataArray[this._getIndex(d)],b=0;b<d.length;b++)""!==d[b]&&c.push(this._attributes[b]);return c},hasAttribute:function(d,c){this._assertIsItem(d);if("string"===typeof c){var b=this._attributeIndexes[c],a=this._dataArray[this._getIndex(d)];return"undefined"!==typeof b&&b<a.length&&""!==a[b]}throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");
},containsValue:function(d,c,b){var a=void 0;"string"===typeof b&&(a=f.patternToRegExp(b,!1));return this._containsValue(d,c,b,a)},_containsValue:function(d,c,b,a){d=this.getValues(d,c);for(c=0;c<d.length;++c){var e=d[c];if("string"===typeof e&&a)return null!==e.match(a);if(b===e)return!0}return!1},isItem:function(d){if(d&&d[this._storeProp]===this)if(d=d[this._idProp],this.identifier){if(this._dataArray[this._idMap[d]])return!0}else if(0<=d&&d<this._dataArray.length)return!0;return!1},isItemLoaded:function(d){return this.isItem(d)},
loadItem:function(){},getFeatures:function(){return this._features},getLabel:function(d){if(this.label&&this.isItem(d))return this.getValue(d,this.label)},getLabelAttributes:function(){return this.label?[this.label]:null},_fetchItems:function(d,c,b){var a=this,e=function(b,d){var e=null;if(b.query){var g,h,e=[],i=b.queryOptions?b.queryOptions.ignoreCase:!1,j={};for(g in b.query)h=b.query[g],"string"===typeof h&&(j[g]=f.patternToRegExp(h,i));for(i=0;i<d.length;++i){var k=!0,l=d[i];for(g in b.query)h=
b.query[g],a._containsValue(l,g,h,j[g])||(k=!1);k&&e.push(l)}}else e=d.slice(0,d.length);c(e,b)};if(this._loadFinished)e(d,this._arrayOfAllItems);else if(""!==this.url)if(this._loadInProgress)this._queuedFetches.push({args:d,filter:e});else{this._loadInProgress=!0;var h=g.get({url:a.url,handleAs:"text",preventCache:a.urlPreventCache});h.addCallback(function(c){try{a._processData(c),e(d,a._arrayOfAllItems),a._handleQueuedFetches()}catch(f){b(f,d)}});h.addErrback(function(c){a._loadInProgress=!1;if(b)b(c,
d);else throw c;});var i=null;if(d.abort)i=d.abort;d.abort=function(){h&&-1===h.fired&&h.cancel();i&&i.call(d)}}else if(this._csvData)try{this._processData(this._csvData),this._csvData=null,e(d,this._arrayOfAllItems)}catch(j){b(j,d)}else{var l=Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");if(b)b(l,d);else throw l;}},close:function(){},_getArrayOfArraysFromCsvFileContents:function(d){if(h.isString(d)){for(var c=RegExp("^\\s+","g"),b=RegExp("\\s+$",
"g"),a=RegExp('""',"g"),e=[],f=this._splitLines(d),d=0;d<f.length;++d){var g=f[d];if(0<g.length){for(var g=g.split(this.separator),i=0;i<g.length;){var j=g[i].replace(c,""),m=j.replace(b,""),r=m.charAt(0),p=m.charAt(m.length-1),u=m.charAt(m.length-2),s=m.charAt(m.length-3);if(2===m.length&&'""'==m)g[i]="";else if('"'==r&&('"'!=p||'"'==p&&'"'==u&&'"'!=s)){if(i+1===g.length)return;g[i]=j+this.separator+g[i+1];g.splice(i+1,1)}else'"'==r&&'"'==p&&(m=m.slice(1,m.length-1),m=m.replace(a,'"')),g[i]=m,i+=
1}e.push(g)}}this._attributes=e.shift();for(d=0;d<this._attributes.length;d++)this._attributeIndexes[this._attributes[d]]=d;this._dataArray=e}},_splitLines:function(d){var c=[],b,a="",e=!1;for(b=0;b<d.length;b++){var f=d.charAt(b);switch(f){case '"':e=!e;a+=f;break;case "\r":e?a+=f:(c.push(a),a="",b<d.length-1&&"\n"==d.charAt(b+1)&&b++);break;case "\n":e?a+=f:(c.push(a),a="");break;default:a+=f}}""!==a&&c.push(a);return c},_processData:function(d){this._getArrayOfArraysFromCsvFileContents(d);this._arrayOfAllItems=
[];if(this.identifier&&void 0===this._attributeIndexes[this.identifier])throw Error(this.declaredClass+": Identity specified is not a column header in the data set.");for(d=0;d<this._dataArray.length;d++){var c=d;this.identifier&&(c=this._dataArray[d][this._attributeIndexes[this.identifier]],this._idMap[c]=d);this._arrayOfAllItems.push(this._createItemFromIdentity(c))}this._loadFinished=!0;this._loadInProgress=!1},_createItemFromIdentity:function(d){var c={};c[this._storeProp]=this;c[this._idProp]=
d;return c},getIdentity:function(d){return this.isItem(d)?d[this._idProp]:null},fetchItemByIdentity:function(d){var c,b=d.scope?d.scope:i.global;if(this._loadFinished)c=this._createItemFromIdentity(d.identity),this.isItem(c)||(c=null),d.onItem&&d.onItem.call(b,c);else{var a=this;if(""!==this.url)this._loadInProgress?this._queuedFetches.push({args:d}):(this._loadInProgress=!0,c=g.get({url:a.url,handleAs:"text"}),c.addCallback(function(c){try{a._processData(c);var e=a._createItemFromIdentity(d.identity);
a.isItem(e)||(e=null);d.onItem&&d.onItem.call(b,e);a._handleQueuedFetches()}catch(f){d.onError&&d.onError.call(b,f)}}),c.addErrback(function(a){this._loadInProgress=!1;d.onError&&d.onError.call(b,a)}));else if(this._csvData)try{a._processData(a._csvData),a._csvData=null,c=a._createItemFromIdentity(d.identity),a.isItem(c)||(c=null),d.onItem&&d.onItem.call(b,c)}catch(e){d.onError&&d.onError.call(b,e)}}},getIdentityAttributes:function(){return this.identifier?[this.identifier]:null},_handleQueuedFetches:function(){if(0<
this._queuedFetches.length){for(var d=0;d<this._queuedFetches.length;d++){var c=this._queuedFetches[d],b=c.filter,a=c.args;b?b(a,this._arrayOfAllItems):this.fetchItemByIdentity(c.args)}this._queuedFetches=[]}}});h.extend(j,e);return j})},"jszlib/main":function(){define(["jszlib/inflate"],function(h){return{inflate:h}})},"jszlib/inflate":function(){define(["./arrayCopy"],function(h){function j(){}function g(){this.was=[0]}function i(a,b,d){this.hufts=new Int32Array(3*c);this.window=new Uint8Array(d);
this.end=d;this.checkfn=b;this.mode=k;this.reset(a,null);this.index=this.table=this.left=0;this.blens=null;this.bb=new Int32Array(1);this.tb=new Int32Array(1);this.codes=new f;this.check=this.write=this.read=this.bitb=this.bitk=this.last=0;this.inftree=new e}function f(){}function e(){}function d(a,b,c,d){if(null==b)return 1;for(var e=a&65535,a=a>>16&65535,f;0<d;){f=d<t?d:t;for(d-=f;16<=f;)e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,
a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,f-=16;if(0!=f){do e+=b[c++]&255,a+=e;while(0!=--f)}e%=s;a%=s}return a<<16|e}var c=1440,b=["Z_OK: stream correct","Z_STREAM_END: end of stream","Z_NEED_DICT: stream not yet complete"];b[-1]="Z_ERRNO";b[-2]="Z_STREAM_ERROR";b[-3]="Z_DATA_ERROR";b[-4]="Z_MEM_ERROR";b[-5]="Z_BUF_ERROR: premature end of buffer";
b[-6]="Z_VERSION_ERROR";var a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],k=0,n=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,
7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,
0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,
8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,
0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,
8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,
0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,
195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],q=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,
89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,
8193,12289,16385,24577],r=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];j.prototype.inflateInit=function(a,b){a||(a=15);b&&(b=!1);this.istate=new g;return this.istate.inflateInit(this,b?-a:a)};j.prototype.inflate=function(a){return null==this.istate?-2:this.istate.inflate(this,a)};j.prototype.inflateEnd=function(){if(null==this.istate)return-2;var a=istate.inflateEnd(this);this.istate=null;return a};j.prototype.inflateSync=function(){return istate.inflateSync(this)};j.prototype.inflateSetDictionary=
function(a,b){return istate.inflateSetDictionary(this,a,b)};g.prototype.inflateReset=function(a){if(null==a||null==a.istate)return-2;a.total_in=a.total_out=0;a.msg=null;a.istate.mode=0!=a.istate.nowrap?7:0;a.istate.blocks.reset(a,null);return 0};g.prototype.inflateEnd=function(a){null!=this.blocks&&this.blocks.free(a);this.blocks=null;return 0};g.prototype.inflateInit=function(a,b){this.blocks=a.msg=null;0>b&&(b=-b);if(8>b||15<b)return this.inflateEnd(a),-2;this.wbits=b;a.istate.blocks=new i(a,0!=
a.istate.nowrap?null:this,1<<b);this.inflateReset(a);return 0};g.prototype.inflate=function(a,b){var c,d;if(null==a||null==a.istate||null==a.next_in)return-2;b=4==b?-5:0;for(c=-5;;)switch(a.istate.mode){case 0:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;if(8!=((a.istate.method=a.next_in[a.next_in_index++])&15)){a.istate.mode=13;a.msg="unknown compression method";a.istate.marker=5;break}if((a.istate.method>>4)+8>a.istate.wbits){a.istate.mode=13;a.msg="invalid window size";a.istate.marker=
5;break}a.istate.mode=1;case 1:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;d=a.next_in[a.next_in_index++]&255;if(0!=((a.istate.method<<8)+d)%31){a.istate.mode=13;a.msg="incorrect header check";a.istate.marker=5;break}if(0==(d&32)){a.istate.mode=7;break}a.istate.mode=2;case 2:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=3;case 3:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=
(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=4;case 4:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=5;case 5:if(0==a.avail_in)return c;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;a.adler=a.istate.need;a.istate.mode=6;return 2;case 6:return a.istate.mode=13,a.msg="need dictionary",a.istate.marker=0,-2;case 7:c=a.istate.blocks.proc(a,c);if(-3==c){a.istate.mode=13;a.istate.marker=
0;break}0==c&&(c=b);if(1!=c)return c;c=b;a.istate.blocks.reset(a,a.istate.was);if(0!=a.istate.nowrap){a.istate.mode=12;break}a.istate.mode=8;case 8:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=9;case 9:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=10;case 10:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=
(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=11;case 11:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;if(a.istate.was[0]!=a.istate.need){a.istate.mode=13;a.msg="incorrect data check";a.istate.marker=5;break}a.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}};g.prototype.inflateSetDictionary=function(a,b,c){var e=0,f=c;if(null==a||null==a.istate||6!=a.istate.mode)return-2;if(d(1,b,0,c)!=a.adler)return-3;a.adler=
d(0,null,0,0);f>=1<<a.istate.wbits&&(f=(1<<a.istate.wbits)-1,e=c-f);a.istate.blocks.set_dictionary(b,e,f);a.istate.mode=7;return 0};var p=[0,0,255,255];g.prototype.inflateSync=function(a){var b,c,d;if(null==a||null==a.istate)return-2;if(13!=a.istate.mode)a.istate.mode=13,a.istate.marker=0;if(0==(b=a.avail_in))return-5;c=a.next_in_index;for(d=a.istate.marker;0!=b&&4>d;)a.next_in[c]==p[d]?d++:d=0!=a.next_in[c]?0:4-d,c++,b--;a.total_in+=c-a.next_in_index;a.next_in_index=c;a.avail_in=b;a.istate.marker=
d;if(4!=d)return-3;b=a.total_in;c=a.total_out;this.inflateReset(a);a.total_in=b;a.total_out=c;a.istate.mode=7;return 0};g.prototype.inflateSyncPoint=function(a){return null==a||null==a.istate||null==a.istate.blocks?-2:a.istate.blocks.sync_point()};var u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];i.prototype.reset=function(a,b){if(b)b[0]=this.check;6==this.mode&&this.codes.free(a);this.mode=k;this.read=this.write=this.bitb=this.bitk=0;if(this.checkfn)this.check=d(0,null,0,0),a.adler=this.check};
i.prototype.proc=function(b,c){var d,e,f,g,i,j,l;g=b.next_in_index;i=b.avail_in;e=this.bitb;f=this.bitk;j=this.write;for(l=j<this.read?this.read-j-1:this.end-j;;)switch(this.mode){case k:for(;3>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}d=e&7;this.last=d&1;switch(d>>>1){case 0:e>>>=3;f-=3;d=f&7;e>>>=d;f-=d;this.mode=1;break;case 1:var m=new Int32Array(1),o=
new Int32Array(1),p=[],r=[];d=o;var s=p,t=r;m[0]=9;d[0]=5;s[0]=n;t[0]=q;this.codes.init(m[0],o[0],p[0],0,r[0],0,b);e>>>=3;f-=3;this.mode=6;break;case 2:e>>>=3;f-=3;this.mode=3;break;case 3:return e>>>=3,f-=3,this.mode=13,b.msg="invalid block type",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c)}break;case 1:for(;32>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=
g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}if((~e>>>16&65535)!=(e&65535))return this.mode=13,b.msg="invalid stored block lengths",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);this.left=e&65535;e=f=0;this.mode=0!=this.left?2:0!=this.last?7:k;break;case 2:if(0==i||0==l&&(j==end&&0!=read&&(j=0,l=j<this.read?this.read-j-1:this.end-j),0==l&&(this.write=j,c=this.inflate_flush(b,c),j=this.write,
l=j<this.read?this.read-j-1:this.end-j,j==this.end&&0!=this.read&&(j=0,l=j<this.read?this.read-j-1:this.end-j),0==l)))return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);c=0;d=this.left;d>i&&(d=i);d>l&&(d=l);h(b.next_in,g,this.window,j,d);g+=d;i-=d;j+=d;l-=d;if(0!=(this.left-=d))break;this.mode=0!=this.last?7:k;break;case 3:for(;14>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,
b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}this.table=d=e&16383;if(29<(d&31)||29<(d>>5&31))return this.mode=9,b.msg="too many length or distance symbols",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);d=258+(d&31)+(d>>5&31);if(null==this.blens||this.blens.length<d)this.blens=new Int32Array(d);else for(l=0;l<d;l++)this.blens[l]=0;e>>>=14;f-=14;this.index=0;this.mode=4;case 4:for(;this.index<
4+(this.table>>>10);){for(;3>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}this.blens[u[this.index++]]=e&7;e>>>=3;f-=3}for(;19>this.index;)this.blens[u[this.index++]]=0;this.bb[0]=7;d=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,b);if(0!=d){c=d;if(-3==c)this.blens=null,this.mode=9;this.bitb=e;this.bitk=f;b.avail_in=i;b.total_in+=g-b.next_in_index;
b.next_in_index=g;this.write=j;return this.inflate_flush(b,c)}this.index=0;this.mode=5;case 5:for(;;){d=this.table;if(!(this.index<258+(d&31)+(d>>5&31)))break;for(d=this.bb[0];f<d;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}d=this.hufts[3*(this.tb[0]+(e&a[d]))+1];o=this.hufts[3*(this.tb[0]+(e&a[d]))+2];if(16>o)e>>>=d,f-=d,this.blens[this.index++]=o;else{l=18==
o?7:o-14;for(m=18==o?11:3;f<d+l;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[g++]&255)<<f;f+=8}e>>>=d;f-=d;m+=e&a[l];e>>>=l;f-=l;l=this.index;d=this.table;if(l+m>258+(d&31)+(d>>5&31)||16==o&&1>l)return this.blens=null,this.mode=9,b.msg="invalid bit length repeat",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,
c);o=16==o?this.blens[l-1]:0;do this.blens[l++]=o;while(0!=--m);this.index=l}}this.tb[0]=-1;m=new Int32Array(1);o=new Int32Array(1);p=new Int32Array(1);r=new Int32Array(1);m[0]=9;o[0]=6;d=this.table;d=this.inftree.inflate_trees_dynamic(257+(d&31),1+(d>>5&31),this.blens,m,o,p,r,this.hufts,b);if(0!=d){if(-3==d)this.blens=null,this.mode=13;c=d;this.bitb=e;this.bitk=f;b.avail_in=i;b.total_in+=g-b.next_in_index;b.next_in_index=g;this.write=j;return this.inflate_flush(b,c)}this.codes.init(m[0],o[0],this.hufts,
p[0],this.hufts,r[0],b);this.mode=6;case 6:this.bitb=e;this.bitk=f;b.avail_in=i;b.total_in+=g-b.next_in_index;b.next_in_index=g;this.write=j;if(1!=(c=this.codes.proc(this,b,c)))return this.inflate_flush(b,c);c=0;this.codes.free(b);g=b.next_in_index;i=b.avail_in;e=this.bitb;f=this.bitk;j=this.write;l=j<this.read?this.read-j-1:this.end-j;if(0==this.last){this.mode=k;break}this.mode=7;case 7:this.write=j;c=this.inflate_flush(b,c);j=this.write;if(this.read!=this.write)return this.bitb=e,this.bitk=f,b.avail_in=
i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);this.mode=12;case 8:return c=1,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);case 9:return c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,c);default:return c=-2,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=g-b.next_in_index,b.next_in_index=g,this.write=j,this.inflate_flush(b,
c)}};i.prototype.free=function(a){this.reset(a,null);this.hufts=this.window=null};i.prototype.set_dictionary=function(a,b,c){h(a,b,this.window,0,c);this.read=this.write=c};i.prototype.sync_point=function(){return 1==this.mode};i.prototype.inflate_flush=function(a,b){var c,e,f;e=a.next_out_index;f=this.read;c=(f<=this.write?this.write:this.end)-f;if(c>a.avail_out)c=a.avail_out;0!=c&&-5==b&&(b=0);a.avail_out-=c;a.total_out+=c;if(null!=this.checkfn)this.check=d(this.check,this.window,f,c),a.adler=this.check;
h(this.window,f,a.next_out,e,c);e+=c;f+=c;if(f==this.end){f=0;if(this.write==this.end)this.write=0;c=this.write-f;if(c>a.avail_out)c=a.avail_out;0!=c&&-5==b&&(b=0);a.avail_out-=c;a.total_out+=c;if(null!=this.checkfn)this.check=d(this.check,this.window,f,c),a.adler=this.check;h(this.window,f,a.next_out,e,c);e+=c;f+=c}a.next_out_index=e;this.read=f;return b};f.prototype.init=function(a,b,c,d,e,f){this.mode=0;this.lbits=a;this.dbits=b;this.ltree=c;this.ltree_index=d;this.dtree=e;this.dtree_index=f;this.tree=
null};f.prototype.proc=function(b,c,d){var e,f,g=0,h=0,i=0,j,k,l,i=c.next_in_index;j=c.avail_in;g=b.bitb;h=b.bitk;k=b.write;for(l=k<b.read?b.read-k-1:b.end-k;;)switch(this.mode){case 0:if(258<=l&&10<=j&&(b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,d=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,b,c),i=c.next_in_index,j=c.avail_in,g=b.bitb,h=b.bitk,k=b.write,l=k<b.read?b.read-k-1:b.end-k,0!=d)){this.mode=
1==d?7:9;break}this.need=this.lbits;this.tree=this.ltree;this.tree_index=this.ltree_index;this.mode=1;case 1:for(e=this.need;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}e=3*(this.tree_index+(g&a[e]));g>>>=this.tree[e+1];h-=this.tree[e+1];f=this.tree[e];if(0==f){this.lit=this.tree[e+2];this.mode=6;break}if(0!=(f&16)){this.get=f&15;this.len=this.tree[e+2];this.mode=2;break}if(0==
(f&64)){this.need=f;this.tree_index=e/3+this.tree[e+2];break}if(0!=(f&32)){this.mode=7;break}this.mode=9;c.msg="invalid literal/length code";d=-3;b.bitb=g;b.bitk=h;c.avail_in=j;c.total_in+=i-c.next_in_index;c.next_in_index=i;b.write=k;return b.inflate_flush(c,d);case 2:for(e=this.get;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}this.len+=g&a[e];g>>=e;h-=e;this.need=this.dbits;
this.tree=this.dtree;this.tree_index=this.dtree_index;this.mode=3;case 3:for(e=this.need;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}e=3*(this.tree_index+(g&a[e]));g>>=this.tree[e+1];h-=this.tree[e+1];f=this.tree[e];if(0!=(f&16)){this.get=f&15;this.dist=this.tree[e+2];this.mode=4;break}if(0==(f&64)){this.need=f;this.tree_index=e/3+this.tree[e+2];break}this.mode=9;c.msg=
"invalid distance code";d=-3;b.bitb=g;b.bitk=h;c.avail_in=j;c.total_in+=i-c.next_in_index;c.next_in_index=i;b.write=k;return b.inflate_flush(c,d);case 4:for(e=this.get;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}this.dist+=g&a[e];g>>=e;h-=e;this.mode=5;case 5:for(e=k-this.dist;0>e;)e+=b.end;for(;0!=this.len;){if(0==l&&(k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:
b.end-k),0==l&&(b.write=k,d=b.inflate_flush(c,d),k=b.write,l=k<b.read?b.read-k-1:b.end-k,k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l)))return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);b.window[k++]=b.window[e++];l--;e==b.end&&(e=0);this.len--}this.mode=0;break;case 6:if(0==l&&(k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l&&(b.write=k,d=b.inflate_flush(c,d),k=b.write,l=k<b.read?b.read-k-1:b.end-k,
k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l)))return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);d=0;b.window[k++]=this.lit;l--;this.mode=0;break;case 7:7<h&&(h-=8,j++,i--);b.write=k;d=b.inflate_flush(c,d);k=b.write;if(b.read!=b.write)return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);this.mode=8;case 8:return d=1,b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=
i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);case 9:return d=-3,b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);default:return d=-2,b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d)}};f.prototype.free=function(){};f.prototype.inflate_fast=function(b,c,d,e,f,g,i,j){var k,l,m,n,o,p,q,r,s,u,t,G;p=j.next_in_index;q=j.avail_in;n=i.bitb;o=i.bitk;r=i.write;s=r<i.read?
i.read-r-1:i.end-r;b=a[b];u=a[c];do{for(;20>o;)q--,n|=(j.next_in[p++]&255)<<o,o+=8;k=n&b;l=d;m=e;G=3*(m+k);if(0==(c=l[G]))n>>=l[G+1],o-=l[G+1],i.window[r++]=l[G+2],s--;else{do{n>>=l[G+1];o-=l[G+1];if(0!=(c&16)){c&=15;t=l[G+2]+(n&a[c]);n>>=c;for(o-=c;15>o;)q--,n|=(j.next_in[p++]&255)<<o,o+=8;k=n&u;l=f;m=g;G=3*(m+k);c=l[G];do if(n>>=l[G+1],o-=l[G+1],0!=(c&16)){for(c&=15;o<c;)q--,n|=(j.next_in[p++]&255)<<o,o+=8;k=l[G+2]+(n&a[c]);n>>=c;o-=c;s-=t;if(r>=k)k=r-k,i.window[r++]=i.window[k++],i.window[r++]=
i.window[k++],t-=2;else{k=r-k;do k+=i.end;while(0>k);c=i.end-k;if(t>c){t-=c;if(0<r-k&&c>r-k){do i.window[r++]=i.window[k++];while(0!=--c)}else h(i.window,k,i.window,r,c),r+=c;k=0}}do i.window[r++]=i.window[k++];while(0!=--t);break}else if(0==(c&64))k+=l[G+2],k+=n&a[c],G=3*(m+k),c=l[G];else return j.msg="invalid distance code",t=j.avail_in-q,t=o>>3<t?o>>3:t,q+=t,p-=t,o-=t<<3,i.bitb=n,i.bitk=o,j.avail_in=q,j.total_in+=p-j.next_in_index,j.next_in_index=p,i.write=r,-3;while(1);break}if(0==(c&64)){if(k+=
l[G+2],k+=n&a[c],G=3*(m+k),0==(c=l[G])){n>>=l[G+1];o-=l[G+1];i.window[r++]=l[G+2];s--;break}}else{if(0!=(c&32))return t=j.avail_in-q,t=o>>3<t?o>>3:t,q+=t,p-=t,o-=t<<3,i.bitb=n,i.bitk=o,j.avail_in=q,j.total_in+=p-j.next_in_index,j.next_in_index=p,i.write=r,1;j.msg="invalid literal/length code";t=j.avail_in-q;t=o>>3<t?o>>3:t;q+=t;p-=t;o-=t<<3;i.bitb=n;i.bitk=o;j.avail_in=q;j.total_in+=p-j.next_in_index;j.next_in_index=p;i.write=r;return-3}}while(1)}}while(258<=s&&10<=q);t=j.avail_in-q;t=o>>3<t?o>>3:
t;p-=t;i.bitb=n;i.bitk=o-(t<<3);j.avail_in=q+t;j.total_in+=p-j.next_in_index;j.next_in_index=p;i.write=r;return 0};e.prototype.huft_build=function(a,b,d,e,f,g,i,j,k,l,n){var m,o,p,r,q,s,t,u,G;s=0;o=d;do this.c[a[b+s]]++,s++,o--;while(0!=o);if(this.c[0]==d)return i[0]=-1,j[0]=0;q=j[0];for(p=1;15>=p&&!(0!=this.c[p]);p++);r=p;q<p&&(q=p);for(o=15;0!=o&&!(0!=this.c[o]);o--);l=o;q>o&&(q=o);j[0]=q;for(j=1<<p;p<o;p++,j<<=1)if(0>(j-=this.c[p]))return-3;if(0>(j-=this.c[o]))return-3;this.c[o]+=j;this.x[1]=p=
0;s=1;for(t=2;0!=--o;)this.x[t]=p+=this.c[s],t++,s++;s=o=0;do{if(0!=(p=a[b+s]))this.v[this.x[p]++]=o;s++}while(++o<d);d=this.x[l];s=this.x[0]=o=0;b=-1;u=-q;for(G=t=this.u[0]=0;r<=l;r++)for(a=this.c[r];0!=a--;){for(;r>u+q;){b++;u+=q;G=l-u;G=G>q?q:G;if((m=1<<(p=r-u))>a+1)if(m-=a+1,t=r,p<G)for(;++p<G&&!((m<<=1)<=this.c[++t]);)m-=this.c[t];G=1<<p;if(this.hn[0]+G>c)return-3;this.u[b]=t=this.hn[0];this.hn[0]+=G;0!=b?(this.x[b]=o,this.r[0]=p,this.r[1]=q,p=o>>>u-q,this.r[2]=t-this.u[b-1]-p,h(this.r,0,k,3*
(this.u[b-1]+p),3)):i[0]=t}this.r[1]=r-u;s>=d?this.r[0]=192:n[s]<e?(this.r[0]=256>this.v[s]?0:96,this.r[2]=this.v[s++]):(this.r[0]=g[this.v[s]-e]+16+64,this.r[2]=f[this.v[s++]-e]);m=1<<r-u;for(p=o>>>u;p<G;p+=m)h(this.r,0,k,3*(t+p),3);for(p=1<<r-1;0!=(o&p);p>>>=1)o^=p;o^=p;for(p=(1<<u)-1;(o&p)!=this.x[b];)b--,u-=q,p=(1<<u)-1}return 0!=j&&1!=l?-5:0};e.prototype.inflate_trees_bits=function(a,b,c,d,e){this.initWorkArea(19);this.hn[0]=0;a=this.huft_build(a,0,19,19,null,null,c,b,d,this.hn,this.v);if(-3==
a)e.msg="oversubscribed dynamic bit lengths tree";else if(-5==a||0==b[0])e.msg="incomplete dynamic bit lengths tree",a=-3;return a};e.prototype.inflate_trees_dynamic=function(a,b,c,d,e,f,g,h,i){this.initWorkArea(288);this.hn[0]=0;f=this.huft_build(c,0,a,257,o,l,f,d,h,this.hn,this.v);if(0!=f||0==d[0]){if(-3==f)i.msg="oversubscribed literal/length tree";else if(-4!=f)i.msg="incomplete literal/length tree",f=-3;return f}this.initWorkArea(288);f=this.huft_build(c,a,b,0,m,r,g,e,h,this.hn,this.v);if(0!=
f||0==e[0]&&257<a){if(-3==f)i.msg="oversubscribed distance tree";else if(-5==f)i.msg="incomplete distance tree",f=-3;else if(-4!=f)i.msg="empty distance tree with lengths",f=-3;return f}return 0};e.prototype.initWorkArea=function(a){var b;if(null==this.hn)this.hn=new Int32Array(1),this.v=new Int32Array(a),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16);if(this.v.length<a)this.v=new Int32Array(a);for(b=0;b<a;b++)this.v[b]=0;for(b=0;16>b;b++)this.c[b]=
0;for(b=0;3>b;b++)this.r[b]=0;h(this.c,0,this.u,0,15);h(this.c,0,this.x,0,16)};var s=65521,t=5552;return function(a,c,d,e){a=c?new Uint8Array(a,c,d):new Uint8Array(a);d=new j;d.inflateInit(15,!0);d.next_in=a;d.next_in_index=0;d.avail_in=a.length;for(var a=[],f=0;;){var g=new Uint8Array(32E3);d.next_out=g;d.next_out_index=0;d.avail_out=g.length;var i=d.inflate(0);if(0!=i&&1!=i)throw a=d.msg?"object"==typeof d.msg?d.msg:"string"==typeof d.msg?Error(d.msg):Error('Unknown error in inflate: msg="'+d.msg+
'", status="'+b[i]||i+'"'):Error('Inflate error, status="'+b[i]||i+'")'),a.statusCode=i,a.statusString=b[i],a;if(0!=d.avail_out){var k=new Uint8Array(g.length-d.avail_out);h(g,0,k,0,g.length-d.avail_out);g=k}a.push(g);f+=g.length;if(1==i)break}e&&(e[0]=(c||0)+d.next_in_index);if(1==a.length)return a[0].buffer;c=new Uint8Array(f);for(d=e=0;d<a.length;++d)i=a[d],h(i,0,c,e,i.length),e+=i.length;return c.buffer}})},"dgrid/TouchScroll":function(){define("dgrid/TouchScroll","dojo/_base/declare,dojo/on,./util/touch,./util/has-css3,put-selector/put,xstyle/css!./css/TouchScroll.css".split(","),
function(h,j,g,i,f){function e(a,b,c){var d=a.touchNode,e=m[a.id],f,g,h;if("object"!==typeof b)h=b,b=c,c=g=!0;else{c="x"in b;g="y"in b;if(!c||!g)f=a.getScrollPosition();h=c?b.x:f.x;b=g?b.y:f.y}d.style[y]=D+-h+"px,"+-b+"px"+F;e&&c&&a._scrollbarXNode&&(a._scrollbarXNode.style[y]=D+h*e.parentWidth/e.scrollWidth+"px,0"+F);e&&g&&a._scrollbarYNode&&(a._scrollbarYNode.style[y]=D+"0,"+b*e.parentHeight/e.scrollHeight+"px"+F);j.emit(a.touchNode.parentNode,"scroll",{scrollLeft:h,scrollTop:b})}function d(a){return m[a.id]?
t.exec(window.getComputedStyle(a.touchNode)[y]):s.exec(a.touchNode.style[y])}function c(a){var b=this.widget,b=[this.node,b._scrollbarXNode,b._scrollbarYNode],c=b.length;if(this.timer)clearTimeout(this.timer),this.timer=null;for(this.transitionHandler&&this.transitionHandler.remove();c--;)b[c]&&(b[c].style[A+"Duration"]="0");(!a||!a.preserveScrollbars)&&f(this.node.parentNode,".touchscroll-fadeout");delete this.resetEffects}function b(a){var b=a.widget,c=b.touchNode,e=b.id,f=0,h=0,i;if(g.countCurrentTouches(a,
c)===b.touchesToScroll){if(i=d(b))f=+i[1],h=+i[2];if(i=m[e])i.resetEffects&&i.resetEffects({preserveScrollbars:!0}),c.style[y]=D+f+"px,"+h+"px"+F,r[e]=i;a=a.targetTouches[0];i=m[e]={widget:b,node:c,startX:f-a.pageX,startY:h-a.pageY,lastX:f,lastY:h,pageX:a.pageX,pageY:a.pageY,tickFunc:function(){var a=m[e],b,c;if(a)(b=s.exec(a.node.style[y]))?(c=+b[1],b=+b[2],a.velX=c-a.lastX,a.velY=b-a.lastY,a.lastX=c,a.lastY=b):a.lastX=a.lastY=0,a.timer=setTimeout(a.tickFunc,o)}};i.timer=setTimeout(i.tickFunc,o)}}
function a(a){var b=a.widget,c=b.id,d=b.touchesToScroll,h=m[c],i,j;if(!h||(i=g.countCurrentTouches(a,b.touchNode))!==d)i>d&&b.cancelTouchScroll();else{i=a.targetTouches;d=i[0];if(!h.scrollbarsShown&&(r[c]||Math.abs(d.pageX-h.pageX)>b.scrollThreshold||Math.abs(d.pageY-h.pageY)>b.scrollThreshold)){var c=b.touchNode,k=c.parentNode,l=k.offsetWidth-u,n=k.offsetHeight-u,o=h.scrollWidth=c.scrollWidth,p=h.scrollHeight=c.scrollHeight,q=h.parentWidth=k.offsetWidth,s=h.parentHeight=k.offsetHeight;o>q?(b._scrollbarXNode||
(j=f(k,"div.touchscroll-x")),j=b._scrollbarXNode=b._scrollbarXNode||f(j,"div.touchscroll-bar"),j.style.width=l*l/o+"px",j.style.left=c.offsetLeft+"px",f(k,".touchscroll-scrollable-x"),h.scrollableX=!0):f(k,"!touchscroll-scrollable-x");p>s?(b._scrollbarYNode||(j=f(k,"div.touchscroll-y")),j=b._scrollbarYNode=b._scrollbarYNode||f(j,"div.touchscroll-bar"),j.style.height=n*n/p+"px",j.style.top=c.offsetTop+"px",f(k,".touchscroll-scrollable-y"),h.scrollableY=!0):f(k,"!touchscroll-scrollable-y");f(k,"!touchscroll-fadeout");
h.scrollbarsShown=!0;for(j=i.length;j--;)i[j].touchScrolled=!0}a.preventDefault();if(h.scrollbarsShown&&(h.scrollableX||h.scrollableY))a=h.scrollableX?h.startX+d.pageX:0,d=h.scrollableY?h.startY+d.pageY:0,j=h.scrollableX?-(h.scrollWidth-h.parentWidth):0,h=h.scrollableY?-(h.scrollHeight-h.parentHeight):0,0<a?a/=2:a<j&&(a=j-(j-a)/2),0<d?d/=2:d<h&&(d=h-(h-d)/2),e(b,-a,-d)}}function k(a){var b=a.widget,c=b.id;m[c]&&g.countCurrentTouches(a,b.touchNode)==b.touchesToScroll-1&&q(c)}function n(a,b,c){function d(){delete e.transitionHandler;
e.resetEffects();delete m[a]}var e=m[a],f=e.widget,g=e.node,h=e.scrollableX?Math.max(Math.min(0,b),-(e.scrollWidth-e.parentWidth)):b,i=e.scrollableY?Math.max(Math.min(0,c),-(e.scrollHeight-e.parentHeight)):c;delete e.timer;if(h!=b||i!=c){e.transitionHandler=j.once(g,w,d);g.style[A+"Duration"]=f.bounceDuration+"ms";g.style[y]=D+h+"px,"+i+"px"+F;if(h!=b&&e.scrollableX)g=e.widget._scrollbarXNode,g.style[A+"Duration"]=f.bounceDuration+"ms",g.style[y]=b>h?D+"0,0"+F:D+(g.parentNode.offsetWidth-g.offsetWidth)+
"px,0"+F;if(i!=c&&e.scrollableY)g=e.widget._scrollbarYNode,g.style[A+"Duration"]=f.bounceDuration+"ms",g.style[y]=c>i?D+"0,0"+F:D+"0,"+(g.parentNode.offsetHeight-g.offsetHeight)+"px"+F}else d()}function q(a){var b=m[a],d=r[a],f,g;delete r[a];b.timer&&clearTimeout(b.timer);b.resetEffects=c;(f=s.exec(b.node.style[y]))?(g=+f[1],f=+f[2]):g=f=0;if(!b.velX&&!b.velY||(0<=g||g<=-(b.scrollWidth-b.parentWidth))&&(0<=f||f<=-(b.scrollHeight-b.parentHeight)))n(a,g,f);else{if(d&&(d.velX||d.velY)&&(0>=b.velX&&0>=
d.velX||0<=b.velX&&0<=d.velX)&&(0>=b.velY&&0>=d.velY||0<=b.velY&&0<=d.velY))b.velX=1.15*(b.velX+d.velX),b.velY=1.15*(b.velY+d.velY);b.lastX=g;b.lastY=f;b.calcFunc=function(){var b=m[a],c,d,f,g,h,i;if(b)if(c=b.widget,h=c.glideDecel(b.velX),i=c.glideDecel(b.velY),Math.abs(h)>=p||Math.abs(i)>=p){f=b.lastX+h;g=b.lastY+i;if(0<f||f<-(b.scrollWidth-b.parentWidth))for(d=6;d--;)h=c.glideDecel(h);if(0<g||g<-(b.scrollHeight-b.parentHeight))for(d=6;d--;)i=c.glideDecel(i);e(c,-f,-g);b.lastX=f;b.lastY=g;b.velX=
h;b.velY=i;b.timer=setTimeout(b.calcFunc,l)}else n(a,b.lastX,b.lastY)};b.timer=setTimeout(b.calcFunc,l)}}var o=50,l=30,m={},r={},p=1,u=8,s=/^translate(?:3d)?\((-?\d+)(?:\.\d*)?(?:px)?, (-?\d+)/,t=/^matrix\(1, 0, 0, 1, (-?\d+)(?:\.\d*)?(?:px)?, (-?\d+)/,v=i("css-transitions"),w=i("transitionend"),x=i("css-transforms"),i=i("css-transforms3d"),E,A,y,D,F;i?(D="translate3d(",F=",0)"):x&&(D="translate(",F=")");if(!v||!D)return console.warn("CSS3 features unavailable for touch scroll effects."),function(){};
y=i||x;y=!0===y?"transform":y+"Transform";A=!0===v?"transition":v+"Transition";E=!0===x?"":"-"+x.toLowerCase()+"-";return h(null,{touchesToScroll:1,touchNode:null,scrollThreshold:10,bounceDuration:300,postCreate:function(){this._initTouch();this.inherited(arguments)},_initTouch:function(){function c(){f.cancelTouchScroll()}function d(a){return function(b){b.widget=f;b.cancelTouchScroll=c;a.call(this,b)}}var e=this.touchNode=this.touchNode||this.containerNode,f=this,g;!e||!e.parentNode?console.warn("TouchScroll requires a nested node upon which to operate."):
(g=e.parentNode,g.style.overflow="hidden",e.style[A+"Property"]=E+"transform",e.style[A+"TimingFunction"]="cubic-bezier(0.33, 0.66, 0.66, 1)",this._touchScrollListeners=[j(g,"touchstart",d(b)),j(g,"touchmove",d(a)),j(g,"touchend,touchcancel",d(k))])},destroy:function(){for(var a=this._touchScrollListeners.length;a--;)this._touchScrollListeners[a].remove();delete m[this.id];this.inherited(arguments)},scrollTo:function(a){var b=m[this.id],c=this.touchNode,d=c.parentNode;!a.preserveMomentum&&b&&b.resetEffects&&
b.resetEffects();if(a.x)a.x=Math.max(0,Math.min(a.x,c.scrollWidth-d.offsetWidth));if(a.y)a.y=Math.max(0,Math.min(a.y,c.scrollHeight-d.offsetHeight));e(this,a)},getScrollPosition:function(){var a=d(this);return a?{x:-a[1],y:-a[2]}:{x:0,y:0}},cancelTouchScroll:function(){var a=m[this.id];a&&(a.resetEffects?a.resetEffects():(a.timer&&clearTimeout(a.timer),f(a.node.parentNode,".touchscroll-fadeout")),delete m[this.id])},glideDecel:function(a){return 0.9*a}})})},"dgrid/util/touch":function(){define("dgrid/util/touch",
["dojo/on","dojo/query"],function(h,j){function g(f,e,d,c){if(!(1<d.targetTouches.length)){var b=d.changedTouches[0],a=b.screenX,g=b.screenY;c&&d.preventDefault();var j=h(f,"touchend",function(b){var d=b.changedTouches[0];b.targetTouches.length||(Math.abs(d.screenX-a)<i.tapRadius&&Math.abs(d.screenY-g)<i.tapRadius&&(c&&b.preventDefault(),e.call(this,b)),j.remove())})}}var i={tapRadius:10,dbltapTime:250,selector:function(f,e,d){return function(c,b){var a=e.bubble;a?e=a:!1!==d&&(d=!0);return h(c,e,
function(a){var e=a.target;if(3==e.nodeType)e=e.parentNode;for(;!j.matches(e,f,c);)if(e==c||!d||!(e=e.parentNode))return;return b.call(e,a)})}},countCurrentTouches:function(f,e){var d,c,b;for(d=0,c=0;b=f.touches[d];++d)e.contains(b.target)&&++c;return c},tap:function(f,e){return h(f,"touchstart",function(d){g(f,e,d)})}};i.dbltap=function(f,e){var d,c;return h(f,"touchstart",function(b){d?g(f,function(a){if(d){var b=a.changedTouches[0];Math.abs(b.screenX-d.screenX)<i.tapRadius&&Math.abs(b.screenY-
d.screenY)<i.tapRadius&&(c&&clearTimeout(c),d=c=null,e.call(this,a))}},b,!0):g(f,function(a){d=a.changedTouches[0];c=setTimeout(function(){d=c=null},i.dbltapTime)},b)})};return i})},"dgrid/util/has-css3":function(){define("dgrid/util/has-css3",["dojo/has","xstyle/css!../css/has-transforms3d.css"],function(h){var j=["ms","O","Moz","Webkit"];h.add("css-transitions",function(g,h,f){g=f.style;if(void 0!==g.transitionProperty)return!0;for(h=j.length;h--;)if(void 0!==g[j[h]+"TransitionProperty"])return j[h];
return!1});h.add("transitionend",function(){var g=h("css-transitions");return!g?!1:!0===g?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[g]});h.add("css-transforms",function(g,h,f){g=f.style;if(void 0!==g.transformProperty)return!0;for(h=j.length;h--;)if(void 0!==g[j[h]+"Transform"])return j[h];return!1});h.add("css-transforms3d",function(g,h,f){f.className="has-csstransforms3d";document.body.appendChild(f);g=f.offsetLeft;if(9===g)return!0;
if(9<g)return(f=j[g-10])||!1;document.body.removeChild(f);f.className="";return!1});return h})},"*now":function(h){h(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});(function(){var h=this.require;h({cache:{}});!h.async&&h(["dojo"]);h.boot&&h.apply(null,h.boot)})();
